!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var a="function"==typeof require&&require;if(!u&&a)return a(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({"./client/index.js":[function(e){var t=window.jQuery||window.$,n=e("lodash"),r=e("async"),o=e("backbone"),s=e("handlebars"),i=e("moment"),u=e("./app"),a=function(){};o.$=t;var l={remote:window.location.origin+"/_api",routePrefix:""},c=window.Bonnet=function(t){var o=n.extend({},l,t),s=window.bonnet=new u(o);return s.account=e("./account")(s,o),s.store=e("./store")(s,o),s.task=e("./task")(s,o),s.start=function(e){e=e||a,r.applyEachSeries([r.apply(s.account.init),r.apply(s.store.init)],function(t){return t?console.error(t):(u.prototype.start.call(s),void e())})},s};c.View=e("./view"),c.Model=e("./model"),c.Collection=e("./collection"),c.$=t,c._=window._=n,c.async=window.async=r,c.Backbone=window.Backbone=o,c.Handlebars=window.Handlebars=s,c.moment=window.moment=i},{"./account":"/Users/lupo/work/lupomontero/bonnet/client/account.js","./app":"/Users/lupo/work/lupomontero/bonnet/client/app.js","./collection":"/Users/lupo/work/lupomontero/bonnet/client/collection.js","./model":"/Users/lupo/work/lupomontero/bonnet/client/model.js","./store":"/Users/lupo/work/lupomontero/bonnet/client/store.js","./task":"/Users/lupo/work/lupomontero/bonnet/client/task.js","./view":"/Users/lupo/work/lupomontero/bonnet/client/view.js",async:"/Users/lupo/work/lupomontero/bonnet/node_modules/async/lib/async.js",backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js",handlebars:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/lib/index.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js",moment:"/Users/lupo/work/lupomontero/bonnet/node_modules/moment/moment.js"}],"/Users/lupo/work/lupomontero/bonnet/client/account.js":[function(e,t){function n(e){return"/_users/"+encodeURIComponent("org.couchdb.user:"+e)}var r=e("events").EventEmitter,o=e("../lib/couch")("/_api"),s=e("../lib/uid"),i=function(){};t.exports=function(e){var t=new r,u=!1;return t.bonnetId=function(){return t.session.userCtx.roles.reduce(function(e,t){var n=/^bonnet:write:user\/([a-z0-9]+)$/.exec(t);return n&&n[1]?n[1]:e},null)},t.signUp=function(e,t){var r=s(),i={name:e,password:t,roles:[],type:"user",bonnetId:r,database:"user/"+r};return o.put(n(e),i)},t.signIn=function(e,n){return o.post("/_session",{name:e,password:n}).then(function(){return t.init()})},t.signOut=function(){return o.del("/_session")},t.changePassword=function(){},t.changeUsername=function(){},t.resetPassword=function(){},t.destroy=function(){var t=(e.account.session||{}).userCtx||{},r=n(t.name);console.log(r),o.get(r,function(e,t){console.log(e,t)})},t.isSignedIn=function(){var e=(t.session||{}).userCtx||{};return"string"==typeof e.name&&e.name.length>0},t.init=function(e){e=e||i;var n=t.isSignedIn();return o.get("/_session").then(function(r){t.session=r;var o=t.isSignedIn();u?!n&&o?t.emit("signin"):n&&!o&&t.emit("signout"):(u=!0,t.emit("init")),e()},function(t){console.error(t),e(t)})},t}},{"../lib/couch":"/Users/lupo/work/lupomontero/bonnet/lib/couch.js","../lib/uid":"/Users/lupo/work/lupomontero/bonnet/lib/uid.js",events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js"}],"/Users/lupo/work/lupomontero/bonnet/client/app-view.js":[function(e,t){var n=e("lodash"),r=e("backbone");t.exports=r.View.extend({el:"body",regions:{},events:{"click a":"overrideLink"},initialize:function(e){e=e||{},r.View.prototype.initialize.call(this,e),this.options=e,this.addRegion("main",{view:null,prepend:!0}),this.addRegion("notifications",{view:null}),$("html").removeClass("no-js")},addRegion:function(e,t){var r=n.extend({id:e},t||{});if(!r.$el){var o=t.tagName||"div";r.$el=$("<"+o+' id="'+r.id+'">'),t.className&&r.$el.addClass(t.className)}if(r.$el.attr("data-app-region",e),"main"===e)this.$el.prepend(r.$el);else{var s=r.prepend?"before":"after";this.regions.main.$el[s](r.$el)}this.regions[e]=r,r.view&&r.view.$el&&this.setRegionView(e,r.view)},setRegionView:function(e,t){var n=this,r=n.regions[e],o=r.$el[0];if(!r)throw new Error("Unknown region: "+e);if(!t)throw new Error("No view passed to AppView.setRegionView()");t.$el&&!$.contains(o,t.$el)&&r.$el.html(t.$el),r.view=t,n.trigger("region:view",r)},overrideLink:function(e){var t=this.model,r=$(e.currentTarget).attr("href"),o=r.substr(1);if("#"!==r.charAt(0)){var s=n.find(n.keys(t.routes),function(e){return t._routeToRegExp(e).test(o)});"string"==typeof s&&(e.preventDefault(),t.navigate(o,{trigger:!0}))}}})},{backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js"}],"/Users/lupo/work/lupomontero/bonnet/client/app.js":[function(e,t){var n=e("lodash"),r=e("backbone"),o=e("./app-view");t.exports=r.Router.extend({initialize:function(e){var t=this;this.options=e,r.Router.prototype.initialize.call(t,e),t.view=new o({model:t}),t.routes||(t.routes={})},route:function(e,t,n){var o=this.options.routePrefix||"";return this.routes[e]=n,r.Router.prototype.route.call(this,o+e,t,n)},navigate:function(e,t){var n=this.options.routePrefix||"";return r.Router.prototype.navigate.call(this,n+e,t)},start:function(){r.history.start({pushState:!0})},addRegion:function(e,t){this.view.addRegion(e,t)},setMainView:function(e){var t=(this.view.regions.main||{}).view;t&&t.unsubscribeFromGlobalEvents&&t.unsubscribeFromGlobalEvents(),this.view.setRegionView("main",e),e.subscribeToGlobalEvents()},showView:function(e,t){var r=new e(n.extend({app:this},t));return this.setMainView(r),r},showTemplate:function(e){var t=this,n=tetrapod.View.extend({templateName:e}),r=new n({app:t});t.setMainView(r),r.render()},requireSignIn:function(e){var t=this;return function(){return t.account.isSignedIn()?void e.apply(this,Array.prototype.slice.call(arguments,0)):t.navigate("signin",{trigger:!0})}},requireSignOut:function(e){var t=this;return function(){return t.account.isSignedIn()?t.navigate("dashboard",{trigger:!0}):void e.apply(this,Array.prototype.slice.call(arguments,0))}}})},{"./app-view":"/Users/lupo/work/lupomontero/bonnet/client/app-view.js",backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js"}],"/Users/lupo/work/lupomontero/bonnet/client/collection.js":[function(e,t){var n=e("backbone"),r=e("./model"),o=function(){};t.exports=n.Collection.extend({model:r,comparator:function(e){return-1*e.get("createdAt")},toViewContext:function(){return{models:this.map(function(e){return e.toViewContext?e.toViewContext():e})}},sync:function(e,t,n){var r=n.success||o,s=n.error||o,i=(new t.model).get("type");"read"===e&&bonnet.store.findAll(i).then(function(e){r(e)},function(e){s(null,null,e)})}})},{"./model":"/Users/lupo/work/lupomontero/bonnet/client/model.js",backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js"}],"/Users/lupo/work/lupomontero/bonnet/client/model.js":[function(e,t){function n(e){var t=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/;return"string"==typeof e&&t.test(e)}var r=(e("assert"),e("lodash")),o=e("backbone"),s=e("moment"),i=function(){};t.exports=o.Model.extend({toViewContext:function(){return r.extend({},this.attributes)},parse:function(e){return r.reduce(e,function(e,t,r){return e[r]=n(t)?s(t).toDate():t,e},{})},toJSON:function(){return this.attributes},sync:function(e,t,n){var r=n.success||i,o=n.error||i,s=t.get("type");switch(e){case"create":bonnet.store.add(s,t.toJSON()).then(function(e){r(e)},function(e){o(null,null,e)});break;case"read":break;case"update":break;case"delete":bonnet.store.remove(s,t.id).then(function(){r()},function(e){o(null,null,e)});break;default:throw new Error("Unsupported model sync method")}}})},{assert:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/assert/assert.js",backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js",moment:"/Users/lupo/work/lupomontero/bonnet/node_modules/moment/moment.js"}],"/Users/lupo/work/lupomontero/bonnet/client/store.js":[function(e,t){function n(e){i.equal(typeof e,"string","Model type must be a string")}function r(e){var t=e._id.split("/");return c.extend({id:t[1],type:t[0]},c.omit(e,["_id"]))}function o(e){return c.extend({_id:e.type+"/"+e.id},c.omit(e,["id"]))}function s(e){return 0!==e._id.indexOf("_design")}var i=e("assert"),u=e("events").EventEmitter,a=e("promise"),l=e("pouchdb"),c=e("lodash"),d=e("async"),p=e("../lib/uid"),f=function(){};t.exports=function(e,t){function i(e,t){v.emit("sync",e,t),v.emit("sync:"+e,t)}function h(e){return e=e||f,v.remoteUrl?void v.remote.replicate.sync(v.local,{filter:s}).on("error",i.bind(null,"error")).on("denied",function(e){console.error("sync denied",e)}).on("paused",i.bind(null,"paused")).on("active",i.bind(null,"active")).on("change",i.bind(null,"change")).on("complete",function(t){v.lastSync=t.push.end_time,t.pull.end_time>v.lastSync&&(v.lastSync=t.pull.end_time),i("complete",t),e()}):e()}var m=e.account,v=new u;return v.find=function(e,t){return n(e),new a(function(n,o){v.local.get(e+"/"+t).then(function(e){n(r(e))},o)})},v.findAll=function(e){return n(e),new a(function(t,n){v.local.allDocs({include_docs:!0,startkey:e+"/",endkey:e+"0"}).then(function(e){t(e.rows.map(function(e){return r(e.doc)}))},n)})},v.add=function(e,t){n(e);var o={},s=c.reduce(t._attachments,function(e,t,n){return t instanceof File?o[n]=t:e[n]=t,e},{}),i=c.extend({},c.omit(t,["_attachments"]),{_id:e+"/"+p(),createdAt:new Date,type:e});return c.keys(s).length&&(i._attachments=s),new a(function(e,t){var n=v.local;n.put(i).then(function(s){i._rev=s.rev;var u=c.keys(o);return u.length?void d.eachSeries(u,function(e,t){var r=i._id,s=i._rev,u=o[e],a=u.type;n.putAttachment(r,e,s,u,a,function(e,n){return e?t(e):(i._rev=n.rev,void t())})},function(n){return n?t(n):void e(r(i))}):e(r(i))},t)})},v.update=function(e){n(e)},v.remove=function(e,t){return v.find(e,t).then(function(e){return v.local.put({_deleted:!0},o(e)._id,e._rev)})},v.removeAll=function(){},v.init=function(e){function n(){var t=v.local.changes({since:"now",live:!0,include_docs:!0});t.on("change",function(e){function t(e){v.emit(e,n,{local:!0}),v.emit(e+":"+o,n,{local:!0})}var n=r(e.doc),o=n.type;o&&(t(e.deleted||n._deleted?"remove":/^1-/.test(n._rev)?"add":"update"),t("change"),h())}),e()}e=e||f;var o=m.bonnetId()||"__bonnet_anon";v.local=new l(o,{auto_compaction:!0}),m.isSignedIn()?(v.remoteUrl=t.remote+"/"+encodeURIComponent("user/"+o),v.remote=new l(v.remoteUrl),h(n)):n()},["signin","signout"].forEach(function(e){m.on(e,v.init.bind(v))}),v}},{"../lib/uid":"/Users/lupo/work/lupomontero/bonnet/lib/uid.js",assert:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/assert/assert.js",async:"/Users/lupo/work/lupomontero/bonnet/node_modules/async/lib/async.js",events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js",pouchdb:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/index.js",promise:"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/index.js"}],"/Users/lupo/work/lupomontero/bonnet/client/task.js":[function(e,t){var n=e("events").EventEmitter;t.exports=function(){var e=new n;return e.start=function(){},e.abort=function(){},e.restart=function(){},e.abortAll=function(){},e.restartAll=function(){},e}},{events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js"}],"/Users/lupo/work/lupomontero/bonnet/client/view.js":[function(e,t){var n=e("lodash"),r=e("backbone"),o=e("handlebars"),s=e("moment");o.registerHelper("log",function(e){console.log(e)}),o.registerHelper("formatDate",function(e,t){return 2===arguments.length&&(t="lll"),new o.SafeString(s(e).format(t))}),o.registerHelper("fromNow",function(e){return new o.SafeString(s(e).fromNow())}),t.exports=r.View.extend({templatePath:"templates",templateName:null,template:null,locals:{},_isRendering:!1,_next:null,initialize:function(e){var t=this;e=e||{},r.View.prototype.initialize.call(t,e),t.options=e,t.render=n.debounce(t.render,100),t.locals=n.extend(t.locals,e.locals||{}),t.templateName&&setTimeout(function(){t.loadTemplate(t.templateName,function(e,n){t.template=n})},10)},render:function(e){var t=this;return t._next&&window.clearTimeout(t._next),!t.template||t._isRendering?(t._next=window.setTimeout(function(){t.render(e)},25),t):(e=e||t.model||{},n.isFunction(e.toViewContext)?e=e.toViewContext():e.attributes?e=e.attributes:n.isArray(e)&&(e={models:n.map(e,function(e){return e.toViewContext?e.toViewContext():e})}),t._isRendering=!0,t.$el.addClass("loading"),t._next=window.setTimeout(function(){t.$el.html($.trim(t.template(n.extend({},t.locals,e)))),t._isRendering=!1,t.$el.removeClass("loading"),t.trigger("render")},25),t)},partial:function(e,t,n){this.loadTemplate(e,function(e,r){return e?n(e):void n(null,r(t))})},loadTemplate:function(e,t){{var n=this,r=bonnet.templates||{};bonnet.options.routePrefix||""}return r.hasOwnProperty(e)?t(null,r[e]):void $.get(n.templatePath+"/"+e+".hbs").fail(function(){n.trigger("error",new Error("Error loading template ("+e+")"))}).done(function(n){r[e]=o.compile($.trim(n)),t(null,r[e])})},back:function(e){e.preventDefault(),e.stopPropagation(),window.history.back()},subscribeToGlobalEvents:function(){var e=this;n.each(e._getGlobalEventsHandlers(e.cid),function(e){e.src.on(e.name,e.fn),console.log("View subscribing to global event "+e.name)})},unsubscribeFromGlobalEvents:function(){n.each(this._getGlobalEventsHandlers(this.cid),function(e){e.src.off(e.name,e.fn),console.log("View unsubscribing from global event "+e.name)})},_getGlobalEventsHandlers:n.memoize(function(){var e=this,t=bonnet.account,r=bonnet.store,o=bonnet.task;return n.reduce(e.globalEvents,function(s,i,u){var a=u.split(" "),l=a[0],c=e[i],d={name:a[1]};return n.isFunction(c)?(d.fn=c.bind(e),"account"===l?(d.src=t,s.push(d)):"store"===l?(d.src=r,s.push(d)):"task"===l&&(d.src=o,s.push(d)),s):void 0},[])})})},{backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js",handlebars:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/lib/index.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js",moment:"/Users/lupo/work/lupomontero/bonnet/node_modules/moment/moment.js"}],"/Users/lupo/work/lupomontero/bonnet/lib/couch.js":[function(e,t){function n(e){function t(){var t=r.toArray(arguments),n=t.shift(),s=t.shift(),i="function"==typeof t[t.length-1]?t.pop():o;"/"!==s.charAt(0)&&(s="/"+s);var u={type:n,url:e.url+s,dataType:"json",error:function(e){var t=new Error(e.responseJSON.error);t.statusCode=e.status,t.reason=e.responseJSON.reason,i(t)},success:function(e){i(null,e)}};if(e.user&&e.pass&&(u.username=e.user,u.password=e.pass),["PUT","POST"].indexOf(n)>=0){var a=t.pop();a&&(u.data=JSON.stringify(a),u.contentType="application/json")}return t.length&&(u.url+=r.reduce(t.shift(),function(e,t,n){return e+=encodeURIComponent(n)+"="+encodeURIComponent(JSON.stringify(t))},"?")),$.ajax(u,i)}e.url;return{get:t.bind(null,"GET"),post:t.bind(null,"POST"),put:t.bind(null,"PUT"),del:t.bind(null,"DELETE")}}var r=e("lodash"),o=function(){};t.exports=function(e){"string"==typeof e&&(e={url:e});var t=n(e);return t.db=function(t){var o=n(r.extend({},e,{url:e.url+"/"+encodeURIComponent(t)}));return o.view=function(){},o},t.isAdminParty=function(e){t.get("/_users/_all_docs",function(t){t&&401===t.statusCode?e(null,!1):t?e(t):e(null,!0)})},t}},{lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js"}],"/Users/lupo/work/lupomontero/bonnet/lib/uid.js":[function(e,t){var n="0123456789abcdefghijklmnopqrstuvwxyz".split("");t.exports=function(e){var t="",r=n.length;void 0===e&&(e=7);for(var o=0;e>o;o++){var s=Math.random()*r,i=n[Math.floor(s)];t+=String(i).charAt(0)}return t}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/async/lib/async.js":[function(e,t){(function(e){!function(){function n(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(r,arguments)}}var r,o,s={};r=this,null!=r&&(o=r.async),s.noConflict=function(){return r.async=o,s};var i=Object.prototype.toString,u=Array.isArray||function(e){return"[object Array]"===i.call(e)},a=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},l=function(e,t){if(e.map)return e.map(t);var n=[];return a(e,function(e,r,o){n.push(t(e,r,o))}),n},c=function(e,t,n){return e.reduce?e.reduce(t,n):(a(e,function(e,r,o){n=t(n,e,r,o)}),n)},d=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};"undefined"!=typeof e&&e.nextTick?(s.nextTick=e.nextTick,s.setImmediate="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:s.nextTick):"function"==typeof setImmediate?(s.nextTick=function(e){setImmediate(e)},s.setImmediate=s.nextTick):(s.nextTick=function(e){setTimeout(e,0)},s.setImmediate=s.nextTick),s.each=function(e,t,r){function o(t){t?(r(t),r=function(){}):(s+=1,s>=e.length&&r())}if(r=r||function(){},!e.length)return r();var s=0;a(e,function(e){t(e,n(o))})},s.forEach=s.each,s.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0,o=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1,r>=e.length?n():o())})};o()},s.forEachSeries=s.eachSeries,s.eachLimit=function(e,t,n,r){var o=p(t);o.apply(null,[e,n,r])},s.forEachLimit=s.eachLimit;var p=function(e){return function(t,n,r){if(r=r||function(){},!t.length||0>=e)return r();var o=0,s=0,i=0;!function u(){if(o>=t.length)return r();for(;e>i&&s<t.length;)s+=1,i+=1,n(t[s-1],function(e){e?(r(e),r=function(){}):(o+=1,i-=1,o>=t.length?r():u())})}()}},f=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}},h=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[p(e)].concat(n))}},m=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}},v=function(e,t,n,r){if(t=l(t,function(e,t){return{index:t,value:e}}),r){var o=[];e(t,function(e,t){n(e.value,function(n,r){o[e.index]=r,t(n)})},function(e){r(e,o)})}else e(t,function(e,t){n(e.value,function(e){t(e)})})};s.map=f(v),s.mapSeries=m(v),s.mapLimit=function(e,t,n,r){return g(t)(e,n,r)};var g=function(e){return h(e,v)};s.reduce=function(e,t,n,r){s.eachSeries(e,function(e,r){n(t,e,function(e,n){t=n,r(e)})},function(e){r(e,t)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(e,t,n,r){var o=l(e,function(e){return e}).reverse();s.reduce(o,t,n,r)},s.foldr=s.reduceRight;var _=function(e,t,n,r){var o=[];t=l(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&o.push(e),t()})},function(){r(l(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.filter=f(_),s.filterSeries=m(_),s.select=s.filter,s.selectSeries=s.filterSeries;var b=function(e,t,n,r){var o=[];t=l(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||o.push(e),t()})},function(){r(l(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.reject=f(b),s.rejectSeries=m(b);var y=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(){r()})};s.detect=f(y),s.detectSeries=m(y),s.some=function(e,t,n){s.each(e,function(e,r){t(e,function(e){e&&(n(!0),n=function(){}),r()})},function(){n(!1)})},s.any=s.some,s.every=function(e,t,n){s.each(e,function(e,r){t(e,function(e){e||(n(!1),n=function(){}),r()})},function(){n(!0)})},s.all=s.every,s.sortBy=function(e,t,n){s.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);var r=function(e,t){var n=e.criteria,r=t.criteria;return r>n?-1:n>r?1:0};n(null,l(t.sort(r),function(e){return e.value}))})},s.auto=function(e,t){t=t||function(){};var n=d(e),r=n.length;if(!r)return t();var o={},i=[],l=function(e){i.unshift(e)},p=function(e){for(var t=0;t<i.length;t+=1)if(i[t]===e)return void i.splice(t,1)},f=function(){r--,a(i.slice(0),function(e){e()})};l(function(){if(!r){var e=t;t=function(){},e(null,o)}}),a(n,function(n){var r=u(e[n])?e[n]:[e[n]],i=function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),e){var i={};a(d(o),function(e){i[e]=o[e]}),i[n]=r,t(e,i),t=function(){}}else o[n]=r,s.setImmediate(f)},h=r.slice(0,Math.abs(r.length-1))||[],m=function(){return c(h,function(e,t){return e&&o.hasOwnProperty(t)},!0)&&!o.hasOwnProperty(n)};if(m())r[r.length-1](i,o);else{var v=function(){m()&&(p(v),r[r.length-1](i,o))};l(v)}})},s.retry=function(e,t,n){var r=5,o=[];"function"==typeof e&&(n=t,t=e,e=r),e=parseInt(e,10)||r;var i=function(r,i){for(var u=function(e,t){return function(n){e(function(e,r){n(!e||t,{err:e,result:r})},i)}};e;)o.push(u(t,!(e-=1)));s.series(o,function(e,t){t=t[t.length-1],(r||n)(t.err,t.result)})};return n?i():i},s.waterfall=function(e,t){if(t=t||function(){},!u(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();var r=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var o=Array.prototype.slice.call(arguments,1),i=e.next();o.push(i?r(i):t),s.setImmediate(function(){e.apply(null,o)})}}};r(s.iterator(e))()};var w=function(e,t,n){if(n=n||function(){},u(t))e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.each(d(t),function(e,n){t[e](function(t){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),r[e]=o,n(t)})},function(e){n(e,r)})}};s.parallel=function(e,t){w({map:s.map,each:s.each},e,t)},s.parallelLimit=function(e,t,n){w({map:g(t),each:p(t)},e,n)},s.series=function(e,t){if(t=t||function(){},u(e))s.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};s.eachSeries(d(e),function(t,r){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),n[t]=o,r(e)})},function(e){t(e,n)})}},s.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var k=function(e,t,n,r){var o=[];e(t,function(e,t){n(e,function(e,n){o=o.concat(n||[]),t(e)})},function(e){r(e,o)})};s.concat=f(k),s.concatSeries=m(k),s.whilst=function(e,t,n){e()?t(function(r){return r?n(r):void s.whilst(e,t,n)}):n()},s.doWhilst=function(e,t,n){e(function(r){if(r)return n(r);var o=Array.prototype.slice.call(arguments,1);t.apply(null,o)?s.doWhilst(e,t,n):n()})},s.until=function(e,t,n){e()?n():t(function(r){return r?n(r):void s.until(e,t,n)})},s.doUntil=function(e,t,n){e(function(r){if(r)return n(r);var o=Array.prototype.slice.call(arguments,1);t.apply(null,o)?n():s.doUntil(e,t,n)})},s.queue=function(e,t){function r(e,t,n,r){return e.started||(e.started=!0),u(t)||(t=[t]),0==t.length?s.setImmediate(function(){e.drain&&e.drain()}):void a(t,function(t){var o={data:t,callback:"function"==typeof r?r:null};n?e.tasks.unshift(o):e.tasks.push(o),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),s.setImmediate(e.process)})}void 0===t&&(t=1);var o=0,i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){r(i,e,!1,t)},kill:function(){i.drain=null,i.tasks=[]},unshift:function(e,t){r(i,e,!0,t)},process:function(){if(!i.paused&&o<i.concurrency&&i.tasks.length){var t=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),o+=1;var r=function(){o-=1,t.callback&&t.callback.apply(t,arguments),i.drain&&i.tasks.length+o===0&&i.drain(),i.process()},s=n(r);e(t.data,s)}},length:function(){return i.tasks.length},running:function(){return o},idle:function(){return i.tasks.length+o===0},pause:function(){i.paused!==!0&&(i.paused=!0,i.process())},resume:function(){i.paused!==!1&&(i.paused=!1,i.process())}};return i},s.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}function r(e,t,n){for(var r=-1,o=e.length-1;o>r;){var s=r+(o-r+1>>>1);n(t,e[s])>=0?r=s:o=s-1}return r}function o(e,t,o,i){return e.started||(e.started=!0),u(t)||(t=[t]),0==t.length?s.setImmediate(function(){e.drain&&e.drain()}):void a(t,function(t){var u={data:t,priority:o,callback:"function"==typeof i?i:null};e.tasks.splice(r(e.tasks,u,n)+1,0,u),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),s.setImmediate(e.process)})}var i=s.queue(e,t);return i.push=function(e,t,n){o(i,e,t,n)},delete i.unshift,i},s.cargo=function(e,t){var n=!1,r=[],o={tasks:r,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,n){u(e)||(e=[e]),a(e,function(e){r.push({data:e,callback:"function"==typeof n?n:null}),o.drained=!1,o.saturated&&r.length===t&&o.saturated()}),s.setImmediate(o.process)},process:function i(){if(!n){if(0===r.length)return o.drain&&!o.drained&&o.drain(),void(o.drained=!0);var s="number"==typeof t?r.splice(0,t):r.splice(0,r.length),u=l(s,function(e){return e.data});o.empty&&o.empty(),n=!0,e(u,function(){n=!1;var e=arguments;a(s,function(t){t.callback&&t.callback.apply(null,e)}),i()})}},length:function(){return r.length},running:function(){return n}};return o};var S=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&a(n,function(t){console[e](t)}))}]))}};s.log=S("log"),s.dir=S("dir"),s.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var o=function(){var o=Array.prototype.slice.call(arguments),i=o.pop(),u=t.apply(null,o);u in n?s.nextTick(function(){i.apply(null,n[u])}):u in r?r[u].push(i):(r[u]=[i],e.apply(null,o.concat([function(){n[u]=arguments;var e=r[u];delete r[u];for(var t=0,o=e.length;o>t;t++)e[t].apply(null,arguments)}])))};return o.memo=n,o.unmemoized=e,o},s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},s.times=function(e,t,n){for(var r=[],o=0;e>o;o++)r.push(o);return s.map(r,t,n)},s.timesSeries=function(e,t,n){for(var r=[],o=0;e>o;o++)r.push(o);return s.mapSeries(r,t,n)},s.seq=function(){var e=arguments;return function(){var t=this,n=Array.prototype.slice.call(arguments),r=n.pop();s.reduce(e,n,function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,n){r.apply(t,[e].concat(n))})}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var x=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),o=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},o)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};s.applyEach=f(x),s.applyEachSeries=m(x),s.forever=function(e,t){function n(r){if(r){if(t)return t(r);throw r}e(n)}n()},"undefined"!=typeof t&&t.exports?t.exports=s:"undefined"!=typeof define&&define.amd?define([],function(){return s}):r.async=s}()}).call(this,e("_process"))},{_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js":[function(e,t,n){!function(t,r){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(e,n,o){t.Backbone=r(t,o,e,n)});else if("undefined"!=typeof n){var o=e("underscore");r(t,n,o)}else t.Backbone=r(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(e,t,n,r){{var o=e.Backbone,s=[],i=(s.push,s.slice);s.splice}t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var u=t.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!l(this,"once",e,[t,r])||!t)return this;var o=this,s=n.once(function(){o.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var o,s,i,u,a,c,d,p;if(!this._events||!l(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(u=e?[e]:n.keys(this._events),a=0,c=u.length;c>a;a++)if(e=u[a],i=this._events[e]){if(this._events[e]=o=[],t||r)for(d=0,p=i.length;p>d;d++)s=i[d],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&o.push(s);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,r){var o=this._listeningTo;if(!o)return this;var s=!t&&!r;r||"object"!=typeof t||(r=this),e&&((o={})[e._listenId]=e);for(var i in o)e=o[i],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[i];return this}},a=/\s+/,l=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(r));return!1}if(a.test(n)){for(var s=n.split(a),i=0,u=s.length;u>i;i++)e[t].apply(e,[s[i]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,o=e.length,s=t[0],i=t[1],u=t[2];switch(t.length){case 0:for(;++r<o;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=e[r]).callback.call(n.ctx,s);return;case 2:for(;++r<o;)(n=e[r]).callback.call(n.ctx,s,i);return;case 3:for(;++r<o;)(n=e[r]).callback.call(n.ctx,s,i,u);return;default:for(;++r<o;)(n=e[r]).callback.apply(n.ctx,t);return}},d={listenTo:"on",listenToOnce:"once"};n.each(d,function(e,t){u[t]=function(t,r,o){var s=this._listeningTo||(this._listeningTo={}),i=t._listenId||(t._listenId=n.uniqueId("l"));return s[i]=t,o||"object"!=typeof r||(o=this),t[e](r,o,this),this}}),u.bind=u.on,u.unbind=u.off,n.extend(t,u);var p=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(p.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,r){var o,s,i,u,a,l,c,d;if(null==e)return this;if("object"==typeof e?(s=e,r=t):(s={})[e]=t,r||(r={}),!this._validate(s,r))return!1;i=r.unset,a=r.silent,u=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(o in s)t=s[o],n.isEqual(d[o],t)||u.push(o),n.isEqual(c[o],t)?delete this.changed[o]:this.changed[o]=t,i?delete d[o]:d[o]=t;if(!a){u.length&&(this._pending=r);for(var p=0,f=u.length;f>p;p++)this.trigger("change:"+u[p],this,d[u[p]],r)}if(l)return this;if(!a)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);
return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,o=this._changing?this._previousAttributes:this.attributes;for(var s in e)n.isEqual(o[s],t=e[s])||((r||(r={}))[s]=t);return r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(r&&r(t,n,e),void t.trigger("sync",t,n,e)):!1},M(this,e),this.sync("read",this,e)},save:function(e,t,r){var o,s,i,u=this.attributes;if(null==e||"object"==typeof e?(o=e,r=t):(o={})[e]=t,r=n.extend({validate:!0},r),o&&!r.wait){if(!this.set(o,r))return!1}else if(!this._validate(o,r))return!1;o&&r.wait&&(this.attributes=n.extend({},u,o)),void 0===r.parse&&(r.parse=!0);var a=this,l=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);return r.wait&&(t=n.extend(o||{},t)),n.isObject(t)&&!a.set(t,r)?!1:(l&&l(a,e,r),void a.trigger("sync",a,e,r))},M(this,r),s=this.isNew()?"create":r.patch?"patch":"update","patch"===s&&(r.attrs=o),i=this.sync(s,this,r),o&&r.wait&&(this.attributes=u),i},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,o=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&o(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;M(this,e);var s=this.sync("delete",this,e);return e.wait||o(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||N();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];n.each(f,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var h=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};n.extend(h.prototype,u,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,v))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var o,s,i,u;for(o=0,s=e.length;s>o;o++)u=e[o]=this.get(e[o]),u&&(delete this._byId[u.id],delete this._byId[u.cid],i=this.indexOf(u),this.models.splice(i,1),this.length--,t.silent||(t.index=i,u.trigger("remove",u,this,t)),this._removeReference(u,t));return r?e[0]:e},set:function(e,t){t=n.defaults({},t,m),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var o,s,i,u,a,l,c,d=t.at,f=this.model,h=this.comparator&&null==d&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,g=[],_=[],b={},y=t.add,w=t.merge,k=t.remove,S=!h&&y&&k?[]:!1;for(o=0,s=e.length;s>o;o++){if(a=e[o]||{},i=a instanceof p?u=a:a[f.prototype.idAttribute||"id"],l=this.get(i))k&&(b[l.cid]=!0),w&&(a=a===u?u.attributes:a,t.parse&&(a=l.parse(a,t)),l.set(a,t),h&&!c&&l.hasChanged(v)&&(c=!0)),e[o]=l;else if(y){if(u=e[o]=this._prepareModel(a,t),!u)continue;g.push(u),this._addReference(u,t)}u=l||u,!S||!u.isNew()&&b[u.id]||S.push(u),b[u.id]=!0}if(k){for(o=0,s=this.length;s>o;++o)b[(u=this.models[o]).cid]||_.push(u);_.length&&this.remove(_,t)}if(g.length||S&&S.length)if(h&&(c=!0),this.length+=g.length,null!=d)for(o=0,s=g.length;s>o;o++)this.models.splice(d+o,0,g[o]);else{S&&(this.models.length=0);var x=S||g;for(o=0,s=x.length;s>o;o++)this.models.push(x[o])}if(c&&this.sort({silent:!0}),!t.silent){for(o=0,s=g.length;s>o;o++)(u=g[o]).trigger("add",u,this,t);(c||S&&S.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,o=this.models.length;o>r;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return i.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var o=e.reset?"reset":"set";r[o](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},M(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,o=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),o&&o(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(g,function(e){h.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var _=["groupBy","countBy","sortBy","indexBy"];n.each(_,function(e){h.prototype[e]=function(t,r){var o=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,o,r)}});var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},y=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];if(n.isFunction(r)||(r=this[e[t]]),r){var o=t.match(y),s=o[1],i=o[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,""===i?this.$el.on(s,r):this.$el.on(s,i,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}}}),t.sync=function(e,r,o){var s=S[e];n.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var i={type:s,dataType:"json"};if(o.url||(i.url=n.result(r,"url")||N()),null!=o.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(i.contentType="application/json",i.data=JSON.stringify(o.attrs||r.toJSON(o))),o.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{}),o.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){i.type="POST",o.emulateJSON&&(i.data._method=s);var u=o.beforeSend;o.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),u?u.apply(this,arguments):void 0}}"GET"===i.type||o.emulateJSON||(i.processData=!1),"PATCH"===i.type&&k&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=o.xhr=t.ajax(n.extend(i,o));return r.trigger("request",r,a,o),a};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var x=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,j=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(x.prototype,u,{initialize:function(){},route:function(e,r,o){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(o=r,r=""),o||(o=this[r]);var s=this;return t.history.route(e,function(n){var i=s._extractParameters(e,n);s.execute(o,i),s.trigger.apply(s,["route:"+r].concat(i)),s.trigger("route",r,i),t.history.trigger("route",s,r,i)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(E,"(?:$1)?").replace(j,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var T=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},C=/^[#\/]|\s+$/g,U=/^\/+|\/+$/g,I=/msie [\w.]+/,D=/\/$/,R=/#.*$/;T.started=!1,n.extend(T.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(D,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(C,"")},start:function(e){if(T.started)throw new Error("Backbone.history has already been started");T.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),o=document.documentMode,s=I.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(U,"/"),s&&this._wantsHashChange){var i=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=i.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(C,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),T.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!T.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(R,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new T;var L=function(e,t){var r,o=this;r=e&&n.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},n.extend(r,o,t);var s=function(){this.constructor=r};return s.prototype=o.prototype,r.prototype=new s,e&&n.extend(r.prototype,e),r.__super__=o.prototype,r};p.extend=h.extend=x.extend=b.extend=T.extend=L;var N=function(){throw new Error('A "url" property or function must be specified')},M=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t})},{underscore:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/node_modules/underscore/underscore.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/node_modules/underscore/underscore.js":[function(e,t,n){(function(){function e(e){function t(t,n,r,o,s,i){for(;s>=0&&i>s;s+=e){var u=o?o[s]:s;r=n(r,t[u],u,t)}return r}return function(n,r,o,s){r=y(r,s,4);var i=!E(n)&&b.keys(n),u=(i||n).length,a=e>0?0:u-1;return arguments.length<3&&(o=n[i?i[a]:a],a+=e),t(n,r,o,i,a,u)}}function r(e){return function(t,n,r){n=w(n,r);for(var o=null!=t&&t.length,s=e>0?0:o-1;s>=0&&o>s;s+=e)if(n(t[s],s,t))return s;return-1}}function o(e,t){var n=C.length,r=e.constructor,o=b.isFunction(r)&&r.prototype||a,s="constructor";for(b.has(e,s)&&!b.contains(t,s)&&t.push(s);n--;)s=C[n],s in e&&e[s]!==o[s]&&!b.contains(t,s)&&t.push(s)}var s=this,i=s._,u=Array.prototype,a=Object.prototype,l=Function.prototype,c=u.push,d=u.slice,p=a.toString,f=a.hasOwnProperty,h=Array.isArray,m=Object.keys,v=l.bind,g=Object.create,_=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=b),n._=b):s._=b,b.VERSION="1.8.2";var y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,s){return e.call(t,n,r,o,s)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?b.identity:b.isFunction(e)?y(e,t,n):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return w(e,t,1/0)};var k=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var o=1;r>o;o++)for(var s=arguments[o],i=e(s),u=i.length,a=0;u>a;a++){var l=i[a];t&&void 0!==n[l]||(n[l]=s[l])}return n}},S=function(e){if(!b.isObject(e))return{};if(g)return g(e);_.prototype=e;var t=new _;return _.prototype=null,t},x=Math.pow(2,53)-1,E=function(e){var t=e&&e.length;return"number"==typeof t&&t>=0&&x>=t};b.each=b.forEach=function(e,t,n){t=y(t,n);var r,o;if(E(e))for(r=0,o=e.length;o>r;r++)t(e[r],r,e);else{var s=b.keys(e);for(r=0,o=s.length;o>r;r++)t(e[s[r]],s[r],e)}return e},b.map=b.collect=function(e,t,n){t=w(t,n);for(var r=!E(e)&&b.keys(e),o=(r||e).length,s=Array(o),i=0;o>i;i++){var u=r?r[i]:i;s[i]=t(e[u],u,e)}return s},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,n){var r;return r=E(e)?b.findIndex(e,t,n):b.findKey(e,t,n),void 0!==r&&-1!==r?e[r]:void 0},b.filter=b.select=function(e,t,n){var r=[];return t=w(t,n),b.each(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r},b.reject=function(e,t,n){return b.filter(e,b.negate(w(t)),n)},b.every=b.all=function(e,t,n){t=w(t,n);for(var r=!E(e)&&b.keys(e),o=(r||e).length,s=0;o>s;s++){var i=r?r[s]:s;if(!t(e[i],i,e))return!1}return!0},b.some=b.any=function(e,t,n){t=w(t,n);for(var r=!E(e)&&b.keys(e),o=(r||e).length,s=0;o>s;s++){var i=r?r[s]:s;if(t(e[i],i,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n){return E(e)||(e=b.values(e)),b.indexOf(e,t,"number"==typeof n&&n)>=0},b.invoke=function(e,t){var n=d.call(arguments,2),r=b.isFunction(t);return b.map(e,function(e){var o=r?t:e[t];return null==o?o:o.apply(e,n)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var r,o,s=-1/0,i=-1/0;if(null==t&&null!=e){e=E(e)?e:b.values(e);for(var u=0,a=e.length;a>u;u++)r=e[u],r>s&&(s=r)}else t=w(t,n),b.each(e,function(e,n,r){o=t(e,n,r),(o>i||o===-1/0&&s===-1/0)&&(s=e,i=o)});return s},b.min=function(e,t,n){var r,o,s=1/0,i=1/0;if(null==t&&null!=e){e=E(e)?e:b.values(e);for(var u=0,a=e.length;a>u;u++)r=e[u],s>r&&(s=r)}else t=w(t,n),b.each(e,function(e,n,r){o=t(e,n,r),(i>o||1/0===o&&1/0===s)&&(s=e,i=o)});return s},b.shuffle=function(e){for(var t,n=E(e)?e:b.values(e),r=n.length,o=Array(r),s=0;r>s;s++)t=b.random(0,s),t!==s&&(o[s]=o[t]),o[t]=n[s];return o},b.sample=function(e,t,n){return null==t||n?(E(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,n){return t=w(t,n),b.pluck(b.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var j=function(e){return function(t,n,r){var o={};return n=w(n,r),b.each(t,function(r,s){var i=n(r,s,t);e(o,r,i)}),o}};b.groupBy=j(function(e,t,n){b.has(e,n)?e[n].push(t):e[n]=[t]}),b.indexBy=j(function(e,t,n){e[n]=t}),b.countBy=j(function(e,t,n){b.has(e,n)?e[n]++:e[n]=1}),b.toArray=function(e){return e?b.isArray(e)?d.call(e):E(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:E(e)?e.length:b.keys(e).length},b.partition=function(e,t,n){t=w(t,n);var r=[],o=[];return b.each(e,function(e,n,s){(t(e,n,s)?r:o).push(e)}),[r,o]},b.first=b.head=b.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var A=function(e,t,n,r){for(var o=[],s=0,i=r||0,u=e&&e.length;u>i;i++){var a=e[i];if(E(a)&&(b.isArray(a)||b.isArguments(a))){t||(a=A(a,t,n));var l=0,c=a.length;for(o.length+=c;c>l;)o[s++]=a[l++]}else n||(o[s++]=a)}return o};b.flatten=function(e,t){return A(e,t,!1)},b.without=function(e){return b.difference(e,d.call(arguments,1))},b.uniq=b.unique=function(e,t,n,r){if(null==e)return[];b.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=w(n,r));for(var o=[],s=[],i=0,u=e.length;u>i;i++){var a=e[i],l=n?n(a,i,e):a;t?(i&&s===l||o.push(a),s=l):n?b.contains(s,l)||(s.push(l),o.push(a)):b.contains(o,a)||o.push(a)}return o},b.union=function(){return b.uniq(A(arguments,!0,!0))},b.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,o=e.length;o>r;r++){var s=e[r];if(!b.contains(t,s)){for(var i=1;n>i&&b.contains(arguments[i],s);i++);i===n&&t.push(s)}}return t},b.difference=function(e){var t=A(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,"length").length||0,n=Array(t),r=0;t>r;r++)n[r]=b.pluck(e,r);return n},b.object=function(e,t){for(var n={},r=0,o=e&&e.length;o>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},b.indexOf=function(e,t,n){var r=0,o=e&&e.length;if("number"==typeof n)r=0>n?Math.max(0,o+n):n;else if(n&&o)return r=b.sortedIndex(e,t),e[r]===t?r:-1;if(t!==t)return b.findIndex(d.call(e,r),b.isNaN);for(;o>r;r++)if(e[r]===t)return r;return-1},b.lastIndexOf=function(e,t,n){var r=e?e.length:0;if("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1)),t!==t)return b.findLastIndex(d.call(e,0,r),b.isNaN);for(;--r>=0;)if(e[r]===t)return r;return-1},b.findIndex=r(1),b.findLastIndex=r(-1),b.sortedIndex=function(e,t,n,r){n=w(n,r,1);for(var o=n(t),s=0,i=e.length;i>s;){var u=Math.floor((s+i)/2);n(e[u])<o?s=u+1:i=u}return s},b.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),s=0;r>s;s++,e+=n)o[s]=e;return o};var O=function(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var s=S(e.prototype),i=e.apply(s,o);return b.isObject(i)?i:s};b.bind=function(e,t){if(v&&e.bind===v)return v.apply(e,d.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return O(e,r,t,this,n.concat(d.call(arguments)))};return r},b.partial=function(e){var t=d.call(arguments,1),n=function(){for(var r=0,o=t.length,s=Array(o),i=0;o>i;i++)s[i]=t[i]===b?arguments[r++]:t[i];for(;r<arguments.length;)s.push(arguments[r++]);return O(e,n,this,this,s)};return n},b.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=b.bind(e[n],e);return e},b.memoize=function(e,t){var n=function(r){var o=n.cache,s=""+(t?t.apply(this,arguments):r);return b.has(o,s)||(o[s]=e.apply(this,arguments)),o[s]};return n.cache={},n},b.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var r,o,s,i=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:b.now(),i=null,s=e.apply(r,o),i||(r=o=null)};return function(){var l=b.now();u||n.leading!==!1||(u=l);var c=t-(l-u);return r=this,o=arguments,0>=c||c>t?(i&&(clearTimeout(i),i=null),u=l,s=e.apply(r,o),i||(r=o=null)):i||n.trailing===!1||(i=setTimeout(a,c)),s}},b.debounce=function(e,t,n){var r,o,s,i,u,a=function(){var l=b.now()-i;t>l&&l>=0?r=setTimeout(a,t-l):(r=null,n||(u=e.apply(s,o),r||(s=o=null)))};return function(){s=this,o=arguments,i=b.now();var l=n&&!r;return r||(r=setTimeout(a,t)),l&&(u=e.apply(s,o),s=o=null),u}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},b.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},b.once=b.partial(b.before,2);var T=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)b.has(e,n)&&t.push(n);return T&&o(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return T&&o(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),o=0;n>o;o++)r[o]=e[t[o]];return r},b.mapObject=function(e,t,n){t=w(t,n);for(var r,o=b.keys(e),s=o.length,i={},u=0;s>u;u++)r=o[u],i[r]=t(e[r],r,e);return i},b.pairs=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),o=0;n>o;o++)r[o]=[t[o],e[t[o]]];return r},b.invert=function(e){for(var t={},n=b.keys(e),r=0,o=n.length;o>r;r++)t[e[n[r]]]=n[r];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()},b.extend=k(b.allKeys),b.extendOwn=b.assign=k(b.keys),b.findKey=function(e,t,n){t=w(t,n);for(var r,o=b.keys(e),s=0,i=o.length;i>s;s++)if(r=o[s],t(e[r],r,e))return r},b.pick=function(e,t,n){var r,o,s={},i=e;if(null==i)return s;b.isFunction(t)?(o=b.allKeys(i),r=y(t,n)):(o=A(arguments,!1,!1,1),r=function(e,t,n){return t in n},i=Object(i));for(var u=0,a=o.length;a>u;u++){var l=o[u],c=i[l];r(c,l,i)&&(s[l]=c)}return s},b.omit=function(e,t,n){if(b.isFunction(t))t=b.negate(t);else{var r=b.map(A(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(r,t)}}return b.pick(e,t,n)},b.defaults=k(b.allKeys,!0),b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),r=n.length;if(null==e)return!r;for(var o=Object(e),s=0;r>s;s++){var i=n[s];if(t[i]!==o[i]||!(i in o))return!1}return!0};var U=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var o=p.call(e);if(o!==p.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var i=e.constructor,u=t.constructor;if(i!==u&&!(b.isFunction(i)&&i instanceof i&&b.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var a=n.length;a--;)if(n[a]===e)return r[a]===t;if(n.push(e),r.push(t),s){if(a=e.length,a!==t.length)return!1;for(;a--;)if(!U(e[a],t[a],n,r))return!1}else{var l,c=b.keys(e);if(a=c.length,b.keys(t).length!==a)return!1;for(;a--;)if(l=c[a],!b.has(t,l)||!U(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(e,t){return U(e,t)},b.isEmpty=function(e){return null==e?!0:E(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=h||function(e){return"[object Array]"===p.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===p.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&f.call(e,t)},b.noConflict=function(){return s._=i,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=function(e){return function(t){return null==t?void 0:t[e]}},b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var r=Array(Math.max(0,e));t=y(t,n,1);for(var o=0;e>o;o++)r[o]=t(o);return r},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=b.invert(I),R=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}};b.escape=R(I),b.unescape=R(D),b.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),b.isFunction(r)?r.call(e):r};var L=0;b.uniqueId=function(e){var t=++L+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+M[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var r=RegExp([(t.escape||N).source,(t.interpolate||N).source,(t.evaluate||N).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(r,function(t,n,r,i,u){return s+=e.slice(o,u).replace(P,q),o=u+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var i=new Function(t.variable||"obj","_",s)}catch(u){throw u.source=s,u}var a=function(e){return i.call(this,e,b)},l=t.variable||"obj";return a.source="function("+l+"){\n"+s+"}",a},b.chain=function(e){var t=b(e);return t._chain=!0,t};var B=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),B(this,n.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],B(this,n)}}),b.each(["concat","join","slice"],function(e){var t=u[e];b.prototype[e]=function(){return B(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/lib/_empty.js":[function(){},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/assert/assert.js":[function(e,t){function n(e,t){return p.isUndefined(t)?""+t:p.isNumber(t)&&!isFinite(t)?t.toString():p.isFunction(t)||p.isRegExp(t)?t.toString():t
}function r(e,t){return p.isString(e)?e.length<t?e:e.slice(0,t):e}function o(e){return r(JSON.stringify(e.actual,n),128)+" "+e.operator+" "+r(JSON.stringify(e.expected,n),128)}function s(e,t,n,r,o){throw new m.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function i(e,t){e||s(e,!0,t,"==",m.ok)}function u(e,t){if(e===t)return!0;if(p.isBuffer(e)&&p.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return p.isDate(e)&&p.isDate(t)?e.getTime()===t.getTime():p.isRegExp(e)&&p.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:p.isObject(e)||p.isObject(t)?l(e,t):e==t}function a(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function l(e,t){if(p.isNullOrUndefined(e)||p.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(p.isPrimitive(e)||p.isPrimitive(t))return e===t;var n=a(e),r=a(t);if(n&&!r||!n&&r)return!1;if(n)return e=f.call(e),t=f.call(t),u(e,t);var o,s,i=v(e),l=v(t);if(i.length!=l.length)return!1;for(i.sort(),l.sort(),s=i.length-1;s>=0;s--)if(i[s]!=l[s])return!1;for(s=i.length-1;s>=0;s--)if(o=i[s],!u(e[o],t[o]))return!1;return!0}function c(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function d(e,t,n,r){var o;p.isString(n)&&(r=n,n=null);try{t()}catch(i){o=i}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&s(o,n,"Missing expected exception"+r),!e&&c(o,n)&&s(o,n,"Got unwanted exception"+r),e&&o&&n&&!c(o,n)||!e&&o)throw o}var p=e("util/"),f=Array.prototype.slice,h=Object.prototype.hasOwnProperty,m=t.exports=i;m.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var t=e.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=t.name,u=r.indexOf("\n"+i);if(u>=0){var a=r.indexOf("\n",u+1);r=r.substring(a+1)}this.stack=r}}},p.inherits(m.AssertionError,Error),m.fail=s,m.ok=i,m.equal=function(e,t,n){e!=t&&s(e,t,n,"==",m.equal)},m.notEqual=function(e,t,n){e==t&&s(e,t,n,"!=",m.notEqual)},m.deepEqual=function(e,t,n){u(e,t)||s(e,t,n,"deepEqual",m.deepEqual)},m.notDeepEqual=function(e,t,n){u(e,t)&&s(e,t,n,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(e,t,n){e!==t&&s(e,t,n,"===",m.strictEqual)},m.notStrictEqual=function(e,t,n){e===t&&s(e,t,n,"!==",m.notStrictEqual)},m["throws"]=function(){d.apply(this,[!0].concat(f.call(arguments)))},m.doesNotThrow=function(){d.apply(this,[!1].concat(f.call(arguments)))},m.ifError=function(e){if(e)throw e};var v=Object.keys||function(e){var t=[];for(var n in e)h.call(e,n)&&t.push(n);return t}},{"util/":"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/util/util.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/browser-resolve/empty.js":[function(e,t,n){arguments[4]["/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/lib/_empty.js"][0].apply(n,arguments)},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js":[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,u,a,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],i(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,u=new Array(o-1),a=1;o>a;a++)u[a-1]=arguments[a];n.apply(this,u)}else if(s(n)){for(o=arguments.length,u=new Array(o-1),a=1;o>a;a++)u[a-1]=arguments[a];for(l=n.slice(),o=l.length,a=0;o>a;a++)l[a].apply(this,u)}return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var o;o=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,i,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(u=i;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){o=u;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/inherits/inherits_browser.js":[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/path-browserify/index.js":[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return o.exec(e).slice(1)};n.resolve=function(){for(var n="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(n=i+"/"+n,o="/"===i.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(e){var o=n.isAbsolute(e),s="/"===i(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=r(e.split("/")),s=r(t.split("/")),i=Math.min(o.length,s.length),u=i,a=0;i>a;a++)if(o[a]!==s[a]){u=a;break}for(var l=[],a=u;a<o.length;a++)l.push("..");return l=l.concat(s.slice(u)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=s(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=s(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return s(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js":[function(e,t){function n(){if(!i){i=!0;for(var e,t=s.length;t;){e=s,s=[];for(var n=-1;++n<t;)e[n]();t=s.length}i=!1}}function r(){}var o=t.exports={},s=[],i=!1;o.nextTick=function(e){s.push(e),i||setTimeout(n,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/util/support/isBufferBrowser.js":[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/util/util.js":[function(e,t,n){(function(t,r){function o(e,t){var r={seen:[],stylize:i};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),a(r,e,r.depth)}function s(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function i(e){return e}function u(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function a(e,t,r){if(e.customInspect&&t&&j(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(r,e);return b(o)||(o=a(e,o,r)),o}var s=l(e,t);if(s)return s;var i=Object.keys(t),m=u(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return c(t);if(0===i.length){if(j(t)){var v=t.name?": "+t.name:"";return e.stylize("[Function"+v+"]","special")}if(k(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return c(t)}var g="",_=!1,y=["{","}"];if(h(t)&&(_=!0,y=["[","]"]),j(t)){var w=t.name?": "+t.name:"";g=" [Function"+w+"]"}if(k(t)&&(g=" "+RegExp.prototype.toString.call(t)),x(t)&&(g=" "+Date.prototype.toUTCString.call(t)),E(t)&&(g=" "+c(t)),0===i.length&&(!_||0==t.length))return y[0]+g+y[1];if(0>r)return k(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=_?d(e,t,r,m,i):i.map(function(n){return p(e,t,r,m,n,_)}),e.seen.pop(),f(S,g,y)}function l(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return _(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,o){for(var s=[],i=0,u=t.length;u>i;++i)s.push(U(t,String(i))?p(e,t,n,r,String(i),!0):"");return o.forEach(function(o){o.match(/^\d+$/)||s.push(p(e,t,n,r,o,!0))}),s}function p(e,t,n,r,o,s){var i,u,l;if(l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},l.get?u=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(u=e.stylize("[Setter]","special")),U(r,o)||(i="["+o+"]"),u||(e.seen.indexOf(l.value)<0?(u=v(n)?a(e,l.value,null):a(e,l.value,n-1),u.indexOf("\n")>-1&&(u=s?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),w(i)){if(s&&o.match(/^\d+$/))return u;i=JSON.stringify(""+o),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+u}function f(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function v(e){return null===e}function g(e){return null==e}function _(e){return"number"==typeof e}function b(e){return"string"==typeof e}function y(e){return"symbol"==typeof e}function w(e){return void 0===e}function k(e){return S(e)&&"[object RegExp]"===O(e)}function S(e){return"object"==typeof e&&null!==e}function x(e){return S(e)&&"[object Date]"===O(e)}function E(e){return S(e)&&("[object Error]"===O(e)||e instanceof Error)}function j(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function O(e){return Object.prototype.toString.call(e)}function T(e){return 10>e?"0"+e.toString(10):e.toString(10)}function C(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var I=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,s=r.length,i=String(e).replace(I,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),u=r[n];s>n;u=r[++n])i+=v(u)||!S(u)?" "+u:" "+o(u);return i},n.deprecate=function(e,o){function s(){if(!i){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),i=!0}return e.apply(this,arguments)}if(w(r.process))return function(){return n.deprecate(e,o).apply(this,arguments)};if(t.noDeprecation===!0)return e;var i=!1;return s};var D,R={};n.debuglog=function(e){if(w(D)&&(D=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!R[e])if(new RegExp("\\b"+e+"\\b","i").test(D)){var r=t.pid;R[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else R[e]=function(){};return R[e]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=m,n.isNull=v,n.isNullOrUndefined=g,n.isNumber=_,n.isString=b,n.isSymbol=y,n.isUndefined=w,n.isRegExp=k,n.isObject=S,n.isDate=x,n.isError=E,n.isFunction=j,n.isPrimitive=A,n.isBuffer=e("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",C(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/util/support/isBufferBrowser.js",_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js",inherits:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/inherits/inherits_browser.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars.js":[function(e,t,n){(function(t){"use strict";var r=e("./handlebars.runtime")["default"],o=e("./handlebars/compiler/ast")["default"],s=e("./handlebars/compiler/base").parser,i=e("./handlebars/compiler/base").parse,u=e("./handlebars/compiler/compiler").Compiler,a=e("./handlebars/compiler/compiler").compile,l=e("./handlebars/compiler/compiler").precompile,c=e("./handlebars/compiler/javascript-compiler")["default"],d=r.create,p=function(){var e=d();return e.compile=function(t,n){return a(t,n,e)},e.precompile=function(t,n){return l(t,n,e)},e.AST=o,e.Compiler=u,e.JavaScriptCompiler=c,e.Parser=s,e.parse=i,e};r=p(),r.create=p;var f="undefined"!=typeof t?t:window,h=f.Handlebars;r.noConflict=function(){f.Handlebars===r&&(f.Handlebars=h)},r["default"]=r,n["default"]=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./handlebars.runtime":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars.runtime.js","./handlebars/compiler/ast":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/ast.js","./handlebars/compiler/base":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/base.js","./handlebars/compiler/compiler":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js","./handlebars/compiler/javascript-compiler":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars.runtime.js":[function(e,t,n){(function(t){"use strict";var r=e("./handlebars/base"),o=e("./handlebars/safe-string")["default"],s=e("./handlebars/exception")["default"],i=e("./handlebars/utils"),u=e("./handlebars/runtime"),a=function(){var e=new r.HandlebarsEnvironment;return i.extend(e,r),e.SafeString=o,e.Exception=s,e.Utils=i,e.escapeExpression=i.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e},l=a();l.create=a;var c="undefined"!=typeof t?t:window,d=c.Handlebars;l.noConflict=function(){c.Handlebars===l&&(c.Handlebars=d)},l["default"]=l,n["default"]=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./handlebars/base":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/base.js","./handlebars/exception":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js","./handlebars/runtime":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/runtime.js","./handlebars/safe-string":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/safe-string.js","./handlebars/utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/base.js":[function(e,t,n){"use strict";function r(e,t){this.helpers=e||{},this.partials=t||{},o(this)}function o(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new i("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,o=n.fn;if(t===!0)return o(this);if(t===!1||null==t)return r(this);if(c(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var i=v(n.data);i.contextPath=s.appendContextPath(n.data.contextPath,n.name),n={data:i}}return o(t,n)}),e.registerHelper("each",function(e,t){function n(t,n,i){r&&(r.key=t,r.index=n,r.first=0===n,r.last=!!i,o&&(r.contextPath=o+t)),p+=u(e[t],{data:r,blockParams:s.blockParams([e[t],t],[o+t,null])})}if(!t)throw new i("Must pass iterator to #each");var r,o,u=t.fn,a=t.inverse,l=0,p="";if(t.data&&t.ids&&(o=s.appendContextPath(t.data.contextPath,t.ids[0])+"."),d(e)&&(e=e.call(this)),t.data&&(r=v(t.data)),e&&"object"==typeof e)if(c(e))for(var f=e.length;f>l;l++)n(l,l,l===e.length-1);else{var h;for(var m in e)e.hasOwnProperty(m)&&(h&&n(h,l-1),h=m,l++);h&&n(h,l-1,!0)}return 0===l&&(p=a(this)),p}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||s.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){d(e)&&(e=e.call(this));var n=t.fn;if(s.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var r=v(t.data);r.contextPath=s.appendContextPath(t.data.contextPath,t.ids[0]),t={data:r}}return n(e,t)}),e.registerHelper("log",function(t,n){var r=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(r,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var s=e("./utils"),i=e("./exception")["default"],u="3.0.0";n.VERSION=u;var a=6;n.COMPILER_REVISION=a;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=l;var c=s.isArray,d=s.isFunction,p=s.toString,f="[object Object]";n.HandlebarsEnvironment=r,r.prototype={constructor:r,logger:h,log:m,registerHelper:function(e,t){if(p.call(e)===f){if(t)throw new i("Arg not supported with multiple helpers");s.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(p.call(e)===f)s.extend(this.partials,e);else{if("undefined"==typeof t)throw new i("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var h={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&h.level<=e){var n=h.methodMap[e];(console[n]||console.log).call(console,t)}}};n.logger=h;var m=h.log;n.log=m;var v=function(e){var t=s.extend({},e);return t._parent=e,t};n.createFrame=v},{"./exception":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/ast.js":[function(e,t,n){"use strict";var r={Program:function(e,t,n,r){this.loc=r,this.type="Program",this.body=e,this.blockParams=t,this.strip=n},MustacheStatement:function(e,t,n,r,o,s){this.loc=s,this.type="MustacheStatement",this.path=e,this.params=t||[],this.hash=n,this.escaped=r,this.strip=o},BlockStatement:function(e,t,n,r,o,s,i,u,a){this.loc=a,this.type="BlockStatement",this.path=e,this.params=t||[],this.hash=n,this.program=r,this.inverse=o,this.openStrip=s,this.inverseStrip=i,this.closeStrip=u},PartialStatement:function(e,t,n,r,o){this.loc=o,this.type="PartialStatement",this.name=e,this.params=t||[],this.hash=n,this.indent="",this.strip=r},ContentStatement:function(e,t){this.loc=t,this.type="ContentStatement",this.original=this.value=e},CommentStatement:function(e,t,n){this.loc=n,this.type="CommentStatement",this.value=e,this.strip=t},SubExpression:function(e,t,n,r){this.loc=r,this.type="SubExpression",this.path=e,this.params=t||[],this.hash=n},PathExpression:function(e,t,n,r,o){this.loc=o,this.type="PathExpression",this.data=e,this.original=r,this.parts=n,this.depth=t},StringLiteral:function(e,t){this.loc=t,this.type="StringLiteral",this.original=this.value=e},NumberLiteral:function(e,t){this.loc=t,this.type="NumberLiteral",this.original=this.value=Number(e)},BooleanLiteral:function(e,t){this.loc=t,this.type="BooleanLiteral",this.original=this.value="true"===e},Hash:function(e,t){this.loc=t,this.type="Hash",this.pairs=e},HashPair:function(e,t,n){this.loc=n,this.type="HashPair",this.key=e,this.value=t},helpers:{helperExpression:function(e){return!("SubExpression"!==e.type&&!e.params.length&&!e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};n["default"]=r},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/base.js":[function(e,t,n){"use strict";function r(e,t){if("Program"===e.type)return e;o.yy=l,l.locInfo=function(e){return new l.SourceLocation(t&&t.srcName,e)};var n=new i;return n.accept(o.parse(e))}var o=e("./parser")["default"],s=e("./ast")["default"],i=e("./whitespace-control")["default"],u=e("./helpers"),a=e("../utils").extend;n.parser=o;var l={};a(l,u,s),n.parse=r},{"../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js","./ast":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/ast.js","./helpers":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/helpers.js","./parser":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/parser.js","./whitespace-control":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/whitespace-control.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/code-gen.js":[function(e,t,n){"use strict";function r(e,t,n){if(s(e)){for(var r=[],o=0,i=e.length;i>o;o++)r.push(t.wrap(e[o],n));return r}return"boolean"==typeof e||"number"==typeof e?e+"":e}function o(e){this.srcFile=e,this.source=[]}var s=e("../utils").isArray;try{var i=e("source-map"),u=i.SourceNode}catch(a){u=function(e,t,n,r){this.src="",r&&this.add(r)},u.prototype={add:function(e){s(e)&&(e=e.join("")),this.src+=e},prepend:function(e){s(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}}o.prototype={prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,n=this.source.length;n>t;t++)e(this.source[t])},empty:function(e){return e=e||this.currentLocation||{start:{}},new u(e.start.line,e.start.column,this.srcFile)},wrap:function(e,t){return e instanceof u?e:(t=t||this.currentLocation||{start:{}},e=r(e,this,t),new u(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var o=r(e[n],this);"undefined"!==o&&t.push([this.quotedString(n),":",o])}var s=this.generateList(t);return s.prepend("{"),s.add("}"),s},generateList:function(e,t){for(var n=this.empty(t),o=0,s=e.length;s>o;o++)o&&n.add(","),n.add(r(e[o],this,t));return n},generateArray:function(e,t){var n=this.generateList(e,t);return n.prepend("["),n.add("]"),n}},n["default"]=o},{"../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js","source-map":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js":[function(e,t,n){"use strict";function r(){}function o(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new a("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var r=n.parse(e,t),o=(new n.Compiler).compile(r,t);return(new n.JavaScriptCompiler).compile(o,t)}function s(e,t,n){function r(){var r=n.parse(e,t),o=(new n.Compiler).compile(r,t),s=(new n.JavaScriptCompiler).compile(o,t,void 0,!0);return n.template(s)}if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new a("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var o,s=function(e,t){return o||(o=r()),o.call(this,e,t)};return s._setup=function(e){return o||(o=r()),o._setup(e)},s._child=function(e,t,n,s){return o||(o=r()),o._child(e,t,n,s)},s}function i(e,t){if(e===t)return!0;if(l(e)&&l(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1;return!0}}function u(e){if(!e.path.parts){var t=e.path;e.path=new d.PathExpression(!1,0,[t.original+""],t.original+"",t.log)}}var a=e("../exception")["default"],l=e("../utils").isArray,c=e("../utils").indexOf,d=e("./ast")["default"],p=[].slice;n.Compiler=r,r.prototype={compiler:r,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var r=this.opcodes[n],o=e.opcodes[n];if(r.opcode!==o.opcode||!i(r.args,o.args))return!1}for(t=this.children.length,n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var n=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},n)for(var r in n)t.knownHelpers[r]=n[r];return this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=0,r=t.length;r>n;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){u(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var r=this.classifySexpr(e);"helper"===r?this.helperSexpr(e,t,n):"simple"===r?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(e){this.usePartial=!0;var t=e.params;if(t.length>1)throw new a("Unsupported number of partial arguments: "+t.length,e);t.length||t.push({type:"PathExpression",parts:[],depth:0});var n=e.name.original,r="SubExpression"===e.name.type;r&&this.accept(e.name),this.setupFullMustacheParams(e,void 0,void 0,!0);var o=e.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",r,n,o),this.opcode("append")
},MustacheStatement:function(e){this.SubExpression(e),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){u(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var r=e.path,o=r.parts[0],s=null!=t||null!=n;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.accept(r),this.opcode("invokeAmbiguous",o,s)},simpleSexpr:function(e){this.accept(e.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),o=e.path,s=o.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",r.length,s);else{if(this.options.knownHelpersOnly)throw new a("You specified knownHelpersOnly, but used the unknown helper "+s,e);o.falsy=!0,this.accept(o),this.opcode("invokeHelper",r.length,o.original,d.helpers.simpleId(o))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=d.helpers.scopedId(e),r=!e.depth&&!n&&this.blockParamIndex(t);r?this.opcode("lookupBlockParam",r,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts)):this.opcode("lookupOnContext",e.parts,e.falsy,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},Hash:function(e){var t,n,r=e.pairs;for(this.opcode("pushHash"),t=0,n=r.length;n>t;t++)this.pushParam(r[t].value);for(;t--;)this.opcode("assignToHash",r[t].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:p.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=d.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),r=!n&&d.helpers.helperExpression(e),o=!n&&(r||t),s=this.options;if(o&&!r){var i=e.path.parts[0];s.knownHelpers[i]?r=!0:s.knownHelpersOnly&&(o=!1)}return r?"helper":o?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;n>t;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n;if(!e.parts||d.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var r=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,r)}else t=e.original||t,t.replace&&(t=t.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,r){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",r),o},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;n>t;t++){var r=this.options.blockParams[t],o=r&&c(r,e);if(r&&o>=0)return[t,o]}}},n.precompile=o,n.compile=s},{"../exception":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js","../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js","./ast":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/ast.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/helpers.js":[function(e,t,n){"use strict";function r(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function o(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function s(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function i(e,t,n){n=this.locInfo(n);for(var r=e?"@":"",o=[],s=0,i="",u=0,a=t.length;a>u;u++){var l=t[u].part;if(r+=(t[u].separator||"")+l,".."===l||"."===l||"this"===l){if(o.length>0)throw new c("Invalid path: "+r,{loc:n});".."===l&&(s++,i+="../")}else o.push(l)}return new this.PathExpression(e,s,o,r,n)}function u(e,t,n,r,o,s){var i=r.charAt(3)||r.charAt(2),u="{"!==i&&"&"!==i;return new this.MustacheStatement(e,t,n,u,o,this.locInfo(s))}function a(e,t,n,r){if(e.path.original!==n){var o={loc:e.path.loc};throw new c(e.path.original+" doesn't match "+n,o)}r=this.locInfo(r);var s=new this.Program([t],null,{},r);return new this.BlockStatement(e.path,e.params,e.hash,s,void 0,{},{},{},r)}function l(e,t,n,r,o,s){if(r&&r.path&&e.path.original!==r.path.original){var i={loc:e.path.loc};throw new c(e.path.original+" doesn't match "+r.path.original,i)}t.blockParams=e.blockParams;var u,a;return n&&(n.chain&&(n.program.body[0].closeStrip=r.strip),a=n.strip,u=n.program),o&&(o=u,u=t,t=o),new this.BlockStatement(e.path,e.params,e.hash,t,u,e.strip,a,r&&r.strip,this.locInfo(s))}var c=e("../exception")["default"];n.SourceLocation=r,n.stripFlags=o,n.stripComment=s,n.preparePath=i,n.prepareMustache=u,n.prepareRawBlock=a,n.prepareBlock=l},{"../exception":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js":[function(e,t,n){"use strict";function r(e){this.value=e}function o(){}function s(e,t,n,r){var o=t.popStack(),s=0,i=n.length;for(e&&i--;i>s;s++)o=t.nameLookup(o,n[s],r);return e?[t.aliasable("this.strict"),"(",o,", ",t.quotedString(n[s]),")"]:o}var i=e("../base").COMPILER_REVISION,u=e("../base").REVISION_CHANGES,a=e("../exception")["default"],l=e("../utils").isArray,c=e("./code-gen")["default"];o.prototype={nameLookup:function(e,t){return o.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"['",t,"']"]},depthedLookup:function(e){return[this.aliasable("this.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=i,t=u[e];return[e,t]},appendToBuffer:function(e,t,n){return l(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,n,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var o,s,i,u,l=e.opcodes;for(i=0,u=l.length;u>i;i++)o=l[i],this.source.currentLocation=o.loc,s=s||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=s,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a("Compile completed with content left on stack");var c=this.createFunctionContext(r);if(this.isChild)return c;var d={compiler:this.compilerInfo(),main:c},p=this.context.programs;for(i=0,u=p.length;u>i;i++)p[i]&&(d[i]=p[i]);return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),r?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName}),d.map=d.map&&d.map.toString()):d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new c(this.options.srcName)},createFunctionContext:function(e){var t="",n=this.stackVars.concat(this.registers.list);n.length>0&&(t+=", "+n.join(", "));var r=0;for(var o in this.aliases){var s=this.aliases[o];this.aliases.hasOwnProperty(o)&&s.children&&s.referenceCount>1&&(t+=", alias"+ ++r+"="+o,s.children[0]="alias"+r)}var i=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths");var u=this.mergeSource(t);return e?(i.push(u),Function.apply(this,i)):this.source.wrap(["function(",i.join(","),") {\n  ",u,"}"])},mergeSource:function(e){var t,n,r,o,s=this.environment.isSimple,i=!this.forceBuffer;return this.source.each(function(e){e.appendToBuffer?(r?e.prepend("  + "):r=e,o=e):(r&&(n?r.prepend("buffer += "):t=!0,o.add(";"),r=o=void 0),n=!0,s||(i=!1))}),i?r?(r.prepend("return "),o.add(";")):n||this.source.push('return "";'):(e+=", buffer = "+(t?"":this.initializeBuffer()),r?(r.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(t?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var r=this.popStack();n.splice(1,0,r),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n){var r=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[r++])),this.resolvePath("context",e,r,t)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t){this.pushStackLiteral(e?"this.data(data, "+e+")":"data"),this.resolvePath("data",t,0,!0)},resolvePath:function(e,t,n,r){if(this.options.strict||this.options.assumeObjects)return void this.push(s(this.options.strict,this,t,e));for(var o=t.length;o>n;n++)this.replaceStack(function(o){var s=this.nameLookup(o,t[n],e);return r?[" && ",s]:[" != null ? ",s," : ",o]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t,n){var r=this.popStack(),o=this.setupHelper(e,t),s=n?[o.name," || "]:"",i=["("].concat(s,r);this.options.strict||i.push(" || ",this.aliasable("helpers.helperMissing")),i.push(")"),this.push(this.source.functionCall(i,"call",o.callParams))},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var r=this.setupHelper(0,e,t),o=this.lastHelper=this.nameLookup("helpers",e,"helper"),s=["(","(helper = ",o," || ",n,")"];this.options.strict||(s[0]="(helper = ",s.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",s,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(e,t,n){var r=[],o=this.setupParams(t,1,r,!1);e&&(t=this.popStack(),delete o.name),n&&(o.indent=JSON.stringify(n)),o.helpers="helpers",o.partials="partials",r.unshift(e?t:this.nameLookup("partials",t,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),r.push(o),this.push(this.source.functionCall("this.invokePartial","",r))},assignToHash:function(e){var t,n,r,o=this.popStack();this.trackIds&&(r=this.popStack()),this.stringParams&&(n=this.popStack(),t=this.popStack());var s=this.hash;t&&(s.contexts[e]=t),n&&(s.types[e]=n),r&&(s.ids[e]=r),s.values[e]=o},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):this.pushStackLiteral("SubExpression"===e?"true":"null")},compiler:o,compileChildren:function(e,t){for(var n,r,o=e.children,s=0,i=o.length;i>s;s++){n=o[s],r=new this.compiler;var u=this.matchExistingProgram(n);null==u?(this.context.programs.push(""),u=this.context.programs.length,n.index=u,n.name="program"+u,this.context.programs[u]=r.compile(n,t,this.context,!this.precompile),this.context.environments[u]=n,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams):(n.index=u,n.name="program"+u,this.useDepths=this.useDepths||n.useDepths,this.useBlockParams=this.useBlockParams||n.useBlockParams)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"this.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof r||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new r(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t,n,o,s=["("];if(!this.isInline())throw new a("replaceStack on non-inline");var i=this.popStack(!0);if(i instanceof r)t=[i.value],s=["(",t],o=!0;else{n=!0;var u=this.incrStack();s=["((",this.push(u)," = ",i,")"],t=this.topStack()}var l=e.call(this,t);o||this.popStack(),n&&this.stackSlot--,this.push(s.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;n>t;t++){var o=e[t];if(o instanceof r)this.compileStack.push(o);else{var s=this.incrStack();this.pushSource([s," = ",o,";"]),this.compileStack.push(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof r)return n.value;if(!t){if(!this.stackSlot)throw new a("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof r?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):(t=this.aliases[e]=this.source.wrap(e),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var r=[],o=this.setupHelperArgs(t,e,r,n),s=this.nameLookup("helpers",t,"helper");return{params:r,paramsInit:o,name:s,callParams:[this.contextName(0)].concat(r)}},setupParams:function(e,t,n){var r,o={},s=[],i=[],u=[];o.name=this.quotedString(e),o.hash=this.popStack(),this.trackIds&&(o.hashIds=this.popStack()),this.stringParams&&(o.hashTypes=this.popStack(),o.hashContexts=this.popStack());var a=this.popStack(),l=this.popStack();(l||a)&&(o.fn=l||"this.noop",o.inverse=a||"this.noop");for(var c=t;c--;)r=this.popStack(),n[c]=r,this.trackIds&&(u[c]=this.popStack()),this.stringParams&&(i[c]=this.popStack(),s[c]=this.popStack());return this.trackIds&&(o.ids=this.source.generateArray(u)),this.stringParams&&(o.types=this.source.generateArray(i),o.contexts=this.source.generateArray(s)),this.options.data&&(o.data="data"),this.useBlockParams&&(o.blockParams="blockParams"),o},setupHelperArgs:function(e,t,n,r){var o=this.setupParams(e,t,n,!0);return o=this.objectLiteral(o),r?(this.useRegister("options"),n.push("options"),["options=",o]):(n.push(o),"")}};for(var d="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),p=o.RESERVED_WORDS={},f=0,h=d.length;h>f;f++)p[d[f]]=!0;o.isValidJavaScriptVariableName=function(e){return!o.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},n["default"]=o},{"../base":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/base.js","../exception":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js","../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js","./code-gen":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/code-gen.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/parser.js":[function(e,t,n){"use strict";var r=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,DATA:77,pathSegments:78,SEP:79,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"DATA",79:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[78,3],[78,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(e,t,n,r,o,s){var i=s.length-1;switch(o){case 1:return s[i-1];case 2:this.$=new r.Program(s[i],null,{},r.locInfo(this._$));break;case 3:this.$=s[i];break;case 4:this.$=s[i];break;case 5:this.$=s[i];break;case 6:this.$=s[i];break;case 7:this.$=s[i];break;case 8:this.$=new r.CommentStatement(r.stripComment(s[i]),r.stripFlags(s[i],s[i]),r.locInfo(this._$));break;case 9:this.$=new r.ContentStatement(s[i],r.locInfo(this._$));break;case 10:this.$=r.prepareRawBlock(s[i-2],s[i-1],s[i],this._$);break;case 11:this.$={path:s[i-3],params:s[i-2],hash:s[i-1]};break;case 12:this.$=r.prepareBlock(s[i-3],s[i-2],s[i-1],s[i],!1,this._$);break;case 13:this.$=r.prepareBlock(s[i-3],s[i-2],s[i-1],s[i],!0,this._$);break;case 14:this.$={path:s[i-4],params:s[i-3],hash:s[i-2],blockParams:s[i-1],strip:r.stripFlags(s[i-5],s[i])};break;case 15:this.$={path:s[i-4],params:s[i-3],hash:s[i-2],blockParams:s[i-1],strip:r.stripFlags(s[i-5],s[i])};break;case 16:this.$={path:s[i-4],params:s[i-3],hash:s[i-2],blockParams:s[i-1],strip:r.stripFlags(s[i-5],s[i])};break;case 17:this.$={strip:r.stripFlags(s[i-1],s[i-1]),program:s[i]};break;case 18:var u=r.prepareBlock(s[i-2],s[i-1],s[i],s[i],!1,this._$),a=new r.Program([u],null,{},r.locInfo(this._$));a.chained=!0,this.$={strip:s[i-2].strip,program:a,chain:!0};break;case 19:this.$=s[i];break;case 20:this.$={path:s[i-1],strip:r.stripFlags(s[i-2],s[i])};break;case 21:this.$=r.prepareMustache(s[i-3],s[i-2],s[i-1],s[i-4],r.stripFlags(s[i-4],s[i]),this._$);break;case 22:this.$=r.prepareMustache(s[i-3],s[i-2],s[i-1],s[i-4],r.stripFlags(s[i-4],s[i]),this._$);break;case 23:this.$=new r.PartialStatement(s[i-3],s[i-2],s[i-1],r.stripFlags(s[i-4],s[i]),r.locInfo(this._$));break;case 24:this.$=s[i];break;case 25:this.$=s[i];break;case 26:this.$=new r.SubExpression(s[i-3],s[i-2],s[i-1],r.locInfo(this._$));break;case 27:this.$=new r.Hash(s[i],r.locInfo(this._$));break;case 28:this.$=new r.HashPair(s[i-2],s[i],r.locInfo(this._$));break;case 29:this.$=s[i-1];break;case 30:this.$=s[i];break;case 31:this.$=s[i];break;case 32:this.$=new r.StringLiteral(s[i],r.locInfo(this._$));break;case 33:this.$=new r.NumberLiteral(s[i],r.locInfo(this._$));break;case 34:this.$=new r.BooleanLiteral(s[i],r.locInfo(this._$));break;case 35:this.$=s[i];break;case 36:this.$=s[i];break;case 37:this.$=r.preparePath(!0,s[i],this._$);break;case 38:this.$=r.preparePath(!1,s[i],this._$);break;case 39:s[i-2].push({part:s[i],separator:s[i-1]}),this.$=s[i-2];break;case 40:this.$=[{part:s[i]}];break;case 41:this.$=[];break;case 42:s[i-1].push(s[i]);break;case 43:this.$=[];break;case 44:s[i-1].push(s[i]);break;case 51:this.$=[];break;case 52:s[i-1].push(s[i]);break;case 57:this.$=[];break;case 58:s[i-1].push(s[i]);break;case 63:this.$=[];break;case 64:s[i-1].push(s[i]);break;case 71:this.$=[];break;case 72:s[i-1].push(s[i]);break;case 75:this.$=[];break;case 76:s[i-1].push(s[i]);break;case 79:this.$=[];break;case 80:s[i-1].push(s[i]);break;case 83:this.$=[];break;case 84:s[i-1].push(s[i]);break;case 87:this.$=[s[i]];break;case 88:s[i-1].push(s[i]);break;case 89:this.$=[s[i]];break;case 90:s[i-1].push(s[i])}},table:[{3:1,4:2,5:[2,41],6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],46:[2,41],49:[2,41],53:[2,41]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,42],13:[2,42],14:[2,42],17:[2,42],27:[2,42],32:[2,42],37:[2,42],42:[2,42],45:[2,42],46:[2,42],49:[2,42],53:[2,42]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:31,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{4:32,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],37:[2,41],42:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{4:33,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],42:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{12:34,14:[1,18]},{18:36,54:35,58:37,59:[1,38],66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:39,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:40,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:41,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{31:[2,71],47:42,59:[2,71],66:[2,71],74:[2,71],75:[2,71],76:[2,71],77:[2,71]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34]},{21:[2,38],31:[2,38],52:[2,38],59:[2,38],62:[2,38],66:[2,38],69:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],79:[1,43]},{66:[1,30],78:44},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],79:[2,40]},{50:45,52:[2,75],59:[2,75],66:[2,75],74:[2,75],75:[2,75],76:[2,75],77:[2,75]},{23:46,36:48,37:[1,50],41:49,42:[1,51],43:47,45:[2,47]},{26:52,41:53,42:[1,51],45:[2,49]},{16:[1,54]},{31:[2,79],55:55,59:[2,79],66:[2,79],74:[2,79],75:[2,79],76:[2,79],77:[2,79]},{31:[2,35],59:[2,35],66:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35]},{31:[2,36],59:[2,36],66:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36]},{18:56,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{28:57,31:[2,51],59:[2,51],66:[2,51],69:[2,51],74:[2,51],75:[2,51],76:[2,51],77:[2,51]},{31:[2,57],33:58,59:[2,57],66:[2,57],69:[2,57],74:[2,57],75:[2,57],76:[2,57],77:[2,57]},{19:59,21:[2,43],59:[2,43],66:[2,43],74:[2,43],75:[2,43],76:[2,43],77:[2,43]},{18:63,31:[2,73],48:60,57:61,58:64,59:[1,38],63:62,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{66:[1,68]},{21:[2,37],31:[2,37],52:[2,37],59:[2,37],62:[2,37],66:[2,37],69:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],79:[1,43]},{18:63,51:69,52:[2,77],57:70,58:64,59:[1,38],63:71,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{24:72,45:[1,73]},{45:[2,48]},{4:74,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],37:[2,41],42:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{45:[2,19]},{18:75,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{4:76,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{24:77,45:[1,73]},{45:[2,50]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:63,31:[2,81],56:78,57:79,58:64,59:[1,38],63:80,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{59:[2,83],60:81,62:[2,83],66:[2,83],74:[2,83],75:[2,83],76:[2,83],77:[2,83]},{18:63,29:82,31:[2,53],57:83,58:64,59:[1,38],63:84,64:65,65:66,66:[1,67],69:[2,53],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:63,31:[2,59],34:85,57:86,58:64,59:[1,38],63:87,64:65,65:66,66:[1,67],69:[2,59],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:63,20:88,21:[2,45],57:89,58:64,59:[1,38],63:90,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{31:[1,91]},{31:[2,72],59:[2,72],66:[2,72],74:[2,72],75:[2,72],76:[2,72],77:[2,72]},{31:[2,74]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:92,66:[1,93],69:[2,27]},{21:[2,87],31:[2,87],52:[2,87],62:[2,87],66:[2,87],69:[2,87]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],67:[1,94],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],79:[2,40]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],79:[2,39]},{52:[1,95]},{52:[2,76],59:[2,76],66:[2,76],74:[2,76],75:[2,76],76:[2,76],77:[2,76]},{52:[2,78]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:96,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{36:48,37:[1,50],41:49,42:[1,51],43:98,44:97,45:[2,69]},{31:[2,63],38:99,59:[2,63],66:[2,63],69:[2,63],74:[2,63],75:[2,63],76:[2,63],77:[2,63]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,100]},{31:[2,80],59:[2,80],66:[2,80],74:[2,80],75:[2,80],76:[2,80],77:[2,80]},{31:[2,82]},{18:63,57:102,58:64,59:[1,38],61:101,62:[2,85],63:103,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{30:104,31:[2,55],68:105,69:[1,106]},{31:[2,52],59:[2,52],66:[2,52],69:[2,52],74:[2,52],75:[2,52],76:[2,52],77:[2,52]},{31:[2,54],69:[2,54]},{31:[2,61],35:107,68:108,69:[1,106]},{31:[2,58],59:[2,58],66:[2,58],69:[2,58],74:[2,58],75:[2,58],76:[2,58],77:[2,58]},{31:[2,60],69:[2,60]},{21:[1,109]},{21:[2,44],59:[2,44],66:[2,44],74:[2,44],75:[2,44],76:[2,44],77:[2,44]},{21:[2,46]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,88],31:[2,88],52:[2,88],62:[2,88],66:[2,88],69:[2,88]},{67:[1,94]},{18:63,57:110,58:64,59:[1,38],66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,111]},{45:[2,18]},{45:[2,70]},{18:63,31:[2,65],39:112,57:113,58:64,59:[1,38],63:114,64:65,65:66,66:[1,67],69:[2,65],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,115]},{59:[2,84],62:[2,84],66:[2,84],74:[2,84],75:[2,84],76:[2,84],77:[2,84]},{62:[2,86]},{31:[1,116]},{31:[2,56]},{66:[1,118],70:117},{31:[1,119]},{31:[2,62]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,67],40:120,68:121,69:[1,106]},{31:[2,64],59:[2,64],66:[2,64],69:[2,64],74:[2,64],75:[2,64],76:[2,64],77:[2,64]},{31:[2,66],69:[2,66]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,123],71:[1,122]},{66:[2,89],71:[2,89]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,124]},{31:[2,68]},{31:[2,29]},{66:[2,90],71:[2,90]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],47:[2,48],49:[2,19],53:[2,50],62:[2,74],71:[2,78],76:[2,17],80:[2,82],90:[2,46],97:[2,18],98:[2,70],103:[2,86],105:[2,56],108:[2,62],109:[2,11],121:[2,68],122:[2,29]},parseError:function(e){throw new Error(e)
},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,r=[0],o=[null],s=[],i=this.table,u="",a=0,l=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var d=this.lexer.yylloc;s.push(d);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,h,m,v,g,_,b,y,w,k={};;){if(m=r[r.length-1],this.defaultActions[m]?v=this.defaultActions[m]:((null===f||"undefined"==typeof f)&&(f=t()),v=i[m]&&i[m][f]),"undefined"==typeof v||!v.length||!v[0]){var S="";if(!c){w=[];for(_ in i[m])this.terminals_[_]&&_>2&&w.push("'"+this.terminals_[_]+"'");S=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:d,expected:w})}}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+f);switch(v[0]){case 1:r.push(f),o.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(v[1]),f=null,h?(f=h,h=null):(l=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,d=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[v[1]][1],k.$=o[o.length-b],k._$={first_line:s[s.length-(b||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(b||1)].first_column,last_column:s[s.length-1].last_column},p&&(k._$.range=[s[s.length-(b||1)].range[0],s[s.length-1].range[1]]),g=this.performAction.call(k,u,l,a,this.yy,v[1],o,s),"undefined"!=typeof g)return g;b&&(r=r.slice(0,-1*b*2),o=o.slice(0,-1*b),s=s.slice(0,-1*b)),r.push(this.productions_[v[1]][0]),o.push(k.$),s.push(k._$),y=i[r[r.length-2]][r[r.length-1]],r.push(y);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,o;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),i=0;i<s.length&&(n=this._input.match(this.rules[s[i]]),!n||t&&!(n[0].length>t[0].length)||(t=n,r=i,this.options.flex));i++);return t?(o=t[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,r){function o(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:return this.popState(),42;case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(t.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:return 66;case 24:return 66;case 25:return 79;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return t.yytext=o(1,2).replace(/\\"/g,'"'),74;case 30:return t.yytext=o(1,2).replace(/\\'/g,"'"),74;case 31:return 77;case 32:return 76;case 33:return 76;case 34:return 75;case 35:return 69;case 36:return 71;case 37:return 66;case 38:return t.yytext=o(1,2),66;case 39:return"INVALID";case 40:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,40],inclusive:!0}},e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();n["default"]=r},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/printer.js":[function(e,t,n){"use strict";function r(e){return(new o).accept(e)}function o(){this.padding=0}var s=e("./visitor")["default"];n.print=r,n.PrintVisitor=o,o.prototype=new s,o.prototype.pad=function(e){for(var t="",n=0,r=this.padding;r>n;n++)t+="  ";return t=t+e+"\n"},o.prototype.Program=function(e){var t,n,r="",o=e.body;if(e.blockParams){var s="BLOCK PARAMS: [";for(t=0,n=e.blockParams.length;n>t;t++)s+=" "+e.blockParams[t];s+=" ]",r+=this.pad(s)}for(t=0,n=o.length;n>t;t++)r+=this.accept(o[t]);return this.padding--,r},o.prototype.MustacheStatement=function(e){return this.pad("{{ "+this.SubExpression(e)+" }}")},o.prototype.BlockStatement=function(e){var t="";return t+=this.pad("BLOCK:"),this.padding++,t+=this.pad(this.SubExpression(e)),e.program&&(t+=this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--),e.inverse&&(e.program&&this.padding++,t+=this.pad("{{^}}"),this.padding++,t+=this.accept(e.inverse),this.padding--,e.program&&this.padding--),this.padding--,t},o.prototype.PartialStatement=function(e){var t="PARTIAL:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),this.pad("{{> "+t+" }}")},o.prototype.ContentStatement=function(e){return this.pad("CONTENT[ '"+e.value+"' ]")},o.prototype.CommentStatement=function(e){return this.pad("{{! '"+e.value+"' }}")},o.prototype.SubExpression=function(e){for(var t,n=e.params,r=[],o=0,s=n.length;s>o;o++)r.push(this.accept(n[o]));return n="["+r.join(", ")+"]",t=e.hash?" "+this.accept(e.hash):"",this.accept(e.path)+" "+n+t},o.prototype.PathExpression=function(e){var t=e.parts.join("/");return(e.data?"@":"")+"PATH:"+t},o.prototype.StringLiteral=function(e){return'"'+e.value+'"'},o.prototype.NumberLiteral=function(e){return"NUMBER{"+e.value+"}"},o.prototype.BooleanLiteral=function(e){return"BOOLEAN{"+e.value+"}"},o.prototype.Hash=function(e){for(var t=e.pairs,n=[],r=0,o=t.length;o>r;r++)n.push(this.accept(t[r]));return"HASH{"+n.join(", ")+"}"},o.prototype.HashPair=function(e){return e.key+"="+this.accept(e.value)}},{"./visitor":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/visitor.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/visitor.js":[function(e,t,n){"use strict";function r(){this.parents=[]}var o=e("../exception")["default"],s=e("./ast")["default"];r.prototype={constructor:r,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&(!n.type||!s[n.type]))throw new o('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new o(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;n>t;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:t!==!1?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},BlockStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash"),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")},PartialStatement:function(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},PartialExpression:function(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},n["default"]=r},{"../exception":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js","./ast":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/ast.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/whitespace-control.js":[function(e,t,n){"use strict";function r(){}function o(e,t,n){void 0===t&&(t=e.length);var r=e[t-1],o=e[t-2];return r?"ContentStatement"===r.type?(o||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:n}function s(e,t,n){void 0===t&&(t=-1);var r=e[t+1],o=e[t+2];return r?"ContentStatement"===r.type?(o||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:n}function i(e,t,n){var r=e[null==t?0:t+1];if(r&&"ContentStatement"===r.type&&(n||!r.rightStripped)){var o=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==o}}function u(e,t,n){var r=e[null==t?e.length-1:t-1];if(r&&"ContentStatement"===r.type&&(n||!r.leftStripped)){var o=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==o,r.leftStripped}}var a=e("./visitor")["default"];r.prototype=new a,r.prototype.Program=function(e){var t=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,r=0,a=n.length;a>r;r++){var l=n[r],c=this.accept(l);if(c){var d=o(n,r,t),p=s(n,r,t),f=c.openStandalone&&d,h=c.closeStandalone&&p,m=c.inlineStandalone&&d&&p;c.close&&i(n,r,!0),c.open&&u(n,r,!0),m&&(i(n,r),u(n,r)&&"PartialStatement"===l.type&&(l.indent=/([ \t]+$)/.exec(n[r-1].original)[1])),f&&(i((l.program||l.inverse).body),u(n,r)),h&&(i(n,r),u((l.inverse||l.program).body))}}return e},r.prototype.BlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,r=n,a=n;if(n&&n.chained)for(r=n.body[0].program;a.chained;)a=a.body[a.body.length-1].program;var l={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:s(t.body),closeStandalone:o((r||t).body)};if(e.openStrip.close&&i(t.body,null,!0),n){var c=e.inverseStrip;c.open&&u(t.body,null,!0),c.close&&i(r.body,null,!0),e.closeStrip.open&&u(a.body,null,!0),o(t.body)&&s(r.body)&&(u(t.body),i(r.body))}else e.closeStrip.open&&u(t.body,null,!0);return l},r.prototype.MustacheStatement=function(e){return e.strip},r.prototype.PartialStatement=r.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},n["default"]=r},{"./visitor":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/visitor.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js":[function(e,t,n){"use strict";function r(e,t){var n,r,s=t&&t.loc;s&&(n=s.start.line,r=s.start.column,e+=" - "+n+":"+r);for(var i=Error.prototype.constructor.call(this,e),u=0;u<o.length;u++)this[o[u]]=i[o[u]];s&&(this.lineNumber=n,this.column=r)}var o=["description","fileName","lineNumber","message","name","number","stack"];r.prototype=new Error,n["default"]=r},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/runtime.js":[function(e,t,n){"use strict";function r(e){var t=e&&e[0]||1,n=p;if(t!==n){if(n>t){var r=f[n],o=f[t];throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+o+").")}throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){if(!t)throw new d("No environment passed to template");if(!e||!e.main)throw new d("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,r,o){o.hash&&(r=c.extend({},r,o.hash)),n=t.VM.resolvePartial.call(this,n,r,o);var s=t.VM.invokePartial.call(this,n,r,o);if(null==s&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),s=o.partials[o.name](r,o)),null!=s){if(o.indent){for(var i=s.split("\n"),u=0,a=i.length;a>u&&(i[u]||u+1!==a);u++)i[u]=o.indent+i[u];s=i.join("\n")}return s}throw new d("The partial "+o.name+" could not be compiled when running in runtime-only mode")},r={strict:function(e,t){if(!(t in e))throw new d('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,r=0;n>r;r++)if(e[r]&&null!=e[r][t])return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:c.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n,r,o){var i=this.programs[e],u=this.fn(e);return t||o||r||n?i=s(this,e,u,t,n,r,o):i||(i=this.programs[e]=s(this,e,u)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=c.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},o=function(t,n){n=n||{};var s=n.data;o._setup(n),!n.partial&&e.useData&&(s=l(t,s));var i,u=e.useBlockParams?[]:void 0;return e.useDepths&&(i=n.depths?[t].concat(n.depths):[t]),e.main.call(r,t,r.helpers,r.partials,s,u,i)};return o.isTop=!0,o._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)))},o._child=function(t,n,o,i){if(e.useBlockParams&&!o)throw new d("must pass block params");if(e.useDepths&&!i)throw new d("must pass parent depths");return s(r,t,e[t],n,0,o,i)},o}function s(e,t,n,r,o,s,i){var u=function(t,o){return o=o||{},n.call(e,t,e.helpers,e.partials,o.data||r,s&&[o.blockParams].concat(s),i&&[t].concat(i))};return u.program=t,u.depth=i?i.length:0,u.blockParams=o||0,u}function i(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e=n.partials[n.name],e}function u(e,t,n){if(n.partial=!0,void 0===e)throw new d("The partial "+n.name+" could not be found");return e instanceof Function?e(t,n):void 0}function a(){return""}function l(e,t){return t&&"root"in t||(t=t?h(t):{},t.root=e),t}var c=e("./utils"),d=e("./exception")["default"],p=e("./base").COMPILER_REVISION,f=e("./base").REVISION_CHANGES,h=e("./base").createFrame;n.checkRevision=r,n.template=o,n.program=s,n.resolvePartial=i,n.invokePartial=u,n.noop=a},{"./base":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/base.js","./exception":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/safe-string.js":[function(e,t,n){"use strict";function r(e){this.string=e}r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},n["default"]=r},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js":[function(e,t,n){"use strict";function r(e){return c[e]}function o(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function s(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function i(e){return e&&e.toHTML?e.toHTML():null==e?"":e?(e=""+e,p.test(e)?e.replace(d,r):e):e+""}function u(e){return e||0===e?m(e)&&0===e.length?!0:!1:!0}function a(e,t){return e.path=t,e}function l(e,t){return(e?e+".":"")+t}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},d=/[&<>"'`]/g,p=/[&<>"'`]/;n.extend=o;var f=Object.prototype.toString;n.toString=f;var h=function(e){return"function"==typeof e};h(/x/)&&(h=function(e){return"function"==typeof e&&"[object Function]"===f.call(e)});var h;n.isFunction=h;var m=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===f.call(e):!1};n.isArray=m,n.indexOf=s,n.escapeExpression=i,n.isEmpty=u,n.blockParams=a,n.appendContextPath=l},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/lib/index.js":[function(e,t){var n=e("../dist/cjs/handlebars")["default"];n.Visitor=e("../dist/cjs/handlebars/compiler/visitor")["default"];var r=e("../dist/cjs/handlebars/compiler/printer");if(n.PrintVisitor=r.PrintVisitor,n.print=r.print,t.exports=n,"undefined"!=typeof e&&e.extensions){var o=function(t,r){var o=e("fs"),s=o.readFileSync(r,"utf8");t.exports=n.compile(s)};e.extensions[".handlebars"]=o,e.extensions[".hbs"]=o}},{"../dist/cjs/handlebars":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars.js","../dist/cjs/handlebars/compiler/printer":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/printer.js","../dist/cjs/handlebars/compiler/visitor":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/compiler/visitor.js",fs:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/lib/_empty.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map.js":[function(e,t,n){n.SourceMapGenerator=e("./source-map/source-map-generator").SourceMapGenerator,n.SourceMapConsumer=e("./source-map/source-map-consumer").SourceMapConsumer,n.SourceNode=e("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/source-map-consumer.js","./source-map/source-map-generator":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/source-map-generator.js","./source-map/source-node":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/source-node.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/array-set.js":[function(e,t){if("function"!=typeof n)var n=e("amdefine")(t,e);n(function(e,t){function n(){this._array=[],this._set={}}var r=e("./util");n.fromArray=function(e,t){for(var r=new n,o=0,s=e.length;s>o;o++)r.add(e[o],t);return r},n.prototype.add=function(e,t){var n=this.has(e),o=this._array.length;(!n||t)&&this._array.push(e),n||(this._set[r.toSetString(e)]=o)},n.prototype.has=function(e){return Object.prototype.hasOwnProperty.call(this._set,r.toSetString(e))},n.prototype.indexOf=function(e){if(this.has(e))return this._set[r.toSetString(e)];throw new Error('"'+e+'" is not in the set.')},n.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},n.prototype.toArray=function(){return this._array.slice()},t.ArraySet=n})},{"./util":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/util.js",amdefine:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/base64-vlq.js":[function(e,t){if("function"!=typeof n)var n=e("amdefine")(t,e);n(function(e,t){function n(e){return 0>e?(-e<<1)+1:(e<<1)+0}function r(e){var t=1===(1&e),n=e>>1;return t?-n:n}var o=e("./base64"),s=5,i=1<<s,u=i-1,a=i;t.encode=function(e){var t,r="",i=n(e);do t=i&u,i>>>=s,i>0&&(t|=a),r+=o.encode(t);while(i>0);return r},t.decode=function(e,t){var n,i,l=0,c=e.length,d=0,p=0;do{if(l>=c)throw new Error("Expected more digits in base 64 VLQ value.");i=o.decode(e.charAt(l++)),n=!!(i&a),i&=u,d+=i<<p,p+=s}while(n);t.value=r(d),t.rest=e.slice(l)}})},{"./base64":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/base64.js",amdefine:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/base64.js":[function(e,t){if("function"!=typeof n)var n=e("amdefine")(t,e);n(function(e,t){var n={},r={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(e,t){n[e]=t,r[t]=e}),t.encode=function(e){if(e in r)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){if(e in n)return n[e];throw new TypeError("Not a valid base 64 digit: "+e)}})},{amdefine:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/binary-search.js":[function(e,t){if("function"!=typeof n)var n=e("amdefine")(t,e);n(function(e,t){function n(e,t,r,o,s){var i=Math.floor((t-e)/2)+e,u=s(r,o[i],!0);return 0===u?i:u>0?t-i>1?n(i,t,r,o,s):i:i-e>1?n(e,i,r,o,s):0>e?-1:e}t.search=function(e,t,r){return 0===t.length?-1:n(-1,t.length,e,t,r)}})},{amdefine:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/mapping-list.js":[function(e,t){if("function"!=typeof n)var n=e("amdefine")(t,e);n(function(e,t){function n(e,t){var n=e.generatedLine,r=t.generatedLine,s=e.generatedColumn,i=t.generatedColumn;return r>n||r==n&&i>=s||o.compareByGeneratedPositions(e,t)<=0}function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}var o=e("./util");r.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},r.prototype.add=function(e){n(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(o.compareByGeneratedPositions),this._sorted=!0),this._array},t.MappingList=r})},{"./util":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/util.js",amdefine:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/source-map-consumer.js":[function(e,t){if("function"!=typeof n)var n=e("amdefine")(t,e);n(function(e,t){function n(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),o=r.getArg(t,"sources"),i=r.getArg(t,"names",[]),u=r.getArg(t,"sourceRoot",null),a=r.getArg(t,"sourcesContent",null),l=r.getArg(t,"mappings"),c=r.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);o=o.map(r.normalize),this._names=s.fromArray(i,!0),this._sources=s.fromArray(o,!0),this.sourceRoot=u,this.sourcesContent=a,this._mappings=l,this.file=c}var r=e("./util"),o=e("./binary-search"),s=e("./array-set").ArraySet,i=e("./base64-vlq");n.fromSourceMap=function(e){var t=Object.create(n.prototype);return t._names=s.fromArray(e._names.toArray(),!0),t._sources=s.fromArray(e._sources.toArray(),!0),t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file,t.__generatedMappings=e._mappings.toArray().slice(),t.__originalMappings=e._mappings.toArray().slice().sort(r.compareByOriginalPositions),t},n.prototype._version=3,Object.defineProperty(n.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?r.join(this.sourceRoot,e):e},this)}}),n.prototype.__generatedMappings=null,Object.defineProperty(n.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),n.prototype.__originalMappings=null,Object.defineProperty(n.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),n.prototype._nextCharIsMappingSeparator=function(e){var t=e.charAt(0);return";"===t||","===t},n.prototype._parseMappings=function(e){for(var t,n=1,o=0,s=0,u=0,a=0,l=0,c=e,d={};c.length>0;)if(";"===c.charAt(0))n++,c=c.slice(1),o=0;else if(","===c.charAt(0))c=c.slice(1);else{if(t={},t.generatedLine=n,i.decode(c,d),t.generatedColumn=o+d.value,o=t.generatedColumn,c=d.rest,c.length>0&&!this._nextCharIsMappingSeparator(c)){if(i.decode(c,d),t.source=this._sources.at(a+d.value),a+=d.value,c=d.rest,0===c.length||this._nextCharIsMappingSeparator(c))throw new Error("Found a source, but no line and column");if(i.decode(c,d),t.originalLine=s+d.value,s=t.originalLine,t.originalLine+=1,c=d.rest,0===c.length||this._nextCharIsMappingSeparator(c))throw new Error("Found a source and line, but no column");i.decode(c,d),t.originalColumn=u+d.value,u=t.originalColumn,c=d.rest,c.length>0&&!this._nextCharIsMappingSeparator(c)&&(i.decode(c,d),t.name=this._names.at(l+d.value),l+=d.value,c=d.rest)}this.__generatedMappings.push(t),"number"==typeof t.originalLine&&this.__originalMappings.push(t)}this.__generatedMappings.sort(r.compareByGeneratedPositions),this.__originalMappings.sort(r.compareByOriginalPositions)},n.prototype._findMapping=function(e,t,n,r,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return o.search(e,t,s)},n.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},n.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositions);if(n>=0){var o=this._generatedMappings[n];if(o.generatedLine===t.generatedLine){var s=r.getArg(o,"source",null);return null!=s&&null!=this.sourceRoot&&(s=r.join(this.sourceRoot,s)),{source:s,line:r.getArg(o,"originalLine",null),column:r.getArg(o,"originalColumn",null),name:r.getArg(o,"name",null)}}}return{source:null,line:null,column:null,name:null}},n.prototype.sourceContentFor=function(e){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=r.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var t;if(null!=this.sourceRoot&&(t=r.urlParse(this.sourceRoot))){var n=e.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!t.path||"/"==t.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}throw new Error('"'+e+'" is not in the SourceMap.')},n.prototype.generatedPositionFor=function(e){var t={source:r.getArg(e,"source"),originalLine:r.getArg(e,"line"),originalColumn:r.getArg(e,"column")};null!=this.sourceRoot&&(t.source=r.relative(this.sourceRoot,t.source));var n=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions);if(n>=0){var o=this._originalMappings[n];return{line:r.getArg(o,"generatedLine",null),column:r.getArg(o,"generatedColumn",null),lastColumn:r.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},n.prototype.allGeneratedPositionsFor=function(e){var t={source:r.getArg(e,"source"),originalLine:r.getArg(e,"line"),originalColumn:1/0};null!=this.sourceRoot&&(t.source=r.relative(this.sourceRoot,t.source));var n=[],o=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions);if(o>=0)for(var s=this._originalMappings[o];s&&s.originalLine===t.originalLine;)n.push({line:r.getArg(s,"generatedLine",null),column:r.getArg(s,"generatedColumn",null),lastColumn:r.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[--o];
return n.reverse()},n.GENERATED_ORDER=1,n.ORIGINAL_ORDER=2,n.prototype.eachMapping=function(e,t,o){var s,i=t||null,u=o||n.GENERATED_ORDER;switch(u){case n.GENERATED_ORDER:s=this._generatedMappings;break;case n.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(e){var t=e.source;return null!=t&&null!=a&&(t=r.join(a,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,i)},t.SourceMapConsumer=n})},{"./array-set":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/array-set.js","./base64-vlq":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/base64-vlq.js","./binary-search":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/binary-search.js","./util":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/util.js",amdefine:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/source-map-generator.js":[function(e,t){if("function"!=typeof n)var n=e("amdefine")(t,e);n(function(e,t){function n(e){e||(e={}),this._file=o.getArg(e,"file",null),this._sourceRoot=o.getArg(e,"sourceRoot",null),this._skipValidation=o.getArg(e,"skipValidation",!1),this._sources=new s,this._names=new s,this._mappings=new i,this._sourcesContents=null}var r=e("./base64-vlq"),o=e("./util"),s=e("./array-set").ArraySet,i=e("./mapping-list").MappingList;n.prototype._version=3,n.fromSourceMap=function(e){var t=e.sourceRoot,r=new n({file:e.file,sourceRoot:t});return e.eachMapping(function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(n.source=e.source,null!=t&&(n.source=o.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(n.name=e.name)),r.addMapping(n)}),e.sources.forEach(function(t){var n=e.sourceContentFor(t);null!=n&&r.setSourceContent(t,n)}),r},n.prototype.addMapping=function(e){var t=o.getArg(e,"generated"),n=o.getArg(e,"original",null),r=o.getArg(e,"source",null),s=o.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,s),null==r||this._sources.has(r)||this._sources.add(r),null==s||this._names.has(s)||this._names.add(s),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:s})},n.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=o.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[o.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[o.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},n.prototype.applySourceMap=function(e,t,n){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var i=this._sourceRoot;null!=i&&(r=o.relative(i,r));var u=new s,a=new s;this._mappings.unsortedForEach(function(t){if(t.source===r&&null!=t.originalLine){var s=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=s.source&&(t.source=s.source,null!=n&&(t.source=o.join(n,t.source)),null!=i&&(t.source=o.relative(i,t.source)),t.originalLine=s.line,t.originalColumn=s.column,null!=s.name&&(t.name=s.name))}var l=t.source;null==l||u.has(l)||u.add(l);var c=t.name;null==c||a.has(c)||a.add(c)},this),this._sources=u,this._names=a,e.sources.forEach(function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=o.join(n,t)),null!=i&&(t=o.relative(i,t)),this.setSourceContent(t,r))},this)},n.prototype._validateMapping=function(e,t,n,r){if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!n&&!r||e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},n.prototype._serializeMappings=function(){for(var e,t=0,n=1,s=0,i=0,u=0,a=0,l="",c=this._mappings.toArray(),d=0,p=c.length;p>d;d++){if(e=c[d],e.generatedLine!==n)for(t=0;e.generatedLine!==n;)l+=";",n++;else if(d>0){if(!o.compareByGeneratedPositions(e,c[d-1]))continue;l+=","}l+=r.encode(e.generatedColumn-t),t=e.generatedColumn,null!=e.source&&(l+=r.encode(this._sources.indexOf(e.source)-a),a=this._sources.indexOf(e.source),l+=r.encode(e.originalLine-1-i),i=e.originalLine-1,l+=r.encode(e.originalColumn-s),s=e.originalColumn,null!=e.name&&(l+=r.encode(this._names.indexOf(e.name)-u),u=this._names.indexOf(e.name)))}return l},n.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=o.relative(t,e));var n=o.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},n.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},n.prototype.toString=function(){return JSON.stringify(this)},t.SourceMapGenerator=n})},{"./array-set":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/array-set.js","./base64-vlq":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/base64-vlq.js","./mapping-list":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/mapping-list.js","./util":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/util.js",amdefine:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/source-node.js":[function(e,t){if("function"!=typeof n)var n=e("amdefine")(t,e);n(function(e,t){function n(e,t,n,r,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==o?null:o,this[u]=!0,null!=r&&this.add(r)}var r=e("./source-map-generator").SourceMapGenerator,o=e("./util"),s=/(\r?\n)/,i=10,u="$$$isSourceNode$$$";n.fromStringWithSourceMap=function(e,t,r){function i(e,t){if(null===e||void 0===e.source)u.add(t);else{var s=r?o.join(r,e.source):e.source;u.add(new n(e.originalLine,e.originalColumn,s,t,e.name))}}var u=new n,a=e.split(s),l=function(){var e=a.shift(),t=a.shift()||"";return e+t},c=1,d=0,p=null;return t.eachMapping(function(e){if(null!==p){if(!(c<e.generatedLine)){var t=a[0],n=t.substr(0,e.generatedColumn-d);return a[0]=t.substr(e.generatedColumn-d),d=e.generatedColumn,i(p,n),void(p=e)}var n="";i(p,l()),c++,d=0}for(;c<e.generatedLine;)u.add(l()),c++;if(d<e.generatedColumn){var t=a[0];u.add(t.substr(0,e.generatedColumn)),a[0]=t.substr(e.generatedColumn),d=e.generatedColumn}p=e},this),a.length>0&&(p&&i(p,l()),u.add(a.join(""))),t.sources.forEach(function(e){var n=t.sourceContentFor(e);null!=n&&(null!=r&&(e=o.join(r,e)),u.setSourceContent(e,n))}),u},n.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[u]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},n.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[u]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},n.prototype.walk=function(e){for(var t,n=0,r=this.children.length;r>n;n++)t=this.children[n],t[u]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},n.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;r-1>n;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},n.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[u]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},n.prototype.setSourceContent=function(e,t){this.sourceContents[o.toSetString(e)]=t},n.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;n>t;t++)this.children[t][u]&&this.children[t].walkSourceContents(e);for(var r=Object.keys(this.sourceContents),t=0,n=r.length;n>t;t++)e(o.fromSetString(r[t]),this.sourceContents[r[t]])},n.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},n.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new r(e),o=!1,s=null,u=null,a=null,l=null;return this.walk(function(e,r){t.code+=e,null!==r.source&&null!==r.line&&null!==r.column?((s!==r.source||u!==r.line||a!==r.column||l!==r.name)&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name}),s=r.source,u=r.line,a=r.column,l=r.name,o=!0):o&&(n.addMapping({generated:{line:t.line,column:t.column}}),s=null,o=!1);for(var c=0,d=e.length;d>c;c++)e.charCodeAt(c)===i?(t.line++,t.column=0,c+1===d?(s=null,o=!1):o&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name})):t.column++}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:t.code,map:n}},t.SourceNode=n})},{"./source-map-generator":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/source-map-generator.js","./util":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/util.js",amdefine:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/lib/source-map/util.js":[function(e,t){if("function"!=typeof n)var n=e("amdefine")(t,e);n(function(e,t){function n(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')}function r(e){var t=e.match(f);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var t=e,n=r(e);if(n){if(!n.path)return e;t=n.path}for(var s,i="/"===t.charAt(0),u=t.split(/\/+/),a=0,l=u.length-1;l>=0;l--)s=u[l],"."===s?u.splice(l,1):".."===s?a++:a>0&&(""===s?(u.splice(l+1,a),a=0):(u.splice(l,2),a--));return t=u.join("/"),""===t&&(t=i?"/":"."),n?(n.path=t,o(n)):t}function i(e,t){""===e&&(e="."),""===t&&(t=".");var n=r(t),i=r(e);if(i&&(e=i.path||"/"),n&&!n.scheme)return i&&(n.scheme=i.scheme),o(n);if(n||t.match(h))return t;if(i&&!i.host&&!i.path)return i.host=t,o(i);var u="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return i?(i.path=u,o(i)):u}function u(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");var n=r(e);return"/"==t.charAt(0)&&n&&"/"==n.path?t.slice(1):0===t.indexOf(e+"/")?t.substr(e.length+1):t}function a(e){return"$"+e}function l(e){return e.substr(1)}function c(e,t){var n=e||"",r=t||"";return(n>r)-(r>n)}function d(e,t,n){var r;return(r=c(e.source,t.source))?r:(r=e.originalLine-t.originalLine)?r:(r=e.originalColumn-t.originalColumn,r||n?r:(r=c(e.name,t.name))?r:(r=e.generatedLine-t.generatedLine,r?r:e.generatedColumn-t.generatedColumn))}function p(e,t,n){var r;return(r=e.generatedLine-t.generatedLine)?r:(r=e.generatedColumn-t.generatedColumn,r||n?r:(r=c(e.source,t.source))?r:(r=e.originalLine-t.originalLine)?r:(r=e.originalColumn-t.originalColumn,r?r:c(e.name,t.name)))}t.getArg=n;var f=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,h=/^data:.+\,.+$/;t.urlParse=r,t.urlGenerate=o,t.normalize=s,t.join=i,t.relative=u,t.toSetString=a,t.fromSetString=l,t.compareByOriginalPositions=d,t.compareByGeneratedPositions=p})},{amdefine:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js":[function(e,t){(function(n,r){"use strict";function o(t,o){function s(e){var t,n;for(t=0;e[t];t+=1)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function i(e,t){var n;return e&&"."===e.charAt(0)&&t&&(n=t.split("/"),n=n.slice(0,n.length-1),n=n.concat(e.split("/")),s(n),e=n.join("/")),e}function u(e){return function(t){return i(t,e)}}function a(e){function t(t){h[e]=t}return t.fromText=function(){throw new Error("amdefine does not implement load.fromText")},t}function l(e,n,s){var i,u,a,l;if(e)u=h[e]={},a={id:e,uri:r,exports:u},i=d(o,u,a,e);else{if(m)throw new Error("amdefine with no module ID cannot be called more than once per file.");m=!0,u=t.exports,a=t,i=d(o,u,a,t.id)}n&&(n=n.map(function(e){return i(e)})),l="function"==typeof s?s.apply(a.exports,n):s,void 0!==l&&(a.exports=l,e&&(h[e]=a.exports))}function c(e,t,n){Array.isArray(e)?(n=t,t=e,e=void 0):"string"!=typeof e&&(n=e,e=t=void 0),t&&!Array.isArray(t)&&(n=t,t=void 0),t||(t=["require","exports","module"]),e?f[e]=[e,t,n]:l(e,t,n)}var d,p,f={},h={},m=!1,v=e("path");return d=function(e,t,r,o){function s(s,i){return"string"==typeof s?p(e,t,r,s,o):(s=s.map(function(n){return p(e,t,r,n,o)}),void n.nextTick(function(){i.apply(null,s)}))}return s.toUrl=function(e){return 0===e.indexOf(".")?i(e,v.dirname(r.filename)):e},s},o=o||function(){return t.require.apply(t,arguments)},p=function(e,t,n,r,o){var s,c,m=r.indexOf("!"),v=r;if(-1===m){if(r=i(r,o),"require"===r)return d(e,t,n,o);if("exports"===r)return t;if("module"===r)return n;if(h.hasOwnProperty(r))return h[r];if(f[r])return l.apply(null,f[r]),h[r];if(e)return e(v);throw new Error("No module with ID: "+r)}return s=r.substring(0,m),r=r.substring(m+1,r.length),c=p(e,t,n,s,o),r=c.normalize?c.normalize(r,u(o)):i(r,o),h[r]?h[r]:(c.load(r,d(e,t,n,o),a(r),{}),h[r])},c.require=function(e){return h[e]?h[e]:f[e]?(l.apply(null,f[e]),h[e]):void 0},c.amd={},c}t.exports=o}).call(this,e("_process"),"/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js")},{_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js",path:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/path-browserify/index.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js":[function(e,t,n){(function(e){(function(){function r(e,t){if(e!==t){var n=e===e,r=t===t;if(e>t||!n||"undefined"==typeof e&&r)return 1;if(t>e||!r||"undefined"==typeof t&&n)return-1}return 0}function o(e,t,n){if(t!==t)return v(e,n);for(var r=(n||0)-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}function s(e){return"function"==typeof e||!1}function i(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function u(e){return"string"==typeof e?e:null==e?"":e+""}function a(e){return e.charCodeAt(0)}function l(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function c(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function d(e,t){return r(e.criteria,t.criteria)||e.index-t.index}function p(e,t){for(var n=-1,o=e.criteria,s=t.criteria,i=o.length;++n<i;){var u=r(o[n],s[n]);if(u)return u}return e.index-t.index}function f(e){return Ht[e]}function h(e){return $t[e]}function m(e){return"\\"+Vt[e]}function v(e,t,n){for(var r=e.length,o=n?t||r:(t||0)-1;n?o--:++o<r;){var s=e[o];if(s!==s)return o}return-1}function g(e){return e&&"object"==typeof e||!1}function _(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function b(e,t){for(var n=-1,r=e.length,o=-1,s=[];++n<r;)e[n]===t&&(e[n]=Y,s[++o]=n);return s}function y(e,t){for(var n,r=-1,o=e.length,s=-1,i=[];++r<o;){var u=e[r],a=t?t(u,r,e):u;r&&n===a||(n=a,i[++s]=u)}return i}function w(e){for(var t=-1,n=e.length;++t<n&&_(e.charCodeAt(t)););return t}function k(e){for(var t=e.length;t--&&_(e.charCodeAt(t)););return t}function S(e){return Yt[e]}function x(e){function t(e){if(g(e)&&!Xu(e)&&!(e instanceof Q)){if(e instanceof _)return e;if(nu.call(e,"__chain__")&&nu.call(e,"__wrapped__"))return Mr(e)}return new _(e)}function n(){}function _(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Q(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Iu,this.__views__=null}function tt(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,r=new Q(this.__wrapped__);return r.__actions__=e?Zt(e):null,r.__dir__=this.__dir__,r.__dropCount__=this.__dropCount__,r.__filtered__=this.__filtered__,r.__iteratees__=t?Zt(t):null,r.__takeCount__=this.__takeCount__,r.__views__=n?Zt(n):null,r}function rt(){if(this.__filtered__){var e=new Q(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Ht(){var e=this.__wrapped__.value();if(!Xu(e))return Qn(e,this.__actions__);var t=this.__dir__,n=0>t,r=yr(0,e.length,this.__views__),o=r.start,s=r.end,i=s-o,u=this.__dropCount__,a=ju(i,this.__takeCount__),l=n?s:o-1,c=this.__iteratees__,d=c?c.length:0,p=0,f=[];e:for(;i--&&a>p;){l+=t;for(var h=-1,m=e[l];++h<d;){var v=c[h],g=v.iteratee,_=g(m,l,e),b=v.type;if(b==F)m=_;else if(!_){if(b==B)continue e;break e}}u?u--:f[p++]=m}return f}function $t(){this.__data__={}}function Yt(e){return this.has(e)&&delete this.__data__[e]}function Gt(e){return"__proto__"==e?E:this.__data__[e]}function Vt(e){return"__proto__"!=e&&nu.call(this.__data__,e)}function zt(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Jt(e){var t=e?e.length:0;for(this.data={hash:ku(null),set:new mu};t--;)this.push(e[t])}function Kt(e,t){var n=e.data,r="string"==typeof t||Ts(t)?n.set.has(t):n.hash[t];return r?0:-1}function Qt(e){var t=this.data;"string"==typeof e||Ts(e)?t.set.add(e):t.hash[e]=!0}function Zt(e,t){var n=-1,r=e.length;for(t||(t=Fi(r));++n<r;)t[n]=e[n];return t}function en(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function tn(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function nn(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function rn(e,t){for(var n=-1,r=e.length,o=-1,s=[];++n<r;){var i=e[n];t(i,n,e)&&(s[++o]=i)}return s}function on(e,t){for(var n=-1,r=e.length,o=Fi(r);++n<r;)o[n]=t(e[n],n,e);return o}function sn(e){for(var t=-1,n=e.length,r=Uu;++t<n;){var o=e[t];o>r&&(r=o)}return r}function un(e){for(var t=-1,n=e.length,r=Iu;++t<n;){var o=e[t];r>o&&(r=o)}return r}function an(e,t,n,r){var o=-1,s=e.length;for(r&&s&&(n=e[++o]);++o<s;)n=t(n,e[o],o,e);return n}function ln(e,t,n,r){var o=e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function cn(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function dn(e,t){return"undefined"==typeof e?t:e}function pn(e,t,n,r){return"undefined"!=typeof e&&nu.call(r,n)?e:t}function fn(e,t,n){var r=ra(t);if(!n)return mn(t,e,r);for(var o=-1,s=r.length;++o<s;){var i=r[o],u=e[i],a=n(u,t[i],i,e,t);(a===a?a===u:u!==u)&&("undefined"!=typeof u||i in e)||(e[i]=a)}return e}function hn(e,t){for(var n=-1,r=e.length,o=Ar(r),s=t.length,i=Fi(s);++n<s;){var u=t[n];o?(u=parseFloat(u),i[n]=Er(u,r)?e[u]:E):i[n]=e[u]}return i}function mn(e,t,n){n||(n=t,t={});for(var r=-1,o=n.length;++r<o;){var s=n[r];t[s]=e[s]}return t}function vn(e,t){for(var n=-1,r=t.length;++n<r;){var o=t[n];e[o]=fr(e[o],A,e)}return e}function gn(e,t,n){var r=typeof e;return"function"==r?"undefined"!=typeof t&&xr(e)?er(e,t,n):e:null==e?Ci:"object"==r?qn(e):"undefined"==typeof t?$n(e+""):Bn(e+"",t)}function _n(e,t,n,r,o,s,i){var u;if(n&&(u=o?n(e,r,o):n(e)),"undefined"!=typeof u)return u;if(!Ts(e))return e;var a=Xu(e);if(a){if(u=wr(e),!t)return Zt(e,u)}else{var l=ou.call(e),c=l==K;if(l!=Z&&l!=G&&(!c||o))return Bt[l]?Sr(e,l,t):o?e:{};if(u=kr(c?{}:e),!t)return mn(e,u,ra(e))}s||(s=[]),i||(i=[]);for(var d=s.length;d--;)if(s[d]==e)return i[d];return s.push(e),i.push(u),(a?en:Un)(e,function(r,o){u[o]=_n(r,t,n,o,e,s,i)}),u}function bn(e,t,n,r){if("function"!=typeof e)throw new Ki($);return vu(function(){e.apply(E,Wn(n,r))},t)}function yn(e,t){var n=e?e.length:0,r=[];if(!n)return r;var s=-1,i=br(),u=i==o,a=u&&t.length>=200?Hu(t):null,l=t.length;a&&(i=Kt,u=!1,t=a);e:for(;++s<n;){var c=e[s];if(u&&c===c){for(var d=l;d--;)if(t[d]===c)continue e;r.push(c)}else i(t,c)<0&&r.push(c)}return r}function wn(e,t){var n=e?e.length:0;if(!Ar(n))return Un(e,t);for(var r=-1,o=Nr(e);++r<n&&t(o[r],r,o)!==!1;);return e}function kn(e,t){var n=e?e.length:0;if(!Ar(n))return In(e,t);for(var r=Nr(e);n--&&t(r[n],n,r)!==!1;);return e}function Sn(e,t){var n=!0;return wn(e,function(e,r,o){return n=!!t(e,r,o)}),n}function xn(e,t,n,r){var o=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>o?0:o+n),r="undefined"==typeof r||r>o?o:+r||0,0>r&&(r+=o),o=n>r?0:r>>>0,n>>>=0;o>n;)e[n++]=t;return e}function En(e,t){var n=[];return wn(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}function jn(e,t,n,r){var o;return n(e,function(e,n,s){return t(e,n,s)?(o=r?n:e,!1):void 0}),o}function An(e,t,n,r){for(var o=(r||0)-1,s=e.length,i=-1,u=[];++o<s;){var a=e[o];if(g(a)&&Ar(a.length)&&(Xu(a)||ks(a))){t&&(a=An(a,t,n));var l=-1,c=a.length;for(u.length+=c;++l<c;)u[++i]=a[l]}else n||(u[++i]=a)}return u}function On(e,t,n){for(var r=-1,o=Nr(e),s=n(e),i=s.length;++r<i;){var u=s[r];if(t(o[u],u,o)===!1)break}return e}function Tn(e,t,n){for(var r=Nr(e),o=n(e),s=o.length;s--;){var i=o[s];if(t(r[i],i,r)===!1)break}return e}function Cn(e,t){return On(e,t,Xs)}function Un(e,t){return On(e,t,ra)}function In(e,t){return Tn(e,t,ra)}function Dn(e,t){for(var n=-1,r=t.length,o=-1,s=[];++n<r;){var i=t[n];ea(e[i])&&(s[++o]=i)}return s}function Rn(e,t,n){var r=-1,o="function"==typeof t,s=e?e.length:0,i=Ar(s)?Fi(s):[];return wn(e,function(e){var s=o?t:null!=e&&e[t];i[++r]=s?s.apply(e,n):E}),i}function Ln(e,t,n,r,o,s){if(e===t)return 0!==e||1/e==1/t;var i=typeof e,u=typeof t;return"function"!=i&&"object"!=i&&"function"!=u&&"object"!=u||null==e||null==t?e!==e&&t!==t:Nn(e,t,Ln,n,r,o,s)}function Nn(e,t,n,r,o,s,i){var u=Xu(e),a=Xu(t),l=V,c=V;u||(l=ou.call(e),l==G?l=Z:l!=Z&&(u=Ms(e))),a||(c=ou.call(t),c==G?c=Z:c!=Z&&(a=Ms(t)));var d=l==Z,p=c==Z,f=l==c;if(f&&!u&&!d)return mr(e,t,l);var h=d&&nu.call(e,"__wrapped__"),m=p&&nu.call(t,"__wrapped__");if(h||m)return n(h?e.value():e,m?t.value():t,r,o,s,i);if(!f)return!1;s||(s=[]),i||(i=[]);for(var v=s.length;v--;)if(s[v]==e)return i[v]==t;s.push(e),i.push(t);var g=(u?hr:vr)(e,t,n,r,o,s,i);return s.pop(),i.pop(),g}function Mn(e,t,n,r,o){var s=t.length;if(null==e)return!s;for(var i=-1,u=!o;++i<s;)if(u&&r[i]?n[i]!==e[t[i]]:!nu.call(e,t[i]))return!1;for(i=-1;++i<s;){var a=t[i];if(u&&r[i])var l=nu.call(e,a);else{var c=e[a],d=n[i];l=o?o(c,d,a):E,"undefined"==typeof l&&(l=Ln(d,c,o,!0))}if(!l)return!1}return!0}function Pn(e,t){var n=[];return wn(e,function(e,r,o){n.push(t(e,r,o))}),n}function qn(e){var t=ra(e),n=t.length;if(1==n){var r=t[0],o=e[r];if(Or(o))return function(e){return null!=e&&e[r]===o&&nu.call(e,r)}}for(var s=Fi(n),i=Fi(n);n--;)o=e[t[n]],s[n]=o,i[n]=Or(o);return function(e){return Mn(e,t,s,i)}}function Bn(e,t){return Or(t)?function(n){return null!=n&&n[e]===t}:function(n){return null!=n&&Ln(t,n[e],null,!0)}}function Fn(e,t,n,r,o){if(!Ts(e))return e;var s=Ar(t.length)&&(Xu(t)||Ms(t));return(s?en:Un)(t,function(t,i,u){if(g(t))return r||(r=[]),o||(o=[]),Hn(e,u,i,Fn,n,r,o);var a=e[i],l=n?n(a,t,i,e,u):E,c="undefined"==typeof l;c&&(l=t),!s&&"undefined"==typeof l||!c&&(l===l?l===a:a!==a)||(e[i]=l)}),e}function Hn(e,t,n,r,o,s,i){for(var u=s.length,a=t[n];u--;)if(s[u]==a)return void(e[n]=i[u]);var l=e[n],c=o?o(l,a,n,e,t):E,d="undefined"==typeof c;d&&(c=a,Ar(a.length)&&(Xu(a)||Ms(a))?c=Xu(l)?l:l?Zt(l):[]:ta(a)||ks(a)?c=ks(l)?Bs(l):ta(l)?l:{}:d=!1),s.push(a),i.push(c),d?e[n]=r(c,a,o,s,i):(c===c?c!==l:l===l)&&(e[n]=c)}function $n(e){return function(t){return null==t?E:t[e]}}function Yn(e,t){var n=t.length,o=hn(e,t);for(t.sort(r);n--;){var s=parseFloat(t[n]);if(s!=i&&Er(s)){var i=s;gu.call(e,s,1)}}return o}function Gn(e,t){return e+du(Cu()*(t-e+1))}function Vn(e,t,n,r,o){return o(e,function(e,o,s){n=r?(r=!1,e):t(n,e,o,s)}),n}function Wn(e,t,n){var r=-1,o=e.length;t=null==t?0:+t||0,0>t&&(t=-t>o?0:o+t),n="undefined"==typeof n||n>o?o:+n||0,0>n&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=Fi(o);++r<o;)s[r]=e[r+t];return s}function zn(e,t){var n;return wn(e,function(e,r,o){return n=t(e,r,o),!n}),!!n}function Jn(e,t){var n=-1,r=br(),s=e.length,i=r==o,u=i&&s>=200,a=u?Hu():null,l=[];a?(r=Kt,i=!1):(u=!1,a=t?[]:l);e:for(;++n<s;){var c=e[n],d=t?t(c,n,e):c;if(i&&c===c){for(var p=a.length;p--;)if(a[p]===d)continue e;t&&a.push(d),l.push(c)}else r(a,d)<0&&((t||u)&&a.push(d),l.push(c))}return l}function Kn(e,t){for(var n=-1,r=t.length,o=Fi(r);++n<r;)o[n]=e[t[n]];return o}function Qn(e,t){var n=e;n instanceof Q&&(n=n.value());for(var r=-1,o=t.length;++r<o;){var s=[n],i=t[r];fu.apply(s,i.args),n=i.func.apply(i.thisArg,s)}return n}function Xn(e,t,n){var r=0,o=e?e.length:r;if("number"==typeof t&&t===t&&Lu>=o){for(;o>r;){var s=r+o>>>1,i=e[s];(n?t>=i:t>i)?r=s+1:o=s}return o}return Zn(e,t,Ci,n)}function Zn(e,t,n,r){t=n(t);for(var o=0,s=e?e.length:0,i=t!==t,u="undefined"==typeof t;s>o;){var a=du((o+s)/2),l=n(e[a]),c=l===l;if(i)var d=c||r;else d=u?c&&(r||"undefined"!=typeof l):r?t>=l:t>l;d?o=a+1:s=a}return ju(s,Ru)}function er(e,t,n){if("function"!=typeof e)return Ci;if("undefined"==typeof t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,s){return e.call(t,n,r,o,s)};case 5:return function(n,r,o,s,i){return e.call(t,n,r,o,s,i)}}return function(){return e.apply(t,arguments)}}function tr(e){return au.call(e,0)}function nr(e,t,n){for(var r=n.length,o=-1,s=Eu(e.length-r,0),i=-1,u=t.length,a=Fi(s+u);++i<u;)a[i]=t[i];for(;++o<r;)a[n[o]]=e[o];for(;s--;)a[i++]=e[o++];return a}function rr(e,t,n){for(var r=-1,o=n.length,s=-1,i=Eu(e.length-o,0),u=-1,a=t.length,l=Fi(i+a);++s<i;)l[s]=e[s];for(var c=s;++u<a;)l[c+u]=t[u];for(;++r<o;)l[c+n[r]]=e[s++];return l}function or(e,t){return function(n,r,o){var s=t?t():{};if(r=_r(r,o,3),Xu(n))for(var i=-1,u=n.length;++i<u;){var a=n[i];e(s,a,r(a,i,n),n)}else wn(n,function(t,n,o){e(s,t,r(t,n,o),o)});return s}}function sr(e){return function(){var t=arguments.length,n=arguments[0];if(2>t||null==n)return n;if(t>3&&jr(arguments[1],arguments[2],arguments[3])&&(t=2),t>3&&"function"==typeof arguments[t-2])var r=er(arguments[--t-1],arguments[t--],5);else t>2&&"function"==typeof arguments[t-1]&&(r=arguments[--t]);for(var o=0;++o<t;){var s=arguments[o];s&&e(n,s,r)}return n}}function ir(e,t){function n(){return(this instanceof n?r:e).apply(t,arguments)}var r=ar(e);return n}function ur(e){return function(t){for(var n=-1,r=ji(ci(t)),o=r.length,s="";++n<o;)s=e(s,r[n],n);return s}}function ar(e){return function(){var t=Bu(e.prototype),n=e.apply(t,arguments);return Ts(n)?n:t}}function lr(e,t){return function(n,r,o){o&&jr(n,r,o)&&(r=null);var s=_r(),i=null==r;if(s===gn&&i||(i=!1,r=s(r,o,3)),i){var u=Xu(n);if(u||!Ns(n))return e(u?n:Lr(n));r=a}return gr(n,r,t)}}function cr(e,t,n,r,o,s,i,u,a,l){function c(){for(var y=arguments.length,w=y,k=Fi(y);w--;)k[w]=arguments[w];if(r&&(k=nr(k,r,o)),s&&(k=rr(k,s,i)),h||v){var S=c.placeholder,x=b(k,S);if(y-=x.length,l>y){var E=u?Zt(u):null,j=Eu(l-y,0),T=h?x:null,C=h?null:x,U=h?k:null,R=h?null:k;t|=h?I:D,t&=~(h?D:I),m||(t&=~(A|O));var L=cr(e,t,n,U,T,R,C,E,a,j);return L.placeholder=S,L}}var N=p?n:this;return f&&(e=N[_]),u&&(k=Ir(k,u)),d&&a<k.length&&(k.length=a),(this instanceof c?g||ar(e):e).apply(N,k)}var d=t&L,p=t&A,f=t&O,h=t&C,m=t&T,v=t&U,g=!f&&ar(e),_=e;return c}function dr(e,t,n){var r=e.length;if(t=+t,r>=t||!Su(t))return"";var o=t-r;return n=null==n?" ":n+"",_i(n,lu(o/n.length)).slice(0,o)}function pr(e,t,n,r){function o(){for(var t=-1,u=arguments.length,a=-1,l=r.length,c=Fi(u+l);++a<l;)c[a]=r[a];for(;u--;)c[a++]=arguments[++t];return(this instanceof o?i:e).apply(s?n:this,c)}var s=t&A,i=ar(e);return o}function fr(e,t,n,r,o,s,i,u){var a=t&O;if(!a&&"function"!=typeof e)throw new Ki($);var l=r?r.length:0;if(l||(t&=~(I|D),r=o=null),l-=o?o.length:0,t&D){var c=r,d=o;r=o=null}var p=!a&&$u(e),f=[e,t,n,r,o,c,d,s,i,u];if(p&&p!==!0&&(Tr(f,p),t=f[1],u=f[9]),f[9]=null==u?a?0:e.length:Eu(u-l,0)||0,t==A)var h=ir(f[0],f[2]);else h=t!=I&&t!=(A|I)||f[4].length?cr.apply(E,f):pr.apply(E,f);var m=p?Fu:Yu;return m(h,f)}function hr(e,t,n,r,o,s,i){var u=-1,a=e.length,l=t.length,c=!0;if(a!=l&&!(o&&l>a))return!1;for(;c&&++u<a;){var d=e[u],p=t[u];if(c=E,r&&(c=o?r(p,d,u):r(d,p,u)),"undefined"==typeof c)if(o)for(var f=l;f--&&(p=t[f],!(c=d&&d===p||n(d,p,r,o,s,i))););else c=d&&d===p||n(d,p,r,o,s,i)}return!!c}function mr(e,t,n){switch(n){case W:case z:return+e==+t;case J:return e.name==t.name&&e.message==t.message;case X:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case et:case nt:return e==t+""}return!1}function vr(e,t,n,r,o,s,i){var u=ra(e),a=u.length,l=ra(t),c=l.length;if(a!=c&&!o)return!1;for(var d,p=-1;++p<a;){var f=u[p],h=nu.call(t,f);if(h){var m=e[f],v=t[f];h=E,r&&(h=o?r(v,m,f):r(m,v,f)),"undefined"==typeof h&&(h=m&&m===v||n(m,v,r,o,s,i))}if(!h)return!1;d||(d="constructor"==f)}if(!d){var g=e.constructor,_=t.constructor;if(g!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _))return!1}return!0}function gr(e,t,n){var r=n?Iu:Uu,o=r,s=o;return wn(e,function(e,i,u){var a=t(e,i,u);((n?o>a:a>o)||a===r&&a===s)&&(o=a,s=e)}),s}function _r(e,n,r){var o=t.callback||Oi;return o=o===Oi?gn:o,r?o(e,n,r):o}function br(e,n,r){var s=t.indexOf||Qr;return s=s===Qr?o:s,e?s(e,n,r):s}function yr(e,t,n){for(var r=-1,o=n?n.length:0;++r<o;){var s=n[r],i=s.size;switch(s.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=ju(t,e+i);break;case"takeRight":e=Eu(e,t-i)}}return{start:e,end:t}}function wr(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&nu.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function kr(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Wi),new t}function Sr(e,t,n){var r=e.constructor;switch(t){case ot:return tr(e);case W:case z:return new r(+e);case st:case it:case ut:case at:case lt:case ct:case dt:case pt:case ft:var o=e.buffer;return new r(n?tr(o):o,e.byteOffset,e.length);case X:case nt:return new r(e);case et:var s=new r(e.source,Et.exec(e));s.lastIndex=e.lastIndex}return s}function xr(e){var n=t.support,r=!(n.funcNames?e.name:n.funcDecomp);if(!r){var o=eu.call(e);n.funcNames||(r=!jt.test(o)),r||(r=Dt.test(o)||Is(e),Fu(e,r))}return r}function Er(e,t){return e=+e,t=null==t?Mu:t,e>-1&&e%1==0&&t>e}function jr(e,t,n){if(!Ts(n))return!1;var r=typeof t;if("number"==r)var o=n.length,s=Ar(o)&&Er(t,o);else s="string"==r&&t in n;if(s){var i=n[t];return e===e?e===i:i!==i}return!1}function Ar(e){return"number"==typeof e&&e>-1&&e%1==0&&Mu>=e}function Or(e){return e===e&&(0===e?1/e>0:!Ts(e))}function Tr(e,t){var n=e[1],r=t[1],o=n|r,s=L|R,i=A|O,u=s|i|T|U,a=n&L&&!(r&L),l=n&R&&!(r&R),c=(l?e:t)[7],d=(a?e:t)[8],p=!(n>=R&&r>i||n>i&&r>=R),f=o>=s&&u>=o&&(R>n||(l||a)&&c.length<=d);
if(!p&&!f)return e;r&A&&(e[2]=t[2],o|=n&A?0:T);var h=t[3];if(h){var m=e[3];e[3]=m?nr(m,h,t[4]):Zt(h),e[4]=m?b(e[3],Y):Zt(t[4])}return h=t[5],h&&(m=e[5],e[5]=m?rr(m,h,t[6]):Zt(h),e[6]=m?b(e[5],Y):Zt(t[6])),h=t[7],h&&(e[7]=Zt(h)),r&L&&(e[8]=null==e[8]?t[8]:ju(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function Cr(e,t){e=Nr(e);for(var n=-1,r=t.length,o={};++n<r;){var s=t[n];s in e&&(o[s]=e[s])}return o}function Ur(e,t){var n={};return Cn(e,function(e,r,o){t(e,r,o)&&(n[r]=e)}),n}function Ir(e,t){for(var n=e.length,r=ju(t.length,n),o=Zt(e);r--;){var s=t[r];e[r]=Er(s,n)?o[s]:E}return e}function Dr(e){{var n;t.support}if(!g(e)||ou.call(e)!=Z||!nu.call(e,"constructor")&&(n=e.constructor,"function"==typeof n&&!(n instanceof n)))return!1;var r;return Cn(e,function(e,t){r=t}),"undefined"==typeof r||nu.call(e,r)}function Rr(e){for(var n=Xs(e),r=n.length,o=r&&e.length,s=t.support,i=o&&Ar(o)&&(Xu(e)||s.nonEnumArgs&&ks(e)),u=-1,a=[];++u<r;){var l=n[u];(i&&Er(l,o)||nu.call(e,l))&&a.push(l)}return a}function Lr(e){return null==e?[]:Ar(e.length)?Ts(e)?e:Wi(e):si(e)}function Nr(e){return Ts(e)?e:Wi(e)}function Mr(e){return e instanceof Q?e.clone():new _(e.__wrapped__,e.__chain__,Zt(e.__actions__))}function Pr(e,t,n){t=(n?jr(e,t,n):null==t)?1:Eu(+t||1,1);for(var r=0,o=e?e.length:0,s=-1,i=Fi(lu(o/t));o>r;)i[++s]=Wn(e,r,r+=t);return i}function qr(e){for(var t=-1,n=e?e.length:0,r=-1,o=[];++t<n;){var s=e[t];s&&(o[++r]=s)}return o}function Br(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Xu(n)||ks(n))break}return yn(n,An(arguments,!1,!0,++e))}function Fr(e,t,n){var r=e?e.length:0;return r?((n?jr(e,t,n):null==t)&&(t=1),Wn(e,0>t?0:t)):[]}function Hr(e,t,n){var r=e?e.length:0;return r?((n?jr(e,t,n):null==t)&&(t=1),t=r-(+t||0),Wn(e,0,0>t?0:t)):[]}function $r(e,t,n){var r=e?e.length:0;if(!r)return[];for(t=_r(t,n,3);r--&&t(e[r],r,e););return Wn(e,0,r+1)}function Yr(e,t,n){var r=e?e.length:0;if(!r)return[];var o=-1;for(t=_r(t,n,3);++o<r&&t(e[o],o,e););return Wn(e,o)}function Gr(e,t,n,r){var o=e?e.length:0;return o?(n&&"number"!=typeof n&&jr(e,t,n)&&(n=0,r=o),xn(e,t,n,r)):[]}function Vr(e,t,n){var r=-1,o=e?e.length:0;for(t=_r(t,n,3);++r<o;)if(t(e[r],r,e))return r;return-1}function Wr(e,t,n){var r=e?e.length:0;for(t=_r(t,n,3);r--;)if(t(e[r],r,e))return r;return-1}function zr(e){return e?e[0]:E}function Jr(e,t,n){var r=e?e.length:0;return n&&jr(e,t,n)&&(t=!1),r?An(e,t):[]}function Kr(e){var t=e?e.length:0;return t?An(e,!0):[]}function Qr(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?Eu(r+n,0):n||0;else if(n){var s=Xn(e,t),i=e[s];return(t===t?t===i:i!==i)?s:-1}return o(e,t,n)}function Xr(e){return Hr(e,1)}function Zr(){for(var e=[],t=-1,n=arguments.length,r=[],s=br(),i=s==o;++t<n;){var u=arguments[t];(Xu(u)||ks(u))&&(e.push(u),r.push(i&&u.length>=120?Hu(t&&u):null))}n=e.length;var a=e[0],l=-1,c=a?a.length:0,d=[],p=r[0];e:for(;++l<c;)if(u=a[l],(p?Kt(p,u):s(d,u))<0){for(t=n;--t;){var f=r[t];if((f?Kt(f,u):s(e[t],u))<0)continue e}p&&p.push(u),d.push(u)}return d}function eo(e){var t=e?e.length:0;return t?e[t-1]:E}function to(e,t,n){var r=e?e.length:0;if(!r)return-1;var o=r;if("number"==typeof n)o=(0>n?Eu(r+n,0):ju(n||0,r-1))+1;else if(n){o=Xn(e,t,!0)-1;var s=e[o];return(t===t?t===s:s!==s)?o:-1}if(t!==t)return v(e,o,!0);for(;o--;)if(e[o]===t)return o;return-1}function no(){var e=arguments[0];if(!e||!e.length)return e;for(var t=0,n=br(),r=arguments.length;++t<r;)for(var o=0,s=arguments[t];(o=n(e,s,o))>-1;)gu.call(e,o,1);return e}function ro(e){return Yn(e||[],An(arguments,!1,!1,1))}function oo(e,t,n){var r=-1,o=e?e.length:0,s=[];for(t=_r(t,n,3);++r<o;){var i=e[r];t(i,r,e)&&(s.push(i),gu.call(e,r--,1),o--)}return s}function so(e){return Fr(e,1)}function io(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&jr(e,t,n)&&(t=0,n=r),Wn(e,t,n)):[]}function uo(e,t,n,r){var o=_r(n);return o===gn&&null==n?Xn(e,t):Zn(e,t,o(n,r,1))}function ao(e,t,n,r){var o=_r(n);return o===gn&&null==n?Xn(e,t,!0):Zn(e,t,o(n,r,1),!0)}function lo(e,t,n){var r=e?e.length:0;return r?((n?jr(e,t,n):null==t)&&(t=1),Wn(e,0,0>t?0:t)):[]}function co(e,t,n){var r=e?e.length:0;return r?((n?jr(e,t,n):null==t)&&(t=1),t=r-(+t||0),Wn(e,0>t?0:t)):[]}function po(e,t,n){var r=e?e.length:0;if(!r)return[];for(t=_r(t,n,3);r--&&t(e[r],r,e););return Wn(e,r+1)}function fo(e,t,n){var r=e?e.length:0;if(!r)return[];var o=-1;for(t=_r(t,n,3);++o<r&&t(e[o],o,e););return Wn(e,0,o)}function ho(){return Jn(An(arguments,!1,!0))}function mo(e,t,n,r){var s=e?e.length:0;if(!s)return[];null!=t&&"boolean"!=typeof t&&(r=n,n=jr(e,t,r)?null:t,t=!1);var i=_r();return(i!==gn||null!=n)&&(n=i(n,r,3)),t&&br()==o?y(e,n):Jn(e,n)}function vo(e){for(var t=-1,n=(e&&e.length&&sn(on(e,tu)))>>>0,r=Fi(n);++t<n;)r[t]=on(e,$n(t));return r}function go(e){return yn(e,Wn(arguments,1))}function _o(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Xu(n)||ks(n))var r=r?yn(r,n).concat(yn(n,r)):n}return r?Jn(r):[]}function bo(){for(var e=arguments.length,t=Fi(e);e--;)t[e]=arguments[e];return vo(t)}function yo(e,t){var n=-1,r=e?e.length:0,o={};for(!r||t||Xu(e[0])||(t=[]);++n<r;){var s=e[n];t?o[s]=t[n]:s&&(o[s[0]]=s[1])}return o}function wo(e){var n=t(e);return n.__chain__=!0,n}function ko(e,t,n){return t.call(n,e),e}function So(e,t,n){return t.call(n,e)}function xo(){return wo(this)}function Eo(){return new _(this.value(),this.__chain__)}function jo(e){for(var t,r=this;r instanceof n;){var o=Mr(r);t?s.__wrapped__=o:t=o;var s=o;r=r.__wrapped__}return s.__wrapped__=e,t}function Ao(){var e=this.__wrapped__;return e instanceof Q?(this.__actions__.length&&(e=new Q(this)),new _(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})}function Oo(){return this.value()+""}function To(){return Qn(this.__wrapped__,this.__actions__)}function Co(e){var t=e?e.length:0;return Ar(t)&&(e=Lr(e)),hn(e,An(arguments,!1,!1,1))}function Uo(e,t,n){var r=Xu(e)?nn:Sn;return("function"!=typeof t||"undefined"!=typeof n)&&(t=_r(t,n,3)),r(e,t)}function Io(e,t,n){var r=Xu(e)?rn:En;return t=_r(t,n,3),r(e,t)}function Do(e,t,n){if(Xu(e)){var r=Vr(e,t,n);return r>-1?e[r]:E}return t=_r(t,n,3),jn(e,t,wn)}function Ro(e,t,n){return t=_r(t,n,3),jn(e,t,kn)}function Lo(e,t){return Do(e,qn(t))}function No(e,t,n){return"function"==typeof t&&"undefined"==typeof n&&Xu(e)?en(e,t):wn(e,er(t,n,3))}function Mo(e,t,n){return"function"==typeof t&&"undefined"==typeof n&&Xu(e)?tn(e,t):kn(e,er(t,n,3))}function Po(e,t,n){var r=e?e.length:0;return Ar(r)||(e=si(e),r=e.length),r?(n="number"==typeof n?0>n?Eu(r+n,0):n||0:0,"string"==typeof e||!Xu(e)&&Ns(e)?r>n&&e.indexOf(t,n)>-1:br(e,t,n)>-1):!1}function qo(e,t){return Rn(e,t,Wn(arguments,2))}function Bo(e,t,n){var r=Xu(e)?on:Pn;return t=_r(t,n,3),r(e,t)}function Fo(e,t){return Bo(e,$n(t))}function Ho(e,t,n,r){var o=Xu(e)?an:Vn;return o(e,_r(t,r,4),n,arguments.length<3,wn)}function $o(e,t,n,r){var o=Xu(e)?ln:Vn;return o(e,_r(t,r,4),n,arguments.length<3,kn)}function Yo(e,t,n){var r=Xu(e)?rn:En;return t=_r(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function Go(e,t,n){if(n?jr(e,t,n):null==t){e=Lr(e);var r=e.length;return r>0?e[Gn(0,r-1)]:E}var o=Vo(e);return o.length=ju(0>t?0:+t||0,o.length),o}function Vo(e){e=Lr(e);for(var t=-1,n=e.length,r=Fi(n);++t<n;){var o=Gn(0,t);t!=o&&(r[t]=r[o]),r[o]=e[t]}return r}function Wo(e){var t=e?e.length:0;return Ar(t)?t:ra(e).length}function zo(e,t,n){var r=Xu(e)?cn:zn;return("function"!=typeof t||"undefined"!=typeof n)&&(t=_r(t,n,3)),r(e,t)}function Jo(e,t,n){var r=-1,o=e?e.length:0,s=Ar(o)?Fi(o):[];return n&&jr(e,t,n)&&(t=null),t=_r(t,n,3),wn(e,function(e,n,o){s[++r]={criteria:t(e,n,o),index:r,value:e}}),i(s,d)}function Ko(e){var t=arguments;t.length>3&&jr(t[1],t[2],t[3])&&(t=[e,t[1]]);var n=-1,r=e?e.length:0,o=An(t,!1,!1,1),s=Ar(r)?Fi(r):[];return wn(e,function(e){for(var t=o.length,r=Fi(t);t--;)r[t]=null==e?E:e[o[t]];s[++n]={criteria:r,index:n,value:e}}),i(s,p)}function Qo(e,t){return Io(e,qn(t))}function Xo(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Ki($);var n=e;e=t,t=n}return e=Su(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function Zo(e,t,n){return n&&jr(e,t,n)&&(t=null),t=e&&null==t?e.length:Eu(+t||0,0),fr(e,L,null,null,null,null,t)}function es(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Ki($);var r=e;e=t,t=r}return function(){return--e>0?n=t.apply(this,arguments):t=null,n}}function ts(e,t){var n=A;if(arguments.length>2){var r=Wn(arguments,2),o=b(r,ts.placeholder);n|=I}return fr(e,n,t,r,o)}function ns(e){return vn(e,arguments.length>1?An(arguments,!1,!1,1):Js(e))}function rs(e,t){var n=A|O;if(arguments.length>2){var r=Wn(arguments,2),o=b(r,rs.placeholder);n|=I}return fr(t,n,e,r,o)}function os(e,t,n){n&&jr(e,t,n)&&(t=null);var r=fr(e,C,null,null,null,null,null,t);return r.placeholder=os.placeholder,r}function ss(e,t,n){n&&jr(e,t,n)&&(t=null);var r=fr(e,U,null,null,null,null,null,t);return r.placeholder=ss.placeholder,r}function is(e,t,n){function r(){p&&cu(p),a&&cu(a),a=p=f=E}function o(){var n=t-(Qu()-c);if(0>=n||n>t){a&&cu(a);var r=f;a=p=f=E,r&&(h=Qu(),l=e.apply(d,u),p||a||(u=d=null))}else p=vu(o,n)}function s(){p&&cu(p),a=p=f=E,(v||m!==t)&&(h=Qu(),l=e.apply(d,u),p||a||(u=d=null))}function i(){if(u=arguments,c=Qu(),d=this,f=v&&(p||!g),m===!1)var n=g&&!p;else{a||g||(h=c);var r=m-(c-h),i=0>=r||r>m;i?(a&&(a=cu(a)),h=c,l=e.apply(d,u)):a||(a=vu(s,r))}return i&&p?p=cu(p):p||t===m||(p=vu(o,t)),n&&(i=!0,l=e.apply(d,u)),!i||p||a||(u=d=null),l}var u,a,l,c,d,p,f,h=0,m=!1,v=!0;if("function"!=typeof e)throw new Ki($);if(t=0>t?0:+t||0,n===!0){var g=!0;v=!1}else Ts(n)&&(g=n.leading,m="maxWait"in n&&Eu(+n.maxWait||0,t),v="trailing"in n?n.trailing:v);return i.cancel=r,i}function us(e){return bn(e,1,arguments,1)}function as(e,t){return bn(e,t,arguments,2)}function ls(){var e=arguments,t=e.length;if(!t)return function(){return arguments[0]};if(!nn(e,s))throw new Ki($);return function(){for(var n=0,r=e[n].apply(this,arguments);++n<t;)r=e[n].call(this,r);return r}}function cs(){var e=arguments,t=e.length-1;if(0>t)return function(){return arguments[0]};if(!nn(e,s))throw new Ki($);return function(){for(var n=t,r=e[n].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function ds(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Ki($);var n=function(){var r=n.cache,o=t?t.apply(this,arguments):arguments[0];if(r.has(o))return r.get(o);var s=e.apply(this,arguments);return r.set(o,s),s};return n.cache=new ds.Cache,n}function ps(e){if("function"!=typeof e)throw new Ki($);return function(){return!e.apply(this,arguments)}}function fs(e){return es(e,2)}function hs(e){var t=Wn(arguments,1),n=b(t,hs.placeholder);return fr(e,I,null,t,n)}function ms(e){var t=Wn(arguments,1),n=b(t,ms.placeholder);return fr(e,D,null,t,n)}function vs(e){var t=An(arguments,!1,!1,1);return fr(e,R,null,null,null,t)}function gs(e){if("function"!=typeof e)throw new Ki($);return function(t){return e.apply(this,t)}}function _s(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new Ki($);return n===!1?r=!1:Ts(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Ft.leading=r,Ft.maxWait=+t,Ft.trailing=o,is(e,t,Ft)}function bs(e,t){return t=null==t?Ci:t,fr(t,I,null,[e],[])}function ys(e,t,n,r){return t&&"boolean"!=typeof t&&jr(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),n="function"==typeof n&&er(n,r,1),_n(e,t,n)}function ws(e,t,n){return t="function"==typeof t&&er(t,n,1),_n(e,!0,t)}function ks(e){var t=g(e)?e.length:E;return Ar(t)&&ou.call(e)==G||!1}function Ss(e){return e===!0||e===!1||g(e)&&ou.call(e)==W||!1}function xs(e){return g(e)&&ou.call(e)==z||!1}function Es(e){return e&&1===e.nodeType&&g(e)&&ou.call(e).indexOf("Element")>-1||!1}function js(e){if(null==e)return!0;var t=e.length;return Ar(t)&&(Xu(e)||Ns(e)||ks(e)||g(e)&&ea(e.splice))?!t:!ra(e).length}function As(e,t,n,r){if(n="function"==typeof n&&er(n,r,3),!n&&Or(e)&&Or(t))return e===t;var o=n?n(e,t):E;return"undefined"==typeof o?Ln(e,t,n):!!o}function Os(e){return g(e)&&"string"==typeof e.message&&ou.call(e)==J||!1}function Ts(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}function Cs(e,t,n,r){var o=ra(t),s=o.length;if(n="function"==typeof n&&er(n,r,3),!n&&1==s){var i=o[0],u=t[i];if(Or(u))return null!=e&&u===e[i]&&nu.call(e,i)}for(var a=Fi(s),l=Fi(s);s--;)u=a[s]=t[o[s]],l[s]=Or(u);return Mn(e,o,a,l,n)}function Us(e){return Rs(e)&&e!=+e}function Is(e){return null==e?!1:ou.call(e)==K?iu.test(eu.call(e)):g(e)&&Ot.test(e)||!1}function Ds(e){return null===e}function Rs(e){return"number"==typeof e||g(e)&&ou.call(e)==X||!1}function Ls(e){return g(e)&&ou.call(e)==et||!1}function Ns(e){return"string"==typeof e||g(e)&&ou.call(e)==nt||!1}function Ms(e){return g(e)&&Ar(e.length)&&qt[ou.call(e)]||!1}function Ps(e){return"undefined"==typeof e}function qs(e){var t=e?e.length:0;return Ar(t)?t?Zt(e):[]:si(e)}function Bs(e){return mn(e,Xs(e))}function Fs(e,t,n){var r=Bu(e);return n&&jr(e,t,n)&&(t=null),t?mn(t,r,ra(t)):r}function Hs(e){if(null==e)return e;var t=Zt(arguments);return t.push(dn),na.apply(E,t)}function $s(e,t,n){return t=_r(t,n,3),jn(e,t,Un,!0)}function Ys(e,t,n){return t=_r(t,n,3),jn(e,t,In,!0)}function Gs(e,t,n){return("function"!=typeof t||"undefined"!=typeof n)&&(t=er(t,n,3)),On(e,t,Xs)}function Vs(e,t,n){return t=er(t,n,3),Tn(e,t,Xs)}function Ws(e,t,n){return("function"!=typeof t||"undefined"!=typeof n)&&(t=er(t,n,3)),Un(e,t)}function zs(e,t,n){return t=er(t,n,3),Tn(e,t,ra)}function Js(e){return Dn(e,Xs(e))}function Ks(e,t){return e?nu.call(e,t):!1}function Qs(e,t,n){n&&jr(e,t,n)&&(t=null);for(var r=-1,o=ra(e),s=o.length,i={};++r<s;){var u=o[r],a=e[u];t?nu.call(i,a)?i[a].push(u):i[a]=[u]:i[a]=u}return i}function Xs(e){if(null==e)return[];Ts(e)||(e=Wi(e));var t=e.length;t=t&&Ar(t)&&(Xu(e)||qu.nonEnumArgs&&ks(e))&&t||0;for(var n=e.constructor,r=-1,o="function"==typeof n&&n.prototype===e,s=Fi(t),i=t>0;++r<t;)s[r]=r+"";for(var u in e)i&&Er(u,t)||"constructor"==u&&(o||!nu.call(e,u))||s.push(u);return s}function Zs(e,t,n){var r={};return t=_r(t,n,3),Un(e,function(e,n,o){r[n]=t(e,n,o)}),r}function ei(e,t,n){if(null==e)return{};if("function"!=typeof t){var r=on(An(arguments,!1,!1,1),Ji);return Cr(e,yn(Xs(e),r))}return t=er(t,n,3),Ur(e,function(e,n,r){return!t(e,n,r)})}function ti(e){for(var t=-1,n=ra(e),r=n.length,o=Fi(r);++t<r;){var s=n[t];o[t]=[s,e[s]]}return o}function ni(e,t,n){return null==e?{}:"function"==typeof t?Ur(e,er(t,n,3)):Cr(e,An(arguments,!1,!1,1))}function ri(e,t,n){var r=null==e?E:e[t];return"undefined"==typeof r&&(r=n),ea(r)?r.call(e):r}function oi(e,t,n,r){var o=Xu(e)||Ms(e);if(t=_r(t,r,4),null==n)if(o||Ts(e)){var s=e.constructor;n=o?Xu(e)?new s:[]:Bu(ea(s)&&s.prototype)}else n={};return(o?en:Un)(e,function(e,r,o){return t(n,e,r,o)}),n}function si(e){return Kn(e,ra(e))}function ii(e){return Kn(e,Xs(e))}function ui(e,t,n){return t=+t||0,"undefined"==typeof n?(n=t,t=0):n=+n||0,e>=t&&n>e}function ai(e,t,n){n&&jr(e,t,n)&&(t=n=null);var r=null==e,o=null==t;if(null==n&&(o&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,o=!0)),r&&o&&(t=1,o=!1),e=+e||0,o?(t=e,e=0):t=+t||0,n||e%1||t%1){var s=Cu();return ju(e+s*(t-e+parseFloat("1e-"+((s+"").length-1))),t)}return Gn(e,t)}function li(e){return e=u(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function ci(e){return e=u(e),e&&e.replace(Tt,f)}function di(e,t,n){e=u(e),t+="";var r=e.length;return n=("undefined"==typeof n?r:ju(0>n?0:+n||0,r))-t.length,n>=0&&e.indexOf(t,n)==n}function pi(e){return e=u(e),e&&yt.test(e)?e.replace(_t,h):e}function fi(e){return e=u(e),e&&It.test(e)?e.replace(Ut,"\\$&"):e}function hi(e,t,n){e=u(e),t=+t;var r=e.length;if(r>=t||!Su(t))return e;var o=(t-r)/2,s=du(o),i=lu(o);return n=dr("",i,n),n.slice(0,s)+e+n}function mi(e,t,n){return e=u(e),e&&dr(e,t,n)+e}function vi(e,t,n){return e=u(e),e&&e+dr(e,t,n)}function gi(e,t,n){return n&&jr(e,t,n)&&(t=0),Tu(e,t)}function _i(e,t){var n="";if(e=u(e),t=+t,1>t||!e||!Su(t))return n;do t%2&&(n+=e),t=du(t/2),e+=e;while(t);return n}function bi(e,t,n){return e=u(e),n=null==n?0:ju(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function yi(e,n,r){var o=t.templateSettings;r&&jr(e,n,r)&&(n=r=null),e=u(e),n=fn(fn({},r||n),o,pn);var s,i,a=fn(fn({},n.imports),o.imports,pn),l=ra(a),c=Kn(a,l),d=0,p=n.interpolate||Ct,f="__p += '",h=zi((n.escape||Ct).source+"|"+p.source+"|"+(p===St?xt:Ct).source+"|"+(n.evaluate||Ct).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Pt+"]")+"\n";e.replace(h,function(t,n,r,o,u,a){return r||(r=o),f+=e.slice(d,a).replace(Rt,m),n&&(s=!0,f+="' +\n__e("+n+") +\n'"),u&&(i=!0,f+="';\n"+u+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=a+t.length,t}),f+="';\n";var g=n.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(i?f.replace(ht,""):f).replace(mt,"$1").replace(vt,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var _=Ai(function(){return Yi(l,v+"return "+f).apply(E,c)});if(_.source=f,Os(_))throw _;return _}function wi(e,t,n){var r=e;return(e=u(e))?(n?jr(r,t,n):null==t)?e.slice(w(e),k(e)+1):(t+="",e.slice(l(e,t),c(e,t)+1)):e}function ki(e,t,n){var r=e;return e=u(e),e?e.slice((n?jr(r,t,n):null==t)?w(e):l(e,t+"")):e}function Si(e,t,n){var r=e;return e=u(e),e?(n?jr(r,t,n):null==t)?e.slice(0,k(e)+1):e.slice(0,c(e,t+"")+1):e}function xi(e,t,n){n&&jr(e,t,n)&&(t=null);var r=N,o=M;if(null!=t)if(Ts(t)){var s="separator"in t?t.separator:s;r="length"in t?+t.length||0:r,o="omission"in t?u(t.omission):o}else r=+t||0;if(e=u(e),r>=e.length)return e;var i=r-o.length;if(1>i)return o;var a=e.slice(0,i);if(null==s)return a+o;if(Ls(s)){if(e.slice(i).search(s)){var l,c,d=e.slice(0,i);for(s.global||(s=zi(s.source,(Et.exec(s)||"")+"g")),s.lastIndex=0;l=s.exec(d);)c=l.index;a=a.slice(0,null==c?i:c)}}else if(e.indexOf(s,i)!=i){var p=a.lastIndexOf(s);p>-1&&(a=a.slice(0,p))}return a+o}function Ei(e){return e=u(e),e&&bt.test(e)?e.replace(gt,S):e}function ji(e,t,n){return n&&jr(e,t,n)&&(t=null),e=u(e),e.match(t||Lt)||[]}function Ai(){var e=arguments.length,t=arguments[0];try{for(var n=Fi(e?e-1:0);--e>0;)n[e-1]=arguments[e];return t.apply(E,n)}catch(r){return Os(r)?r:new $i(r)}}function Oi(e,t,n){return n&&jr(e,t,n)&&(t=null),g(e)?Ui(e):gn(e,t)}function Ti(e){return function(){return e}}function Ci(e){return e}function Ui(e){return qn(_n(e,!0))}function Ii(e,t){return Bn(e+"",_n(t,!0))}function Di(e,t,n){if(null==n){var r=Ts(t),o=r&&ra(t),s=o&&o.length&&Dn(t,o);(s?s.length:r)||(s=!1,n=t,t=e,e=this)}s||(s=Dn(t,ra(t)));var i=!0,u=-1,a=ea(e),l=s.length;n===!1?i=!1:Ts(n)&&"chain"in n&&(i=n.chain);for(;++u<l;){var c=s[u],d=t[c];e[c]=d,a&&(e.prototype[c]=function(t){return function(){var n=this.__chain__;if(i||n){var r=e(this.__wrapped__);return(r.__actions__=Zt(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}var o=[this.value()];return fu.apply(o,arguments),t.apply(e,o)}}(d))}return e}function Ri(){return e._=su,this}function Li(){}function Ni(e){return $n(e+"")}function Mi(e){return function(t){return null==e?E:e[t]}}function Pi(e,t,n){n&&jr(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,o=Eu(lu((t-e)/(n||1)),0),s=Fi(o);++r<o;)s[r]=e,e+=n;return s}function qi(e,t,n){if(e=+e,1>e||!Su(e))return[];var r=-1,o=Fi(ju(e,Du));for(t=er(t,n,1);++r<e;)Du>r?o[r]=t(r):t(r);return o}function Bi(e){var t=++ru;return u(e)+t}e=e?Xt.defaults(Wt.Object(),e,Xt.pick(Wt,Mt)):Wt;var Fi=e.Array,Hi=e.Date,$i=e.Error,Yi=e.Function,Gi=e.Math,Vi=e.Number,Wi=e.Object,zi=e.RegExp,Ji=e.String,Ki=e.TypeError,Qi=Fi.prototype,Xi=Wi.prototype,Zi=(Zi=e.window)&&Zi.document,eu=Yi.prototype.toString,tu=$n("length"),nu=Xi.hasOwnProperty,ru=0,ou=Xi.toString,su=e._,iu=zi("^"+fi(ou).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),uu=Is(uu=e.ArrayBuffer)&&uu,au=Is(au=uu&&new uu(0).slice)&&au,lu=Gi.ceil,cu=e.clearTimeout,du=Gi.floor,pu=Is(pu=Wi.getPrototypeOf)&&pu,fu=Qi.push,hu=Xi.propertyIsEnumerable,mu=Is(mu=e.Set)&&mu,vu=e.setTimeout,gu=Qi.splice,_u=Is(_u=e.Uint8Array)&&_u,bu=Is(bu=e.WeakMap)&&bu,yu=function(){try{var t=Is(t=e.Float64Array)&&t,n=new t(new uu(10),0,1)&&t}catch(r){}return n}(),wu=Is(wu=Fi.isArray)&&wu,ku=Is(ku=Wi.create)&&ku,Su=e.isFinite,xu=Is(xu=Wi.keys)&&xu,Eu=Gi.max,ju=Gi.min,Au=Is(Au=Hi.now)&&Au,Ou=Is(Ou=Vi.isFinite)&&Ou,Tu=e.parseInt,Cu=Gi.random,Uu=Vi.NEGATIVE_INFINITY,Iu=Vi.POSITIVE_INFINITY,Du=Gi.pow(2,32)-1,Ru=Du-1,Lu=Du>>>1,Nu=yu?yu.BYTES_PER_ELEMENT:0,Mu=Gi.pow(2,53)-1,Pu=bu&&new bu,qu=t.support={};!function(){qu.funcDecomp=!Is(e.WinRTError)&&Dt.test(x),qu.funcNames="string"==typeof Yi.name;try{qu.dom=11===Zi.createDocumentFragment().nodeType}catch(t){qu.dom=!1}try{qu.nonEnumArgs=!hu.call(arguments,1)}catch(t){qu.nonEnumArgs=!0}}(0,0),t.templateSettings={escape:wt,evaluate:kt,interpolate:St,variable:"",imports:{_:t}};var Bu=function(){function t(){}return function(n){if(Ts(n)){t.prototype=n;var r=new t;t.prototype=null}return r||e.Object()}}(),Fu=Pu?function(e,t){return Pu.set(e,t),e}:Ci;au||(tr=uu&&_u?function(e){var t=e.byteLength,n=yu?du(t/Nu):0,r=n*Nu,o=new uu(t);if(n){var s=new yu(o,0,n);s.set(new yu(e,0,n))}return t!=r&&(s=new _u(o,r),s.set(new _u(e,r))),o}:Ti(null));var Hu=ku&&mu?function(e){return new Jt(e)}:Ti(null),$u=Pu?function(e){return Pu.get(e)}:Li,Yu=function(){var e=0,t=0;return function(n,r){var o=Qu(),s=q-(o-t);if(t=o,s>0){if(++e>=P)return n}else e=0;return Fu(n,r)}}(),Gu=or(function(e,t,n){nu.call(e,n)?++e[n]:e[n]=1}),Vu=or(function(e,t,n){nu.call(e,n)?e[n].push(t):e[n]=[t]}),Wu=or(function(e,t,n){e[n]=t}),zu=lr(sn),Ju=lr(un,!0),Ku=or(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Qu=Au||function(){return(new Hi).getTime()},Xu=wu||function(e){return g(e)&&Ar(e.length)&&ou.call(e)==V||!1};qu.dom||(Es=function(e){return e&&1===e.nodeType&&g(e)&&!ta(e)||!1});var Zu=Ou||function(e){return"number"==typeof e&&Su(e)},ea=s(/x/)||_u&&!s(_u)?function(e){return ou.call(e)==K}:s,ta=pu?function(e){if(!e||ou.call(e)!=Z)return!1;var t=e.valueOf,n=Is(t)&&(n=pu(t))&&pu(n);return n?e==n||pu(e)==n:Dr(e)}:Dr,na=sr(fn),ra=xu?function(e){if(e)var t=e.constructor,n=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&n&&Ar(n)?Rr(e):Ts(e)?xu(e):[]}:Rr,oa=sr(Fn),sa=ur(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),ia=ur(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});8!=Tu(Nt+"08")&&(gi=function(e,t,n){return(n?jr(e,t,n):null==t)?t=0:t&&(t=+t),e=wi(e),Tu(e,t||(At.test(e)?16:10))});var ua=ur(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),aa=ur(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))});return t.prototype=n.prototype,_.prototype=Bu(n.prototype),_.prototype.constructor=_,Q.prototype=Bu(n.prototype),Q.prototype.constructor=Q,$t.prototype["delete"]=Yt,$t.prototype.get=Gt,$t.prototype.has=Vt,$t.prototype.set=zt,Jt.prototype.push=Qt,ds.Cache=$t,t.after=Xo,t.ary=Zo,t.assign=na,t.at=Co,t.before=es,t.bind=ts,t.bindAll=ns,t.bindKey=rs,t.callback=Oi,t.chain=wo,t.chunk=Pr,t.compact=qr,t.constant=Ti,t.countBy=Gu,t.create=Fs,t.curry=os,t.curryRight=ss,t.debounce=is,t.defaults=Hs,t.defer=us,t.delay=as,t.difference=Br,t.drop=Fr,t.dropRight=Hr,t.dropRightWhile=$r,t.dropWhile=Yr,t.fill=Gr,t.filter=Io,t.flatten=Jr,t.flattenDeep=Kr,t.flow=ls,t.flowRight=cs,t.forEach=No,t.forEachRight=Mo,t.forIn=Gs,t.forInRight=Vs,t.forOwn=Ws,t.forOwnRight=zs,t.functions=Js,t.groupBy=Vu,t.indexBy=Wu,t.initial=Xr,t.intersection=Zr,t.invert=Qs,t.invoke=qo,t.keys=ra,t.keysIn=Xs,t.map=Bo,t.mapValues=Zs,t.matches=Ui,t.matchesProperty=Ii,t.memoize=ds,t.merge=oa,t.mixin=Di,t.negate=ps,t.omit=ei,t.once=fs,t.pairs=ti,t.partial=hs,t.partialRight=ms,t.partition=Ku,t.pick=ni,t.pluck=Fo,t.property=Ni,t.propertyOf=Mi,t.pull=no,t.pullAt=ro,t.range=Pi,t.rearg=vs,t.reject=Yo,t.remove=oo,t.rest=so,t.shuffle=Vo,t.slice=io,t.sortBy=Jo,t.sortByAll=Ko,t.spread=gs,t.take=lo,t.takeRight=co,t.takeRightWhile=po,t.takeWhile=fo,t.tap=ko,t.throttle=_s,t.thru=So,t.times=qi,t.toArray=qs,t.toPlainObject=Bs,t.transform=oi,t.union=ho,t.uniq=mo,t.unzip=vo,t.values=si,t.valuesIn=ii,t.where=Qo,t.without=go,t.wrap=bs,t.xor=_o,t.zip=bo,t.zipObject=yo,t.backflow=cs,t.collect=Bo,t.compose=cs,t.each=No,t.eachRight=Mo,t.extend=na,t.iteratee=Oi,t.methods=Js,t.object=yo,t.select=Io,t.tail=so,t.unique=mo,Di(t,t),t.attempt=Ai,t.camelCase=sa,t.capitalize=li,t.clone=ys,t.cloneDeep=ws,t.deburr=ci,t.endsWith=di,t.escape=pi,t.escapeRegExp=fi,t.every=Uo,t.find=Do,t.findIndex=Vr,t.findKey=$s,t.findLast=Ro,t.findLastIndex=Wr,t.findLastKey=Ys,t.findWhere=Lo,t.first=zr,t.has=Ks,t.identity=Ci,t.includes=Po,t.indexOf=Qr,t.inRange=ui,t.isArguments=ks,t.isArray=Xu,t.isBoolean=Ss,t.isDate=xs,t.isElement=Es,t.isEmpty=js,t.isEqual=As,t.isError=Os,t.isFinite=Zu,t.isFunction=ea,t.isMatch=Cs,t.isNaN=Us,t.isNative=Is,t.isNull=Ds,t.isNumber=Rs,t.isObject=Ts,t.isPlainObject=ta,t.isRegExp=Ls,t.isString=Ns,t.isTypedArray=Ms,t.isUndefined=Ps,t.kebabCase=ia,t.last=eo,t.lastIndexOf=to,t.max=zu,t.min=Ju,t.noConflict=Ri,t.noop=Li,t.now=Qu,t.pad=hi,t.padLeft=mi,t.padRight=vi,t.parseInt=gi,t.random=ai,t.reduce=Ho,t.reduceRight=$o,t.repeat=_i,t.result=ri,t.runInContext=x,t.size=Wo,t.snakeCase=ua,t.some=zo,t.sortedIndex=uo,t.sortedLastIndex=ao,t.startCase=aa,t.startsWith=bi,t.template=yi,t.trim=wi,t.trimLeft=ki,t.trimRight=Si,t.trunc=xi,t.unescape=Ei,t.uniqueId=Bi,t.words=ji,t.all=Uo,t.any=zo,t.contains=Po,t.detect=Do,t.foldl=Ho,t.foldr=$o,t.head=zr,t.include=Po,t.inject=Ho,Di(t,function(){var e={};return Un(t,function(n,r){t.prototype[r]||(e[r]=n)}),e}(),!1),t.sample=Go,t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Go(t,e)}):Go(this.value())},t.VERSION=j,en(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),en(["filter","map","takeWhile"],function(e,t){var n=t==B||t==H;Q.prototype[e]=function(e,r){var o=this.clone(),s=o.__iteratees__||(o.__iteratees__=[]);return o.__filtered__=o.__filtered__||n,s.push({iteratee:_r(e,r,3),type:t}),o}}),en(["drop","take"],function(e,t){var n="__"+e+"Count__",r=e+"While";Q.prototype[e]=function(r){r=null==r?1:Eu(du(r)||0,0);var o=this.clone();if(o.__filtered__){var s=o[n];o[n]=t?ju(s,r):s+r}else{var i=o.__views__||(o.__views__=[]);i.push({size:r,type:e+(o.__dir__<0?"Right":"")})}return o},Q.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},Q.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[r](e,t).reverse()}}),en(["first","last"],function(e,t){var n="take"+(t?"Right":"");Q.prototype[e]=function(){return this[n](1).value()[0]}}),en(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Q.prototype[e]=function(){return this[n](1)}}),en(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?qn:$n;Q.prototype[e]=function(e){return this[n](r(e))}}),Q.prototype.compact=function(){return this.filter(Ci)},Q.prototype.dropWhile=function(e,t){var n,r,o=this.__dir__<0;return e=_r(e,t,3),this.filter(function(t,s,i){return n=n&&(o?r>s:s>r),r=s,n||(n=!e(t,s,i))})},Q.prototype.reject=function(e,t){return e=_r(e,t,3),this.filter(function(t,n,r){return!e(t,n,r)})},Q.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=0>e?this.takeRight(-e):this.drop(e);return"undefined"!=typeof t&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},Q.prototype.toArray=function(){return this.drop(0)},Un(Q.prototype,function(e,n){var r=t[n],o=/^(?:first|last)$/.test(n);t.prototype[n]=function(){var n=this.__wrapped__,s=arguments,i=this.__chain__,u=!!this.__actions__.length,a=n instanceof Q,l=a&&!u;if(o&&!i)return l?e.call(n):r.call(t,this.value());var c=function(e){var n=[e];return fu.apply(n,s),r.apply(t,n)};if(a||Xu(n)){var d=l?n:new Q(this),p=e.apply(d,s);if(!o&&(u||p.__actions__)){var f=p.__actions__||(p.__actions__=[]);f.push({func:So,args:[c],thisArg:t})}return new _(p,i)}return this.thru(c)}}),en(["concat","join","pop","push","shift","sort","splice","unshift"],function(e){var n=Qi[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:join|pop|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;return o&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),Q.prototype.clone=tt,Q.prototype.reverse=rt,Q.prototype.value=Ht,t.prototype.chain=xo,t.prototype.commit=Eo,t.prototype.plant=jo,t.prototype.reverse=Ao,t.prototype.toString=Oo,t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=To,t.prototype.collect=t.prototype.map,t.prototype.head=t.prototype.first,t.prototype.select=t.prototype.filter,t.prototype.tail=t.prototype.rest,t}var E,j="3.3.1",A=1,O=2,T=4,C=8,U=16,I=32,D=64,R=128,L=256,N=30,M="...",P=150,q=16,B=0,F=1,H=2,$="Expected a function",Y="__lodash_placeholder__",G="[object Arguments]",V="[object Array]",W="[object Boolean]",z="[object Date]",J="[object Error]",K="[object Function]",Q="[object Map]",X="[object Number]",Z="[object Object]",et="[object RegExp]",tt="[object Set]",nt="[object String]",rt="[object WeakMap]",ot="[object ArrayBuffer]",st="[object Float32Array]",it="[object Float64Array]",ut="[object Int8Array]",at="[object Int16Array]",lt="[object Int32Array]",ct="[object Uint8Array]",dt="[object Uint8ClampedArray]",pt="[object Uint16Array]",ft="[object Uint32Array]",ht=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,vt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gt=/&(?:amp|lt|gt|quot|#39|#96);/g,_t=/[&<>"'`]/g,bt=RegExp(gt.source),yt=RegExp(_t.source),wt=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,St=/<%=([\s\S]+?)%>/g,xt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Et=/\w*$/,jt=/^\s*function[ \n\r\t]+\w/,At=/^0[xX]/,Ot=/^\[object .+?Constructor\]$/,Tt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ct=/($^)/,Ut=/[.*+?^${}()|[\]\/\\]/g,It=RegExp(Ut.source),Dt=/\bthis\b/,Rt=/['\n\r\u2028\u2029\\]/g,Lt=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"{2,}(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Nt=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",Mt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Pt=-1,qt={};qt[st]=qt[it]=qt[ut]=qt[at]=qt[lt]=qt[ct]=qt[dt]=qt[pt]=qt[ft]=!0,qt[G]=qt[V]=qt[ot]=qt[W]=qt[z]=qt[J]=qt[K]=qt[Q]=qt[X]=qt[Z]=qt[et]=qt[tt]=qt[nt]=qt[rt]=!1;var Bt={};Bt[G]=Bt[V]=Bt[ot]=Bt[W]=Bt[z]=Bt[st]=Bt[it]=Bt[ut]=Bt[at]=Bt[lt]=Bt[X]=Bt[Z]=Bt[et]=Bt[nt]=Bt[ct]=Bt[dt]=Bt[pt]=Bt[ft]=!0,Bt[J]=Bt[K]=Bt[Q]=Bt[tt]=Bt[rt]=!1;var Ft={leading:!1,maxWait:0,trailing:!1},Ht={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},$t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Yt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Gt={"function":!0,object:!0},Vt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wt=Gt[typeof window]&&window!==(this&&this.window)?window:this,zt=Gt[typeof n]&&n&&!n.nodeType&&n,Jt=Gt[typeof t]&&t&&!t.nodeType&&t,Kt=zt&&Jt&&"object"==typeof e&&e;!Kt||Kt.global!==Kt&&Kt.window!==Kt&&Kt.self!==Kt||(Wt=Kt);var Qt=Jt&&Jt.exports===zt&&zt,Xt=x();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Wt._=Xt,define(function(){return Xt})):zt&&Jt?Qt?(Jt.exports=Xt)._=Xt:zt._=Xt:Wt._=Xt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})
},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/moment/moment.js":[function(e,t){(function(n){(function(r){function o(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function s(e,t){return Ct.call(e,t)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function u(e){xt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function a(e,t){var n=!0;return g(function(){return n&&(u(e),n=!1),t.apply(this,arguments)},t)}function l(e,t){kn[e]||(u(t),kn[e]=!0)}function c(e,t){return function(n){return y(e.call(this,n),t)}}function d(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function p(e,t){var n,r,o=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(o,"months");return 0>t-s?(n=e.clone().add(o-1,"months"),r=(t-s)/(s-n)):(n=e.clone().add(o+1,"months"),r=(t-s)/(n-s)),-(o+r)}function f(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function h(){}function m(e,t){t!==!1&&N(e),_(this,e),this._d=new Date(+e._d),xn===!1&&(xn=!0,xt.updateOffset(this),xn=!1)}function v(e){var t=T(e),n=t.year||0,r=t.quarter||0,o=t.month||0,s=t.week||0,i=t.day||0,u=t.hour||0,a=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*l+6e4*a+36e5*u,this._days=+i+7*s,this._months=+o+3*r+12*n,this._data={},this._locale=xt.localeData(),this._bubble()}function g(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function _(e,t){var n,r,o;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),qt.length>0)for(n in qt)r=qt[n],o=t[r],"undefined"!=typeof o&&(e[r]=o);return e}function b(e){return 0>e?Math.ceil(e):Math.floor(e)}function y(e,t,n){for(var r=""+Math.abs(e),o=e>=0;r.length<t;)r="0"+r;return(o?n?"+":"":"-")+r}function w(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function k(e,t){var n;return t=F(t,e),e.isBefore(t)?n=w(e,t):(n=w(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function S(e,t){return function(n,r){var o,s;return null===r||isNaN(+r)||(l(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n="string"==typeof n?+n:n,o=xt.duration(n,r),x(this,o,e),this}}function x(e,t,n,r){var o=t._milliseconds,s=t._days,i=t._months;r=null==r?!0:r,o&&e._d.setTime(+e._d+o*n),s&&_t(e,"Date",gt(e,"Date")+s*n),i&&vt(e,gt(e,"Month")+i*n),r&&xt.updateOffset(e,s||i)}function E(e){return"[object Array]"===Object.prototype.toString.call(e)}function j(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function A(e,t,n){var r,o=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),i=0;for(r=0;o>r;r++)(n&&e[r]!==t[r]||!n&&U(e[r])!==U(t[r]))&&i++;return i+s}function O(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=mn[e]||vn[t]||t}return e}function T(e){var t,n,r={};for(n in e)s(e,n)&&(t=O(n),t&&(r[t]=e[n]));return r}function C(e){var t,n;if(0===e.indexOf("week"))t=7,n="day";else{if(0!==e.indexOf("month"))return;t=12,n="month"}xt[e]=function(o,s){var i,u,a=xt._locale[e],l=[];if("number"==typeof o&&(s=o,o=r),u=function(e){var t=xt().utc().set(n,e);return a.call(xt._locale,t,o||"")},null!=s)return u(s);for(i=0;t>i;i++)l.push(u(i));return l}}function U(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function I(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function D(e,t,n){return pt(xt([e,11,31+t-n]),t,n).week}function R(e){return L(e)?366:365}function L(e){return e%4===0&&e%100!==0||e%400===0}function N(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[It]<0||e._a[It]>11?It:e._a[Dt]<1||e._a[Dt]>I(e._a[Ut],e._a[It])?Dt:e._a[Rt]<0||e._a[Rt]>24||24===e._a[Rt]&&(0!==e._a[Lt]||0!==e._a[Nt]||0!==e._a[Mt])?Rt:e._a[Lt]<0||e._a[Lt]>59?Lt:e._a[Nt]<0||e._a[Nt]>59?Nt:e._a[Mt]<0||e._a[Mt]>999?Mt:-1,e._pf._overflowDayOfYear&&(Ut>t||t>Dt)&&(t=Dt),e._pf.overflow=t)}function M(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===r)),e._isValid}function P(e){return e?e.toLowerCase().replace("_","-"):e}function q(e){for(var t,n,r,o,s=0;s<e.length;){for(o=P(e[s]).split("-"),t=o.length,n=P(e[s+1]),n=n?n.split("-"):null;t>0;){if(r=B(o.slice(0,t).join("-")))return r;if(n&&n.length>=t&&A(o,n,!0)>=t-1)break;t--}s++}return null}function B(t){var n=null;if(!Pt[t]&&Bt)try{n=xt.locale(),e("./locale/"+t),xt.locale(n)}catch(r){}return Pt[t]}function F(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(xt.isMoment(e)||j(e)?+e:+xt(e))-+n,n._d.setTime(+n._d+r),xt.updateOffset(n,!1),n):xt(e).local()}function H(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function $(e){var t,n,r=e.match(Yt);for(t=0,n=r.length;n>t;t++)r[t]=wn[r[t]]?wn[r[t]]:H(r[t]);return function(o){var s="";for(t=0;n>t;t++)s+=r[t]instanceof Function?r[t].call(o,e):r[t];return s}}function Y(e,t){return e.isValid()?(t=G(t,e.localeData()),gn[t]||(gn[t]=$(t)),gn[t](e)):e.localeData().invalidDate()}function G(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Gt.lastIndex=0;r>=0&&Gt.test(e);)e=e.replace(Gt,n),Gt.lastIndex=0,r-=1;return e}function V(e,t){var n,r=t._strict;switch(e){case"Q":return nn;case"DDDD":return on;case"YYYY":case"GGGG":case"gggg":return r?sn:zt;case"Y":case"G":case"g":return an;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?un:Jt;case"S":if(r)return nn;case"SS":if(r)return rn;case"SSS":if(r)return on;case"DDD":return Wt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Qt;case"a":case"A":return t._locale._meridiemParse;case"x":return en;case"X":return tn;case"Z":case"ZZ":return Xt;case"T":return Zt;case"SSSS":return Kt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?rn:Vt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Vt;case"Do":return r?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(tt(et(e.replace("\\","")),"i"))}}function W(e){e=e||"";var t=e.match(Xt)||[],n=t[t.length-1]||[],r=(n+"").match(fn)||["-",0,0],o=+(60*r[1])+U(r[2]);return"+"===r[0]?o:-o}function z(e,t,n){var r,o=n._a;switch(e){case"Q":null!=t&&(o[It]=3*(U(t)-1));break;case"M":case"MM":null!=t&&(o[It]=U(t)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(t,e,n._strict),null!=r?o[It]=r:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(o[Dt]=U(t));break;case"Do":null!=t&&(o[Dt]=U(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=U(t));break;case"YY":o[Ut]=xt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":o[Ut]=U(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":o[Rt]=U(t);break;case"m":case"mm":o[Lt]=U(t);break;case"s":case"ss":o[Nt]=U(t);break;case"S":case"SS":case"SSS":case"SSSS":o[Mt]=U(1e3*("0."+t));break;case"x":n._d=new Date(U(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=W(t);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(t),null!=r?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=U(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=xt.parseTwoDigitYear(t)}}function J(e){var t,n,r,s,i,u,a;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(i=1,u=4,n=o(t.GG,e._a[Ut],pt(xt(),1,4).year),r=o(t.W,1),s=o(t.E,1)):(i=e._locale._week.dow,u=e._locale._week.doy,n=o(t.gg,e._a[Ut],pt(xt(),i,u).year),r=o(t.w,1),null!=t.d?(s=t.d,i>s&&++r):s=null!=t.e?t.e+i:i),a=ft(n,r,s,u,i),e._a[Ut]=a.year,e._dayOfYear=a.dayOfYear}function K(e){var t,n,r,s,i=[];if(!e._d){for(r=X(e),e._w&&null==e._a[Dt]&&null==e._a[It]&&J(e),e._dayOfYear&&(s=o(e._a[Ut],r[Ut]),e._dayOfYear>R(s)&&(e._pf._overflowDayOfYear=!0),n=at(s,0,e._dayOfYear),e._a[It]=n.getUTCMonth(),e._a[Dt]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=i[t]=r[t];for(;7>t;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Rt]&&0===e._a[Lt]&&0===e._a[Nt]&&0===e._a[Mt]&&(e._nextDay=!0,e._a[Rt]=0),e._d=(e._useUTC?at:ut).apply(null,i),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Rt]=24)}}function Q(e){var t;e._d||(t=T(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],K(e))}function X(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Z(e){if(e._f===xt.ISO_8601)return void rt(e);e._a=[],e._pf.empty=!0;var t,n,o,s,i,u=""+e._i,a=u.length,l=0;for(o=G(e._f,e._locale).match(Yt)||[],t=0;t<o.length;t++)s=o[t],n=(u.match(V(s,e))||[])[0],n&&(i=u.substr(0,u.indexOf(n)),i.length>0&&e._pf.unusedInput.push(i),u=u.slice(u.indexOf(n)+n.length),l+=n.length),wn[s]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(s),z(s,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=a-l,u.length>0&&e._pf.unusedInput.push(u),e._pf.bigHour===!0&&e._a[Rt]<=12&&(e._pf.bigHour=r),e._a[Rt]=f(e._locale,e._a[Rt],e._meridiem),K(e),N(e)}function et(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,o){return t||n||r||o})}function tt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function nt(e){var t,n,r,o,s;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(o=0;o<e._f.length;o++)s=0,t=_({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=i(),t._f=e._f[o],Z(t),M(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==r||r>s)&&(r=s,n=t));g(e,n||t)}function rt(e){var t,n,r=e._i,o=ln.exec(r);if(o){for(e._pf.iso=!0,t=0,n=dn.length;n>t;t++)if(dn[t][1].exec(r)){e._f=dn[t][0]+(o[6]||" ");break}for(t=0,n=pn.length;n>t;t++)if(pn[t][1].exec(r)){e._f+=pn[t][0];break}r.match(Xt)&&(e._f+="Z"),Z(e)}else e._isValid=!1}function ot(e){rt(e),e._isValid===!1&&(delete e._isValid,xt.createFromInputFallback(e))}function st(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function it(e){var t,n=e._i;n===r?e._d=new Date:j(n)?e._d=new Date(+n):null!==(t=Ft.exec(n))?e._d=new Date(+t[1]):"string"==typeof n?ot(e):E(n)?(e._a=st(n.slice(0),function(e){return parseInt(e,10)}),K(e)):"object"==typeof n?Q(e):"number"==typeof n?e._d=new Date(n):xt.createFromInputFallback(e)}function ut(e,t,n,r,o,s,i){var u=new Date(e,t,n,r,o,s,i);return 1970>e&&u.setFullYear(e),u}function at(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function lt(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ct(e,t,n,r,o){return o.relativeTime(t||1,!!n,e,r)}function dt(e,t,n){var r=xt.duration(e).abs(),o=Tt(r.as("s")),s=Tt(r.as("m")),i=Tt(r.as("h")),u=Tt(r.as("d")),a=Tt(r.as("M")),l=Tt(r.as("y")),c=o<_n.s&&["s",o]||1===s&&["m"]||s<_n.m&&["mm",s]||1===i&&["h"]||i<_n.h&&["hh",i]||1===u&&["d"]||u<_n.d&&["dd",u]||1===a&&["M"]||a<_n.M&&["MM",a]||1===l&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,ct.apply({},c)}function pt(e,t,n){var r,o=n-t,s=n-e.day();return s>o&&(s-=7),o-7>s&&(s+=7),r=xt(e).add(s,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ft(e,t,n,r,o){var s,i,u=at(e,0,1).getUTCDay();return u=0===u?7:u,n=null!=n?n:o,s=o-u+(u>r?7:0)-(o>u?7:0),i=7*(t-1)+(n-o)+s+1,{year:i>0?e:e-1,dayOfYear:i>0?i:R(e-1)+i}}function ht(e){var t,n=e._i,o=e._f;return e._locale=e._locale||xt.localeData(e._l),null===n||o===r&&""===n?xt.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),xt.isMoment(n)?new m(n,!0):(o?E(o)?nt(e):Z(e):it(e),t=new m(e),t._nextDay&&(t.add(1,"d"),t._nextDay=r),t))}function mt(e,t){var n,r;if(1===t.length&&E(t[0])&&(t=t[0]),!t.length)return xt();for(n=t[0],r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function vt(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),I(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function gt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function _t(e,t,n){return"Month"===t?vt(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function bt(e,t){return function(n){return null!=n?(_t(this,e,n),xt.updateOffset(this,t),this):gt(this,e)}}function yt(e){return 400*e/146097}function wt(e){return 146097*e/400}function kt(e){xt.duration.fn[e]=function(){return this._data[e]}}function St(e){"undefined"==typeof ender&&(Et=Ot.moment,Ot.moment=e?a("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",xt):xt)}for(var xt,Et,jt,At="2.9.0",Ot="undefined"==typeof n||"undefined"!=typeof window&&window!==n.window?this:n,Tt=Math.round,Ct=Object.prototype.hasOwnProperty,Ut=0,It=1,Dt=2,Rt=3,Lt=4,Nt=5,Mt=6,Pt={},qt=[],Bt="undefined"!=typeof t&&t&&t.exports,Ft=/^\/?Date\((\-?\d+)/i,Ht=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,$t=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Yt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Gt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Vt=/\d\d?/,Wt=/\d{1,3}/,zt=/\d{1,4}/,Jt=/[+\-]?\d{1,6}/,Kt=/\d+/,Qt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Xt=/Z|[\+\-]\d\d:?\d\d/gi,Zt=/T/i,en=/[\+\-]?\d+/,tn=/[\+\-]?\d+(\.\d{1,3})?/,nn=/\d/,rn=/\d\d/,on=/\d{3}/,sn=/\d{4}/,un=/[+-]?\d{6}/,an=/[+-]?\d+/,ln=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,cn="YYYY-MM-DDTHH:mm:ssZ",dn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],pn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],fn=/([\+\-]|\d\d)/gi,hn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),mn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},vn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},gn={},_n={s:45,m:45,h:22,d:26,M:11},bn="DDD w W M D d".split(" "),yn="M D H h m s w W".split(" "),wn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return y(this.year()%100,2)},YYYY:function(){return y(this.year(),4)},YYYYY:function(){return y(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+y(Math.abs(e),6)},gg:function(){return y(this.weekYear()%100,2)},gggg:function(){return y(this.weekYear(),4)},ggggg:function(){return y(this.weekYear(),5)},GG:function(){return y(this.isoWeekYear()%100,2)},GGGG:function(){return y(this.isoWeekYear(),4)},GGGGG:function(){return y(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return U(this.milliseconds()/100)},SS:function(){return y(U(this.milliseconds()/10),2)},SSS:function(){return y(this.milliseconds(),3)},SSSS:function(){return y(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+y(U(e/60),2)+":"+y(U(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+y(U(e/60),2)+y(U(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},kn={},Sn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],xn=!1;bn.length;)jt=bn.pop(),wn[jt+"o"]=d(wn[jt],jt);for(;yn.length;)jt=yn.pop(),wn[jt+jt]=c(wn[jt],2);wn.DDDD=c(wn.DDD,3),g(h.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var r,o,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(o=xt.utc([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=xt([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.apply(t,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var o=this._relativeTime[n];return"function"==typeof o?o(e,t,n,r):o.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return pt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),xt=function(e,t,n,o){var s;return"boolean"==typeof n&&(o=n,n=r),s={},s._isAMomentObject=!0,s._i=e,s._f=t,s._l=n,s._strict=o,s._isUTC=!1,s._pf=i(),ht(s)},xt.suppressDeprecationWarnings=!1,xt.createFromInputFallback=a("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),xt.min=function(){var e=[].slice.call(arguments,0);return mt("isBefore",e)},xt.max=function(){var e=[].slice.call(arguments,0);return mt("isAfter",e)},xt.utc=function(e,t,n,o){var s;return"boolean"==typeof n&&(o=n,n=r),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=n,s._i=e,s._f=t,s._strict=o,s._pf=i(),ht(s).utc()},xt.unix=function(e){return xt(1e3*e)},xt.duration=function(e,t){var n,r,o,i,u=e,a=null;return xt.isDuration(e)?u={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(u={},t?u[t]=e:u.milliseconds=e):(a=Ht.exec(e))?(n="-"===a[1]?-1:1,u={y:0,d:U(a[Dt])*n,h:U(a[Rt])*n,m:U(a[Lt])*n,s:U(a[Nt])*n,ms:U(a[Mt])*n}):(a=$t.exec(e))?(n="-"===a[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},u={y:o(a[2]),M:o(a[3]),d:o(a[4]),h:o(a[5]),m:o(a[6]),s:o(a[7]),w:o(a[8])}):null==u?u={}:"object"==typeof u&&("from"in u||"to"in u)&&(i=k(xt(u.from),xt(u.to)),u={},u.ms=i.milliseconds,u.M=i.months),r=new v(u),xt.isDuration(e)&&s(e,"_locale")&&(r._locale=e._locale),r},xt.version=At,xt.defaultFormat=cn,xt.ISO_8601=function(){},xt.momentProperties=qt,xt.updateOffset=function(){},xt.relativeTimeThreshold=function(e,t){return _n[e]===r?!1:t===r?_n[e]:(_n[e]=t,!0)},xt.lang=a("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return xt.locale(e,t)}),xt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?xt.defineLocale(e,t):xt.localeData(e),n&&(xt.duration._locale=xt._locale=n)),xt._locale._abbr},xt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Pt[e]||(Pt[e]=new h),Pt[e].set(t),xt.locale(e),Pt[e]):(delete Pt[e],null)},xt.langData=a("moment.langData is deprecated. Use moment.localeData instead.",function(e){return xt.localeData(e)}),xt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return xt._locale;if(!E(e)){if(t=B(e))return t;e=[e]}return q(e)},xt.isMoment=function(e){return e instanceof m||null!=e&&s(e,"_isAMomentObject")},xt.isDuration=function(e){return e instanceof v};for(jt=Sn.length-1;jt>=0;--jt)C(Sn[jt]);xt.normalizeUnits=function(e){return O(e)},xt.invalid=function(e){var t=xt.utc(0/0);return null!=e?g(t._pf,e):t._pf.userInvalidated=!0,t},xt.parseZone=function(){return xt.apply(null,arguments).parseZone()},xt.parseTwoDigitYear=function(e){return U(e)+(U(e)>68?1900:2e3)},xt.isDate=j,g(xt.fn=m.prototype,{clone:function(){return xt(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=xt(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():Y(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Y(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return M(this)},isDSTShifted:function(){return this._a?this.isValid()&&A(this._a,(this._isUTC?xt.utc(this._a):xt(this._a)).toArray())>0:!1},parsingFlags:function(){return g({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=Y(this,e||xt.defaultFormat);return this.localeData().postformat(t)},add:S(1,"add"),subtract:S(-1,"subtract"),diff:function(e,t,n){var r,o,s=F(e,this),i=6e4*(s.utcOffset()-this.utcOffset());return t=O(t),"year"===t||"month"===t||"quarter"===t?(o=p(this,s),"quarter"===t?o/=3:"year"===t&&(o/=12)):(r=this-s,o="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-i)/864e5:"week"===t?(r-i)/6048e5:r),n?o:b(o)},from:function(e,t){return xt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(xt(),e)},calendar:function(e){var t=e||xt(),n=F(t,this).startOf("day"),r=this.diff(n,"days",!0),o=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,xt(t)))},isLeapYear:function(){return L(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=lt(e,this.localeData()),this.add(e-t,"d")):t},month:bt("Month",!0),startOf:function(e){switch(e=O(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=O(e),e===r||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){var n;return t=O("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=xt.isMoment(e)?e:xt(e),+this>+e):(n=xt.isMoment(e)?+e:+xt(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=O("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=xt.isMoment(e)?e:xt(e),+e>+this):(n=xt.isMoment(e)?+e:+xt(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return t=O(t||"millisecond"),"millisecond"===t?(e=xt.isMoment(e)?e:xt(e),+this===+e):(n=+xt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:a("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=xt.apply(null,arguments),this>e?this:e}),max:a("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=xt.apply(null,arguments),e>this?this:e}),zone:a("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,r=this._offset||0;return null!=e?("string"==typeof e&&(e=W(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==e&&(!t||this._changeInProgress?x(this,xt.duration(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,xt.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(W(this._i)),this},hasAlignedHourOffset:function(e){return e=e?xt(e).utcOffset():0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return I(this.year(),this.month())},dayOfYear:function(e){var t=Tt((xt(this).startOf("day")-xt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=pt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=pt(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=pt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return D(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return D(this.year(),e.dow,e.doy)},get:function(e){return e=O(e),this[e]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else e=O(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(e){var t;return e===r?this._locale._abbr:(t=xt.localeData(e),null!=t&&(this._locale=t),this)},lang:a("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===r?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),xt.fn.millisecond=xt.fn.milliseconds=bt("Milliseconds",!1),xt.fn.second=xt.fn.seconds=bt("Seconds",!1),xt.fn.minute=xt.fn.minutes=bt("Minutes",!1),xt.fn.hour=xt.fn.hours=bt("Hours",!0),xt.fn.date=bt("Date",!0),xt.fn.dates=a("dates accessor is deprecated. Use date instead.",bt("Date",!0)),xt.fn.year=bt("FullYear",!0),xt.fn.years=a("years accessor is deprecated. Use year instead.",bt("FullYear",!0)),xt.fn.days=xt.fn.day,xt.fn.months=xt.fn.month,xt.fn.weeks=xt.fn.week,xt.fn.isoWeeks=xt.fn.isoWeek,xt.fn.quarters=xt.fn.quarter,xt.fn.toJSON=xt.fn.toISOString,xt.fn.isUTC=xt.fn.isUtc,g(xt.duration.fn=v.prototype,{_bubble:function(){var e,t,n,r=this._milliseconds,o=this._days,s=this._months,i=this._data,u=0;i.milliseconds=r%1e3,e=b(r/1e3),i.seconds=e%60,t=b(e/60),i.minutes=t%60,n=b(t/60),i.hours=n%24,o+=b(n/24),u=b(yt(o)),o-=b(wt(u)),s+=b(o/30),o%=30,u+=b(s/12),s%=12,i.days=o,i.months=s,i.years=u},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return b(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*U(this._months/12)
},humanize:function(e){var t=dt(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=xt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=xt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=O(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=O(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*yt(t),"month"===e?n:n/12;switch(t=this._days+Math.round(wt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:xt.fn.lang,locale:xt.fn.locale,toIsoString:a("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),o=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||o||s?"T":"")+(r?r+"H":"")+(o?o+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),xt.duration.fn.toString=xt.duration.fn.toISOString;for(jt in hn)s(hn,jt)&&kt(jt.toLowerCase());xt.duration.fn.asMilliseconds=function(){return this.as("ms")},xt.duration.fn.asSeconds=function(){return this.as("s")},xt.duration.fn.asMinutes=function(){return this.as("m")},xt.duration.fn.asHours=function(){return this.as("h")},xt.duration.fn.asDays=function(){return this.as("d")},xt.duration.fn.asWeeks=function(){return this.as("weeks")},xt.duration.fn.asMonths=function(){return this.as("M")},xt.duration.fn.asYears=function(){return this.as("y")},xt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===U(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Bt?t.exports=xt:"function"==typeof define&&define.amd?(define(function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(Ot.moment=Et),xt}),St(!0)):St()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapter.js":[function(e,t){"use strict";function n(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n)===!0)return e[n];return!1}function r(e){return function(t,n){t||n[0]&&n[0].error?e(t||n[0]):e(null,n.length?n[0]:n)}}function o(e){var t={},n=[];return a.traverseRevTree(e,function(e,r,o,s){var i=r+"-"+o;return e&&(t[i]=0),void 0!==s&&n.push({from:s,to:i}),i}),n.reverse(),n.forEach(function(e){t[e.from]=void 0===t[e.from]?1+t[e.to]:Math.min(t[e.from],1+t[e.to])}),t}function s(e,t,n){var r="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;if(t.descending&&r.reverse(),!r.length)return e._allDocs({limit:0},n);var o={offset:t.skip};return f.all(r.map(function(n){var r=u.extend(!0,{key:n,deleted:"ok"},t);return["limit","skip","keys"].forEach(function(e){delete r[e]}),new f(function(t,s){e._allDocs(r,function(e,r){return e?s(e):(o.total_rows=r.total_rows,void t(r.rows[0]||{key:n,error:"not_found"}))})})})).then(function(e){return o.rows=e,o})}function i(){var e=this;c.call(this);var t,n=0,r=["change","delete","create","update"];this.on("newListener",function(o){if(~r.indexOf(o)){if(n)return void n++;n++;var s=0;t=this.changes({conflicts:!0,include_docs:!0,continuous:!0,since:"now",onChange:function(t){t.seq<=s||(s=t.seq,e.emit("change",t),t.doc._deleted?e.emit("delete",t):"1"===t.doc._rev.split("-")[0]?e.emit("create",t):e.emit("update",t))}})}}),this.on("removeListener",function(e){~r.indexOf(e)&&(n--,n||t.cancel())})}var u=e("./utils"),a=e("./merge"),l=e("./deps/errors"),c=e("events").EventEmitter,d=e("./deps/upsert"),p=e("./changes"),f=u.Promise;u.inherits(i,c),t.exports=i,i.prototype.post=u.adapterFun("post",function(e,t,n){return"function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e)?n(l.error(l.NOT_AN_OBJECT)):void this.bulkDocs({docs:[e]},t,r(n))}),i.prototype.put=u.adapterFun("put",u.getArguments(function(e){var t,n,o,s,i=e.shift(),a="_id"in i;if("object"!=typeof i||Array.isArray(i))return(s=e.pop())(l.error(l.NOT_AN_OBJECT));for(i=u.clone(i);;)if(t=e.shift(),n=typeof t,"string"!==n||a?"string"!==n||!a||"_rev"in i?"object"===n?o=t:"function"===n&&(s=t):i._rev=t:(i._id=t,a=!0),!e.length)break;o=o||{};var c=u.invalidIdError(i._id);return c?s(c):u.isLocalId(i._id)&&"function"==typeof this._putLocal?i._deleted?this._removeLocal(i,s):this._putLocal(i,s):void this.bulkDocs({docs:[i]},o,r(s))})),i.prototype.putAttachment=u.adapterFun("putAttachment",function(e,t,n,r,o,s){function i(e){return e._attachments=e._attachments||{},e._attachments[t]={content_type:o,data:r},u.put(e)}var u=this;return"function"==typeof o&&(s=o,o=r,r=n,n=null),"undefined"==typeof o&&(o=r,r=n,n=null),u.get(e).then(function(e){if(e._rev!==n)throw l.error(l.REV_CONFLICT);return i(e)},function(t){if(t.reason===l.MISSING_DOC.message)return i({_id:e});throw t})}),i.prototype.removeAttachment=u.adapterFun("removeAttachment",function(e,t,n,r){var o=this;o.get(e,function(e,s){return e?void r(e):s._rev!==n?void r(l.error(l.REV_CONFLICT)):s._attachments?(delete s._attachments[t],0===Object.keys(s._attachments).length&&delete s._attachments,void o.put(s,r)):r()})}),i.prototype.remove=u.adapterFun("remove",function(e,t,n,o){var s;"string"==typeof t?(s={_id:e,_rev:t},"function"==typeof n&&(o=n,n={})):(s=e,"function"==typeof t?(o=t,n={}):(o=n,n=t)),n=u.clone(n||{}),n.was_delete=!0;var i={_id:s._id,_rev:s._rev||n.rev};return i._deleted=!0,u.isLocalId(i._id)&&"function"==typeof this._removeLocal?this._removeLocal(s,o):void this.bulkDocs({docs:[i]},n,r(o))}),i.prototype.revsDiff=u.adapterFun("revsDiff",function(e,t,n){function r(e,t){l.has(e)||l.set(e,{missing:[]}),l.get(e).missing.push(t)}function o(t,n){var o=e[t].slice(0);a.traverseRevTree(n,function(e,n,s,i,u){var a=n+"-"+s,l=o.indexOf(a);-1!==l&&(o.splice(l,1),"available"!==u.status&&r(t,a))}),o.forEach(function(e){r(t,e)})}"function"==typeof t&&(n=t,t={}),t=u.clone(t);var s=Object.keys(e);if(!s.length)return n(null,{});var i=0,l=new u.Map;s.map(function(t){this._getRevisionTree(t,function(r,u){if(r&&404===r.status&&"missing"===r.message)l.set(t,{missing:e[t]});else{if(r)return n(r);o(t,u)}if(++i===s.length){var a={};return l.forEach(function(e,t){a[t]=e}),n(null,a)}})},this)}),i.prototype.compactDocument=u.adapterFun("compactDocument",function(e,t,n){var r=this;this._getRevisionTree(e,function(s,i){if(s)return n(s);var u=o(i),l=[],c=[];Object.keys(u).forEach(function(e){u[e]>t&&l.push(e)}),a.traverseRevTree(i,function(e,t,n,r,o){var s=t+"-"+n;"available"===o.status&&-1!==l.indexOf(s)&&c.push(s)}),r._doCompaction(e,c,n)})}),i.prototype.compact=u.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={});var n=this;e=u.clone(e||{}),n.get("_local/compaction")["catch"](function(){return!1}).then(function(r){return"function"==typeof n._compact?(r&&r.last_seq&&(e.last_seq=r.last_seq),n._compact(e,t)):void 0})}),i.prototype._compact=function(e,t){function n(e){i.push(o.compactDocument(e.id,0))}function r(e){var n=e.last_seq;f.all(i).then(function(){return d(o,"_local/compaction",function(e){return!e.last_seq||e.last_seq<n?(e.last_seq=n,e):!1})}).then(function(){t(null,{ok:!0})})["catch"](t)}var o=this,s={returnDocs:!1,last_seq:e.last_seq||0},i=[];o.changes(s).on("change",n).on("complete",r).on("error",t)},i.prototype.get=u.adapterFun("get",function(e,t,r){function o(){var n=[],o=s.length;return o?void s.forEach(function(s){i.get(e,{rev:s,revs:t.revs,attachments:t.attachments},function(e,t){n.push(e?{missing:s}:{ok:t}),o--,o||r(null,n)})}):r(null,n)}if("function"==typeof t&&(r=t,t={}),"string"!=typeof e)return r(l.error(l.INVALID_ID));if(u.isLocalId(e)&&"function"==typeof this._getLocal)return this._getLocal(e,r);var s=[],i=this;if(!t.open_revs)return this._get(e,t,function(e,o){if(t=u.clone(t),e)return r(e);var s=o.doc,l=o.metadata,c=o.ctx;if(t.conflicts){var d=a.collectConflicts(l);d.length&&(s._conflicts=d)}if(u.isDeleted(l,s._rev)&&(s._deleted=!0),t.revs||t.revs_info){var p=a.rootToLeaf(l.rev_tree),f=n(p,function(e){return-1!==e.ids.map(function(e){return e.id}).indexOf(s._rev.split("-")[1])}),h=f.ids.map(function(e){return e.id}).indexOf(s._rev.split("-")[1])+1,m=f.ids.length-h;if(f.ids.splice(h,m),f.ids.reverse(),t.revs&&(s._revisions={start:f.pos+f.ids.length-1,ids:f.ids.map(function(e){return e.id})}),t.revs_info){var v=f.pos+f.ids.length;s._revs_info=f.ids.map(function(e){return v--,{rev:v+"-"+e.id,status:e.opts.status}})}}if(t.local_seq&&(u.info('The "local_seq" option is deprecated and will be removed'),s._local_seq=o.metadata.seq),t.attachments&&s._attachments){var g=s._attachments,_=Object.keys(g).length;if(0===_)return r(null,s);Object.keys(g).forEach(function(e){this._getAttachment(g[e],{encode:!0,ctx:c},function(t,n){var o=s._attachments[e];o.data=n,delete o.stub,delete o.length,--_||r(null,s)})},i)}else{if(s._attachments)for(var b in s._attachments)s._attachments.hasOwnProperty(b)&&(s._attachments[b].stub=!0);r(null,s)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){return e?r(e):(s=a.collectLeaves(t).map(function(e){return e.rev}),void o())});else{if(!Array.isArray(t.open_revs))return r(l.error(l.UNKNOWN_ERROR,"function_clause"));s=t.open_revs;for(var c=0;c<s.length;c++){var d=s[c];if("string"!=typeof d||!/^\d+-/.test(d))return r(l.error(l.INVALID_REV))}o()}}),i.prototype.getAttachment=u.adapterFun("getAttachment",function(e,t,n,r){var o=this;n instanceof Function&&(r=n,n={}),n=u.clone(n),this._get(e,n,function(e,s){return e?r(e):s.doc._attachments&&s.doc._attachments[t]?(n.ctx=s.ctx,void o._getAttachment(s.doc._attachments[t],n,r)):r(l.error(l.MISSING_DOC))})}),i.prototype.allDocs=u.adapterFun("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e=u.clone(e),e.skip="undefined"!=typeof e.skip?e.skip:0,"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(n)return void t(l.error(l.QUERY_PARSE_ERROR,"Query parameter `"+n+"` is not compatible with multi-get"));if("http"!==this.type())return s(this,e,t)}return this._allDocs(e,t)}),i.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new p(this,e,t)},i.prototype.close=u.adapterFun("close",function(e){return this._closed=!0,this._close(e)}),i.prototype.info=u.adapterFun("info",function(e){var t=this;this._info(function(n,r){return n?e(n):(r.db_name=r.db_name||t._db_name,r.auto_compaction=!(!t.auto_compaction||"http"===t.type()),void e(null,r))})}),i.prototype.id=u.adapterFun("id",function(e){return this._id(e)}),i.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},i.prototype.bulkDocs=u.adapterFun("bulkDocs",function(e,t,n){if("function"==typeof t&&(n=t,t={}),t=u.clone(t),Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(l.error(l.MISSING_BULK_DOCS));for(var r=0;r<e.docs.length;++r)if("object"!=typeof e.docs[r]||Array.isArray(e.docs[r]))return n(l.error(l.NOT_AN_OBJECT));return e=u.clone(e),"new_edits"in t||(t.new_edits="new_edits"in e?e.new_edits:!0),t.new_edits||"http"===this.type()||e.docs.sort(function(e,t){var n=u.compare(e._id,t._id);if(0!==n)return n;var r=e._revisions?e._revisions.start:0,o=t._revisions?t._revisions.start:0;return u.compare(r,o)}),e.docs.forEach(function(e){e._deleted&&delete e._attachments}),this._bulkDocs(e,t,function(e,r){return e?n(e):(t.new_edits||(r=r.filter(function(e){return e.error})),void n(null,r))})}),i.prototype.registerDependentDatabase=u.adapterFun("registerDependentDatabase",function(e,t){function n(t){return t.dependentDbs=t.dependentDbs||{},t.dependentDbs[e]?!1:(t.dependentDbs[e]=!0,t)}var r=new this.constructor(e,this.__opts||{});d(this,"_local/_pouch_dependentDbs",n,function(e){return e?t(e):t(null,{db:r})})})},{"./changes":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/changes.js","./deps/errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","./deps/upsert":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/upsert.js","./merge":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/merge.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js",events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/http/http.js":[function(e,t){(function(n){"use strict";function r(e){return/^_(design|local)/.test(e)?e:encodeURIComponent(e)}function o(e){return e._attachments&&Object.keys(e._attachments)?d.Promise.all(Object.keys(e._attachments).map(function(t){var n=e._attachments[t];if(n.data&&"string"!=typeof n.data){if(h)return new d.Promise(function(e){d.readAsBinaryString(n.data,function(t){n.data=d.btoa(t),e()})});n.data=n.data.toString("base64")}})):d.Promise.resolve()}function s(e,t){if(/http(s?):/.test(e)){var n=d.parseUri(e);n.remote=!0,(n.user||n.password)&&(n.auth={username:n.user,password:n.password});var r=n.path.replace(/(^\/|\/$)/g,"").split("/");if(n.db=r.pop(),n.path=r.join("/"),t=t||{},t=d.clone(t),n.headers=t.headers||t.ajax&&t.ajax.headers||{},t.auth||n.auth){var o=t.auth||n.auth,s=d.btoa(o.username+":"+o.password);n.headers.Authorization="Basic "+s}return t.headers&&(n.headers=t.headers),n}return{host:"",path:"/",db:e,auth:!1}}function i(e,t){return u(e,e.db+"/"+t)}function u(e,t){if(e.remote){var n=e.path?"/":"";return e.protocol+"://"+e.host+":"+e.port+"/"+e.path+n+t}return"/"+t}function a(e,t){function n(e,t){var n=d.extend({},b,e);return f(n.method+" "+n.url),d.ajax(n,t)}function a(e){return e.split("/").map(encodeURIComponent).join("/")}var v=this;v.getHost=e.getHost?e.getHost:s;var g=v.getHost(e.name,e),_=i(g,"");v.getUrl=function(){return _},v.getHeaders=function(){return d.clone(g.headers)};var b=e.ajax||{};e=d.clone(e);var y=function(){n({headers:g.headers,method:"PUT",url:_},function(e){e&&401===e.status?n({headers:g.headers,method:"HEAD",url:_},function(e){e?t(e):t(null,v)}):e&&412!==e.status?t(e):t(null,v)})};e.skipSetup||n({headers:g.headers,method:"GET",url:_},function(e){e?404===e.status?(d.explain404("PouchDB is just detecting if the remote DB exists."),y()):t(e):t(null,v)}),v.type=function(){return"http"},v.id=d.adapterFun("id",function(e){n({headers:g.headers,method:"GET",url:u(g,"")},function(t,n){var r=n&&n.uuid?n.uuid+g.db:i(g,"");e(null,r)})}),v.request=d.adapterFun("request",function(e,t){e.headers=g.headers,e.url=i(g,e.url),n(e,t)}),v.compact=d.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={}),e=d.clone(e),n({headers:g.headers,url:i(g,"_compact"),method:"POST"},function(){function n(){v.info(function(r,o){o.compact_running?setTimeout(n,e.interval||200):t(null,{ok:!0})})}"function"==typeof t&&n()})}),v._info=function(e){n({headers:g.headers,method:"GET",url:i(g,"")},function(t,n){t?e(t):(n.host=i(g,""),e(null,n))})},v.get=d.adapterFun("get",function(e,t,o){"function"==typeof t&&(o=t,t={}),t=d.clone(t),void 0===t.auto_encode&&(t.auto_encode=!0);var s=[];t.revs&&s.push("revs=true"),t.revs_info&&s.push("revs_info=true"),t.local_seq&&s.push("local_seq=true"),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),s.push("open_revs="+t.open_revs)),t.attachments&&s.push("attachments=true"),t.rev&&s.push("rev="+t.rev),t.conflicts&&s.push("conflicts="+t.conflicts),s=s.join("&"),s=""===s?"":"?"+s,t.auto_encode&&(e=r(e));var u={headers:g.headers,method:"GET",url:i(g,e+s)},a=e.split("/");(a.length>1&&"_design"!==a[0]&&"_local"!==a[0]||a.length>2&&"_design"===a[0]&&"_local"!==a[0])&&(u.binary=!0),n(u,function(e,t,n){return e?o(e):void o(null,t,n)})}),v.remove=d.adapterFun("remove",function(e,t,o,s){var u;"string"==typeof t?(u={_id:e,_rev:t},"function"==typeof o&&(s=o,o={})):(u=e,"function"==typeof t?(s=t,o={}):(s=o,o=t));var a=u._rev||o.rev;n({headers:g.headers,method:"DELETE",url:i(g,r(u._id))+"?rev="+a},s)}),v.getAttachment=d.adapterFun("getAttachment",function(e,t,n,o){"function"==typeof n&&(o=n,n={}),n=d.clone(n),void 0===n.auto_encode&&(n.auto_encode=!0),n.auto_encode&&(e=r(e)),n.auto_encode=!1,v.get(e+"/"+a(t),n,o)}),v.removeAttachment=d.adapterFun("removeAttachment",function(e,t,o,s){var u=i(g,r(e)+"/"+a(t))+"?rev="+o;n({headers:g.headers,method:"DELETE",url:u},s)}),v.putAttachment=d.adapterFun("putAttachment",function(e,t,o,s,u,l){"function"==typeof u&&(l=u,u=s,s=o,o=null),"undefined"==typeof u&&(u=s,s=o,o=null);var c=r(e)+"/"+a(t),f=i(g,c);if(o&&(f+="?rev="+o),"string"==typeof s){var v;try{v=d.atob(s)}catch(_){return l(p.error(p.BAD_ARG,"Attachments need to be base64 encoded"))}s=h?d.createBlob([d.fixBinary(v)],{type:u}):v?new m(v,"binary"):""}var b={headers:d.clone(g.headers),method:"PUT",url:f,processData:!1,body:s,timeout:6e4};b.headers["Content-Type"]=u,n(b,l)}),v.put=d.adapterFun("put",d.getArguments(function(e){var t,s,u,a=e.shift(),l="_id"in a,c=e.pop();return"object"!=typeof a||Array.isArray(a)?c(p.error(p.NOT_AN_OBJECT)):(a=d.clone(a),void o(a).then(function(){for(;;)if(t=e.shift(),s=typeof t,"string"!==s||l?"string"!==s||!l||"_rev"in a?"object"===s&&(u=d.clone(t)):a._rev=t:(a._id=t,l=!0),!e.length)break;u=u||{};var o=d.invalidIdError(a._id);if(o)throw o;var p=[];u&&"undefined"!=typeof u.new_edits&&p.push("new_edits="+u.new_edits),p=p.join("&"),""!==p&&(p="?"+p),n({headers:g.headers,method:"PUT",url:i(g,r(a._id))+p,body:a},function(e,t){return e?c(e):(t.ok=!0,void c(null,t))})})["catch"](c))})),v.post=d.adapterFun("post",function(e,t,n){return"function"==typeof t&&(n=t,t={}),t=d.clone(t),"object"!=typeof e?n(p.error(p.NOT_AN_OBJECT)):("_id"in e||(e._id=d.uuid()),void v.put(e,t,function(e,t){return e?n(e):(t.ok=!0,void n(null,t))}))}),v._bulkDocs=function(e,t,r){"undefined"!=typeof t.new_edits&&(e.new_edits=t.new_edits),d.Promise.all(e.docs.map(o)).then(function(){n({headers:g.headers,method:"POST",url:i(g,"_bulk_docs"),body:e},function(e,t){return e?r(e):(t.forEach(function(e){e.ok=!0}),void r(null,t))})})["catch"](r)},v.allDocs=d.adapterFun("allDocs",function(e,t){"function"==typeof e&&(t=e,e={}),e=d.clone(e);var r,o=[],s="GET";if(e.conflicts&&o.push("conflicts=true"),e.descending&&o.push("descending=true"),e.include_docs&&o.push("include_docs=true"),e.attachments&&o.push("attachments=true"),e.key&&o.push("key="+encodeURIComponent(JSON.stringify(e.key))),e.startkey&&o.push("startkey="+encodeURIComponent(JSON.stringify(e.startkey))),e.endkey&&o.push("endkey="+encodeURIComponent(JSON.stringify(e.endkey))),"undefined"!=typeof e.inclusive_end&&o.push("inclusive_end="+!!e.inclusive_end),"undefined"!=typeof e.limit&&o.push("limit="+e.limit),"undefined"!=typeof e.skip&&o.push("skip="+e.skip),o=o.join("&"),""!==o&&(o="?"+o),"undefined"!=typeof e.keys){var u="keys="+encodeURIComponent(JSON.stringify(e.keys));u.length+o.length+1<=c?o+=(-1!==o.indexOf("?")?"&":"?")+u:(s="POST",r=JSON.stringify({keys:e.keys}))}n({headers:g.headers,method:s,url:i(g,"_all_docs"+o),body:r},t)}),v._changes=function(e){var t="batch_size"in e?e.batch_size:l;e=d.clone(e),e.timeout=e.timeout||3e4;var r={timeout:e.timeout-5e3},o="undefined"!=typeof e.limit?e.limit:!1;0===o&&(o=1);var s;s="returnDocs"in e?e.returnDocs:!0;var u=o;if(e.style&&(r.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(r.include_docs=!0),e.attachments&&(r.attachments=!0),e.continuous&&(r.feed="longpoll"),e.conflicts&&(r.conflicts=!0),e.descending&&(r.descending=!0),e.filter&&"string"==typeof e.filter&&(r.filter=e.filter,"_view"===e.filter&&e.view&&"string"==typeof e.view&&(r.view=e.view)),e.query_params&&"object"==typeof e.query_params)for(var a in e.query_params)e.query_params.hasOwnProperty(a)&&(r[a]=e.query_params[a]);var f,h="GET";if(e.doc_ids){r.filter="_doc_ids";var m=JSON.stringify(e.doc_ids);m.length<c?r.doc_ids=m:(h="POST",f={doc_ids:e.doc_ids})}if(e.continuous&&v._useSSE)return v.sse(e,r,s);var _,b,y=function(s,a){if(!e.aborted){r.since=s,"object"==typeof r.since&&(r.since=JSON.stringify(r.since)),e.descending?o&&(r.limit=u):r.limit=!o||u>t?t:u;var l="?"+Object.keys(r).map(function(e){return e+"="+r[e]}).join("&"),c={headers:g.headers,method:h,url:i(g,"_changes"+l),timeout:e.timeout,body:f};b=s,e.aborted||(_=n(c,a))}},w=10,k=0,S={results:[]},x=function(n,r){if(!e.aborted){var i=0;if(r&&r.results){i=r.results.length,S.last_seq=r.last_seq;var a={};a.query=e.query_params,r.results=r.results.filter(function(t){u--;var n=d.filterChange(e)(t);return n&&(s&&S.results.push(t),d.call(e.onChange,t)),n})}else if(n)return e.aborted=!0,void d.call(e.complete,n);r&&r.last_seq&&(b=r.last_seq);var l=o&&0>=u||r&&t>i||e.descending;if((!e.continuous||o&&0>=u)&&l)d.call(e.complete,null,S);else{n?k+=1:k=0;var c=1<<k,f=w*c,h=e.maximumWait||3e4;if(f>h)return void d.call(e.complete,n||p.error(p.UNKNOWN_ERROR));setTimeout(function(){y(b,x)},f)}}};return y(e.since||0,x),{cancel:function(){e.aborted=!0,_&&_.abort()}}},v.sse=function(e,t,n){function r(t){var r=JSON.parse(t.data);n&&l.results.push(r),l.last_seq=r.seq,d.call(e.onChange,r)}function o(t){return a.removeEventListener("message",r,!1),p===!1?(v._useSSE=!1,void(c=v._changes(e))):(a.close(),void d.call(e.complete,t))}t.feed="eventsource",t.since=e.since||0,t.limit=e.limit,delete t.timeout;var s="?"+Object.keys(t).map(function(e){return e+"="+t[e]}).join("&"),u=i(g,"_changes"+s),a=new EventSource(u),l={results:[],last_seq:!1},c=!1,p=!1;return a.addEventListener("message",r,!1),a.onopen=function(){p=!0},a.onerror=o,{cancel:function(){return c?c.cancel():(a.removeEventListener("message",r,!1),void a.close())}}},v._useSSE=!1,v.revsDiff=d.adapterFun("revsDiff",function(e,t,r){"function"==typeof t&&(r=t,t={}),n({headers:g.headers,method:"POST",url:i(g,"_revs_diff"),body:JSON.stringify(e)},r)}),v._close=function(e){e()},v.destroy=d.adapterFun("destroy",function(e){n({url:i(g,""),method:"DELETE",headers:g.headers},function(t,n){t?(v.emit("error",t),e(t)):(v.emit("destroyed"),e(null,n))})})}var l=25,c=1800,d=e("../../utils"),p=e("../../deps/errors"),f=e("debug")("pouchdb:http"),h="undefined"==typeof n||n.browser,m=e("../../deps/buffer");a.destroy=d.toPromise(function(e,t,n){var r=s(e,t);t=t||{},"function"==typeof t&&(n=t,t={}),t=d.clone(t),t.headers=r.headers,t.method="DELETE",t.url=i(r,"");var o=t.ajax||{};t=d.extend({},t,o),d.ajax(t,n)}),a.valid=function(){return!0},t.exports=a}).call(this,e("_process"))},{"../../deps/buffer":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/buffer-browser.js","../../deps/errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","../../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js",_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js",debug:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/debug/browser.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-blob-support.js":[function(e,t){"use strict";function n(e,t){return new r.Promise(function(n,o){var i=r.createBlob([""],{type:"image/png"});e.objectStore(s).put(i,"key"),e.oncomplete=function(){var e=t.transaction([s],"readwrite"),i=e.objectStore(s).get("key");i.onerror=o,i.onsuccess=function(e){var t=e.target.result,o=URL.createObjectURL(t);r.ajax({url:o,cache:!0,binary:!0},function(e,t){e&&405===e.status?n(!0):(n(!(!t||"image/png"!==t.type)),e&&404===e.status&&r.explain404("PouchDB is just detecting blob URL support.")),URL.revokeObjectURL(o)})}}})["catch"](function(){return!1})}var r=e("../../utils"),o=e("./idb-constants"),s=o.DETECT_BLOB_SUPPORT_STORE;t.exports=n},{"../../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js","./idb-constants":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-constants.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-bulk-docs.js":[function(e,t){"use strict";function n(e,t,n,s,i,_){function b(){var e=[c,l,a,p,d,u],t=g(s,e,"readwrite");return t.error?_(t.error):(U=t.txn,U.onerror=v(_),U.ontimeout=v(_),U.oncomplete=k,I=U.objectStore(c),D=U.objectStore(l),R=U.objectStore(a),L=U.objectStore(u),void x(function(e){return e?($=!0,_(e)):void w()}))}function y(){r.processDocs(M,n,H,U,F,E,t)}function w(){function e(){++n===M.length&&y()}function t(t){var n=h(t.target.result);n&&H.set(n.id,n),e()}if(M.length)for(var n=0,o=0,s=M.length;s>o;o++){var i=M[o];if(i._id&&r.isLocalId(i._id))e();else{var u=I.get(i.metadata.id);u.onsuccess=t}}}function k(){$||(i.notify(n._name),n._docCount=-1,_(null,F))}function S(e,t){var n=R.get(e);n.onsuccess=function(n){if(n.target.result)t();else{var r=o.error(o.MISSING_STUB,"unknown stub attachment with digest "+e);r.status=412,t(r)}}}function x(e){function t(){++o===n.length&&e(r)}var n=[];if(M.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var r=e.data._attachments[t];r.stub&&n.push(r.digest)})}),!n.length)return e();var r,o=0;n.forEach(function(e){S(e,function(e){e&&!r&&(r=e),t()})})}function E(e,t,n,r,o,s,i){var u=e.data;u._id=e.metadata.id,u._rev=e.metadata.rev,n&&(u._deleted=!0);var a=u._attachments&&Object.keys(u._attachments).length;return a?O(e,t,n,r,o,i):void A(e,t,n,r,o,i)}function j(e){var t=r.compactTree(e.metadata);f(t,e.metadata.id,U)}function A(e,t,r,o,s,i){function u(o){s&&n.auto_compaction&&j(e),d.seq=o.target.result,delete d.rev;var i=m(d,t,r),u=I.put(i);u.onsuccess=l}function a(e){e.preventDefault(),e.stopPropagation();var t=D.index("_doc_id_rev"),n=t.getKey(c._doc_id_rev);n.onsuccess=function(e){var t=D.put(c,e.target.result);t.onsuccess=u}}function l(){F[i]={ok:!0,id:d.id,rev:t},H.set(e.metadata.id,e.metadata),T(e,d.seq,o)}var c=e.data,d=e.metadata;c._doc_id_rev=d.id+"::"+d.rev,delete c._id,delete c._rev;var p=D.put(c);p.onsuccess=u,p.onerror=a}function O(e,t,n,r,o,s){function i(){l===c.length&&A(e,t,n,r,o,s)}function u(){l++,i()}var a=e.data,l=0,c=Object.keys(a._attachments);c.forEach(function(t){var n=e.data._attachments[t];if(n.stub)l++,i();else{var r=n.data;delete n.data;var o=n.digest;C(o,r,u)}})}function T(e,t,n){function r(){++s===i.length&&n()}function o(n){var o=e.data._attachments[n].digest,s=L.put({seq:t,digestSeq:o+"::"+t});s.onsuccess=r,s.onerror=function(e){e.preventDefault(),e.stopPropagation(),r()}}var s=0,i=Object.keys(e.data._attachments||{});if(!i.length)return n();for(var u=0;u<i.length;u++)o(i[u])}function C(e,t,n){var r=R.count(e);r.onsuccess=function(r){var o=r.target.result;if(o)return n();var s={digest:e,body:t},i=R.put(s);i.onsuccess=n}}for(var U,I,D,R,L,N,M=e.docs,P=0,q=M.length;q>P;P++){var B=M[P];B._id&&r.isLocalId(B._id)||(B=M[P]=r.parseDoc(B,t.new_edits),B.error&&!N&&(N=B))}if(N)return _(N);var F=new Array(M.length),H=new r.Map,$=!1,Y=n._blobSupport?"blob":"base64";r.preprocessAttachments(M,Y,function(e){return e?_(e):void b()})}var r=e("../../utils"),o=e("../../deps/errors"),s=e("./idb-utils"),i=e("./idb-constants"),u=i.ATTACH_AND_SEQ_STORE,a=i.ATTACH_STORE,l=i.BY_SEQ_STORE,c=i.DOC_STORE,d=i.LOCAL_STORE,p=i.META_STORE,f=s.compactRevs,h=s.decodeMetadata,m=s.encodeMetadata,v=s.idbError,g=s.openTransactionSafely;t.exports=n},{"../../deps/errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","../../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js","./idb-constants":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-constants.js","./idb-utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-constants.js":[function(e,t,n){"use strict";n.ADAPTER_VERSION=5,n.DOC_STORE="document-store",n.BY_SEQ_STORE="by-sequence",n.ATTACH_STORE="attach-store",n.ATTACH_AND_SEQ_STORE="attach-seq-store",n.META_STORE="meta-store",n.LOCAL_STORE="local-store",n.DETECT_BLOB_SUPPORT_STORE="detect-blob-support"},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-utils.js":[function(e,t,n){(function(t){"use strict";function r(e,t,n){try{e.apply(t,n)}catch(r){"undefined"!=typeof PouchDB&&PouchDB.emit("error",r)}}var o=e("../../deps/errors"),s=e("../../utils"),i=e("./idb-constants");n.taskQueue={running:!1,queue:[]},n.applyNext=function(){if(!n.taskQueue.running&&n.taskQueue.queue.length){n.taskQueue.running=!0;var e=n.taskQueue.queue.shift();e.action(function(o,s){r(e.callback,this,[o,s]),n.taskQueue.running=!1,t.nextTick(n.applyNext)})}},n.idbError=function(e){return function(t){var n=t.target&&t.target.error&&t.target.error.name||t.target;e(o.error(o.IDB_ERROR,n,t.type))}},n.encodeMetadata=function(e,t,n){return{data:s.safeJsonStringify(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}},n.decodeMetadata=function(e){if(!e)return null;var t=s.safeJsonParse(e.data);return t.winningRev=e.winningRev,t.deletedOrLocal="1"===e.deletedOrLocal,t.seq=e.seq,t},n.decodeDoc=function(e){if(!e)return e;var t=s.lastIndexOf(e._doc_id_rev,":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e},n.readBlobData=function(e,t,n,r){n?e?"string"!=typeof e?s.readAsBinaryString(e,function(e){r(s.btoa(e))}):r(e):r(""):e?"string"!=typeof e?r(e):(e=s.fixBinary(atob(e)),r(s.createBlob([e],{type:t}))):r(s.createBlob([""],{type:t}))},n.fetchAttachmentsIfNecessary=function(e,t,n,r){function o(){++a===u.length&&r&&r()}function s(e,t){var r=e._attachments[t],s=r.digest,u=n.objectStore(i.ATTACH_STORE).get(s);u.onsuccess=function(e){r.body=e.target.result.body,o()}}var u=Object.keys(e._attachments||{});if(!u.length)return r&&r();var a=0;u.forEach(function(n){t.attachments&&t.include_docs?s(e,n):(e._attachments[n].stub=!0,o())})},n.postProcessAttachments=function(e){return s.Promise.all(e.map(function(e){if(e.doc&&e.doc._attachments){var t=Object.keys(e.doc._attachments);return s.Promise.all(t.map(function(t){var r=e.doc._attachments[t];if("body"in r){var o=r.body,i=r.content_type;return new s.Promise(function(u){n.readBlobData(o,i,!0,function(n){e.doc._attachments[t]=s.extend(s.pick(r,["digest","content_type"]),{data:n}),u()})})}}))}}))},n.compactRevs=function(e,t,n){function r(){c--,c||o()}function o(){s.length&&s.forEach(function(e){var t=l.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::￿",!1,!1));t.onsuccess=function(t){var n=t.target.result;n||a["delete"](e)}})}var s=[],u=n.objectStore(i.BY_SEQ_STORE),a=n.objectStore(i.ATTACH_STORE),l=n.objectStore(i.ATTACH_AND_SEQ_STORE),c=e.length;e.forEach(function(e){var n=u.index("_doc_id_rev"),o=t+"::"+e;n.getKey(o).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return r();u["delete"](t);var n=l.index("seq").openCursor(IDBKeyRange.only(t));n.onsuccess=function(e){var t=e.target.result;if(t){var n=t.value.digestSeq.split("::")[0];s.push(n),l["delete"](t.primaryKey),t["continue"]()}else r()}}})},n.openTransactionSafely=function(e,t,n){try{return{txn:e.transaction(t,n)}}catch(r){return{error:r}}}}).call(this,e("_process"))},{"../../deps/errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","../../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js","./idb-constants":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-constants.js",_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb.js":[function(e,t){(function(n){"use strict";
function r(e,t){var n=this;U.queue.push({action:function(t){o(n,e,t)},callback:t}),k()}function o(e,t,o){function s(e){var t=e.createObjectStore(b,{keyPath:"id"});e.createObjectStore(g,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(v,{keyPath:"digest"}),e.createObjectStore(w,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(_),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(y,{keyPath:"_id"});var n=e.createObjectStore(m,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}function c(e,t){var n=e.objectStore(b);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(e){var r=e.target.result;if(r){var o=r.value,s=u.isDeleted(o);o.deletedOrLocal=s?"1":"0",n.put(o),r["continue"]()}else t()}}function d(e){e.createObjectStore(y,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function k(e,t){var n=e.objectStore(y),r=e.objectStore(b),o=e.objectStore(g),s=r.openCursor();s.onsuccess=function(e){var s=e.target.result;if(s){var i=s.value,l=i.id,c=u.isLocalId(l),d=a.winningRev(i);if(c){var p=l+"::"+d,f=l+"::",h=l+"::~",m=o.index("_doc_id_rev"),v=IDBKeyRange.bound(f,h,!1,!1),g=m.openCursor(v);g.onsuccess=function(e){if(g=e.target.result){var t=g.value;t._doc_id_rev===p&&n.put(t),o["delete"](g.primaryKey),g["continue"]()}else r["delete"](s.primaryKey),s["continue"]()}}else s["continue"]()}else t&&t()}}function U(e){var t=e.createObjectStore(m,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}function R(e,t){var n=e.objectStore(g),r=e.objectStore(v),o=e.objectStore(m),s=r.count();s.onsuccess=function(e){var r=e.target.result;return r?void(n.openCursor().onsuccess=function(e){var n=e.target.result;if(!n)return t();for(var r=n.value,s=n.primaryKey,i=Object.keys(r._attachments||{}),u={},a=0;a<i.length;a++){var l=r._attachments[i[a]];u[l.digest]=!0}var c=Object.keys(u);for(a=0;a<c.length;a++){var d=c[a];o.put({seq:s,digestSeq:d+"::"+s})}n["continue"]()}):t()}}function L(e){function t(e){return e.data?E(e):(e.deletedOrLocal="1"===e.deletedOrLocal,e)}var n=e.objectStore(g),r=e.objectStore(b),o=r.openCursor();o.onsuccess=function(e){function o(){var e=u.id+"::",t=u.id+"::￿",r=n.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,t)),o=0;r.onsuccess=function(e){var t=e.target.result;if(!t)return u.seq=o,s();var n=t.primaryKey;n>o&&(o=n),t["continue"]()}}function s(){var e=j(u,u.winningRev,u.deletedOrLocal),t=r.put(e);t.onsuccess=function(){i["continue"]()}}var i=e.target.result;if(i){var u=t(i.value);return u.winningRev=u.winningRev||a.winningRev(u),u.seq?s():void o()}}}function N(e,t,n,r,o){try{if(e&&t)return o?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return o?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(s){return{error:s}}return null}function M(e,t,n){function r(){n(null,{total_rows:e,offset:t.skip,rows:j})}var o="startkey"in t?t.startkey:!1,s="endkey"in t?t.endkey:!1,i="key"in t?t.key:!1,c=t.skip||0,d="number"==typeof t.limit?t.limit:-1,p=t.inclusive_end!==!1,f="descending"in t&&t.descending?"prev":null,h=N(o,s,p,i,f);if(h&&h.error){var m=h.error;return"DataError"===m.name&&0===m.code?n(null,{total_rows:e,offset:t.skip,rows:[]}):n(l.error(l.IDB_ERROR,m.name,m.message))}var _=[b,g];t.attachments&&_.push(v);var y=I(H,_,"readonly");if(y.error)return n(y.error);var w=y.txn;w.oncomplete=function(){t.attachments?T(j).then(r):r()};var k=w.objectStore(b),S=f?k.openCursor(h,f):k.openCursor(h),j=[];S.onsuccess=function(e){function n(e,n){var o={id:e.id,key:e.id,value:{rev:s}};t.include_docs&&(o.doc=n,t.conflicts&&(o.doc._conflicts=a.collectConflicts(e)),A(o.doc,t,w));var i=u.isDeleted(e,s);if("ok"===t.deleted)i&&(o.value.deleted=!0,o.doc=null),j.push(o);else if(!i&&c--<=0&&(j.push(o),0===--d))return;r["continue"]()}if(e.target.result){var r=e.target.result,o=E(r.value),s=o.winningRev;if(t.include_docs){var i=w.objectStore(g).index("_doc_id_rev"),l=o.id+"::"+s;i.get(l).onsuccess=function(e){n(E(r.value),x(e.target.result))}}else n(o)}}}function P(t){if(-1!==e._docCount)return t(null,e._docCount);var n,r=I(H,[b],"readonly");if(r.error)return t(r.error);var o=r.txn,s=o.objectStore(b).index("deletedOrLocal");s.count(IDBKeyRange.only("0")).onsuccess=function(e){n=e.target.result},o.onerror=O(t),o.oncomplete=function(){e._docCount=n,t(null,e._docCount)}}var q=t.name,B=null,F=!1,H=null;e._docCount=-1,e._blobSupport=null,e._name=q,e.type=function(){return"idb"},e._id=u.toPromise(function(e){e(null,B)}),e._bulkDocs=function(t,n,o){p(t,n,e,H,r.Changes,o)},e._get=function(e,t,n){function r(){n(i,{doc:o,metadata:s,ctx:a})}var o,s,i,a;if(t=u.clone(t),t.ctx)a=t.ctx;else{var c=I(H,[b,g,v],"readonly");if(c.error)return n(c.error);a=c.txn}a.objectStore(b).get(e).onsuccess=function(e){if(s=E(e.target.result),!s)return i=l.error(l.MISSING_DOC,"missing"),r();if(u.isDeleted(s)&&!t.rev)return i=l.error(l.MISSING_DOC,"deleted"),r();var n=a.objectStore(g),c=t.rev||s.winningRev,d=s.id+"::"+c;n.index("_doc_id_rev").get(d).onsuccess=function(e){return o=e.target.result,o&&(o=x(o)),o?void r():(i=l.error(l.MISSING_DOC,"missing"),r())}}},e._getAttachment=function(e,t,n){var r;if(t=u.clone(t),t.ctx)r=t.ctx;else{var o=I(H,[b,g,v],"readonly");if(o.error)return n(o.error);r=o.txn}var s=e.digest,i=e.content_type;r.objectStore(v).get(s).onsuccess=function(e){var r=e.target.result.body;C(r,i,t.encode,function(e){n(null,e)})}},e._allDocs=function(e,t){P(function(n,r){return n?t(n):0===e.limit?t(null,{total_rows:r,offset:e.skip,rows:[]}):void M(r,e,t)})},e._info=function(t){P(function(n,r){if(n)return t(n);if(null===H||!D[e._name]){var o=new Error("db isn't open");return o.id="idbNull",t(o)}var s=0,i=I(H,[g],"readonly");if(i.error)return t(i.error);var u=i.txn;u.objectStore(g).openCursor(null,"prev").onsuccess=function(e){var t=e.target.result;s=t?t.key:0},u.oncomplete=function(){t(null,{doc_count:r,update_seq:s,idb_attachment_format:e._blobSupport?"binary":"base64"})}})},e._changes=function(t){function n(e){function n(){return u.seq!==i?e["continue"]():(d=i,u.winningRev===s._rev?o(s):void r())}function r(){var e=s._id+"::"+u.winningRev,t=m.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,e+"￿"));t.onsuccess=function(e){o(x(e.target.result.value))}}function o(n){var r=t.processChange(n,u,t);r.seq=u.seq,k(r)&&(w++,f&&y.push(r),t.attachments&&t.include_docs?A(n,t,h,function(){T([r]).then(function(){t.onChange(r)})}):t.onChange(r)),w!==p&&e["continue"]()}var s=x(e.value),i=e.key;if(l&&!l.has(s._id))return e["continue"]();var u;return(u=S.get(s._id))?n():void(_.get(s._id).onsuccess=function(e){u=E(e.target.result),S.set(s._id,u),n()})}function o(e){var t=e.target.result;t&&n(t)}function s(){var e=[b,g];t.attachments&&e.push(v);var n=I(H,e,"readonly");if(n.error)return t.complete(n.error);h=n.txn,h.onerror=O(t.complete),h.oncomplete=i,m=h.objectStore(g),_=h.objectStore(b);var r;r=c?m.openCursor(null,c):m.openCursor(IDBKeyRange.lowerBound(t.since,!0)),r.onsuccess=o}function i(){function e(){t.complete(null,{results:y,last_seq:d})}!t.continuous&&t.attachments?T(y).then(e):e()}if(t=u.clone(t),t.continuous){var a=q+":"+u.uuid();return r.Changes.addListener(q,a,e,t),r.Changes.notify(q),{cancel:function(){r.Changes.removeListener(q,a)}}}var l=t.doc_ids&&new u.Set(t.doc_ids),c=t.descending?"prev":null;t.since=t.since||0;var d=t.since,p="limit"in t?t.limit:-1;0===p&&(p=1);var f;f="returnDocs"in t?t.returnDocs:!0;var h,m,_,y=[],w=0,k=u.filterChange(t),S=new u.Map;s()},e._close=function(e){return null===H?e(l.error(l.NOT_OPEN)):(H.close(),delete D[q],H=null,void e())},e._getRevisionTree=function(e,t){var n=I(H,[b],"readonly");if(n.error)return t(n.error);var r=n.txn,o=r.objectStore(b).get(e);o.onsuccess=function(e){var n=E(e.target.result);n?t(null,n.rev_tree):t(l.error(l.MISSING_DOC))}},e._doCompaction=function(e,t,n){var r=[b,g,v,m],o=I(H,r,"readwrite");if(o.error)return n(o.error);var s=o.txn,i=s.objectStore(b);i.get(e).onsuccess=function(n){var r=E(n.target.result);a.traverseRevTree(r.rev_tree,function(e,n,r,o,s){var i=n+"-"+r;-1!==t.indexOf(i)&&(s.status="missing")}),S(t,e,s);var o=r.winningRev,i=r.deletedOrLocal;s.objectStore(b).put(j(r,o,i))},s.onerror=O(n),s.oncomplete=function(){u.call(n)}},e._getLocal=function(e,t){var n=I(H,[y],"readonly");if(n.error)return t(n.error);var r=n.txn,o=r.objectStore(y).get(e);o.onerror=O(t),o.onsuccess=function(e){var n=e.target.result;n?(delete n._doc_id_rev,t(null,n)):t(l.error(l.MISSING_DOC))}},e._putLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),delete e._revisions;var r=e._rev,o=e._id;e._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var s,i=t.ctx;if(!i){var u=I(H,[y],"readwrite");if(u.error)return n(u.error);i=u.txn,i.onerror=O(n),i.oncomplete=function(){s&&n(null,s)}}var a,c=i.objectStore(y);r?(a=c.get(o),a.onsuccess=function(o){var i=o.target.result;if(i&&i._rev===r){var u=c.put(e);u.onsuccess=function(){s={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,s)}}else n(l.error(l.REV_CONFLICT))}):(a=c.add(e),a.onerror=function(e){n(l.error(l.REV_CONFLICT)),e.preventDefault(),e.stopPropagation()},a.onsuccess=function(){s={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,s)})},e._removeLocal=function(e,t){var n=I(H,[y],"readwrite");if(n.error)return t(n.error);var r,o=n.txn;o.oncomplete=function(){r&&t(null,r)};var s=e._id,i=o.objectStore(y),u=i.get(s);u.onerror=O(t),u.onsuccess=function(n){var o=n.target.result;o&&o._rev===e._rev?(i["delete"](s),r={ok:!0,id:s,rev:"0-0"}):t(l.error(l.MISSING_DOC))}};var $=D[q];if($)return H=$.idb,B=$.instanceId,e._blobSupport=$.blobSupport,void n.nextTick(function(){o(null,e)});var Y=indexedDB.open(q,h);"openReqList"in r||(r.openReqList={}),r.openReqList[q]=Y,Y.onupgradeneeded=function(e){function t(){var e=o[i-1];i++,e&&e(r,t)}var n=e.target.result;if(e.oldVersion<1)return s(n);var r=e.currentTarget.transaction;e.oldVersion<3&&d(n),e.oldVersion<4&&U(n);var o=[c,k,R,L],i=e.oldVersion;t()},Y.onsuccess=function(t){H=t.target.result,H.onversionchange=function(){H.close(),delete D[q]},H.onabort=function(){H.close(),delete D[q]};var n=H.transaction([w,_],"readwrite"),r=n.objectStore(w).get(w);r.onsuccess=function(t){var r=function(){null!==e._blobSupport&&F&&(D[q]={idb:H,instanceId:B,blobSupport:e._blobSupport,loaded:!0},o(null,e))},s=t.target.result||{id:w};q+"_id"in s?(B=s[q+"_id"],F=!0,r()):(B=u.uuid(),s[q+"_id"]=B,n.objectStore(w).put(s).onsuccess=function(){F=!0,r()}),i||(i=f(n,H)),i.then(function(t){e._blobSupport=t,r()})}},Y.onerror=O(o)}function s(e,t,n){"openReqList"in r||(r.openReqList={}),r.Changes.removeAllListeners(e),r.openReqList[e]&&r.openReqList[e].result&&(r.openReqList[e].result.close(),delete D[e]);var o=indexedDB.deleteDatabase(e);o.onsuccess=function(){r.openReqList[e]&&(r.openReqList[e]=null),u.hasLocalStorage()&&e in localStorage&&delete localStorage[e],n(null,{ok:!0})},o.onerror=O(n)}var i,u=e("../../utils"),a=e("../../merge"),l=e("../../deps/errors"),c=e("./idb-utils"),d=e("./idb-constants"),p=e("./idb-bulk-docs"),f=e("./idb-blob-support"),h=d.ADAPTER_VERSION,m=d.ATTACH_AND_SEQ_STORE,v=d.ATTACH_STORE,g=d.BY_SEQ_STORE,_=d.DETECT_BLOB_SUPPORT_STORE,b=d.DOC_STORE,y=d.LOCAL_STORE,w=d.META_STORE,k=c.applyNext,S=c.compactRevs,x=c.decodeDoc,E=c.decodeMetadata,j=c.encodeMetadata,A=c.fetchAttachmentsIfNecessary,O=c.idbError,T=c.postProcessAttachments,C=c.readBlobData,U=c.taskQueue,I=c.openTransactionSafely,D={};r.valid=function(){var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return!e&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange},r.destroy=u.toPromise(function(e,t,n){U.queue.push({action:function(n){s(e,t,n)},callback:n}),k()}),r.Changes=new u.Changes,t.exports=r}).call(this,e("_process"))},{"../../deps/errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","../../merge":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/merge.js","../../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js","./idb-blob-support":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-blob-support.js","./idb-bulk-docs":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-bulk-docs.js","./idb-constants":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-constants.js","./idb-utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb-utils.js",_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/preferredAdapters-browser.js":[function(e,t){t.exports=["idb","websql"]},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/websql/websql-bulk-docs.js":[function(e,t){"use strict";function n(e,t,n,i,m,v){function g(){return T?v(T):(m.notify(n._name),n._docCount=-1,void v(null,C))}function _(e,t){var n="SELECT count(*) as cnt FROM "+l+" WHERE digest=?";O.executeSql(n,[e],function(n,r){if(0===r.rows.item(0).cnt){var s=o.error(o.MISSING_STUB,"unknown stub attachment with digest "+e);t(s)}else t()})}function b(e){function t(){++o===n.length&&e(r)}var n=[];if(j.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var r=e.data._attachments[t];r.stub&&n.push(r.digest)})}),!n.length)return e();var r,o=0;n.forEach(function(e){_(e,function(e){e&&!r&&(r=e),t()})})}function y(e,t,o,s,i,l,h){function m(){function t(e,t){function r(){return++s===i.length&&t(),!1}function o(t){var o="INSERT INTO "+c+" (digest, seq) VALUES (?,?)",s=[n._attachments[t].digest,e];O.executeSql(o,s,r,r)}var s=0,i=Object.keys(n._attachments||{});if(!i.length)return t();for(var u=0;u<i.length;u++)o(i[u])}var n=e.data,r=o?1:0,s=n._id,i=n._rev,u=p(n),l="INSERT INTO "+a+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",f=[s,i,u,r];O.executeSql(l,f,function(e,n){var r=n.insertId;t(r,function(){b(e,r)})},function(){var e=d("seq",a,null,"doc_id=? AND rev=?");return O.executeSql(e,[s,i],function(e,n){var o=n.rows.item(0).seq,l="UPDATE "+a+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",c=[u,r,s,i];e.executeSql(l,c,function(e){t(o,function(){b(e,o)})})}),!1})}function v(e){y||(e?(y=e,s(y)):w===k.length&&m())}function g(e){w++,v(e)}function _(){if(i&&n.auto_compaction){var t=e.metadata.id,o=r.compactTree(e.metadata);f(o,t,O)}}function b(n,o){_(),e.metadata.seq=o,delete e.metadata.rev;var l=i?"UPDATE "+u+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+a+" WHERE doc_id="+u+".id AND rev=?) WHERE id=?":"INSERT INTO "+u+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",c=r.safeJsonStringify(e.metadata),d=e.metadata.id,p=i?[c,o,t,d]:[d,o,o,c];n.executeSql(l,p,function(){C[h]={ok:!0,id:e.metadata.id,rev:t},U.set(d,e.metadata),s()})}var y=null,w=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev;var k=Object.keys(e.data._attachments||{});o&&(e.data._deleted=!0),k.forEach(function(t){var n=e.data._attachments[t];if(n.stub)w++,v();else{var r=n.data;delete n.data;var o=n.digest;S(o,r,g)}}),k.length||m()}function w(){r.processDocs(j,n,U,O,C,y,t)}function k(e){function t(){++n===j.length&&e()}if(!j.length)return e();var n=0;j.forEach(function(e){if(e._id&&r.isLocalId(e._id))return t();var n=e.metadata.id;O.executeSql("SELECT json FROM "+u+" WHERE id = ?",[n],function(e,o){if(o.rows.length){var s=r.safeJsonParse(o.rows.item(0).json);U.set(n,s)}t()})})}function S(e,t,n){var r="SELECT digest FROM "+l+" WHERE digest=?";O.executeSql(r,[e],function(o,i){return i.rows.length?n():(r="INSERT INTO "+l+" (digest, body, escaped) VALUES (?,?,1)",void o.executeSql(r,[e,s.escapeBlob(t)],function(){n()},function(){return n(),!1}))})}var x=t.new_edits,E=e.docs,j=E.map(function(e){if(e._id&&r.isLocalId(e._id))return e;var t=r.parseDoc(e,x);return t}),A=j.filter(function(e){return e.error});if(A.length)return v(A[0]);var O,T,C=new Array(j.length),U=new r.Map;r.preprocessAttachments(j,"binary",function(e){return e?v(e):void i.transaction(function(e){O=e,b(function(e){e?T=e:k(w)})},h(v),g)})}var r=e("../../utils"),o=e("../../deps/errors"),s=e("./websql-utils"),i=e("./websql-constants"),u=i.DOC_STORE,a=i.BY_SEQ_STORE,l=i.ATTACH_STORE,c=i.ATTACH_AND_SEQ_STORE,d=s.select,p=s.stringifyDoc,f=s.compactRevs,h=s.unknownError;t.exports=n},{"../../deps/errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","../../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js","./websql-constants":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/websql/websql-constants.js","./websql-utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/websql/websql-utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/websql/websql-constants.js":[function(e,t,n){"use strict";function r(e){return"'"+e+"'"}n.ADAPTER_VERSION=7,n.DOC_STORE=r("document-store"),n.BY_SEQ_STORE=r("by-sequence"),n.ATTACH_STORE=r("attach-store"),n.LOCAL_STORE=r("local-store"),n.META_STORE=r("metadata-store"),n.ATTACH_AND_SEQ_STORE=r("attach-seq-store")},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/websql/websql-utils.js":[function(e,t){"use strict";function n(e){return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function r(e){return e.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function o(e){return delete e._id,delete e._rev,JSON.stringify(e)}function s(e,t,n){return e=JSON.parse(e),e._id=t,e._rev=n,e}function i(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function u(e,t,n,r,o){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(o?" ORDER BY "+o:"")}function a(e,t,n){function r(){++s===e.length&&o()}function o(){if(u.length){var e="SELECT DISTINCT digest AS digest FROM "+_+" WHERE seq IN "+i(u.length);n.executeSql(e,u,function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).digest);if(n.length){var o="DELETE FROM "+_+" WHERE seq IN ("+u.map(function(){return"?"}).join(",")+")";e.executeSql(o,u,function(e){var t="SELECT digest FROM "+_+" WHERE digest IN ("+n.map(function(){return"?"}).join(",")+")";e.executeSql(t,n,function(e,t){for(var r=new f.Set,o=0;o<t.rows.length;o++)r.add(t.rows.item(o).digest);n.forEach(function(t){r.has(t)||(e.executeSql("DELETE FROM "+_+" WHERE digest=?",[t]),e.executeSql("DELETE FROM "+g+" WHERE digest=?",[t]))})})})}})}}if(e.length){var s=0,u=[];e.forEach(function(e){var o="SELECT seq FROM "+v+" WHERE doc_id=? AND rev=?";n.executeSql(o,[t,e],function(e,t){if(!t.rows.length)return r();var n=t.rows.item(0).seq;u.push(n),e.executeSql("DELETE FROM "+v+" WHERE seq=?",[n],r)})})}}function l(e){return function(t){var n=t&&t.constructor.toString().match(/function ([^\(]+)/),r=n&&n[1]||t.type,o=t.target||t.message;e(h.error(h.WSQ_ERROR,o,r))}}function c(e){if("size"in e)return 1e6*e.size;var t=/Android/.test(window.navigator.userAgent);return t?5e6:1}function d(e,t,n,r){var o="undefined"!=typeof sqlitePlugin&&sqlitePlugin.openDatabase&&sqlitePlugin.openDatabase.bind(sqlitePlugin),s=o||"undefined"!=typeof openDatabase&&openDatabase,i=b[e];return i||(i=b[e]=s(e,t,n,r),i._sqlitePlugin=!!o),i}function p(){return"undefined"!=typeof openDatabase||"undefined"!=typeof SQLitePlugin}var f=e("../../utils"),h=e("../../deps/errors"),m=e("./websql-constants"),v=m.BY_SEQ_STORE,g=m.ATTACH_STORE,_=m.ATTACH_AND_SEQ_STORE,b={};t.exports={escapeBlob:n,unescapeBlob:r,stringifyDoc:o,unstringifyDoc:s,qMarks:i,select:u,compactRevs:a,unknownError:l,getSize:c,openDB:d,valid:p}},{"../../deps/errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","../../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js","./websql-constants":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/websql/websql-constants.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/websql/websql.js":[function(e,t){"use strict";function n(e,t,n,r,s){function i(){++l===a.length&&s&&s()}function u(e,t){var s=e._attachments[t],u={encode:!0,ctx:r};n._getAttachment(s,u,function(n,r){e._attachments[t]=o.extend(o.pick(s,["digest","content_type"]),{data:r}),i()})}var a=Object.keys(e._attachments||{});if(!a.length)return s&&s();var l=0;a.forEach(function(n){t.attachments&&t.include_docs?u(e,n):(e._attachments[n].stub=!0,i())})}function r(e,t){function a(){o.hasLocalStorage()&&(window.localStorage["_pouch__websqldb_"+W._name]=!0),t(null,W)}function R(e,t){e.executeSql(T),e.executeSql("ALTER TABLE "+f+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(A),e.executeSql("ALTER TABLE "+p+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+p+" (local, id)");var n="SELECT "+p+".winningseq AS seq, "+p+".json AS metadata FROM "+f+" JOIN "+p+" ON "+f+".seq = "+p+".winningseq";e.executeSql(n,[],function(e,n){for(var r=[],s=[],i=0;i<n.rows.length;i++){var u=n.rows.item(i),a=u.seq,l=JSON.parse(u.metadata);o.isDeleted(l)&&r.push(a),o.isLocalId(l.id)&&s.push(l.id)}e.executeSql("UPDATE "+p+"SET local = 1 WHERE id IN "+_(s.length),s,function(){e.executeSql("UPDATE "+f+" SET deleted = 1 WHERE seq IN "+_(r.length),r,t)})})})})}function L(e,t){var n="CREATE TABLE IF NOT EXISTS "+m+" (id UNIQUE, rev, json)";e.executeSql(n,[],function(){var n="SELECT "+p+".id AS id, "+f+".json AS data FROM "+f+" JOIN "+p+" ON "+f+".seq = "+p+".winningseq WHERE local = 1";e.executeSql(n,[],function(e,n){function r(){if(!o.length)return t(e);var n=o.shift(),s=JSON.parse(n.data)._rev;e.executeSql("INSERT INTO "+m+" (id, rev, json) VALUES (?,?,?)",[n.id,s,n.data],function(e){e.executeSql("DELETE FROM "+p+" WHERE id=?",[n.id],function(e){e.executeSql("DELETE FROM "+f+" WHERE seq=?",[n.seq],function(){r()})})})}for(var o=[],s=0;s<n.rows.length;s++)o.push(n.rows.item(s));r()})})}function N(e,t){function n(n){function r(){if(!n.length)return t(e);var o=n.shift(),s=u(o.hex,V),i=s.lastIndexOf("::"),a=s.substring(0,i),l=s.substring(i+2),c="UPDATE "+f+" SET doc_id=?, rev=? WHERE doc_id_rev=?";e.executeSql(c,[a,l,s],function(){r()})}r()}var r="ALTER TABLE "+f+" ADD COLUMN doc_id";e.executeSql(r,[],function(e){var t="ALTER TABLE "+f+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(O,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+f;e.executeSql(t,[],function(e,t){for(var r=[],o=0;o<t.rows.length;o++)r.push(t.rows.item(o));n(r)})})})})}function M(e,t){function n(e){var n="SELECT COUNT(*) AS cnt FROM "+h;e.executeSql(n,[],function(e,n){function r(){var n=w(D+", "+p+".id AS id",[p,f],I,null,p+".id ");n+=" LIMIT "+i+" OFFSET "+s,s+=i,e.executeSql(n,[],function(e,n){function o(e,t){var n=s[e]=s[e]||[];-1===n.indexOf(t)&&n.push(t)}if(!n.rows.length)return t(e);for(var s={},i=0;i<n.rows.length;i++)for(var u=n.rows.item(i),a=y(u.data,u.id,u.rev),l=Object.keys(a._attachments||{}),c=0;c<l.length;c++){var d=a._attachments[l[c]];o(d.digest,u.seq)}var p=[];if(Object.keys(s).forEach(function(e){var t=s[e];t.forEach(function(t){p.push([e,t])})}),!p.length)return r();var f=0;p.forEach(function(t){var n="INSERT INTO "+g+" (digest, seq) VALUES (?,?)";e.executeSql(n,t,function(){++f===p.length&&r()})})})}var o=n.rows.item(0).cnt;if(!o)return t(e);var s=0,i=10;r()})}var r="CREATE TABLE IF NOT EXISTS "+g+" (digest, seq INTEGER)";e.executeSql(r,[],function(e){e.executeSql(U,[],function(e){e.executeSql(C,[],n)})})}function P(e,t){var n="ALTER TABLE "+h+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(n,[],t)}function q(e,t){var n="ALTER TABLE "+p+" ADD COLUMN max_seq INTEGER";e.executeSql(n,[],function(e){var n="UPDATE "+p+" SET max_seq=(SELECT MAX(seq) FROM "+f+" WHERE doc_id=id)";e.executeSql(n,[],function(e){var n="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+p+" (max_seq)";e.executeSql(n,[],t)})})}function B(e,t){e.executeSql('SELECT HEX("a") AS hex',[],function(e,n){var r=n.rows.item(0).hex;V=2===r.length?"UTF-8":"UTF-16",t()})}function F(){for(;K.length>0;){var e=K.pop();e(null,z)}}function H(e,t){if(0===t){var n="CREATE TABLE IF NOT EXISTS "+v+" (dbid, db_version INTEGER)",r="CREATE TABLE IF NOT EXISTS "+h+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",s="CREATE TABLE IF NOT EXISTS "+g+" (digest, seq INTEGER)",i="CREATE TABLE IF NOT EXISTS "+p+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",u="CREATE TABLE IF NOT EXISTS "+f+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",a="CREATE TABLE IF NOT EXISTS "+m+" (id UNIQUE, rev, json)";e.executeSql(r),e.executeSql(a),e.executeSql(s,[],function(){e.executeSql(C),e.executeSql(U)}),e.executeSql(i,[],function(){e.executeSql(T),e.executeSql(u,[],function(){e.executeSql(A),e.executeSql(O),e.executeSql(n,[],function(){var t="INSERT INTO "+v+" (db_version, dbid) VALUES (?,?)";z=o.uuid();var n=[d,z];e.executeSql(t,n,function(){F()})})})})}else{var l=function(){var n=d>t;n&&e.executeSql("UPDATE "+v+" SET db_version = "+d);var r="SELECT dbid FROM "+v;e.executeSql(r,[],function(e,t){z=t.rows.item(0).dbid,F()})},c=[R,L,N,M,P,q,l],_=t,b=function(e){c[_-1](e,b),_++};b(e)}}function $(){Q.transaction(function(e){B(e,function(){Y(e)})},S(t),a)}function Y(e){var t="SELECT sql FROM sqlite_master WHERE tbl_name = "+v;e.executeSql(t,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+v,[],function(e,t){var n=t.rows.item(0).db_version;H(e,n)}):e.executeSql("ALTER TABLE "+v+" ADD COLUMN db_version INTEGER",[],function(){H(e,1)}):H(e,0)})}function G(e,t){if(-1!==W._docCount)return t(W._docCount);var n=w("COUNT("+p+".id) AS 'num'",[p,f],I,f+".deleted=0");e.executeSql(n,[],function(e,n){W._docCount=n.rows.item(0).num,t(W._docCount)})}var V,W=this,z=null,J=x(e),K=[];W._docCount=-1,W._name=e.name;var Q=E(W._name,j,W._name,J);return Q?("function"!=typeof Q.readTransaction&&(Q.readTransaction=Q.transaction),o.isCordova()?window.addEventListener(W._name+"_pouch",function X(){window.removeEventListener(W._name+"_pouch",X,!1),$()},!1):$(),W.type=function(){return"websql"},W._id=o.toPromise(function(e){e(null,z)}),W._info=function(e){Q.readTransaction(function(t){G(t,function(n){var r="SELECT MAX(seq) AS seq FROM "+f;t.executeSql(r,[],function(t,r){var o=r.rows.item(0).seq||0;e(null,{doc_count:n,update_seq:o,sqlite_plugin:Q._sqlitePlugin,websql_encoding:V})})})},S(e))},W._bulkDocs=function(e,t,n){c(e,t,W,Q,r.Changes,n)},W._get=function(e,t,n){function r(){n(a,{doc:s,metadata:u,ctx:d})}t=o.clone(t);var s,u,a;if(!t.ctx)return void Q.readTransaction(function(r){t.ctx=r,W._get(e,t,n)});var l,c,d=t.ctx;t.rev?(l=w(D,[p,f],p+".id="+f+".doc_id",[f+".doc_id=?",f+".rev=?"]),c=[e,t.rev]):(l=w(D,[p,f],I,p+".id=?"),c=[e]),d.executeSql(l,c,function(e,n){if(!n.rows.length)return a=i.error(i.MISSING_DOC,"missing"),r();var l=n.rows.item(0);return u=o.safeJsonParse(l.metadata),l.deleted&&!t.rev?(a=i.error(i.MISSING_DOC,"deleted"),r()):(s=y(l.data,u.id,l.rev),void r())})},W._allDocs=function(e,t){var r,i=[],u="startkey"in e?e.startkey:!1,a="endkey"in e?e.endkey:!1,l="key"in e?e.key:!1,c="descending"in e?e.descending:!1,d="limit"in e?e.limit:-1,h="skip"in e?e.skip:0,m=e.inclusive_end!==!1,v=[],g=[];if(l!==!1)g.push(p+".id = ?"),v.push(l);else if(u!==!1||a!==!1){if(u!==!1&&(g.push(p+".id "+(c?"<=":">=")+" ?"),v.push(u)),a!==!1){var _=c?">":"<";m&&(_+="="),g.push(p+".id "+_+" ?"),v.push(a)}l!==!1&&(g.push(p+".id = ?"),v.push(l))}"ok"!==e.deleted&&g.push(f+".deleted = 0"),Q.readTransaction(function(t){G(t,function(u){if(r=u,0!==d){var a=w(D,[p,f],I,g,p+".id "+(c?"DESC":"ASC"));a+=" LIMIT "+d+" OFFSET "+h,t.executeSql(a,v,function(t,r){for(var u=0,a=r.rows.length;a>u;u++){var l=r.rows.item(u),c=o.safeJsonParse(l.metadata),d=c.id,p=y(l.data,d,l.rev),f=p._rev,h={id:d,key:d,value:{rev:f}};if(e.include_docs&&(h.doc=p,h.doc._rev=f,e.conflicts&&(h.doc._conflicts=s.collectConflicts(c)),n(h.doc,e,W,t)),l.deleted){if("ok"!==e.deleted)continue;h.value.deleted=!0,h.doc=null}i.push(h)}})}})},S(t),function(){t(null,{total_rows:r,offset:e.skip,rows:i})})},W._changes=function(e){function t(){var t=p+".json AS metadata, "+p+".max_seq AS maxSeq, "+f+".json AS winningDoc, "+f+".rev AS winningRev ",r=p+" JOIN "+f,s=p+".id="+f+".doc_id AND "+p+".winningseq="+f+".seq",d=["maxSeq > ?"],h=[e.since];e.doc_ids&&(d.push(p+".id IN "+_(e.doc_ids.length)),h=h.concat(e.doc_ids));var m="maxSeq "+(i?"DESC":"ASC"),v=w(t,r,s,d,m),g=o.filterChange(e);e.view||e.filter||(v+=" LIMIT "+u);var b=e.since||0;Q.readTransaction(function(t){t.executeSql(v,h,function(t,r){function s(t){return function(){e.onChange(t)}}for(var i=0,d=r.rows.length;d>i;i++){var p=r.rows.item(i),f=o.safeJsonParse(p.metadata);b=p.maxSeq;var h=y(p.winningDoc,f.id,p.winningRev),m=e.processChange(h,f,e);if(m.seq=p.maxSeq,g(m)&&(c++,a&&l.push(m),e.attachments&&e.include_docs?n(h,e,W,t,s(m)):s(m)()),c===u)break}})},S(e.complete),function(){e.continuous||e.complete(null,{results:l,last_seq:b})})}if(e=o.clone(e),e.continuous){var s=W._name+":"+o.uuid();return r.Changes.addListener(W._name,s,W,e),r.Changes.notify(W._name),{cancel:function(){r.Changes.removeListener(W._name,s)}}}var i=e.descending;e.since=e.since&&!i?e.since:0;var u="limit"in e?e.limit:-1;0===u&&(u=1);var a;a="returnDocs"in e?e.returnDocs:!0;var l=[],c=0;t()},W._close=function(e){e()},W._getAttachment=function(e,t,n){var r,s=t.ctx,i=e.digest,a=e.content_type,c="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+h+" WHERE digest=?";s.executeSql(c,[i],function(e,s){var i=s.rows.item(0),c=i.escaped?l.unescapeBlob(i.body):u(i.body,V);t.encode?r=btoa(c):(c=o.fixBinary(c),r=o.createBlob([c],{type:a})),n(null,r)})},W._getRevisionTree=function(e,t){Q.readTransaction(function(n){var r="SELECT json AS metadata FROM "+p+" WHERE id = ?";n.executeSql(r,[e],function(e,n){if(n.rows.length){var r=o.safeJsonParse(n.rows.item(0).metadata);t(null,r.rev_tree)}else t(i.error(i.MISSING_DOC))})})},W._doCompaction=function(e,t,n){return t.length?void Q.transaction(function(n){var r="SELECT json AS metadata FROM "+p+" WHERE id = ?";n.executeSql(r,[e],function(n,r){var i=o.safeJsonParse(r.rows.item(0).metadata);s.traverseRevTree(i.rev_tree,function(e,n,r,o,s){var i=n+"-"+r;-1!==t.indexOf(i)&&(s.status="missing")});var u="UPDATE "+p+" SET json = ? WHERE id = ?";n.executeSql(u,[o.safeJsonStringify(i),e])}),k(t,e,n)},S(n),function(){n()}):n()},W._getLocal=function(e,t){Q.readTransaction(function(n){var r="SELECT json, rev FROM "+m+" WHERE id=?";n.executeSql(r,[e],function(n,r){if(r.rows.length){var o=r.rows.item(0),s=y(o.json,e,o.rev);t(null,s)}else t(i.error(i.MISSING_DOC))})})},W._putLocal=function(e,t,n){function r(e){var r,c;s?(r="UPDATE "+m+" SET rev=?, json=? WHERE id=? AND rev=?",c=[o,l,u,s]):(r="INSERT INTO "+m+" (id, rev, json) VALUES (?,?,?)",c=[u,o,l]),e.executeSql(r,c,function(e,r){r.rowsAffected?(a={ok:!0,id:u,rev:o},t.ctx&&n(null,a)):n(i.error(i.REV_CONFLICT))},function(){return n(i.error(i.REV_CONFLICT)),!1})}"function"==typeof t&&(n=t,t={}),delete e._revisions;var o,s=e._rev,u=e._id;o=e._rev=s?"0-"+(parseInt(s.split("-")[1],10)+1):"0-1";var a,l=b(e);t.ctx?r(t.ctx):Q.transaction(function(e){r(e)},S(n),function(){a&&n(null,a)})},void(W._removeLocal=function(e,t){var n;Q.transaction(function(r){var o="DELETE FROM "+m+" WHERE id=? AND rev=?",s=[e._id,e._rev];r.executeSql(o,s,function(r,o){return o.rowsAffected?void(n={ok:!0,id:e._id,rev:"0-0"}):t(i.error(i.MISSING_DOC))})},S(t),function(){n&&t(null,n)})})):t(i.error(i.UNKNOWN_ERROR))}var o=e("../../utils"),s=e("../../merge"),i=e("../../deps/errors"),u=e("../../deps/parse-hex"),a=e("./websql-constants"),l=e("./websql-utils"),c=e("./websql-bulk-docs"),d=a.ADAPTER_VERSION,p=a.DOC_STORE,f=a.BY_SEQ_STORE,h=a.ATTACH_STORE,m=a.LOCAL_STORE,v=a.META_STORE,g=a.ATTACH_AND_SEQ_STORE,_=l.qMarks,b=l.stringifyDoc,y=l.unstringifyDoc,w=l.select,k=l.compactRevs,S=l.unknownError,x=l.getSize,E=l.openDB,j=1,A="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+f+" (seq, deleted)",O="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+f+" (doc_id, rev)",T="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+p+" (winningseq)",C="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+g+" (seq)",U="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+g+" (digest, seq)",I=f+".seq = "+p+".winningseq",D=f+".seq AS seq, "+f+".deleted AS deleted, "+f+".json AS data, "+f+".rev AS rev, "+p+".json AS metadata";
r.valid=l.valid,r.destroy=o.toPromise(function(e,t,n){r.Changes.removeAllListeners(e);var s=x(t),i=E(e,j,e,s);i.transaction(function(e){var t=[p,f,h,v,m,g];t.forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},S(n),function(){o.hasLocalStorage()&&(delete window.localStorage["_pouch__websqldb_"+e],delete window.localStorage[e]),n(null,{ok:!0})})}),r.Changes=new o.Changes,t.exports=r},{"../../deps/errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","../../deps/parse-hex":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/parse-hex.js","../../merge":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/merge.js","../../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js","./websql-bulk-docs":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/websql/websql-bulk-docs.js","./websql-constants":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/websql/websql-constants.js","./websql-utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/websql/websql-utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/changes.js":[function(e,t){"use strict";function n(e,t,n){function r(){s.cancel()}u.call(this);var s=this;this.db=e,t=t?o.clone(t):{};var i=n||t.complete||function(){},a=t.complete=o.once(function(t,n){t?s.emit("error",t):s.emit("complete",n),s.removeAllListeners(),e.removeListener("destroyed",r)});i&&(s.on("complete",function(e){i(null,e)}),s.on("error",function(e){i(e)}));var l=t.onChange;l&&s.on("change",l),e.once("destroyed",r),t.onChange=function(e){t.isCancelled||(s.emit("change",e),s.startSeq&&s.startSeq<=e.seq&&(s.emit("uptodate"),s.startSeq=!1),e.deleted?s.emit("delete",e):1===e.changes.length&&"1-"===e.changes[0].rev.slice(0,2)?s.emit("create",e):s.emit("update",e))};var c=new o.Promise(function(e,n){t.complete=function(t,r){t?n(t):e(r)}});s.once("cancel",function(){l&&s.removeListener("change",l),t.complete(null,{status:"cancelled"})}),this.then=c.then.bind(c),this["catch"]=c["catch"].bind(c),this.then(function(e){a(null,e)},a),e.taskqueue.isReady?s.doChanges(t):e.taskqueue.addTask(function(){s.isCancelled?s.emit("cancel"):s.doChanges(t)})}function r(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=s.collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));var i={id:t.id,changes:r,doc:e};return o.isDeleted(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=s.collectConflicts(t),i.doc._conflicts.length||delete i.doc._conflicts),i}var o=e("./utils"),s=e("./merge"),i=e("./deps/errors"),u=e("events").EventEmitter,a=e("./evalFilter"),l=e("./evalView");t.exports=n,o.inherits(n,u),n.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},n.prototype.doChanges=function(e){var t=this,n=e.complete;if(e=o.clone(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=r,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"===e.since)return void this.db.info().then(function(r){return t.isCancelled?void n(null,{status:"cancelled"}):(e.since=r.update_seq,void t.doChanges(e))},n);if(e.continuous&&"now"!==e.since&&this.db.info().then(function(e){t.startSeq=e.update_seq},function(e){if("idbNull"!==e.id)throw e}),"http"!==this.db.type()&&e.filter&&"string"==typeof e.filter&&!e.doc_ids)return this.filterChanges(e);"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=n;var s=this.db._changes(e);if(s&&"function"==typeof s.cancel){var i=t.cancel;t.cancel=o.getArguments(function(e){s.cancel(),i.apply(this,e)})}},n.prototype.filterChanges=function(e){var t=this,n=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var r=i.error(i.BAD_REQUEST,"`view` filter parameter is not provided.");return void n(r)}var o=e.view.split("/");this.db.get("_design/"+o[0],function(r,s){if(t.isCancelled)return void n(null,{status:"cancelled"});if(r)return void n(i.generateErrorFromResponse(r));if(s&&s.views&&s.views[o[1]]){var u=l(s.views[o[1]].map);return e.filter=u,void t.doChanges(e)}var a=s.views?"missing json key: "+o[1]:"missing json key: views";r||(r=i.error(i.MISSING_DOC,a)),n(r)})}else{var s=e.filter.split("/");this.db.get("_design/"+s[0],function(r,o){if(t.isCancelled)return void n(null,{status:"cancelled"});if(r)return void n(i.generateErrorFromResponse(r));if(o&&o.filters&&o.filters[s[1]]){var u=a(o.filters[s[1]]);return e.filter=u,void t.doChanges(e)}var l=o&&o.filters?"missing json key: "+s[1]:"missing json key: filters";return r||(r=i.error(i.MISSING_DOC,l)),void n(r)})}}},{"./deps/errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","./evalFilter":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/evalFilter.js","./evalView":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/evalView.js","./merge":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/merge.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js",events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/checkpointer.js":[function(e,t){"use strict";function n(e,t,n,r){return e.get(t)["catch"](function(n){if(404===n.status)return"http"===e.type()&&o.explain404("PouchDB is just checking if a remote checkpoint exists."),{_id:t};throw n}).then(function(t){return r.cancelled?void 0:(t.last_seq=n,e.put(t))})}function r(e,t,n,r){this.src=e,this.target=t,this.id=n,this.returnValue=r}var o=e("./utils"),s=e("pouchdb-collate"),i=s.collate;r.prototype.writeCheckpoint=function(e){var t=this;return this.updateTarget(e).then(function(){return t.updateSource(e)})},r.prototype.updateTarget=function(e){return n(this.target,this.id,e,this.returnValue)},r.prototype.updateSource=function(e){var t=this;return this.readOnlySource?o.Promise.resolve(!0):n(this.src,this.id,e,this.returnValue)["catch"](function(e){var n="number"==typeof e.status&&4===Math.floor(e.status/100);if(n)return t.readOnlySource=!0,!0;throw e})},r.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.src.get(e.id).then(function(e){return 0===i(t.last_seq,e.last_seq)?e.last_seq:0},function(n){if(404===n.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:0}).then(function(){return 0},function(n){return 401===n.status?(e.readOnlySource=!0,t.last_seq):0});throw n})})["catch"](function(e){if(404!==e.status)throw e;return 0})},t.exports=r},{"./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js","pouchdb-collate":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-collate/lib/index.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/constructor.js":[function(e,t){(function(n,r){"use strict";function o(e){e&&r.debug&&console.error(e)}function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);var c=this;("function"==typeof t||"undefined"==typeof t)&&(r=t,t={}),e&&"object"==typeof e&&(t=e,e=void 0),"undefined"==typeof r&&(r=o),t=t||{},this.__opts=t;var d=r;c.auto_compaction=t.auto_compaction,c.prefix=s.prefix,i.call(c),c.taskqueue=new a;var p=new l(function(o,i){r=function(e,t){return e?i(e):(delete t.then,void o(t))},t=u.clone(t);var a,l,d=t.name||e;return function(){try{if("string"!=typeof d)throw l=new Error("Missing/invalid DB name"),l.code=400,l;if(a=s.parseAdapter(d,t),t.originalName=d,t.name=a.name,t.prefix&&"http"!==a.adapter&&"https"!==a.adapter&&(t.name=t.prefix+t.name),t.adapter=t.adapter||a.adapter,c._adapter=t.adapter,c._db_name=d,!s.adapters[t.adapter])throw l=new Error("Adapter is missing"),l.code=404,l;if(!s.adapters[t.adapter].valid())throw l=new Error("Invalid Adapter"),l.code=404,l}catch(e){c.taskqueue.fail(e),c.changes=u.toPromise(function(t){t.complete&&t.complete(e)})}}(),l?i(l):(c.adapter=t.adapter,c.replicate={},c.replicate.from=function(e,t,n){return c.constructor.replicate(e,c,t,n)},c.replicate.to=function(e,t,n){return c.constructor.replicate(c,e,t,n)},c.sync=function(e,t,n){return c.constructor.sync(c,e,t,n)},c.replicate.sync=c.sync,c.destroy=u.adapterFun("destroy",function(e){var t=this,n=this.__opts||{};t.info(function(r,o){return r?e(r):(n.internal=!0,void t.constructor.destroy(o.db_name,n,e))})}),s.adapters[t.adapter].call(c,t,function(e){function n(e){"destroyed"===e&&(c.emit("destroyed"),s.removeListener(d,n))}return e?void(r&&(c.taskqueue.fail(e),r(e))):(s.on(d,n),c.emit("created",c),s.emit("created",t.originalName),c.taskqueue.ready(c),void r(null,c))}),t.skipSetup&&(c.taskqueue.ready(c),n.nextTick(function(){r(null,c)})),void(u.isCordova()&&cordova.fireWindowEvent(t.name+"_pouch",{})))});p.then(function(e){d(null,e)},d),c.then=p.then.bind(p),c["catch"]=p["catch"].bind(p)}var i=e("./adapter"),u=e("./utils"),a=e("./taskqueue"),l=u.Promise;u.inherits(s,i),s.debug=e("debug"),t.exports=s}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adapter":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapter.js","./taskqueue":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/taskqueue.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js",_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js",debug:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/debug/browser.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/ajax.js":[function(e,t){(function(n){"use strict";function r(e,t){function r(t,n,r){if(e.binary||e.json||!e.processData||"string"==typeof t){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(o){return r(o)}}else t=JSON.stringify(t);Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?i.generateErrorFromResponse(e):e})),r(null,t,n)}function a(e,t){var n,r;if(e.code&&e.status){var o=new Error(e.message||e.code);return o.status=e.status,t(o)}try{n=JSON.parse(e.responseText),r=i.generateErrorFromResponse(n)}catch(s){r=i.generateErrorFromResponse(e)}t(r)}function l(){return n.browser?"":new s("","binary")}var c=!1,d=u.getArguments(function(e){c||(t.apply(this,e),c=!0)});"function"==typeof e&&(d=e,e={}),e=u.clone(e);var p={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};return e=u.extend(!0,p,e),e.json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),o(e,function(t,n,o){if(t)return t.status=n?n.statusCode:400,a(t,d);var s,u=n.headers&&n.headers["content-type"],c=o||l();e.binary||!e.json&&e.processData||"object"==typeof c||!(/json/.test(u)||/^[\s]*\{/.test(c)&&/\}[\s]*$/.test(c))||(c=JSON.parse(c)),n.statusCode>=200&&n.statusCode<300?r(c,n,d):(e.binary&&(c=JSON.parse(c.toString())),s=i.generateErrorFromResponse(c),s.status=n.statusCode,d(s))})}var o=e("request"),s=e("./buffer"),i=e("./errors"),u=e("../utils");t.exports=r}).call(this,e("_process"))},{"../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js","./buffer":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/buffer-browser.js","./errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js",_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js",request:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/request-browser.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/blob.js":[function(e,t){(function(e){"use strict";function n(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(r){if("TypeError"!==r.name)throw r;for(var o=e.BlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,s=new o,i=0;i<t.length;i+=1)s.append(t[i]);return s.getBlob(n.type)}}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/buffer-browser.js":[function(e,t){t.exports={}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js":[function(e,t,n){"use strict";function r(e){Error.call(e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}var o=e("inherits");o(r,Error),r.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})},n.UNAUTHORIZED=new r({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),n.MISSING_BULK_DOCS=new r({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),n.MISSING_DOC=new r({status:404,error:"not_found",reason:"missing"}),n.REV_CONFLICT=new r({status:409,error:"conflict",reason:"Document update conflict"}),n.INVALID_ID=new r({status:400,error:"invalid_id",reason:"_id field must contain a string"}),n.MISSING_ID=new r({status:412,error:"missing_id",reason:"_id is required for puts"}),n.RESERVED_ID=new r({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),n.NOT_OPEN=new r({status:412,error:"precondition_failed",reason:"Database not open"}),n.UNKNOWN_ERROR=new r({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),n.BAD_ARG=new r({status:500,error:"badarg",reason:"Some query argument is invalid"}),n.INVALID_REQUEST=new r({status:400,error:"invalid_request",reason:"Request was invalid"}),n.QUERY_PARSE_ERROR=new r({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),n.DOC_VALIDATION=new r({status:500,error:"doc_validation",reason:"Bad special document member"}),n.BAD_REQUEST=new r({status:400,error:"bad_request",reason:"Something wrong with the request"}),n.NOT_AN_OBJECT=new r({status:400,error:"bad_request",reason:"Document must be a JSON object"}),n.DB_MISSING=new r({status:404,error:"not_found",reason:"Database not found"}),n.IDB_ERROR=new r({status:500,error:"indexed_db_went_bad",reason:"unknown"}),n.WSQ_ERROR=new r({status:500,error:"web_sql_went_bad",reason:"unknown"}),n.LDB_ERROR=new r({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),n.FORBIDDEN=new r({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),n.INVALID_REV=new r({status:400,error:"bad_request",reason:"Invalid rev format"}),n.FILE_EXISTS=new r({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),n.MISSING_STUB=new r({status:412,error:"missing_stub"}),n.error=function(e,t,n){function o(t){for(var r in e)"function"!=typeof e[r]&&(this[r]=e[r]);void 0!==n&&(this.name=n),void 0!==t&&(this.reason=t)}return o.prototype=r.prototype,new o(t)},n.getErrorTypeByProp=function(e,t,r){var o=n,s=Object.keys(o).filter(function(n){var r=o[n];return"function"!=typeof r&&r[e]===t}),i=r&&s.filter(function(e){var t=o[e];return t.message===r})[0]||s[0];return i?o[i]:null},n.generateErrorFromResponse=function(e){var t,r,o,s,i,u=n;return r=e.error===!0&&"string"==typeof e.name?e.name:e.error,i=e.reason,o=u.getErrorTypeByProp("name",r,i),e.missing||"missing"===i||"deleted"===i||"not_found"===r?o=u.MISSING_DOC:"doc_validation"===r?(o=u.DOC_VALIDATION,s=i):"bad_request"===r&&o.message!==i&&(0===i.indexOf("unknown stub attachment")?(o=u.MISSING_STUB,s=i):o=u.BAD_REQUEST),o||(o=u.getErrorTypeByProp("status",e.status,i)||u.UNKNOWN_ERROR),t=u.error(o,i,r),s&&(t.message=s),e.id&&(t.id=e.id),e.status&&(t.status=e.status),e.statusText&&(t.name=e.statusText),e.missing&&(t.missing=e.missing),t}},{inherits:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/inherits/inherits_browser.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/md5.js":[function(e,t){(function(n,r){"use strict";function o(e,t,n){if("function"==typeof e.slice)return t||n?n?e.slice(t,n):e.slice(t):e.slice();t=Math.floor(t||0),n=Math.floor(n||0);var r=e.byteLength;if(t=0>t?Math.max(t+r,0):Math.min(r,t),n=0>n?Math.max(n+r,0):Math.min(r,n),0>=n-t)return new ArrayBuffer(0);var o=new ArrayBuffer(n-t),s=new Uint8Array(o),i=new Uint8Array(e,t,n-t);return s.set(i),o}function s(e){var t=[255&e,e>>>8&255,e>>>16&255,e>>>24&255];return t.map(function(e){return String.fromCharCode(e)}).join("")}function i(e){for(var t="",n=0;n<e.length;n++)t+=s(e[n]);return btoa(t)}var u=e("crypto"),a=e("spark-md5"),l=r.setImmediate||r.setTimeout,c=32768;t.exports=function(e,t){function r(e,t,n,r){p?e.appendBinary(t.substring(n,r)):e.append(o(t,n,r))}function s(){var n=v*h,o=n+h;if(v++,m>v)r(g,e,n,o),l(s);else{r(g,e,n,o);var u=g.end(!0),a=i(u);t(null,a),g.destroy()}}if(!n.browser){var d=u.createHash("md5").update(e).digest("base64");return void t(null,d)}var p="string"==typeof e,f=p?e.length:e.byteLength,h=Math.min(c,f),m=Math.ceil(f/h),v=0,g=p?new a:new a.ArrayBuffer;s()}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js",crypto:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/browser-resolve/empty.js","spark-md5":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/spark-md5/spark-md5.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/parse-doc.js":[function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function o(e){if(!/^\d+\-./.test(e))return i.error(i.INVALID_REV);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function s(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,o=[r[0],t,[]],s=1,i=r.length;i>s;s++)o=[r[s],{status:"missing"},[o]];return[{pos:n,ids:o}]}var i=e("./errors"),u=e("./uuid"),a=r(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),l=r(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);n.invalidIdError=function(e){var t;if(e?"string"!=typeof e?t=i.error(i.INVALID_ID):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=i.error(i.RESERVED_ID)):t=i.error(i.MISSING_ID),t)throw t},n.parseDoc=function(e,t){var r,c,d,p={status:"available"};if(e._deleted&&(p.deleted=!0),t)if(e._id||(e._id=u()),c=u(32,16).toLowerCase(),e._rev){if(d=o(e._rev),d.error)return d;e._rev_tree=[{pos:d.prefix,ids:[d.id,{status:"missing"},[[c,p,[]]]]}],r=d.prefix+1}else e._rev_tree=[{pos:1,ids:[c,p,[]]}],r=1;else if(e._revisions&&(e._rev_tree=s(e._revisions,p),r=e._revisions.start,c=e._revisions.ids[0]),!e._rev_tree){if(d=o(e._rev),d.error)return d;r=d.prefix,c=d.id,e._rev_tree=[{pos:r,ids:[c,p,[]]}]}n.invalidIdError(e._id),e._rev=r+"-"+c;var f={metadata:{},data:{}};for(var h in e)if(e.hasOwnProperty(h)){var m="_"===h[0];if(m&&!a[h]){var v=i.error(i.DOC_VALIDATION,h);throw v.message=i.DOC_VALIDATION.message+": "+h,v}m&&!l[h]?f.metadata[h.slice(1)]=e[h]:f.data[h]=e[h]}return f}},{"./errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","./uuid":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/uuid.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/parse-hex.js":[function(e,t){"use strict";function n(e){return decodeURIComponent(window.escape(e))}function r(e){return 65>e?e-48:e-55}function o(e,t,n){for(var o="";n>t;)o+=String.fromCharCode(r(e.charCodeAt(t++))<<4|r(e.charCodeAt(t++)));return o}function s(e,t,n){for(var o="";n>t;)o+=String.fromCharCode(r(e.charCodeAt(t+2))<<12|r(e.charCodeAt(t+3))<<8|r(e.charCodeAt(t))<<4|r(e.charCodeAt(t+1))),t+=4;return o}function i(e,t){return"UTF-8"===t?n(o(e,0,e.length)):s(e,0,e.length)}t.exports=i},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/parse-uri.js":[function(e,t){"use strict";function n(e){for(var t=r,n=t.parser[t.strictMode?"strict":"loose"].exec(e),o={},s=14;s--;){var i=t.key[s],u=n[s]||"",a=-1!==["user","password"].indexOf(i);o[i]=a?decodeURIComponent(u):u}return o[t.q.name]={},o[t.key[12]].replace(t.q.parser,function(e,n,r){n&&(o[t.q.name][n]=r)}),o}var r={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};t.exports=n},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/request-browser.js":[function(e,t){"use strict";var n=e("./blob.js"),r=e("../utils");t.exports=function(e,t){var o,s,i,u=function(){o.abort()};if(o=e.xhr?new e.xhr:new XMLHttpRequest,"GET"===e.method&&!e.cache){var a=-1!==e.url.indexOf("?");e.url+=(a?"&":"?")+"_nonce="+Date.now()}o.open(e.method,e.url),o.withCredentials=!0,e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(o.responseType="arraybuffer"),"body"in e||(e.body=null);for(var l in e.headers)e.headers.hasOwnProperty(l)&&o.setRequestHeader(l,e.headers[l]);return e.timeout>0&&(s=setTimeout(u,e.timeout),o.onprogress=function(){clearTimeout(s),s=setTimeout(u,e.timeout)},"undefined"==typeof i&&(i=-1!==Object.keys(o).indexOf("upload")),i&&(o.upload.onprogress=o.onprogress)),o.onreadystatechange=function(){if(4===o.readyState){var r={statusCode:o.status};if(o.status>=200&&o.status<300){var s;s=e.binary?n([o.response||""],{type:o.getResponseHeader("Content-Type")}):o.responseText,t(null,r,s)}else{var i={};try{i=JSON.parse(o.response)}catch(u){}t(i,r)}}},e.body&&e.body instanceof Blob?r.readAsBinaryString(e.body,function(e){o.send(r.fixBinary(e))}):o.send(e.body),{abort:u}}},{"../utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js","./blob.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/blob.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/upsert.js":[function(e,t){"use strict";var n=e("pouchdb-upsert").upsert;t.exports=function(e,t,r,o){return n.call(e,t,r,o)}},{"pouchdb-upsert":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-upsert/index.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/uuid.js":[function(e,t){"use strict";function n(e){return 0|Math.random()*e}function r(e,t){t=t||o.length;var r="",s=-1;if(e){for(;++s<e;)r+=o[n(t)];return r}for(;++s<36;)switch(s){case 8:case 13:case 18:case 23:r+="-";break;case 19:r+=o[3&n(16)|8];break;default:r+=o[n(16)]}return r}var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t.exports=r},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/evalFilter.js":[function(require,module,exports){"use strict";function evalFilter(input){return eval(["(function () { return ",input," })()"].join(""))}module.exports=evalFilter},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/evalView.js":[function(require,module,exports){"use strict";function evalView(input){return eval(["(function () {","  return function (doc) {","    var emitted = false;","    var emit = function (a, b) {","      emitted = true;","    };","    var view = "+input+";","    view(doc);","    if (emitted) {","      return true;","    }","  }","})()"].join("\n"))}module.exports=evalView},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/index.js":[function(e,t){(function(n){"use strict";var r=e("./setup");t.exports=r,r.ajax=e("./deps/ajax"),r.utils=e("./utils"),r.Errors=e("./deps/errors"),r.replicate=e("./replicate").replicate,r.sync=e("./sync"),r.version=e("./version");var o=e("./adapters/http/http");if(r.adapter("http",o),r.adapter("https",o),r.adapter("idb",e("./adapters/idb/idb")),r.adapter("websql",e("./adapters/websql/websql")),r.plugin(e("pouchdb-mapreduce")),!n.browser){var s=e("./adapters/leveldb/leveldb");r.adapter("ldb",s),r.adapter("leveldb",s)}}).call(this,e("_process"))},{"./adapters/http/http":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/http/http.js","./adapters/idb/idb":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/idb/idb.js","./adapters/leveldb/leveldb":"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/browser-resolve/empty.js","./adapters/websql/websql":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/websql/websql.js","./deps/ajax":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/ajax.js","./deps/errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","./replicate":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/replicate.js","./setup":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/setup.js","./sync":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/sync.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js","./version":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/version-browser.js",_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js","pouchdb-mapreduce":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/index.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/merge.js":[function(e,t){"use strict";function n(e,t,n){for(var r,o=0,s=e.length;s>o;)r=o+s>>>1,n(e[r],t)<0?o=r+1:s=r;return o}function r(e,t,r){var o=n(e,t,r);e.splice(o,0,t)}function o(e){for(var t,n=e.shift(),r=[n.id,n.opts,[]],o=r;e.length;)n=e.shift(),t=[n.id,n.opts,[]],o[2].push(t),o=t;return r}function s(e,t){return e[0]<t[0]?-1:1}function i(e,t){for(var n=[{tree1:e,tree2:t}],o=!1;n.length>0;){var i=n.pop(),u=i.tree1,a=i.tree2;(u[1].status||a[1].status)&&(u[1].status="available"===u[1].status||"available"===a[1].status?"available":"missing");for(var l=0;l<a[2].length;l++)if(u[2][0]){for(var c=!1,d=0;d<u[2].length;d++)u[2][d][0]===a[2][l][0]&&(n.push({tree1:u[2][d],tree2:a[2][l]}),c=!0);c||(o="new_branch",r(u[2],a[2][l],s))}else o="new_leaf",u[2][0]=a[2][l]}return{conflicts:o,tree:e}}function u(e,t,n){var r,o=[],s=!1,u=!1;return e.length?(e.forEach(function(e){if(e.pos===t.pos&&e.ids[0]===t.ids[0])r=i(e.ids,t.ids),o.push({pos:e.pos,ids:r.tree}),s=s||r.conflicts,u=!0;else if(n!==!0){var a=e.pos<t.pos?e:t,l=e.pos<t.pos?t:e,c=l.pos-a.pos,d=[],p=[];for(p.push({ids:a.ids,diff:c,parent:null,parentIdx:null});p.length>0;){var f=p.pop();0!==f.diff?f.ids&&f.ids[2].forEach(function(e,t){p.push({ids:e,diff:f.diff-1,parent:f.ids,parentIdx:t})}):f.ids[0]===l.ids[0]&&d.push(f)}var h=d[0];h?(r=i(h.ids,l.ids),h.parent[2][h.parentIdx]=r.tree,o.push({pos:a.pos,ids:a.ids}),s=s||r.conflicts,u=!0):o.push(e)}else o.push(e)}),u||o.push(t),o.sort(function(e,t){return e.pos-t.pos}),{tree:o,conflicts:s||"internal_node"}):{tree:[t],conflicts:"new_leaf"}}function a(e,t){var n=c.rootToLeaf(e).map(function(e){var n=e.ids.slice(-t);return{pos:e.pos+(e.ids.length-n.length),ids:o(n)}});return n.reduce(function(e,t){return u(e,t,!0).tree},[n.shift()])}var l=e("pouchdb-extend"),c={};c.merge=function(e,t,n){e=l(!0,[],e),t=l(!0,{},t);var r=u(e,t);return{tree:a(r.tree,n),conflicts:r.conflicts}},c.winningRev=function(e){var t=[];return c.traverseRevTree(e.rev_tree,function(e,n,r,o,s){e&&t.push({pos:n,id:r,deleted:!!s.deleted})}),t.sort(function(e,t){return e.deleted!==t.deleted?e.deleted>t.deleted?1:-1:e.pos!==t.pos?t.pos-e.pos:e.id<t.id?1:-1}),t[0].pos+"-"+t[0].id},c.traverseRevTree=function(e,t){for(var n,r=e.slice();n=r.pop();)for(var o=n.pos,s=n.ids,i=s[2],u=t(0===i.length,o,s[0],n.ctx,s[1]),a=0,l=i.length;l>a;a++)r.push({pos:o+1,ids:i[a],ctx:u})},c.collectLeaves=function(e){var t=[];return c.traverseRevTree(e,function(e,n,r,o,s){e&&t.push({rev:n+"-"+r,pos:n,opts:s})}),t.sort(function(e,t){return t.pos-e.pos}),t.forEach(function(e){delete e.pos}),t},c.collectConflicts=function(e){var t=c.winningRev(e),n=c.collectLeaves(e.rev_tree),r=[];return n.forEach(function(e){e.rev===t||e.opts.deleted||r.push(e.rev)}),r},c.rootToLeaf=function(e){var t=[];return c.traverseRevTree(e,function(e,n,r,o,s){if(o=o?o.slice(0):[],o.push({id:r,opts:s}),e){var i=n+1-o.length;t.unshift({pos:i,ids:o})}return o}),t},t.exports=c},{"pouchdb-extend":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-extend/index.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/replicate.js":[function(e,t,n){"use strict";function r(e,t){e=parseInt(e,10),t=parseInt(t,10),e!==e&&(e=0),t!==t||e>=t?t=(e||1)<<1:t+=1;var n=Math.random(),r=t-e;return~~(r*n+e)}function o(e){var t=0;return e||(t=2e3),r(e,t)}function s(e,t,n,r,s,i,u){return r.retry===!1?(s.emit("error",u),void s.removeAllListeners()):(r.default_back_off=r.default_back_off||0,r.retries=r.retries||0,"function"!=typeof r.back_off_function&&(r.back_off_function=o),r.retries++,r.max_retries&&r.retries>r.max_retries?(s.emit("error",new Error("tried "+r.retries+" times but replication failed")),void s.removeAllListeners()):(s.emit("requestError",u),"active"===s.state&&(s.emit("paused",u),s.state="stopped",s.once("active",function(){r.current_back_off=r.default_back_off})),r.current_back_off=r.current_back_off||r.default_back_off,r.current_back_off=r.back_off_function(r.current_back_off),void setTimeout(function(){a(e,t,n,r,s)},r.current_back_off)))}function i(){p.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new d.Promise(function(t,n){e.once("complete",t),e.once("error",n)});e.then=function(e,n){return t.then(e,n)},e["catch"]=function(e){return t["catch"](e)},e["catch"](function(){})}function u(e,t,n){var r=n.filter?n.filter.toString():"";return e.id().then(function(e){return t.id().then(function(t){var o=e+t+r+JSON.stringify(n.query_params)+n.doc_ids;return d.MD5(o).then(function(e){return e=e.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+e})})})}function a(e,t,n,r,o,i){function u(){if(0!==j.docs.length){var e=j.docs;return n.bulkDocs({docs:e,new_edits:!1}).then(function(t){if(P.cancelled)throw y(),new Error("cancelled");var n=[],r={};t.forEach(function(e){e.error&&(i.doc_write_failures++,n.push(e),r[e.id]=e)}),i.errors=n,B=B.concat(n),i.docs_written+=j.docs.length-n.length;var s=n.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(F=[],e.forEach(function(e){var t=r[e._id];t?o.emit("denied",d.clone(t)):F.push(e)}),s.length>0){var u=new Error("bulkDocs error");throw u.other_errors=n,b("target.bulkDocs failed to write docs",u),new Error("bulkWrite partial failure")}},function(t){throw i.doc_write_failures+=e.length,t})}}function a(e){for(var n=j.diffs,r=n[e].missing,o=[],s=0;s<r.length;s+=h)o.push(r.slice(s,Math.min(r.length,s+h)));return d.Promise.all(o.map(function(r){var o={revs:!0,open_revs:r,attachments:!0};return t.get(e,o).then(function(t){t.forEach(function(e){return P.cancelled?y():void(e.ok&&(i.docs_read++,j.pendingRevs++,j.docs.push(e.ok)))}),delete n[e]})}))}function l(){var e=Object.keys(j.diffs);return d.Promise.all(e.map(a))}function c(){var e=Object.keys(j.diffs).filter(function(e){var t=j.diffs[e].missing;return 1===t.length&&"1-"===t[0].slice(0,2)});return e.length?t.allDocs({keys:e,include_docs:!0}).then(function(e){if(P.cancelled)throw y(),new Error("cancelled");
e.rows.forEach(function(e){!e.doc||e.deleted||"1-"!==e.value.rev.slice(0,2)||e.doc._attachments&&0!==Object.keys(e.doc._attachments).length||(i.docs_read++,j.pendingRevs++,j.docs.push(e.doc),delete j.diffs[e.id])})}):d.Promise.resolve()}function p(){return c().then(l)}function m(){return T=!0,q.writeCheckpoint(j.seq).then(function(){if(T=!1,P.cancelled)throw y(),new Error("cancelled");i.last_seq=I=j.seq;var e=d.clone(i);e.docs=F,o.emit("change",e),j=void 0,x()})["catch"](function(e){throw T=!1,b("writeCheckpoint completed with error",e),e})}function v(){var e={};return j.changes.forEach(function(t){e[t.id]=t.changes.map(function(e){return e.rev})}),n.revsDiff(e).then(function(e){if(P.cancelled)throw y(),new Error("cancelled");j.diffs=e,j.pendingRevs=0})}function g(){if(!P.cancelled&&!j){if(0===A.length)return void _(!0);j=A.shift(),v().then(p).then(u).then(m).then(g)["catch"](function(e){b("batch processing terminated with error",e)})}}function _(e){return 0===O.changes.length?void(0!==A.length||j||((D&&H.live||C)&&(o.emit("paused"),o.emit("uptodate",i)),C&&y())):void((e||C||O.changes.length>=R)&&(A.push(O),O={seq:0,changes:[],docs:[]},g()))}function b(e,t){U||(t.message||(t.message=e),i.ok=!1,i.status="aborting",i.errors.push(t),B=B.concat(t),A=[],O={seq:0,changes:[],docs:[]},y())}function y(){if(!(U||P.cancelled&&(i.status="cancelled",T))){i.status=i.status||"complete",i.end_time=new Date,i.last_seq=I,U=P.cancelled=!0;var u=B.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(u.length>0){var a=B.pop();B.length>0&&(a.other_errors=B),a.result=i,s(e,t,n,r,o,i,a)}else i.errors=B,o.emit("complete",i),o.removeAllListeners()}}function w(e){if(P.cancelled)return y();var t=d.filterChange(r)(e);t&&(0!==O.changes.length||0!==A.length||j||o.emit("outofdate",i),O.seq=e.seq,O.changes.push(e),_(0===A.length))}function k(e){return N=!1,P.cancelled?y():(e.results.length>0?(H.since=e.last_seq,x()):D?(H.live=!0,x()):C=!0,void _(!0))}function S(e){return N=!1,P.cancelled?y():void b("changes rejected",e)}function x(){function e(){r.cancel()}function n(){o.removeListener("cancel",e)}if(!N&&!C&&A.length<L){N=!0,o.once("cancel",e);var r=t.changes(H).on("change",w);r.then(n,n),r.then(k)["catch"](S)}}function E(){q.getCheckpoint().then(function(e){I=e,H={since:I,limit:R,batch_size:R,style:"all_docs",doc_ids:M,returnDocs:!0},r.filter&&(H.include_docs=!0),r.query_params&&(H.query_params=r.query_params),x()})["catch"](function(e){b("getCheckpoint rejected with ",e)})}var j,A=[],O={seq:0,changes:[],docs:[]},T=!1,C=!1,U=!1,I=0,D=r.continuous||r.live||!1,R=r.batch_size||100,L=r.batches_limit||10,N=!1,M=r.doc_ids,P={cancelled:!1},q=new f(t,n,e,P),B=[],F=[];i=i||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var H={};o.ready(t,n),o.once("cancel",y),"function"==typeof r.onChange&&o.on("change",r.onChange),"function"==typeof r.complete&&(o.once("error",r.complete),o.once("complete",function(e){r.complete(null,e)})),"undefined"==typeof r.since?E():(T=!0,q.writeCheckpoint(r.since).then(function(){return T=!1,P.cancelled?void y():(I=r.since,void E())})["catch"](function(e){throw T=!1,b("writeCheckpoint completed with error",e),e}))}function l(e,t){var n=t.PouchConstructor;return"string"==typeof e?new n(e):e.then?e:d.Promise.resolve(e)}function c(e,t,n,r){"function"==typeof n&&(r=n,n={}),"undefined"==typeof n&&(n={}),n.complete||(n.complete=r||function(){}),n=d.clone(n),n.continuous=n.continuous||n.live,n.retry="retry"in n?n.retry:m,n.PouchConstructor=n.PouchConstructor||this;var o=new i(n);return l(e,n).then(function(e){return l(t,n).then(function(t){return u(e,t,n).then(function(r){a(r,e,t,n,o)})})})["catch"](function(e){o.emit("error",e),n.complete(e)}),o}var d=e("./utils"),p=e("events").EventEmitter,f=e("./checkpointer"),h=50,m=!1;d.inherits(i,p),i.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},i.prototype.ready=function(e,t){function n(){o.cancel()}function r(){e.removeListener("destroyed",n),t.removeListener("destroyed",n)}var o=this;this.once("change",function(){("pending"===this.state||"stopped"===this.state)&&(o.state="active",o.emit("active"))}),e.once("destroyed",n),t.once("destroyed",n),this.then(r,r)},n.toPouch=l,n.replicate=c},{"./checkpointer":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/checkpointer.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js",events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/setup.js":[function(e,t){"use strict";var n=e("./constructor"),r=e("./utils"),o=r.Promise,s=e("events").EventEmitter;n.adapters={},n.preferredAdapters=e("./adapters/preferredAdapters.js"),n.prefix="_pouch_";var i=new s,u=["on","addListener","emit","listeners","once","removeAllListeners","removeListener","setMaxListeners"];u.forEach(function(e){n[e]=i[e].bind(i)}),n.setMaxListeners(0),n.parseAdapter=function(e,t){var o,s,i=e.match(/([a-z\-]*):\/\/(.*)/);if(i){if(e=/http(s?)/.test(i[1])?i[1]+"://"+i[2]:i[2],o=i[1],!n.adapters[o].valid())throw"Invalid adapter";return{name:e,adapter:i[1]}}var u="idb"in n.adapters&&"websql"in n.adapters&&r.hasLocalStorage()&&localStorage["_pouch__websqldb_"+n.prefix+e];if("undefined"!=typeof t&&t.db)s="leveldb";else for(var a=0;a<n.preferredAdapters.length;++a)if(s=n.preferredAdapters[a],s in n.adapters){if(u&&"idb"===s)continue;break}if(o=n.adapters[s],s&&o){var l="use_prefix"in o?o.use_prefix:!0;return{name:l?n.prefix+e:e,adapter:s}}throw"No valid adapter found"},n.destroy=r.toPromise(function(e,t,s){function i(){l.destroy(p,t,function(t,r){t?s(t):(n.emit("destroyed",e),n.emit(e,"destroyed"),s(null,r||{ok:!0}))})}("function"==typeof t||"undefined"==typeof t)&&(s=t,t={}),e&&"object"==typeof e&&(t=e,e=void 0),t.internal||console.log("PouchDB.destroy() is deprecated and will be removed. Please use db.destroy() instead.");var u=n.parseAdapter(t.name||e,t),a=u.name,l=n.adapters[u.adapter],c="use_prefix"in l?l.use_prefix:!0,d=c?a.replace(new RegExp("^"+n.prefix),""):a,p=("http"===u.adapter||"https"===u.adapter?"":t.prefix||"")+a,f=r.extend(!0,{},t,{adapter:u.adapter});new n(d,f,function(e,u){return e?s(e):void u.get("_local/_pouch_dependentDbs",function(e,a){if(e)return 404!==e.status?s(e):i();var l=a.dependentDbs,d=Object.keys(l).map(function(e){var o=c?e.replace(new RegExp("^"+n.prefix),""):e,s=r.extend(!0,t,u.__opts||{});return u.constructor.destroy(o,s)});o.all(d).then(i,function(e){s(e)})})})}),n.adapter=function(e,t){t.valid()&&(n.adapters[e]=t)},n.plugin=function(e){Object.keys(e).forEach(function(t){n.prototype[t]=e[t]})},n.defaults=function(e){function t(t,o,s){("function"==typeof o||"undefined"==typeof o)&&(s=o,o={}),t&&"object"==typeof t&&(o=t,t=void 0),o=r.extend(!0,{},e,o),n.call(this,t,o,s)}return r.inherits(t,n),t.destroy=r.toPromise(function(t,o,s){return("function"==typeof o||"undefined"==typeof o)&&(s=o,o={}),t&&"object"==typeof t&&(o=t,t=void 0),o=r.extend(!0,{},e,o),n.destroy(t,o,s)}),u.forEach(function(e){t[e]=i[e].bind(i)}),t.setMaxListeners(0),t.preferredAdapters=n.preferredAdapters.slice(),Object.keys(n).forEach(function(e){e in t||(t[e]=n[e])}),t},t.exports=n},{"./adapters/preferredAdapters.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/adapters/preferredAdapters-browser.js","./constructor":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/constructor.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js",events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/sync.js":[function(e,t){"use strict";function n(e,t,n,i){return"function"==typeof n&&(i=n,n={}),"undefined"==typeof n&&(n={}),n=o.clone(n),n.PouchConstructor=n.PouchConstructor||this,e=s.toPouch(e,n),t=s.toPouch(t,n),new r(e,t,n,i)}function r(e,t,n,r){function s(e){m||(m=!0,p.emit("cancel",e))}function u(e){p.emit("change",{direction:"pull",change:e})}function a(e){p.emit("change",{direction:"push",change:e})}function l(e){p.emit("denied",{direction:"push",doc:e})}function c(e){p.emit("denied",{direction:"pull",doc:e})}function d(e){return function(t,n){var r="change"===t&&(n===u||n===a),o="cancel"===t&&n===s,i=t in v&&n===v[t];(r||o||i)&&(t in g||(g[t]={}),g[t][e]=!0,2===Object.keys(g[t]).length&&p.removeAllListeners(t))}}var p=this;this.canceled=!1;var f,h;"onChange"in n&&(f=n.onChange,delete n.onChange),"function"!=typeof r||n.complete?"complete"in n&&(h=n.complete,delete n.complete):h=r,this.push=i(e,t,n),this.pull=i(t,e,n);var m=!1,v={},g={};n.live&&(this.push.on("complete",p.pull.cancel.bind(p.pull)),this.pull.on("complete",p.push.cancel.bind(p.push))),this.on("newListener",function(e){"change"===e?(p.pull.on("change",u),p.push.on("change",a)):"denied"===e?(p.pull.on("denied",c),p.push.on("denied",l)):"cancel"===e?(p.pull.on("cancel",s),p.push.on("cancel",s)):"error"===e||"removeListener"===e||"complete"===e||e in v||(v[e]=function(t){p.emit(e,t)},p.pull.on(e,v[e]),p.push.on(e,v[e]))}),this.on("removeListener",function(e){"change"===e?(p.pull.removeListener("change",u),p.push.removeListener("change",a)):"cancel"===e?(p.pull.removeListener("cancel",s),p.push.removeListener("cancel",s)):e in v&&"function"==typeof v[e]&&(p.pull.removeListener(e,v[e]),p.push.removeListener(e,v[e]),delete v[e])}),this.pull.on("removeListener",d("pull")),this.push.on("removeListener",d("push"));var _=o.Promise.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return p.emit("complete",t),h&&h(null,t),p.removeAllListeners(),t},function(e){throw p.cancel(),p.emit("error",e),h&&h(e),p.removeAllListeners(),e});this.then=function(e,t){return _.then(e,t)},this["catch"]=function(e){return _["catch"](e)}}var o=e("./utils"),s=e("./replicate"),i=s.replicate,u=e("events").EventEmitter;o.inherits(r,u),t.exports=n,r.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}},{"./replicate":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/replicate.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js",events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/taskqueue.js":[function(e,t){"use strict";function n(){this.isReady=!1,this.failed=!1,this.queue=[]}t.exports=n,n.prototype.execute=function(){var e,t;if(this.failed)for(;e=this.queue.shift();)"function"!=typeof e?(t=e.parameters[e.parameters.length-1],"function"==typeof t?t(this.failed):"changes"===e.name&&"function"==typeof t.complete&&t.complete(this.failed)):e(this.failed);else if(this.isReady)for(;e=this.queue.shift();)"function"==typeof e?e():e.task=this.db[e.name].apply(this.db,e.parameters)},n.prototype.fail=function(e){this.failed=e,this.execute()},n.prototype.ready=function(e){return this.failed?!1:0===arguments.length?this.isReady:(this.isReady=e?!0:!1,this.db=e,void this.execute())},n.prototype.addTask=function(e,t){if("function"!=typeof e){var n={name:e,parameters:t};return this.queue.push(n),this.failed&&this.execute(),n}this.queue.push(e),this.failed&&this.execute()}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/utils.js":[function(e,t,n){(function(t,r){function o(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function s(){if(!(this instanceof s))return new s;var e=this;l.call(this),this.isChrome=o(),this.listeners={},this.hasLocal=!1,this.isChrome||(this.hasLocal=n.hasLocalStorage()),this.isChrome?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):this.hasLocal&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}var i=e("./merge");n.extend=e("pouchdb-extend"),n.ajax=e("./deps/ajax"),n.createBlob=e("./deps/blob"),n.uuid=e("./deps/uuid"),n.getArguments=e("argsarray");var u=e("./deps/buffer"),a=e("./deps/errors"),l=e("events").EventEmitter,c=e("pouchdb-collections");n.Map=c.Map,n.Set=c.Set;var d=e("./deps/parse-doc");n.Promise="function"==typeof r.Promise?r.Promise:e("bluebird");var p=n.Promise;n.lastIndexOf=function(e,t){for(var n=e.length-1;n>=0;n--)if(e.charAt(n)===t)return n;return-1},n.clone=function(e){return n.extend(!0,{},e)},n.pick=function(e,t){for(var n={},r=0,o=t.length;o>r;r++){var s=t[r];n[s]=e[s]}return n},n.inherits=e("inherits"),n.call=n.getArguments(function(e){if(e.length){var t=e.shift();"function"==typeof t&&t.apply(this,e)}}),n.isLocalId=function(e){return/^_local/.test(e)},n.isDeleted=function(e,t){t||(t=i.winningRev(e));var n=t.indexOf("-");-1!==n&&(t=t.substring(n+1));var r=!1;return i.traverseRevTree(e.rev_tree,function(e,n,o,s,i){o===t&&(r=!!i.deleted)}),r},n.revExists=function(e,t){var n=!1;return i.traverseRevTree(e.rev_tree,function(e,r,o){r+"-"+o===t&&(n=!0)}),n},n.filterChange=function(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){if(e.filter&&n&&!e.filter.call(this,r.doc,t))return!1;if(e.include_docs){if(!e.attachments)for(var o in r.doc._attachments)r.doc._attachments.hasOwnProperty(o)&&(r.doc._attachments[o].stub=!0)}else delete r.doc;return!0}},n.parseDoc=d.parseDoc,n.invalidIdError=d.invalidIdError,n.isCordova=function(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap},n.hasLocalStorage=function(){if(o())return!1;try{return localStorage}catch(e){return!1}},n.Changes=s,n.inherits(s,l),s.prototype.addListener=function(e,r,o,s){function i(){if(u.listeners[r]){if(a)return void(a="waiting");a=!0,o.changes({style:s.style,include_docs:s.include_docs,attachments:s.attachments,conflicts:s.conflicts,continuous:!1,descending:!1,filter:s.filter,doc_ids:s.doc_ids,view:s.view,since:s.since,query_params:s.query_params}).on("change",function(e){e.seq>s.since&&!s.cancelled&&(s.since=e.seq,n.call(s.onChange,e))}).on("complete",function(){"waiting"===a&&t.nextTick(function(){u.notify(e)}),a=!1}).on("error",function(){a=!1})}}if(!this.listeners[r]){var u=this,a=!1;this.listeners[r]=i,this.on(e,i)}},s.prototype.removeListener=function(e,t){t in this.listeners&&l.prototype.removeListener.call(this,e,this.listeners[t])},s.prototype.notifyLocalWindows=function(e){this.isChrome?chrome.storage.local.set({dbName:e}):this.hasLocal&&(localStorage[e]="a"===localStorage[e]?"b":"a")},s.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)},n.atob="function"==typeof atob?function(e){return atob(e)}:function(e){var t=new u(e,"base64");if(t.toString("base64")!==e)throw"Cannot base64 encode full string";return t.toString("binary")},n.btoa="function"==typeof btoa?function(e){return btoa(e)}:function(e){return new u(e,"binary").toString("base64")},n.fixBinary=function(e){if(!t.browser)return e;for(var n=e.length,r=new ArrayBuffer(n),o=new Uint8Array(r),s=0;n>s;s++)o[s]=e.charCodeAt(s);return r},n.readAsBinaryString=function(e,t){var r=new FileReader,o="function"==typeof r.readAsBinaryString;r.onloadend=function(e){var r=e.target.result||"";return o?t(r):void t(n.arrayBufferToBinaryString(r))},o?r.readAsBinaryString(e):r.readAsArrayBuffer(e)},n.readAsArrayBuffer=function(e,t){var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)},n.once=function(e){var t=!1;return n.getArguments(function(n){if(t)throw new Error("once called  more than once");t=!0,e.apply(this,n)})},n.toPromise=function(e){return n.getArguments(function(r){var o,s=this,i="function"==typeof r[r.length-1]?r.pop():!1;i&&(o=function(e,n){t.nextTick(function(){i(e,n)})});var u=new p(function(t,o){var i;try{var u=n.once(function(e,n){e?o(e):t(n)});r.push(u),i=e.apply(s,r),i&&"function"==typeof i.then&&t(i)}catch(a){o(a)}});return o&&u.then(function(e){o(null,e)},o),u.cancel=function(){return this},u})},n.adapterFun=function(t,r){function o(e,t,n){if(s.enabled){for(var r=[e._db_name,t],o=0;o<n.length-1;o++)r.push(n[o]);s.apply(null,r);var i=n[n.length-1];n[n.length-1]=function(n,r){var o=[e._db_name,t];o=o.concat(n?["error",n]:["success",r]),s.apply(null,o),i(n,r)}}}var s=e("debug")("pouchdb:api");return n.toPromise(n.getArguments(function(e){if(this._closed)return p.reject(new Error("database is closed"));var s=this;return o(s,t,e),this.taskqueue.isReady?r.apply(this,e):new n.Promise(function(n,r){s.taskqueue.addTask(function(o){o?r(o):n(s[t].apply(s,e))})})}))},n.arrayBufferToBinaryString=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;r>o;o++)t+=String.fromCharCode(n[o]);return t},n.cancellableFun=function(e,t,r){r=r?n.clone(!0,{},r):{};var o=new l,s=r.complete||function(){},i=r.complete=n.once(function(e,t){e?s(e):(o.emit("end",t),s(null,t)),o.removeAllListeners()}),u=r.onChange||function(){},a=0;t.on("destroyed",function(){o.removeAllListeners()}),r.onChange=function(e){u(e),e.seq<=a||(a=e.seq,o.emit("change",e),e.deleted?o.emit("delete",e):1===e.changes.length&&"1-"===e.changes[0].rev.slice(0,1)?o.emit("create",e):o.emit("update",e))};var c=new p(function(e,t){r.complete=function(n,r){n?t(n):e(r)}});return c.then(function(e){i(null,e)},i),c.cancel=function(){c.isCancelled=!0,t.taskqueue.isReady&&r.complete(null,{status:"cancelled"})},t.taskqueue.isReady?e(t,r,c):t.taskqueue.addTask(function(){c.isCancelled?r.complete(null,{status:"cancelled"}):e(t,r,c)}),c.on=o.on.bind(o),c.once=o.once.bind(o),c.addListener=o.addListener.bind(o),c.removeListener=o.removeListener.bind(o),c.removeAllListeners=o.removeAllListeners.bind(o),c.setMaxListeners=o.setMaxListeners.bind(o),c.listeners=o.listeners.bind(o),c.emit=o.emit.bind(o),c},n.MD5=n.toPromise(e("./deps/md5")),n.explain404=function(e){t.browser&&"console"in r&&"info"in console&&console.info("The above 404 is totally normal. "+e)},n.info=function(e){"undefined"!=typeof console&&"info"in console&&console.info(e)},n.parseUri=e("./deps/parse-uri"),n.compare=function(e,t){return t>e?-1:e>t?1:0},n.updateDoc=function(e,t,r,o,s,u,l){if(n.revExists(e,t.metadata.rev))return r[o]=t,s();var c=n.isDeleted(e),d=n.isDeleted(t.metadata),p=/^1-/.test(t.metadata.rev);if(c&&!d&&l&&p){var f=t.data;f._rev=i.winningRev(e),f._id=t.metadata.id,t=n.parseDoc(f,l)}var h=i.merge(e.rev_tree,t.metadata.rev_tree[0],1e3),m=l&&(c&&d||!c&&"new_leaf"!==h.conflicts||c&&!d&&"new_branch"===h.conflicts);if(m){var v=a.error(a.REV_CONFLICT);return r[o]=v,s()}var g=t.metadata.rev;t.metadata.rev_tree=h.tree,e.rev_map&&(t.metadata.rev_map=e.rev_map);var _=i.winningRev(t.metadata);d=n.isDeleted(t.metadata,_);var b=0;(l||_===g)&&(b=c===d?0:d>c?-1:1),u(t,_,d,s,!0,b,o)},n.processDocs=function(e,t,r,o,s,u,l,c){function d(e,t,r){var o=i.winningRev(e.metadata),c=n.isDeleted(e.metadata,o);if("was_delete"in l&&c)return s[t]=a.error(a.MISSING_DOC,"deleted"),r();var d=c?0:1;u(e,o,c,r,!1,d,t)}function p(){++m===v&&c&&c()}if(e.length){var f=l.new_edits,h=new n.Map,m=0,v=e.length;e.forEach(function(e,r){if(e._id&&n.isLocalId(e._id))return void t[e._deleted?"_removeLocal":"_putLocal"](e,{ctx:o},function(e){s[r]=e?e:{ok:!0},p()});var i=e.metadata.id;h.has(i)?(v--,h.get(i).push([e,r])):h.set(i,[[e,r]])}),h.forEach(function(e,t){function o(){++a<e.length?i():p()}function i(){var i=e[a],l=i[0],c=i[1];r.has(t)?n.updateDoc(r.get(t),l,s,c,o,u,f):d(l,c,o)}var a=0;i()})}},n.preprocessAttachments=function(e,t,r){function o(e){try{return n.atob(e)}catch(t){var r=a.error(a.BAD_ARG,"Attachments need to be base64 encoded");return{error:r}}}function s(e,r){if(e.stub)return r();if("string"==typeof e.data){var s=o(e.data);if(s.error)return r(s.error);e.length=s.length,e.data="blob"===t?n.createBlob([n.fixBinary(s)],{type:e.content_type}):"base64"===t?n.btoa(s):s,n.MD5(s).then(function(t){e.digest="md5-"+t,r()})}else n.readAsArrayBuffer(e.data,function(o){"binary"===t?e.data=n.arrayBufferToBinaryString(o):"base64"===t&&(e.data=n.btoa(n.arrayBufferToBinaryString(o))),n.MD5(o).then(function(t){e.digest="md5-"+t,e.length=o.byteLength,r()})})}function i(){l++,e.length===l&&(u?r(u):r())}if(!e.length)return r();var u,l=0;e.forEach(function(e){function t(e){u=e,r++,r===n.length&&i()}var n=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],r=0;if(!n.length)return i();for(var o in e.data._attachments)e.data._attachments.hasOwnProperty(o)&&s(e.data._attachments[o],t)})},n.compactTree=function(e){var t=[];return i.traverseRevTree(e.rev_tree,function(e,n,r,o,s){"available"!==s.status||e||(t.push(n+"-"+r),s.status="missing")}),t};var f=e("vuvuzela");n.safeJsonParse=function(e){try{return JSON.parse(e)}catch(t){return f.parse(e)}},n.safeJsonStringify=function(e){try{return JSON.stringify(e)}catch(t){return f.stringify(e)}}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./deps/ajax":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/ajax.js","./deps/blob":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/blob.js","./deps/buffer":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/buffer-browser.js","./deps/errors":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/errors.js","./deps/md5":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/md5.js","./deps/parse-doc":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/parse-doc.js","./deps/parse-uri":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/parse-uri.js","./deps/uuid":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/deps/uuid.js","./merge":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/merge.js",_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js",argsarray:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/argsarray/index.js",bluebird:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/index.js",debug:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/debug/browser.js",events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js",inherits:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/inherits/inherits_browser.js","pouchdb-collections":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-collections/index.js","pouchdb-extend":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-extend/index.js",vuvuzela:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/vuvuzela/index.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/lib/version-browser.js":[function(e,t){t.exports="3.3.1"},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/argsarray/index.js":[function(e,t){"use strict";function n(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}t.exports=n},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/debug/browser.js":[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,s=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(s=o))}),e.splice(s,0,r),e}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?l.removeItem("debug"):l.debug=e}catch(t){}}function u(){var e;try{e=l.debug}catch(t){}return e}function a(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=s,n.formatArgs=o,n.save=i,n.load=u,n.useColors=r;var l;l="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(u())},{"./debug":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/debug/debug.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/debug/debug.js":[function(e,t,n){function r(){return n.colors[c++%n.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,s=t-(l||t);e.diff=s,e.prev=l,e.curr=t,l=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var i=Array.prototype.slice.call(arguments);i[0]=n.coerce(i[0]),"string"!=typeof i[0]&&(i=["%o"].concat(i));var u=0;i[0]=i[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;u++;var o=n.formatters[r];if("function"==typeof o){var s=i[u];t=o.call(e,s),i.splice(u,1),u--}return t}),"function"==typeof n.formatArgs&&(i=n.formatArgs.apply(e,i));var a=o.log||n.log||console.log.bind(console);a.apply(e,i)}t.enabled=!1,o.enabled=!0;var s=n.enabled(e)?o:t;return s.namespace=e,s}function s(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,o=0;r>o;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function i(){n.enable("")}function u(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=o,n.coerce=a,n.disable=i,n.enable=s,n.enabled=u,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var l,c=0},{ms:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/debug/node_modules/ms/index.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/debug/node_modules/ms/index.js":[function(e,t){function n(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"y":return n*c;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"h":return n*a;case"minutes":case"minute":case"m":return n*u;case"seconds":case"second":case"s":return n*i;case"ms":return n}}}function r(e){return e>=l?Math.round(e/l)+"d":e>=a?Math.round(e/a)+"h":e>=u?Math.round(e/u)+"m":e>=i?Math.round(e/i)+"s":e+"ms"}function o(e){return s(e,l,"day")||s(e,a,"hour")||s(e,u,"minute")||s(e,i,"second")||e+" ms"}function s(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var i=1e3,u=60*i,a=60*u,l=24*a,c=365.25*l;t.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?o(e):r(e)}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/inherits/inherits_browser.js":[function(e,t,n){arguments[4]["/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/inherits/inherits_browser.js"][0].apply(n,arguments)},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/INTERNAL.js":[function(e,t){"use strict";function n(){}t.exports=n},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/all.js":[function(e,t){"use strict";function n(e){function t(e,t){function r(e){l[t]=e,++c===n&!a&&(a=!0,u.resolve(p,l))}s(e).then(r,function(e){a||(a=!0,u.reject(p,e))})}if("[object Array]"!==Object.prototype.toString.call(e))return o(new TypeError("must be an array"));var n=e.length,a=!1;if(!n)return s([]);for(var l=new Array(n),c=0,d=-1,p=new r(i);++d<n;)t(e[d],d);return p}var r=e("./promise"),o=e("./reject"),s=e("./resolve"),i=e("./INTERNAL"),u=e("./handlers");t.exports=n},{"./INTERNAL":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/INTERNAL.js","./handlers":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/handlers.js","./promise":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/promise.js","./reject":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/reject.js","./resolve":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/resolve.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/handlers.js":[function(e,t,n){"use strict";function r(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}var o=e("./tryCatch"),s=e("./resolveThenable"),i=e("./states");n.resolve=function(e,t){var u=o(r,t);if("error"===u.status)return n.reject(e,u.value);var a=u.value;if(a)s.safely(e,a);else{e.state=i.FULFILLED,e.outcome=t;for(var l=-1,c=e.queue.length;++l<c;)e.queue[l].callFulfilled(t)}return e},n.reject=function(e,t){e.state=i.REJECTED,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e}},{"./resolveThenable":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/resolveThenable.js","./states":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/states.js","./tryCatch":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/tryCatch.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/index.js":[function(e,t,n){t.exports=n=e("./promise"),n.resolve=e("./resolve"),n.reject=e("./reject"),n.all=e("./all"),n.race=e("./race")},{"./all":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/all.js","./promise":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/promise.js","./race":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/race.js","./reject":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/reject.js","./resolve":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/resolve.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/promise.js":[function(e,t){"use strict";function n(e){if(!(this instanceof n))return new n(e);if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=i.PENDING,this.queue=[],this.outcome=void 0,e!==o&&s.safely(this,e)}var r=e("./unwrap"),o=e("./INTERNAL"),s=e("./resolveThenable"),i=e("./states"),u=e("./queueItem");t.exports=n,n.prototype["catch"]=function(e){return this.then(null,e)},n.prototype.then=function(e,t){if("function"!=typeof e&&this.state===i.FULFILLED||"function"!=typeof t&&this.state===i.REJECTED)return this;var s=new n(o);if(this.state!==i.PENDING){var a=this.state===i.FULFILLED?e:t;r(s,a,this.outcome)}else this.queue.push(new u(s,e,t));return s}},{"./INTERNAL":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/INTERNAL.js","./queueItem":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/queueItem.js","./resolveThenable":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/resolveThenable.js","./states":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/states.js","./unwrap":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/unwrap.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/queueItem.js":[function(e,t){"use strict";function n(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}var r=e("./handlers"),o=e("./unwrap");
t.exports=n,n.prototype.callFulfilled=function(e){r.resolve(this.promise,e)},n.prototype.otherCallFulfilled=function(e){o(this.promise,this.onFulfilled,e)},n.prototype.callRejected=function(e){r.reject(this.promise,e)},n.prototype.otherCallRejected=function(e){o(this.promise,this.onRejected,e)}},{"./handlers":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/handlers.js","./unwrap":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/unwrap.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/race.js":[function(e,t){"use strict";function n(e){function t(e){s(e).then(function(e){a||(a=!0,u.resolve(c,e))},function(e){a||(a=!0,u.reject(c,e))})}if("[object Array]"!==Object.prototype.toString.call(e))return o(new TypeError("must be an array"));var n=e.length,a=!1;if(!n)return s([]);for(var l=-1,c=new r(i);++l<n;)t(e[l]);return c}var r=e("./promise"),o=e("./reject"),s=e("./resolve"),i=e("./INTERNAL"),u=e("./handlers");t.exports=n},{"./INTERNAL":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/INTERNAL.js","./handlers":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/handlers.js","./promise":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/promise.js","./reject":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/reject.js","./resolve":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/resolve.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/reject.js":[function(e,t){"use strict";function n(e){var t=new r(o);return s.reject(t,e)}var r=e("./promise"),o=e("./INTERNAL"),s=e("./handlers");t.exports=n},{"./INTERNAL":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/INTERNAL.js","./handlers":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/handlers.js","./promise":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/promise.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/resolve.js":[function(e,t){"use strict";function n(e){if(e)return e instanceof r?e:s.resolve(new r(o),e);var t=typeof e;switch(t){case"boolean":return i;case"undefined":return a;case"object":return u;case"number":return l;case"string":return c}}var r=e("./promise"),o=e("./INTERNAL"),s=e("./handlers");t.exports=n;var i=s.resolve(new r(o),!1),u=s.resolve(new r(o),null),a=s.resolve(new r(o),void 0),l=s.resolve(new r(o),0),c=s.resolve(new r(o),"")},{"./INTERNAL":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/INTERNAL.js","./handlers":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/handlers.js","./promise":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/promise.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/resolveThenable.js":[function(e,t,n){"use strict";function r(e,t){function n(t){u||(u=!0,o.reject(e,t))}function r(t){u||(u=!0,o.resolve(e,t))}function i(){t(r,n)}var u=!1,a=s(i);"error"===a.status&&n(a.value)}var o=e("./handlers"),s=e("./tryCatch");n.safely=r},{"./handlers":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/handlers.js","./tryCatch":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/tryCatch.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/states.js":[function(e,t,n){n.REJECTED=["REJECTED"],n.FULFILLED=["FULFILLED"],n.PENDING=["PENDING"]},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/tryCatch.js":[function(e,t){"use strict";function n(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}t.exports=n},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/unwrap.js":[function(e,t){"use strict";function n(e,t,n){r(function(){var r;try{r=t(n)}catch(s){return o.reject(e,s)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}var r=e("immediate"),o=e("./handlers");t.exports=n},{"./handlers":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/handlers.js",immediate:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/node_modules/immediate/lib/index.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/node_modules/immediate/lib/index.js":[function(e,t){"use strict";function n(){o=!0;for(var e,t,n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}o=!1}function r(e){1!==u.push(e)||o||s()}for(var o,s,i=[e("./nextTick"),e("./mutation.js"),e("./messageChannel"),e("./stateChange"),e("./timeout")],u=[],a=-1,l=i.length;++a<l;)if(i[a]&&i[a].test&&i[a].test()){s=i[a].install(n);break}t.exports=r},{"./messageChannel":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/node_modules/immediate/lib/messageChannel.js","./mutation.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/node_modules/immediate/lib/mutation.js","./nextTick":"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/browser-resolve/empty.js","./stateChange":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/node_modules/immediate/lib/stateChange.js","./timeout":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/node_modules/immediate/lib/timeout.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/node_modules/immediate/lib/messageChannel.js":[function(e,t,n){(function(e){"use strict";n.test=function(){return e.setImmediate?!1:"undefined"!=typeof e.MessageChannel},n.install=function(t){var n=new e.MessageChannel;return n.port1.onmessage=t,function(){n.port2.postMessage(0)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/node_modules/immediate/lib/mutation.js":[function(e,t,n){(function(e){"use strict";var t=e.MutationObserver||e.WebKitMutationObserver;n.test=function(){return t},n.install=function(n){var r=0,o=new t(n),s=e.document.createTextNode("");return o.observe(s,{characterData:!0}),function(){s.data=r=++r%2}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/node_modules/immediate/lib/stateChange.js":[function(e,t,n){(function(e){"use strict";n.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},n.install=function(t){return function(){var n=e.document.createElement("script");return n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n),t}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/node_modules/immediate/lib/timeout.js":[function(e,t,n){"use strict";n.test=function(){return!0},n.install=function(e){return function(){setTimeout(e,0)}}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-collate/lib/index.js":[function(e,t,n){"use strict";function r(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return c(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),o=-1,s=r.length,i="";if(t)for(;++o<s;)i+=n.toIndexableString(r[o]);else for(;++o<s;){var u=r[o];i+=n.toIndexableString(u)+n.toIndexableString(e[u])}return i}return""}function o(e,t){var n,r=t,o="1"===e[t];if(o)n=0,t++;else{var s="0"===e[t];t++;var i="",u=e.substring(t,t+p),a=parseInt(u,10)+d;for(s&&(a=-a),t+=p;;){var l=e[t];if("\x00"===l)break;i+=l,t++}i=i.split("."),n=1===i.length?parseInt(i,10):parseFloat(i[0]+"."+i[1]),s&&(n-=10),0!==a&&(n=parseFloat(n+"e"+a))}return{num:n,length:t-r}}function s(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var o=r.element,s=r.index;if(Array.isArray(o))o.push(n);else if(s===e.length-2){var i=e.pop();o[i]=n}else e.push(n)}}function i(e,t){for(var r=Math.min(e.length,t.length),o=0;r>o;o++){var s=n.collate(e[o],t[o]);if(0!==s)return s}return e.length===t.length?0:e.length>t.length?1:-1}function u(e,t){return e===t?0:e>t?1:-1}function a(e,t){for(var r=Object.keys(e),o=Object.keys(t),s=Math.min(r.length,o.length),i=0;s>i;i++){var u=n.collate(r[i],o[i]);if(0!==u)return u;if(u=n.collate(e[r[i]],t[o[i]]),0!==u)return u}return r.length===o.length?0:r.length>o.length?1:-1}function l(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);return~n?null===e?1:Array.isArray(e)?5:3>n?n+2:n+3:Array.isArray(e)?5:void 0}function c(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=0>e,o=r?"0":"2",s=(r?-n:n)-d,i=h.padLeft(s.toString(),"0",p);o+=f+i;var u=Math.abs(parseFloat(t[0]));r&&(u=10-u);var a=u.toFixed(20);return a=a.replace(/\.?0+$/,""),o+=f+a}var d=-324,p=3,f="",h=e("./utils");n.collate=function(e,t){if(e===t)return 0;e=n.normalizeKey(e),t=n.normalizeKey(t);var r=l(e),o=l(t);if(r-o!==0)return r-o;if(null===e)return 0;switch(typeof e){case"number":return e-t;case"boolean":return e===t?0:t>e?-1:1;case"string":return u(e,t)}return Array.isArray(e)?i(e,t):a(e,t)},n.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":return 1/0===e||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var o=0;r>o;o++)e[o]=n.normalizeKey(t[o])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var s in t)if(t.hasOwnProperty(s)){var i=t[s];"undefined"!=typeof i&&(e[s]=n.normalizeKey(i))}}}}return e},n.toIndexableString=function(e){var t="\x00";return e=n.normalizeKey(e),l(e)+f+r(e)+t},n.parseIndexableString=function(e){for(var t=[],n=[],r=0;;){var i=e[r++];if("\x00"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var u=o(e,r);t.push(u.num),r+=u.length;break;case"4":for(var a="";;){var l=e[r];if("\x00"===l)break;a+=l,r++}a=a.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var c={element:[],index:t.length};t.push(c.element),n.push(c);break;case"6":var d={element:{},index:t.length};t.push(d.element),n.push(d);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();s(t,n)}}}},{"./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-collate/lib/utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-collate/lib/utils.js":[function(e,t,n){"use strict";function r(e,t,n){for(var r="",o=n-e.length;r.length<o;)r+=t;return r}n.padLeft=function(e,t,n){var o=r(e,t,n);return o+e},n.padRight=function(e,t,n){var o=r(e,t,n);return e+o},n.stringLexCompare=function(e,t){var n,r=e.length,o=t.length;for(n=0;r>n;n++){if(n===o)return 1;var s=e.charAt(n),i=t.charAt(n);if(s!==i)return i>s?-1:1}return o>r?-1:0},n.intToDecimalForm=function(e){var t=0>e,n="";do{var r=t?-Math.ceil(e%10):Math.floor(e%10);n=r+n,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&"0"!==n&&(n="-"+n),n}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-collections/index.js":[function(e,t,n){"use strict";function r(){this.store={}}function o(e){if(this.store=new r,e&&Array.isArray(e))for(var t=0,n=e.length;n>t;t++)this.add(e[t])}n.Map=r,n.Set=o,r.prototype.mangle=function(e){if("string"!=typeof e)throw new TypeError("key must be a string but Got "+e);return"$"+e},r.prototype.unmangle=function(e){return e.substring(1)},r.prototype.get=function(e){var t=this.mangle(e);return t in this.store?this.store[t]:void 0},r.prototype.set=function(e,t){var n=this.mangle(e);return this.store[n]=t,!0},r.prototype.has=function(e){var t=this.mangle(e);return t in this.store},r.prototype["delete"]=function(e){var t=this.mangle(e);return t in this.store?(delete this.store[t],!0):!1},r.prototype.forEach=function(e){var t=this,n=Object.keys(t.store);n.forEach(function(n){var r=t.store[n];n=t.unmangle(n),e(r,n)})},o.prototype.add=function(e){return this.store.set(e,!0)},o.prototype.has=function(e){return this.store.has(e)},o.prototype["delete"]=function(e){return this.store["delete"](e)}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-extend/index.js":[function(e,t){"use strict";function n(e){return null===e?String(e):"object"==typeof e||"function"==typeof e?a[p.call(e)]||"object":typeof e}function r(e){return null!==e&&e===e.window}function o(e){if(!e||"object"!==n(e)||e.nodeType||r(e))return!1;try{if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var o;for(o in e);return void 0===o||f.call(e,o)}function s(e){return"function"===n(e)}function i(){for(var e=[],t=-1,n=arguments.length,r=new Array(n);++t<n;)r[t]=arguments[t];var o={};e.push({args:r,result:{container:o,key:"key"}});for(var s;s=e.pop();)u(e,s.args,s.result);return o.key}function u(e,t,n){var r,i,u,a,l,c,d,p=t[0]||{},f=1,m=t.length,v=!1,g=/\d+/;for("boolean"==typeof p&&(v=p,p=t[1]||{},f=2),"object"==typeof p||s(p)||(p={}),m===f&&(p=this,--f);m>f;f++)if(null!=(r=t[f])){d=h(r);for(i in r)if(!(i in Object.prototype)){if(d&&!g.test(i))continue;if(u=p[i],a=r[i],p===a)continue;v&&a&&(o(a)||(l=h(a)))?(l?(l=!1,c=u&&h(u)?u:[]):c=u&&o(u)?u:{},e.push({args:[v,c,a],result:{container:p,key:i}})):void 0!==a&&(h(r)&&s(a)||(p[i]=a))}}n.container[n.key]=p}for(var a={},l=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],c=0;c<l.length;c++){var d=l[c];a["[object "+d+"]"]=d.toLowerCase()}var p=a.toString,f=a.hasOwnProperty,h=Array.isArray||function(e){return"array"===n(e)};t.exports=i},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/create-view.js":[function(e,t){"use strict";var n=e("./upsert"),r=e("./utils"),o=r.Promise;t.exports=function(e){var t=e.db,s=e.viewName,i=e.map,u=e.reduce,a=e.temporary,l=i.toString()+(u&&u.toString())+"undefined";if(!a&&t._cachedViews){var c=t._cachedViews[l];if(c)return o.resolve(c)}return t.info().then(function(e){function o(e){e.views=e.views||{};var t=s;-1===t.indexOf("/")&&(t=s+"/"+s);var n=e.views[t]=e.views[t]||{};if(!n[c])return n[c]=!0,e}var c=e.db_name+"-mrview-"+(a?"temp":r.MD5(l));return n(t,"_local/mrviews",o).then(function(){return t.registerDependentDatabase(c).then(function(e){var n=e.db;n.auto_compaction=!0;var r={name:c,db:n,sourceDB:t,adapter:t.adapter,mapFun:i,reduceFun:u};return r.db.get("_local/lastSeq")["catch"](function(e){if(404!==e.status)throw e}).then(function(e){return r.seq=e?e.seq:0,a||(t._cachedViews=t._cachedViews||{},t._cachedViews[l]=r,r.db.on("destroyed",function(){delete t._cachedViews[l]})),r})})})})}},{"./upsert":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/upsert.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/evalfunc.js":[function(require,module,exports){"use strict";module.exports=function(func,emit,sum,log,isArray,toJSON){return eval("'use strict'; ("+func.replace(/;\s*$/,"")+");")}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/index.js":[function(e,t,n){(function(t){"use strict";function r(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function o(e){return 1===e.length&&/^1-/.test(e[0].rev)}function s(e,t,n){try{return{output:t.apply(null,n)}}catch(r){return e.emit("error",r),{error:r}}}function i(e,t){var n=U(e.key,t.key);return 0!==n?n:U(e.value,t.value)}function u(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function a(e){var t=e.value,n=t&&"object"==typeof t&&t._id||e.id;return n}function l(e){var t=new Error("builtin "+e+" function requires map values to be numbers or number arrays");return t.name="invalid_value",t.status=500,t}function c(e){for(var t=0,n=0,r=e.length;r>n;n++){var o=e[n];if("number"!=typeof o){if(!Array.isArray(o))throw l("_sum");t="number"==typeof t?[t]:t;for(var s=0,i=o.length;i>s;s++){var u=o[s];if("number"!=typeof u)throw l("_sum");"undefined"==typeof t[s]?t.push(u):t[s]+=u}}else"number"==typeof t?t+=o:t[0]+=o}return t}function d(e,t,n,r){var o=t[e];"undefined"!=typeof o&&(r&&(o=encodeURIComponent(JSON.stringify(o))),n.push(e+"="+o))}function p(e,t){var n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if("undefined"!=typeof e[n]&&"undefined"!=typeof e[r]&&U(e[n],e[r])>0)throw new j("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&e.reduce!==!1){if(e.include_docs)throw new j("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new j("Multi-key fetches for reduce views must use {group: true}")}if(e.group_level){if("number"!=typeof e.group_level)throw new j('Invalid value for integer: "'+e.group_level+'"');if(e.group_level<0)throw new j('Invalid value for positive integer: "'+e.group_level+'"')}}function f(e,t,n){var o,s=[],i="GET";if(d("reduce",n,s),d("include_docs",n,s),d("attachments",n,s),d("limit",n,s),d("descending",n,s),d("group",n,s),d("group_level",n,s),d("skip",n,s),d("stale",n,s),d("conflicts",n,s),d("startkey",n,s,!0),d("endkey",n,s,!0),d("inclusive_end",n,s),d("key",n,s,!0),s=s.join("&"),s=""===s?"":"?"+s,"undefined"!=typeof n.keys){var u=2e3,a="keys="+encodeURIComponent(JSON.stringify(n.keys));a.length+s.length+1<=u?s+=("?"===s[0]?"&":"?")+a:(i="POST","string"==typeof t?o=JSON.stringify({keys:n.keys}):t.keys=n.keys)}if("string"==typeof t){var l=r(t);return e.request({method:i,url:"_design/"+l[0]+"/_view/"+l[1]+s,body:o})}return o=o||{},Object.keys(t).forEach(function(e){o[e]=Array.isArray(t[e])?t[e]:t[e].toString()}),e.request({method:"POST",url:"_temp_view"+s,body:o})}function h(e){return function(t){if(404===t.status)return e;throw t}}function m(e,t,n){function r(){return o(d)?M.resolve(a):t.db.get(u)["catch"](h(a))}function s(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):M.resolve({rows:[]})}function i(e,t){for(var n=[],r={},o=0,s=t.rows.length;s>o;o++){var i=t.rows[o],u=i.doc;if(u&&(n.push(u),r[u._id]=!0,u._deleted=!c[u._id],!u._deleted)){var a=c[u._id];"value"in a&&(u.value=a.value)}}var l=Object.keys(c);return l.forEach(function(e){if(!r[e]){var t={_id:e},o=c[e];"value"in o&&(t.value=o.value),n.push(t)}}),e.keys=N.uniq(l.concat(e.keys)),n.push(e),n}var u="_local/doc_"+e,a={_id:u,keys:[]},l=n[e],c=l.indexableKeysToKeyValues,d=l.changes;return r().then(function(e){return s(e).then(function(t){return i(e,t)})})}function v(e,t,n){var r="_local/lastSeq";return e.db.get(r)["catch"](h({_id:r,seq:0})).then(function(r){var o=Object.keys(t);return M.all(o.map(function(n){return m(n,e,t)})).then(function(t){var o=N.flatten(t);return r.seq=n,o.push(r),e.db.bulkDocs({docs:o})})})}function g(e){var t="string"==typeof e?e:e.name,n=P[t];return n||(n=P[t]=new C),n}function _(e){return N.sequentialize(g(e),function(){return b(e)})()}function b(e){function t(e,t){var n={id:o._id,key:D(e)};"undefined"!=typeof t&&null!==t&&(n.value=D(t)),r.push(n)}function n(t,n){return function(){return v(e,t,n)}}var r,o,u;if("function"==typeof e.mapFun&&2===e.mapFun.length){var a=e.mapFun;u=function(e){return a(e,t)}}else u=L(e.mapFun.toString(),t,c,O,Array.isArray,JSON.parse);var l=e.seq||0,d=new C;return new M(function(t,a){function c(){d.finish().then(function(){e.seq=l,t()})}function p(){function t(e){a(e)}e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:l,limit:B}).on("complete",function(t){var a=t.results;if(!a.length)return c();for(var f={},h=0,m=a.length;m>h;h++){var v=a[h];if("_"!==v.doc._id[0]){r=[],o=v.doc,o._deleted||s(e.sourceDB,u,[o]),r.sort(i);for(var g,_={},b=0,y=r.length;y>b;b++){var w=r[b],k=[w.key,w.id];w.key===g&&k.push(b);var S=I(k);_[S]=w,g=w.key}f[v.doc._id]={indexableKeysToKeyValues:_,changes:v.changes}}l=v.seq}return d.add(n(f,l)),a.length<B?c():p()}).on("error",t)}p()})}function y(e,t,n){0===n.group_level&&delete n.group_level;var r,o=n.group||n.group_level;r=F[e.reduceFun]?F[e.reduceFun]:L(e.reduceFun.toString(),null,c,O,Array.isArray,JSON.parse);var i=[],a=n.group_level;t.forEach(function(e){var t=i[i.length-1],n=o?e.key:null;return o&&Array.isArray(n)&&"number"==typeof a&&(n=n.length>a?n.slice(0,a):n),t&&0===U(t.key[0][0],n)?(t.key.push([n,e.id]),void t.value.push(e.value)):void i.push({key:[[n,e.id]],value:[e.value]})});for(var l=0,d=i.length;d>l;l++){var p=i[l],f=s(e.sourceDB,r,[p.key,p.value,!1]);p.value=f.error?null:f.output,p.key=p.key[0][0]}return{rows:u(i,n.limit,n.skip)}}function w(e,t){return N.sequentialize(g(e),function(){return k(e,t)})()}function k(e,t){function n(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return o=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(n>t||t>n))return e.doc.value}var r=T.parseIndexableString(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}})})}function r(n){var r;if(r=s?y(e,n,t):{total_rows:o,offset:i,rows:n},t.include_docs){var u=N.uniq(n.map(a));return e.sourceDB.allDocs({keys:u,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments}).then(function(e){var t={};return e.rows.forEach(function(e){e.doc&&(t["$"+e.id]=e.doc)}),n.forEach(function(e){var n=a(e),r=t["$"+n];r&&(e.doc=r)}),r})}return r}var o,s=e.reduceFun&&t.reduce!==!1,i=t.skip||0;"undefined"==typeof t.keys||t.keys.length||(t.limit=0,delete t.keys);var u=function(e){return e.reduce(function(e,t){return e.concat(t)})};if("undefined"!=typeof t.keys){var l=t.keys,c=l.map(function(e){var t={startkey:I([e]),endkey:I([e,{}])};return n(t)});return M.all(c).then(u).then(r)}var d={descending:t.descending};if("undefined"!=typeof t.startkey&&(d.startkey=I(t.descending?[t.startkey,{}]:[t.startkey])),"undefined"!=typeof t.endkey){var p=t.inclusive_end!==!1;t.descending&&(p=!p),d.endkey=I(p?[t.endkey,{}]:[t.endkey])}if("undefined"!=typeof t.key){var f=I([t.key]),h=I([t.key,{}]);d.descending?(d.endkey=f,d.startkey=h):(d.startkey=f,d.endkey=h)}return s||("number"==typeof t.limit&&(d.limit=t.limit),d.skip=i),n(d).then(r)}function S(e){return e.request({method:"POST",url:"_view_cleanup"})}function x(e){return e.get("_local/mrviews").then(function(t){var n={};Object.keys(t.views).forEach(function(e){var t=r(e),o="_design/"+t[0],s=t[1];n[o]=n[o]||{},n[o][s]=!0});var o={keys:Object.keys(n),include_docs:!0};return e.allDocs(o).then(function(r){var o={};r.rows.forEach(function(e){var r=e.key.substring(8);Object.keys(n[e.key]).forEach(function(n){var s=r+"/"+n;t.views[s]||(s=n);var i=Object.keys(t.views[s]),u=e.doc&&e.doc.views&&e.doc.views[n];i.forEach(function(e){o[e]=o[e]||u})})});var s=Object.keys(o).filter(function(e){return!o[e]}),i=s.map(function(t){return N.sequentialize(g(t),function(){return e.constructor.destroy(t,e.__opts)})()});return M.all(i).then(function(){return{ok:!0}})})},h({ok:!0}))}function E(e,n,o){if("http"===e.type())return f(e,n,o);if("string"!=typeof n){p(o,n);var s={db:e,viewName:"temp_view/temp_view",map:n.map,reduce:n.reduce,temporary:!0};return q.add(function(){return R(s).then(function(e){function t(){return e.db.destroy()}return N.fin(_(e).then(function(){return w(e,o)}),t)})}),q.finish()}var i=n,u=r(i),a=u[0],l=u[1];return e.get("_design/"+a).then(function(n){var r=n.views&&n.views[l];if(!r||"string"!=typeof r.map)throw new A("ddoc "+a+" has no view named "+l);p(o,r);var s={db:e,viewName:i,map:r.map,reduce:r.reduce};return R(s).then(function(e){return"ok"===o.stale||"update_after"===o.stale?("update_after"===o.stale&&t.nextTick(function(){_(e)}),w(e,o)):_(e).then(function(){return w(e,o)})})})}function j(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,j)}catch(t){}}function A(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,A)}catch(t){}}var O,T=e("pouchdb-collate"),C=e("./taskqueue"),U=T.collate,I=T.toIndexableString,D=T.normalizeKey,R=e("./create-view"),L=e("./evalfunc");O="undefined"!=typeof console&&"function"==typeof console.log?Function.prototype.bind.call(console.log,console):function(){};var N=e("./utils"),M=N.Promise,P={},q=new C,B=50,F={_sum:function(e,t){return c(t)},_count:function(e,t){return t.length},_stats:function(e,t){function n(e){for(var t=0,n=0,r=e.length;r>n;n++){var o=e[n];t+=o*o}return t}return{sum:c(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:n(t)}}};n.viewCleanup=N.callbackify(function(){var e=this;return"http"===e.type()?S(e):x(e)}),n.query=function(e,t,n){"function"==typeof t&&(n=t,t={}),t=N.extend(!0,{},t),"function"==typeof e&&(e={map:e});var r=this,o=M.resolve().then(function(){return E(r,e,t)});return N.promisedCallback(o,n),o},N.inherits(j,Error),N.inherits(A,Error)}).call(this,e("_process"))},{"./create-view":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/create-view.js","./evalfunc":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/evalfunc.js","./taskqueue":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/taskqueue.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/utils.js",_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js","pouchdb-collate":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-collate/lib/index.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/taskqueue.js":[function(e,t){"use strict";function n(){this.promise=new r(function(e){e()})}var r=e("./utils").Promise;n.prototype.add=function(e){return this.promise=this.promise["catch"](function(){}).then(function(){return e()}),this.promise},n.prototype.finish=function(){return this.promise},t.exports=n},{"./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/upsert.js":[function(e,t){"use strict";var n=e("pouchdb-upsert").upsert;t.exports=function(e,t,r){return n.apply(e,[t,r])}},{"pouchdb-upsert":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-upsert/index.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-mapreduce/utils.js":[function(e,t,n){(function(t,r){"use strict";n.Promise="function"==typeof r.Promise?r.Promise:e("lie"),n.inherits=e("inherits"),n.extend=e("pouchdb-extend");var o=e("argsarray");n.promisedCallback=function(e,n){return n&&e.then(function(e){t.nextTick(function(){n(null,e)})},function(e){t.nextTick(function(){n(e)})}),e},n.callbackify=function(e){return o(function(t){var r=t.pop(),o=e.apply(this,t);return"function"==typeof r&&n.promisedCallback(o,r),o})},n.fin=function(e,t){return e.then(function(e){var n=t();return"function"==typeof n.then?n.then(function(){return e}):e},function(e){var n=t();if("function"==typeof n.then)return n.then(function(){throw e});throw e})},n.sequentialize=function(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}},n.flatten=function(e){for(var t=[],n=0,r=e.length;r>n;n++)t=t.concat(e[n]);return t},n.uniq=function(e){for(var t={},n=0,r=e.length;r>n;n++)t["$"+e[n]]=!0;var o=Object.keys(t),s=new Array(o.length);for(n=0,r=o.length;r>n;n++)s[n]=o[n].substring(1);return s};var s=e("crypto"),i=e("spark-md5");n.MD5=function(e){return t.browser?i.hash(e):s.createHash("md5").update(e).digest("hex")}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js",argsarray:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/argsarray/index.js",crypto:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/browser-resolve/empty.js",inherits:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/inherits/inherits_browser.js",lie:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/index.js","pouchdb-extend":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-extend/index.js","spark-md5":"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/spark-md5/spark-md5.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/pouchdb-upsert/index.js":[function(e,t,n){(function(t){"use strict";function r(e,t,n){return new s(function(r,s){return"string"!=typeof t?s(new Error("doc id is required")):void e.get(t,function(i,u){if(i){if(404!==i.status)return s(i);u={}}var a=u._rev,l=n(u);return l?(l._id=t,l._rev=a,void r(o(e,l,n))):r({updated:!1,rev:a})})})}function o(e,t,n){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(o){if(409!==o.status)throw o;return r(e,t._id,n)})}var s;s="undefined"!=typeof window&&window.PouchDB?window.PouchDB.utils.Promise:"function"==typeof t.Promise?t.Promise:e("lie"),n.upsert=function(e,t,n){var o=this,s=r(o,e,t);return"function"!=typeof n?s:void s.then(function(e){n(null,e)},n)},n.putIfNotExists=function(e,t,n){var o=this;"string"!=typeof e&&(n=t,t=e,e=t._id);var s=function(e){return e._rev?!1:t},i=r(o,e,s);return"function"!=typeof n?i:void i.then(function(e){n(null,e)},n)},"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(n)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{lie:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/lie/lib/index.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/spark-md5/spark-md5.js":[function(e,t,n){!function(e){if("object"==typeof n)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var r;try{r=window}catch(o){r=self}r.SparkMD5=e()}}(function(){"use strict";var e=function(e,t){return e+t&4294967295},t=function(t,n,r,o,s,i){return n=e(e(n,t),e(o,i)),e(n<<s|n>>>32-s,r)},n=function(e,n,r,o,s,i,u){return t(n&r|~n&o,e,n,s,i,u)},r=function(e,n,r,o,s,i,u){return t(n&o|r&~o,e,n,s,i,u)},o=function(e,n,r,o,s,i,u){return t(n^r^o,e,n,s,i,u)},s=function(e,n,r,o,s,i,u){return t(r^(n|~o),e,n,s,i,u)},i=function(t,i){var u=t[0],a=t[1],l=t[2],c=t[3];u=n(u,a,l,c,i[0],7,-680876936),c=n(c,u,a,l,i[1],12,-389564586),l=n(l,c,u,a,i[2],17,606105819),a=n(a,l,c,u,i[3],22,-1044525330),u=n(u,a,l,c,i[4],7,-176418897),c=n(c,u,a,l,i[5],12,1200080426),l=n(l,c,u,a,i[6],17,-1473231341),a=n(a,l,c,u,i[7],22,-45705983),u=n(u,a,l,c,i[8],7,1770035416),c=n(c,u,a,l,i[9],12,-1958414417),l=n(l,c,u,a,i[10],17,-42063),a=n(a,l,c,u,i[11],22,-1990404162),u=n(u,a,l,c,i[12],7,1804603682),c=n(c,u,a,l,i[13],12,-40341101),l=n(l,c,u,a,i[14],17,-1502002290),a=n(a,l,c,u,i[15],22,1236535329),u=r(u,a,l,c,i[1],5,-165796510),c=r(c,u,a,l,i[6],9,-1069501632),l=r(l,c,u,a,i[11],14,643717713),a=r(a,l,c,u,i[0],20,-373897302),u=r(u,a,l,c,i[5],5,-701558691),c=r(c,u,a,l,i[10],9,38016083),l=r(l,c,u,a,i[15],14,-660478335),a=r(a,l,c,u,i[4],20,-405537848),u=r(u,a,l,c,i[9],5,568446438),c=r(c,u,a,l,i[14],9,-1019803690),l=r(l,c,u,a,i[3],14,-187363961),a=r(a,l,c,u,i[8],20,1163531501),u=r(u,a,l,c,i[13],5,-1444681467),c=r(c,u,a,l,i[2],9,-51403784),l=r(l,c,u,a,i[7],14,1735328473),a=r(a,l,c,u,i[12],20,-1926607734),u=o(u,a,l,c,i[5],4,-378558),c=o(c,u,a,l,i[8],11,-2022574463),l=o(l,c,u,a,i[11],16,1839030562),a=o(a,l,c,u,i[14],23,-35309556),u=o(u,a,l,c,i[1],4,-1530992060),c=o(c,u,a,l,i[4],11,1272893353),l=o(l,c,u,a,i[7],16,-155497632),a=o(a,l,c,u,i[10],23,-1094730640),u=o(u,a,l,c,i[13],4,681279174),c=o(c,u,a,l,i[0],11,-358537222),l=o(l,c,u,a,i[3],16,-722521979),a=o(a,l,c,u,i[6],23,76029189),u=o(u,a,l,c,i[9],4,-640364487),c=o(c,u,a,l,i[12],11,-421815835),l=o(l,c,u,a,i[15],16,530742520),a=o(a,l,c,u,i[2],23,-995338651),u=s(u,a,l,c,i[0],6,-198630844),c=s(c,u,a,l,i[7],10,1126891415),l=s(l,c,u,a,i[14],15,-1416354905),a=s(a,l,c,u,i[5],21,-57434055),u=s(u,a,l,c,i[12],6,1700485571),c=s(c,u,a,l,i[3],10,-1894986606),l=s(l,c,u,a,i[10],15,-1051523),a=s(a,l,c,u,i[1],21,-2054922799),u=s(u,a,l,c,i[8],6,1873313359),c=s(c,u,a,l,i[15],10,-30611744),l=s(l,c,u,a,i[6],15,-1560198380),a=s(a,l,c,u,i[13],21,1309151649),u=s(u,a,l,c,i[4],6,-145523070),c=s(c,u,a,l,i[11],10,-1120210379),l=s(l,c,u,a,i[2],15,718787259),a=s(a,l,c,u,i[9],21,-343485551),t[0]=e(u,t[0]),t[1]=e(a,t[1]),t[2]=e(l,t[2]),t[3]=e(c,t[3])
},u=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},a=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},l=function(e){var t,n,r,o,s,a,l=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;l>=t;t+=64)i(c,u(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(i(c,r),t=0;16>t;t+=1)r[t]=0;return o=8*l,o=o.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),a=parseInt(o[1],16)||0,r[14]=s,r[15]=a,i(c,r),c},c=function(e){var t,n,r,o,s,u,l=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;l>=t;t+=64)i(c,a(e.subarray(t-64,t)));for(e=l>t-64?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(i(c,r),t=0;16>t;t+=1)r[t]=0;return o=8*l,o=o.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),u=parseInt(o[1],16)||0,r[14]=s,r[15]=u,i(c,r),c},d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p=function(e){var t,n="";for(t=0;4>t;t+=1)n+=d[e>>8*t+4&15]+d[e>>8*t&15];return n},f=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=p(e[t]);return e.join("")},h=function(e){return f(l(e))},m=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==h("hello")&&(e=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),m.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;n>=t;t+=64)i(this._state,u(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},m.prototype.end=function(e){var t,n,r=this._buff,o=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)s[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(s,o),n=e?this._state:f(this._state),this.reset(),n},m.prototype._finish=function(e,t){var n,r,o,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(i(this._state,e),s=0;16>s;s+=1)e[s]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=r,e[15]=o,i(this._state,e)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=l(e);return t?n:f(n)},m.hashBinary=function(e,t){var n=l(e);return t?n:f(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),r=n.length;for(this._length+=e.byteLength,t=64;r>=t;t+=64)i(this._state,a(n.subarray(t-64,t)));return this._buff=r>t-64?n.subarray(t-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)s[t>>2]|=r[t]<<(t%4<<3);return this._finish(s,o),n=e?this._state:f(this._state),this.reset(),n},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},m.ArrayBuffer.hash=function(e,t){var n=c(new Uint8Array(e));return t?n:f(n)},m})},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/node_modules/vuvuzela/index.js":[function(e,t,n){"use strict";function r(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var o=r.element,s=r.index;if(Array.isArray(o))o.push(e);else if(s===t.length-2){var i=t.pop();o[i]=e}else t.push(e)}n.stringify=function(e){var t=[];t.push({obj:e});for(var n,r,o,s,i,u,a,l,c,d,p,f="";n=t.pop();)if(r=n.obj,o=n.prefix||"",s=n.val||"",f+=o,s)f+=s;else if("object"!=typeof r)f+="undefined"==typeof r?null:JSON.stringify(r);else if(null===r)f+="null";else if(Array.isArray(r)){for(t.push({val:"]"}),i=r.length-1;i>=0;i--)u=0===i?"":",",t.push({obj:r[i],prefix:u});t.push({val:"["})}else{a=[];for(l in r)r.hasOwnProperty(l)&&a.push(l);for(t.push({val:"}"}),i=a.length-1;i>=0;i--)c=a[i],d=r[c],p=i>0?",":"",p+=JSON.stringify(c)+":",t.push({obj:d,prefix:p});t.push({val:"{"})}return f},n.parse=function(e){for(var t,n,o,s,i,u,a,l,c,d=[],p=[],f=0;;)if(t=e[f++],"}"!==t&&"]"!==t&&"undefined"!=typeof t)switch(t){case" ":case"	":case"\n":case":":case",":break;case"n":f+=3,r(null,d,p);break;case"t":f+=3,r(!0,d,p);break;case"f":f+=4,r(!1,d,p);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",f--;;){if(o=e[f++],!/[\d\.\-e\+]/.test(o)){f--;break}n+=o}r(parseFloat(n),d,p);break;case'"':for(s="",i=void 0,u=0;;){if(a=e[f++],'"'===a&&("\\"!==i||u%2!==1))break;s+=a,i=a,"\\"===i?u++:u=0}r(JSON.parse('"'+s+'"'),d,p);break;case"[":l={element:[],index:d.length},d.push(l.element),p.push(l);break;case"{":c={element:{},index:d.length},d.push(c.element),p.push(c);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===d.length)return d.pop();r(d.pop(),d,p)}}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/index.js":[function(e,t){"use strict";t.exports=e("./lib/core.js"),e("./lib/done.js"),e("./lib/es6-extensions.js"),e("./lib/node-extensions.js")},{"./lib/core.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/core.js","./lib/done.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/done.js","./lib/es6-extensions.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/es6-extensions.js","./lib/node-extensions.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/node-extensions.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/core.js":[function(e,t){"use strict";function n(e){function t(e){return null===a?void c.push(e):void s(function(){var t=a?e.onFulfilled:e.onRejected;if(null===t)return void(a?e.resolve:e.reject)(l);var n;try{n=t(l)}catch(r){return void e.reject(r)}e.resolve(n)})}function n(e){try{if(e===d)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void o(t.bind(e),n,i)}a=!0,l=e,u()}catch(r){i(r)}}function i(e){a=!1,l=e,u()}function u(){for(var e=0,n=c.length;n>e;e++)t(c[e]);c=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var a=null,l=null,c=[],d=this;this.then=function(e,n){return new d.constructor(function(o,s){t(new r(e,n,o,s))})},o(e,n,i)}function r(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function o(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(o){if(r)return;r=!0,n(o)}}var s=e("asap");t.exports=n},{asap:"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/node_modules/asap/asap.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/done.js":[function(e,t){"use strict";var n=e("./core.js"),r=e("asap");t.exports=n,n.prototype.done=function(){var e=arguments.length?this.then.apply(this,arguments):this;e.then(null,function(e){r(function(){throw e})})}},{"./core.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/core.js",asap:"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/node_modules/asap/asap.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/es6-extensions.js":[function(e,t){"use strict";function n(e){this.then=function(t){return"function"!=typeof t?this:new r(function(n,r){o(function(){try{n(t(e))}catch(o){r(o)}})})}}var r=e("./core.js"),o=e("asap");t.exports=r,n.prototype=r.prototype;var s=new n(!0),i=new n(!1),u=new n(null),a=new n(void 0),l=new n(0),c=new n("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return u;if(void 0===e)return a;if(e===!0)return s;if(e===!1)return i;if(0===e)return l;if(""===e)return c;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new r(t.bind(e))}catch(o){return new r(function(e,t){t(o)})}return new n(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function r(s,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var u=i.then;if("function"==typeof u)return void u.call(i,function(e){r(s,e)},n)}t[s]=i,0===--o&&e(t)}catch(a){n(a)}}if(0===t.length)return e([]);for(var o=t.length,s=0;s<t.length;s++)r(s,t[s])})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})},r.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/core.js",asap:"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/node_modules/asap/asap.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/node-extensions.js":[function(e,t){"use strict";var n=e("./core.js"),r=e("asap");t.exports=n,n.denodeify=function(e,t){return t=t||1/0,function(){var r=this,o=Array.prototype.slice.call(arguments);return new n(function(n,s){for(;o.length&&o.length>t;)o.pop();o.push(function(e,t){e?s(e):n(t)});var i=e.apply(r,o);!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then||n(i)})}},n.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),o="function"==typeof t[t.length-1]?t.pop():null,s=this;try{return e.apply(this,arguments).nodeify(o,s)}catch(i){if(null===o||"undefined"==typeof o)return new n(function(e,t){t(i)});r(function(){o.call(s,i)})}}},n.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(n){r(function(){e.call(t,null,n)})},function(n){r(function(){e.call(t,n)})})}},{"./core.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/core.js",asap:"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/node_modules/asap/asap.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/node_modules/asap/asap.js":[function(e,t){(function(e){function n(){for(;o.next;){o=o.next;var e=o.task;o.task=void 0;var t=o.domain;t&&(o.domain=void 0,t.enter());try{e()}catch(r){if(a)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),r;setTimeout(function(){throw r},0)}t&&t.exit()}i=!1}function r(t){s=s.next={task:t,domain:a&&e.domain,next:null},i||(i=!0,u())}var o={task:void 0,next:null},s=o,i=!1,u=void 0,a=!1;if("undefined"!=typeof e&&e.nextTick)a=!0,u=function(){e.nextTick(n)};else if("function"==typeof setImmediate)u="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=n,u=function(){l.port2.postMessage(0)}}else u=function(){setTimeout(n,0)};t.exports=r}).call(this,e("_process"))},{_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js"}]},{},["./client/index.js"]);