!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({"./client/index.js":[function(e){var t=window.jQuery||window.$,n=e("lodash"),r=e("async"),o=e("backbone"),i=e("handlebars"),s=e("moment"),a=e("./app"),u=function(){};o.$=t;var c={remote:window.location.origin+"/_api",routePrefix:""},l=window.Bonnet=function(t){var o=n.extend({},c,t),i=window.bonnet=new a(o);return i.account=e("./account")(i,o),i.store=e("./store")(i,o),i.task=e("./task")(i,o),i.start=function(e){e=e||u,r.applyEachSeries([r.apply(i.account.init),r.apply(i.store.init)],function(t){return t?console.error(t):(a.prototype.start.call(i),void e())})},i};l.View=e("./view"),l.Model=e("./model"),l.Collection=e("./collection"),l.$=t,l._=window._=n,l.async=window.async=r,l.Backbone=window.Backbone=o,l.Handlebars=window.Handlebars=i,l.moment=window.moment=s},{"./account":"/Users/lupo/work/lupomontero/bonnet/client/account.js","./app":"/Users/lupo/work/lupomontero/bonnet/client/app.js","./collection":"/Users/lupo/work/lupomontero/bonnet/client/collection.js","./model":"/Users/lupo/work/lupomontero/bonnet/client/model.js","./store":"/Users/lupo/work/lupomontero/bonnet/client/store.js","./task":"/Users/lupo/work/lupomontero/bonnet/client/task.js","./view":"/Users/lupo/work/lupomontero/bonnet/client/view.js",async:"/Users/lupo/work/lupomontero/bonnet/node_modules/async/lib/async.js",backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js",handlebars:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/runtime.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js",moment:"/Users/lupo/work/lupomontero/bonnet/node_modules/moment/moment.js"}],"/Users/lupo/work/lupomontero/bonnet/client/account.js":[function(e,t){function n(e){return"/_users/"+encodeURIComponent("org.couchdb.user:"+e)}var r=e("events").EventEmitter,o=e("../lib/couch")("/_api"),i=e("../lib/uid"),s=function(){};t.exports=function(e){var t=new r,a=!1;return t.bonnetId=function(){return t.session.userCtx.roles.reduce(function(e,t){var n=/^bonnet:write:user\/([a-z0-9]+)$/.exec(t);return n&&n[1]?n[1]:e},null)},t.signUp=function(e,t){var r=i(),s={name:e,password:t,roles:[],type:"user",bonnetId:r,database:"user/"+r};return o.put(n(e),s)},t.signIn=function(e,n){return o.post("/_session",{name:e,password:n}).then(function(){return t.init()})},t.signOut=function(){return o.del("/_session")},t.changePassword=function(){},t.changeUsername=function(){},t.resetPassword=function(){},t.destroy=function(){var t=(e.account.session||{}).userCtx||{},r=n(t.name);console.log(r),o.get(r,function(e,t){console.log(e,t)})},t.isSignedIn=function(){var e=(t.session||{}).userCtx||{};return"string"==typeof e.name&&e.name.length>0},t.init=function(e){e=e||s;var n=t.isSignedIn();return o.get("/_session").then(function(r){t.session=r;var o=t.isSignedIn();a?!n&&o?t.emit("signin"):n&&!o&&t.emit("signout"):(a=!0,t.emit("init")),e()},function(t){console.error(t),e(t)})},t}},{"../lib/couch":"/Users/lupo/work/lupomontero/bonnet/lib/couch.js","../lib/uid":"/Users/lupo/work/lupomontero/bonnet/lib/uid.js",events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js"}],"/Users/lupo/work/lupomontero/bonnet/client/app-view.js":[function(e,t){var n=e("lodash"),r=e("backbone");t.exports=r.View.extend({el:"body",regions:{},events:{"click a":"overrideLink"},initialize:function(e){e=e||{},r.View.prototype.initialize.call(this,e),this.options=e,this.addRegion("main",{view:null,prepend:!0}),this.addRegion("notifications",{view:null}),$("html").removeClass("no-js")},addRegion:function(e,t){var r=n.extend({id:e},t||{});if(!r.$el){var o=t.tagName||"div";r.$el=$("<"+o+' id="'+r.id+'">'),t.className&&r.$el.addClass(t.className)}if(r.$el.attr("data-app-region",e),"main"===e)this.$el.prepend(r.$el);else{var i=r.prepend?"before":"after";this.regions.main.$el[i](r.$el)}this.regions[e]=r,r.view&&r.view.$el&&this.setRegionView(e,r.view)},setRegionView:function(e,t){var n=this,r=n.regions[e],o=r.$el[0];if(!r)throw new Error("Unknown region: "+e);if(!t)throw new Error("No view passed to AppView.setRegionView()");t.$el&&!$.contains(o,t.$el)&&r.$el.html(t.$el),r.view=t,n.trigger("region:view",r)},overrideLink:function(e){var t=this.model,r=$(e.currentTarget).attr("href"),o=r.substr(1);if("#"!==r.charAt(0)){var i=n.find(n.keys(t.routes),function(e){return t._routeToRegExp(e).test(o)});"string"==typeof i&&(e.preventDefault(),t.navigate(o,{trigger:!0}))}}})},{backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js"}],"/Users/lupo/work/lupomontero/bonnet/client/app.js":[function(e,t){var n=e("lodash"),r=e("backbone"),o=e("./app-view");t.exports=r.Router.extend({initialize:function(e){var t=this;this.options=e,r.Router.prototype.initialize.call(t,e),t.view=new o({model:t}),t.routes||(t.routes={})},route:function(e,t,n){var o=this.options.routePrefix||"";return 2===arguments.length&&(n=t,t=e),this.routes[e]=n,r.Router.prototype.route.call(this,o+e,t,n)},navigate:function(e,t){var n=this.options.routePrefix||"";return r.Router.prototype.navigate.call(this,n+e,t)},start:function(){r.history.start({pushState:!0})},addRegion:function(e,t){this.view.addRegion(e,t)},setMainView:function(e){var t=(this.view.regions.main||{}).view;t&&t.unsubscribeFromGlobalEvents&&t.unsubscribeFromGlobalEvents(),this.view.setRegionView("main",e),e.subscribeToGlobalEvents()},showView:function(e,t){var r=new e(n.extend({app:this},t));return this.setMainView(r),r},showTemplate:function(e){var t=this,n=tetrapod.View.extend({templateName:e}),r=new n({app:t});t.setMainView(r),r.render()},requireSignIn:function(e){var t=this;return function(){return t.account.isSignedIn()?void e.apply(this,Array.prototype.slice.call(arguments,0)):t.navigate("signin",{trigger:!0})}},requireSignOut:function(e){var t=this;return function(){return t.account.isSignedIn()?t.navigate("dashboard",{trigger:!0}):void e.apply(this,Array.prototype.slice.call(arguments,0))}}})},{"./app-view":"/Users/lupo/work/lupomontero/bonnet/client/app-view.js",backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js"}],"/Users/lupo/work/lupomontero/bonnet/client/collection.js":[function(e,t){var n=e("backbone"),r=e("./model"),o=function(){};t.exports=n.Collection.extend({model:r,comparator:function(e){return-1*e.get("createdAt")},toViewContext:function(){return{models:this.map(function(e){return e.toViewContext?e.toViewContext():e})}},sync:function(e,t,n){var r=n.success||o,i=n.error||o,s=(new t.model).get("type");"read"===e&&bonnet.store.findAll(s).then(function(e){r(e)},function(e){i(null,null,e)})}})},{"./model":"/Users/lupo/work/lupomontero/bonnet/client/model.js",backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js"}],"/Users/lupo/work/lupomontero/bonnet/client/model.js":[function(e,t){function n(e){var t=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/;return"string"==typeof e&&t.test(e)}var r=e("lodash"),o=e("backbone"),i=e("moment"),s=function(){};t.exports=o.Model.extend({toViewContext:function(){return r.extend({},this.attributes)},parse:function(e){return r.reduce(e,function(e,t,r){return e[r]=n(t)?i(t).toDate():t,e},{})},toJSON:function(){return this.attributes},sync:function(e,t,n){var r=n.success||s,o=n.error||s,i=t.get("type");switch(e){case"create":bonnet.store.add(i,t.toJSON()).then(function(e){r(e)},function(e){o(null,null,e)});break;case"read":break;case"update":break;case"delete":bonnet.store.remove(i,t.id).then(function(){r()},function(e){o(null,null,e)});break;default:throw new Error("Unsupported model sync method")}},fetchAttachments:function(){var e=this.get("_attachments")||{};console.log(e)}})},{backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js",moment:"/Users/lupo/work/lupomontero/bonnet/node_modules/moment/moment.js"}],"/Users/lupo/work/lupomontero/bonnet/client/store.js":[function(e,t){function n(e){if(!c.isString(e))throw new Error("Model type must be a string")}function r(e){var t=e._id.split("/");return c.extend({id:t[1],type:t[0]},c.omit(e,["_id"]))}function o(e){return c.extend({_id:e.type+"/"+e.id},c.omit(e,["id"]))}function i(e){return 0!==e._id.indexOf("_design")}var s=e("events").EventEmitter,a=e("promise"),u=e("pouchdb"),c=e("lodash"),l=e("async"),f=e("../lib/uid"),d=function(){};t.exports=function(e,t){function h(e,t){m.emit("sync",e,t),m.emit("sync:"+e,t)}function p(e){return e=e||d,m.remoteUrl?void m.remote.replicate.sync(m.local,{filter:i}).on("error",h.bind(null,"error")).on("denied",function(e){console.error("sync denied",e)}).on("paused",h.bind(null,"paused")).on("active",h.bind(null,"active")).on("change",h.bind(null,"change")).on("complete",function(t){m.lastSync=t.push.end_time,t.pull.end_time>m.lastSync&&(m.lastSync=t.pull.end_time),h("complete",t),e()}):e()}var v=e.account,m=new s;return m.find=function(e,t){return n(e),new a(function(n,o){m.local.get(e+"/"+t).then(function(e){n(r(e))},o)})},m.findAll=function(e){return n(e),new a(function(t,n){m.local.allDocs({include_docs:!0,startkey:e+"/",endkey:e+"0"}).then(function(e){t(e.rows.map(function(e){return r(e.doc)}))},n)})},m.add=function(e,t){n(e);var o={},i=c.reduce(t._attachments,function(e,t,n){return t instanceof File?o[n]=t:e[n]=t,e},{}),s=c.extend({},c.omit(t,["_attachments"]),{_id:e+"/"+f(),createdAt:new Date,type:e});return c.keys(i).length&&(s._attachments=i),new a(function(e,t){var n=m.local;n.put(s).then(function(i){s._rev=i.rev;var a=c.keys(o);return a.length?void l.eachSeries(a,function(e,t){var r=s._id,i=s._rev,a=o[e],u=a.type;n.putAttachment(r,e,i,a,u,function(e,n){return e?t(e):(s._rev=n.rev,void t())})},function(n){return n?t(n):void e(r(s))}):e(r(s))},t)})},m.update=function(e){n(e)},m.remove=function(e,t){return m.find(e,t).then(function(e){return m.local.put({_deleted:!0},o(e)._id,e._rev)})},m.removeAll=function(){},m.init=function(e){function n(){var t=m.local.changes({since:"now",live:!0,include_docs:!0});t.on("change",function(e){function t(e){m.emit(e,n,{local:!0}),m.emit(e+":"+o,n,{local:!0})}var n=r(e.doc),o=n.type;o&&(t(e.deleted||n._deleted?"remove":/^1-/.test(n._rev)?"add":"update"),t("change"),p())}),e()}e=e||d;var o=v.bonnetId()||"__bonnet_anon";m.local=new u(o,{auto_compaction:!0}),v.isSignedIn()?(m.remoteUrl=t.remote+"/"+encodeURIComponent("user/"+o),m.remote=new u(m.remoteUrl),p(n)):n()},["signin","signout"].forEach(function(e){v.on(e,m.init.bind(m))}),m}},{"../lib/uid":"/Users/lupo/work/lupomontero/bonnet/lib/uid.js",async:"/Users/lupo/work/lupomontero/bonnet/node_modules/async/lib/async.js",events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js",pouchdb:"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/dist/pouchdb.js",promise:"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/index.js"}],"/Users/lupo/work/lupomontero/bonnet/client/task.js":[function(e,t){var n=e("events").EventEmitter;t.exports=function(){var e=new n;return e.start=function(){},e.abort=function(){},e.restart=function(){},e.abortAll=function(){},e.restartAll=function(){},e}},{events:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js"}],"/Users/lupo/work/lupomontero/bonnet/client/view.js":[function(e,t){var n=e("lodash"),r=e("backbone"),o=e("handlebars"),i=e("moment");o.registerHelper("log",function(e){console.log(e)}),o.registerHelper("formatDate",function(e,t){return 2===arguments.length&&(t="lll"),new o.SafeString(i(e).format(t))}),o.registerHelper("fromNow",function(e){return new o.SafeString(i(e).fromNow())}),t.exports=r.View.extend({templatePath:"templates",templateName:null,template:null,locals:{},_isRendering:!1,_next:null,initialize:function(e){var t=this;e=e||{},r.View.prototype.initialize.call(t,e),t.options=e,t.render=n.debounce(t.render,100),t.locals=n.extend(t.locals,e.locals||{}),t.templateName&&setTimeout(function(){t.loadTemplate(t.templateName,function(e,n){t.template=n})},10)},render:function(e){var t=this;return t._next&&window.clearTimeout(t._next),!t.template||t._isRendering?(t._next=window.setTimeout(function(){t.render(e)},25),t):(e=e||t.model||{},n.isFunction(e.toViewContext)?e=e.toViewContext():e.attributes?e=e.attributes:n.isArray(e)&&(e={models:n.map(e,function(e){return e.toViewContext?e.toViewContext():e})}),t._isRendering=!0,t.$el.addClass("loading"),t._next=window.setTimeout(function(){t.$el.html($.trim(t.template(n.extend({},t.locals,e)))),t._isRendering=!1,t.$el.removeClass("loading"),t.trigger("render")},25),t)},partial:function(e,t,n){this.loadTemplate(e,function(e,r){return e?n(e):void n(null,r(t))})},loadTemplate:function(e,t){{var n=this,r=bonnet.templates||{};bonnet.options.routePrefix||""}return r.hasOwnProperty(e)?t(null,r[e]):void $.get(n.templatePath+"/"+e+".hbs").fail(function(){n.trigger("error",new Error("Error loading template ("+e+")"))}).done(function(n){r[e]=o.compile($.trim(n)),t(null,r[e])})},back:function(e){e.preventDefault(),e.stopPropagation(),window.history.back()},subscribeToGlobalEvents:function(){var e=this;n.each(e._getGlobalEventsHandlers(e.cid),function(e){e.src.on(e.name,e.fn),console.log("View subscribing to global event "+e.name)})},unsubscribeFromGlobalEvents:function(){n.each(this._getGlobalEventsHandlers(this.cid),function(e){e.src.removeListener(e.name,e.fn),console.log("View unsubscribing from global event "+e.name)})},_getGlobalEventsHandlers:n.memoize(function(){var e=this,t=bonnet.account,r=bonnet.store,o=bonnet.task;return n.reduce(e.globalEvents,function(i,s,a){var u=a.split(" "),c=u[0],l=e[s],f={name:u[1]};return n.isFunction(l)?(f.fn=l.bind(e),"account"===c?(f.src=t,i.push(f)):"store"===c?(f.src=r,i.push(f)):"task"===c&&(f.src=o,i.push(f)),i):void 0},[])})})},{backbone:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js",handlebars:"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/runtime.js",lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js",moment:"/Users/lupo/work/lupomontero/bonnet/node_modules/moment/moment.js"}],"/Users/lupo/work/lupomontero/bonnet/lib/couch.js":[function(e,t){function n(e){function t(){var t=r.toArray(arguments),n=t.shift(),i=t.shift(),s="function"==typeof t[t.length-1]?t.pop():o;"/"!==i.charAt(0)&&(i="/"+i);var a={type:n,url:e.url+i,dataType:"json",error:function(e){var t=new Error(e.responseJSON.error);t.statusCode=e.status,t.reason=e.responseJSON.reason,s(t)},success:function(e){s(null,e)}};if(e.user&&e.pass&&(a.username=e.user,a.password=e.pass),["PUT","POST"].indexOf(n)>=0){var u=t.pop();u&&(a.data=JSON.stringify(u),a.contentType="application/json")}return t.length&&(a.url+=r.reduce(t.shift(),function(e,t,n){return e+=encodeURIComponent(n)+"="+encodeURIComponent(JSON.stringify(t))},"?")),$.ajax(a,s)}e.url;return{get:t.bind(null,"GET"),post:t.bind(null,"POST"),put:t.bind(null,"PUT"),del:t.bind(null,"DELETE")}}var r=e("lodash"),o=function(){};t.exports=function(e){"string"==typeof e&&(e={url:e});var t=n(e);return t.db=function(t){var o=n(r.extend({},e,{url:e.url+"/"+encodeURIComponent(t)}));return o.view=function(){},o},t.isAdminParty=function(e){t.get("/_users/_all_docs",function(t){t&&401===t.statusCode?e(null,!1):t?e(t):e(null,!0)})},t}},{lodash:"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js"}],"/Users/lupo/work/lupomontero/bonnet/lib/uid.js":[function(e,t){var n="0123456789abcdefghijklmnopqrstuvwxyz".split("");t.exports=function(e){var t="",r=n.length;void 0===e&&(e=7);for(var o=0;e>o;o++){var i=Math.random()*r,s=n[Math.floor(i)];t+=String(s).charAt(0)}return t}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/async/lib/async.js":[function(e,t){(function(e){!function(){function n(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(r,arguments)}}var r,o,i={};r=this,null!=r&&(o=r.async),i.noConflict=function(){return r.async=o,i};var s=Object.prototype.toString,a=Array.isArray||function(e){return"[object Array]"===s.call(e)},u=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},c=function(e,t){if(e.map)return e.map(t);var n=[];return u(e,function(e,r,o){n.push(t(e,r,o))}),n},l=function(e,t,n){return e.reduce?e.reduce(t,n):(u(e,function(e,r,o){n=t(n,e,r,o)}),n)},f=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};"undefined"!=typeof e&&e.nextTick?(i.nextTick=e.nextTick,i.setImmediate="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:i.nextTick):"function"==typeof setImmediate?(i.nextTick=function(e){setImmediate(e)},i.setImmediate=i.nextTick):(i.nextTick=function(e){setTimeout(e,0)},i.setImmediate=i.nextTick),i.each=function(e,t,r){function o(t){t?(r(t),r=function(){}):(i+=1,i>=e.length&&r())}if(r=r||function(){},!e.length)return r();var i=0;u(e,function(e){t(e,n(o))})},i.forEach=i.each,i.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0,o=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1,r>=e.length?n():o())})};o()},i.forEachSeries=i.eachSeries,i.eachLimit=function(e,t,n,r){var o=d(t);o.apply(null,[e,n,r])},i.forEachLimit=i.eachLimit;var d=function(e){return function(t,n,r){if(r=r||function(){},!t.length||0>=e)return r();var o=0,i=0,s=0;!function a(){if(o>=t.length)return r();for(;e>s&&i<t.length;)i+=1,s+=1,n(t[i-1],function(e){e?(r(e),r=function(){}):(o+=1,s-=1,o>=t.length?r():a())})}()}},h=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[i.each].concat(t))}},p=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[d(e)].concat(n))}},v=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[i.eachSeries].concat(t))}},m=function(e,t,n,r){if(t=c(t,function(e,t){return{index:t,value:e}}),r){var o=[];e(t,function(e,t){n(e.value,function(n,r){o[e.index]=r,t(n)})},function(e){r(e,o)})}else e(t,function(e,t){n(e.value,function(e){t(e)})})};i.map=h(m),i.mapSeries=v(m),i.mapLimit=function(e,t,n,r){return g(t)(e,n,r)};var g=function(e){return p(e,m)};i.reduce=function(e,t,n,r){i.eachSeries(e,function(e,r){n(t,e,function(e,n){t=n,r(e)})},function(e){r(e,t)})},i.inject=i.reduce,i.foldl=i.reduce,i.reduceRight=function(e,t,n,r){var o=c(e,function(e){return e}).reverse();i.reduce(o,t,n,r)},i.foldr=i.reduceRight;var _=function(e,t,n,r){var o=[];t=c(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&o.push(e),t()})},function(){r(c(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};i.filter=h(_),i.filterSeries=v(_),i.select=i.filter,i.selectSeries=i.filterSeries;var y=function(e,t,n,r){var o=[];t=c(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||o.push(e),t()})},function(){r(c(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};i.reject=h(y),i.rejectSeries=v(y);var b=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(){r()})};i.detect=h(b),i.detectSeries=v(b),i.some=function(e,t,n){i.each(e,function(e,r){t(e,function(e){e&&(n(!0),n=function(){}),r()})},function(){n(!1)})},i.any=i.some,i.every=function(e,t,n){i.each(e,function(e,r){t(e,function(e){e||(n(!1),n=function(){}),r()})},function(){n(!0)})},i.all=i.every,i.sortBy=function(e,t,n){i.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);var r=function(e,t){var n=e.criteria,r=t.criteria;return r>n?-1:n>r?1:0};n(null,c(t.sort(r),function(e){return e.value}))})},i.auto=function(e,t){t=t||function(){};var n=f(e),r=n.length;if(!r)return t();var o={},s=[],c=function(e){s.unshift(e)},d=function(e){for(var t=0;t<s.length;t+=1)if(s[t]===e)return void s.splice(t,1)},h=function(){r--,u(s.slice(0),function(e){e()})};c(function(){if(!r){var e=t;t=function(){},e(null,o)}}),u(n,function(n){var r=a(e[n])?e[n]:[e[n]],s=function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),e){var s={};u(f(o),function(e){s[e]=o[e]}),s[n]=r,t(e,s),t=function(){}}else o[n]=r,i.setImmediate(h)},p=r.slice(0,Math.abs(r.length-1))||[],v=function(){return l(p,function(e,t){return e&&o.hasOwnProperty(t)},!0)&&!o.hasOwnProperty(n)};if(v())r[r.length-1](s,o);else{var m=function(){v()&&(d(m),r[r.length-1](s,o))};c(m)}})},i.retry=function(e,t,n){var r=5,o=[];"function"==typeof e&&(n=t,t=e,e=r),e=parseInt(e,10)||r;var s=function(r,s){for(var a=function(e,t){return function(n){e(function(e,r){n(!e||t,{err:e,result:r})},s)}};e;)o.push(a(t,!(e-=1)));i.series(o,function(e,t){t=t[t.length-1],(r||n)(t.err,t.result)})};return n?s():s},i.waterfall=function(e,t){if(t=t||function(){},!a(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();var r=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var o=Array.prototype.slice.call(arguments,1),s=e.next();o.push(s?r(s):t),i.setImmediate(function(){e.apply(null,o)})}}};r(i.iterator(e))()};var w=function(e,t,n){if(n=n||function(){},a(t))e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.each(f(t),function(e,n){t[e](function(t){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),r[e]=o,n(t)})},function(e){n(e,r)})}};i.parallel=function(e,t){w({map:i.map,each:i.each},e,t)},i.parallelLimit=function(e,t,n){w({map:g(t),each:d(t)},e,n)},i.series=function(e,t){if(t=t||function(){},a(e))i.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};i.eachSeries(f(e),function(t,r){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),n[t]=o,r(e)})},function(e){t(e,n)})}},i.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},i.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var E=function(e,t,n,r){var o=[];e(t,function(e,t){n(e,function(e,n){o=o.concat(n||[]),t(e)})},function(e){r(e,o)})};i.concat=h(E),i.concatSeries=v(E),i.whilst=function(e,t,n){e()?t(function(r){return r?n(r):void i.whilst(e,t,n)}):n()},i.doWhilst=function(e,t,n){e(function(r){if(r)return n(r);var o=Array.prototype.slice.call(arguments,1);t.apply(null,o)?i.doWhilst(e,t,n):n()})},i.until=function(e,t,n){e()?n():t(function(r){return r?n(r):void i.until(e,t,n)})},i.doUntil=function(e,t,n){e(function(r){if(r)return n(r);var o=Array.prototype.slice.call(arguments,1);t.apply(null,o)?n():i.doUntil(e,t,n)})},i.queue=function(e,t){function r(e,t,n,r){return e.started||(e.started=!0),a(t)||(t=[t]),0==t.length?i.setImmediate(function(){e.drain&&e.drain()}):void u(t,function(t){var o={data:t,callback:"function"==typeof r?r:null};n?e.tasks.unshift(o):e.tasks.push(o),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),i.setImmediate(e.process)})}void 0===t&&(t=1);var o=0,s={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){r(s,e,!1,t)},kill:function(){s.drain=null,s.tasks=[]},unshift:function(e,t){r(s,e,!0,t)},process:function(){if(!s.paused&&o<s.concurrency&&s.tasks.length){var t=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),o+=1;var r=function(){o-=1,t.callback&&t.callback.apply(t,arguments),s.drain&&s.tasks.length+o===0&&s.drain(),s.process()},i=n(r);e(t.data,i)}},length:function(){return s.tasks.length},running:function(){return o},idle:function(){return s.tasks.length+o===0},pause:function(){s.paused!==!0&&(s.paused=!0,s.process())},resume:function(){s.paused!==!1&&(s.paused=!1,s.process())}};return s},i.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}function r(e,t,n){for(var r=-1,o=e.length-1;o>r;){var i=r+(o-r+1>>>1);n(t,e[i])>=0?r=i:o=i-1}return r}function o(e,t,o,s){return e.started||(e.started=!0),a(t)||(t=[t]),0==t.length?i.setImmediate(function(){e.drain&&e.drain()}):void u(t,function(t){var a={data:t,priority:o,callback:"function"==typeof s?s:null};e.tasks.splice(r(e.tasks,a,n)+1,0,a),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),i.setImmediate(e.process)})}var s=i.queue(e,t);return s.push=function(e,t,n){o(s,e,t,n)},delete s.unshift,s},i.cargo=function(e,t){var n=!1,r=[],o={tasks:r,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,n){a(e)||(e=[e]),u(e,function(e){r.push({data:e,callback:"function"==typeof n?n:null}),o.drained=!1,o.saturated&&r.length===t&&o.saturated()}),i.setImmediate(o.process)},process:function s(){if(!n){if(0===r.length)return o.drain&&!o.drained&&o.drain(),void(o.drained=!0);var i="number"==typeof t?r.splice(0,t):r.splice(0,r.length),a=c(i,function(e){return e.data});o.empty&&o.empty(),n=!0,e(a,function(){n=!1;var e=arguments;u(i,function(t){t.callback&&t.callback.apply(null,e)}),s()})}},length:function(){return r.length},running:function(){return n}};return o};var k=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&u(n,function(t){console[e](t)}))}]))}};i.log=k("log"),i.dir=k("dir"),i.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var o=function(){var o=Array.prototype.slice.call(arguments),s=o.pop(),a=t.apply(null,o);a in n?i.nextTick(function(){s.apply(null,n[a])}):a in r?r[a].push(s):(r[a]=[s],e.apply(null,o.concat([function(){n[a]=arguments;var e=r[a];delete r[a];for(var t=0,o=e.length;o>t;t++)e[t].apply(null,arguments)}])))};return o.memo=n,o.unmemoized=e,o},i.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},i.times=function(e,t,n){for(var r=[],o=0;e>o;o++)r.push(o);return i.map(r,t,n)},i.timesSeries=function(e,t,n){for(var r=[],o=0;e>o;o++)r.push(o);return i.mapSeries(r,t,n)},i.seq=function(){var e=arguments;return function(){var t=this,n=Array.prototype.slice.call(arguments),r=n.pop();i.reduce(e,n,function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,n){r.apply(t,[e].concat(n))})}},i.compose=function(){return i.seq.apply(null,Array.prototype.reverse.call(arguments))};var S=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),o=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},o)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};i.applyEach=h(S),i.applyEachSeries=v(S),i.forever=function(e,t){function n(r){if(r){if(t)return t(r);throw r}e(n)}n()},"undefined"!=typeof t&&t.exports?t.exports=i:"undefined"!=typeof define&&define.amd?define([],function(){return i}):r.async=i}()}).call(this,e("_process"))},{_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/backbone.js":[function(e,t,n){!function(t,r){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(e,n,o){t.Backbone=r(t,o,e,n)});else if("undefined"!=typeof n){var o=e("underscore");r(t,n,o)}else t.Backbone=r(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(e,t,n,r){{var o=e.Backbone,i=[],s=(i.push,i.slice);i.splice}t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var o=this,i=n.once(function(){o.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,r)},off:function(e,t,r){var o,i,s,a,u,l,f,d;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(a=e?[e]:n.keys(this._events),u=0,l=a.length;l>u;u++)if(e=a[u],s=this._events[e]){if(this._events[e]=o=[],t||r)for(f=0,d=s.length;d>f;f++)i=s[f],(t&&t!==i.callback&&t!==i.callback._callback||r&&r!==i.context)&&o.push(i);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(n,t),r&&l(r,arguments),this},stopListening:function(e,t,r){var o=this._listeningTo;if(!o)return this;var i=!t&&!r;r||"object"!=typeof t||(r=this),e&&((o={})[e._listenId]=e);for(var s in o)e=o[s],e.off(t,r,this),(i||n.isEmpty(e._events))&&delete this._listeningTo[s];return this}},u=/\s+/,c=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(r));return!1}if(u.test(n)){for(var i=n.split(u),s=0,a=i.length;a>s;s++)e[t].apply(e,[i[s]].concat(r));return!1}return!0},l=function(e,t){var n,r=-1,o=e.length,i=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++r<o;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i);return;case 2:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i,s);return;case 3:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i,s,a);return;default:for(;++r<o;)(n=e[r]).callback.apply(n.ctx,t);return}},f={listenTo:"on",listenToOnce:"once"};n.each(f,function(e,t){a[t]=function(t,r,o){var i=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=n.uniqueId("l"));return i[s]=t,o||"object"!=typeof r||(o=this),t[e](r,o,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(t,a);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,r){var o,i,s,a,u,c,l,f;if(null==e)return this;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;s=r.unset,u=r.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),f=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(o in i)t=i[o],n.isEqual(f[o],t)||a.push(o),n.isEqual(l[o],t)?delete this.changed[o]:this.changed[o]=t,s?delete f[o]:f[o]=t;if(!u){a.length&&(this._pending=r);for(var d=0,h=a.length;h>d;d++)this.trigger("change:"+a[d],this,f[a[d]],r)}if(c)return this;if(!u)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))
},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,o=this._changing?this._previousAttributes:this.attributes;for(var i in e)n.isEqual(o[i],t=e[i])||((r||(r={}))[i]=t);return r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(r&&r(t,n,e),void t.trigger("sync",t,n,e)):!1},N(this,e),this.sync("read",this,e)},save:function(e,t,r){var o,i,s,a=this.attributes;if(null==e||"object"==typeof e?(o=e,r=t):(o={})[e]=t,r=n.extend({validate:!0},r),o&&!r.wait){if(!this.set(o,r))return!1}else if(!this._validate(o,r))return!1;o&&r.wait&&(this.attributes=n.extend({},a,o)),void 0===r.parse&&(r.parse=!0);var u=this,c=r.success;return r.success=function(e){u.attributes=a;var t=u.parse(e,r);return r.wait&&(t=n.extend(o||{},t)),n.isObject(t)&&!u.set(t,r)?!1:(c&&c(u,e,r),void u.trigger("sync",u,e,r))},N(this,r),i=this.isNew()?"create":r.patch?"patch":"update","patch"===i&&(r.attrs=o),s=this.sync(i,this,r),o&&r.wait&&(this.attributes=a),s},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,o=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&o(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;N(this,e);var i=this.sync("delete",this,e);return e.wait||o(),i},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||q();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var h=["keys","values","pairs","invert","pick","omit"];n.each(h,function(e){d.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var p=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};n.extend(p.prototype,a,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,m))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var o,i,s,a;for(o=0,i=e.length;i>o;o++)a=e[o]=this.get(e[o]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,t.silent||(t.index=s,a.trigger("remove",a,this,t)),this._removeReference(a,t));return r?e[0]:e},set:function(e,t){t=n.defaults({},t,v),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var o,i,s,a,u,c,l,f=t.at,h=this.model,p=this.comparator&&null==f&&t.sort!==!1,m=n.isString(this.comparator)?this.comparator:null,g=[],_=[],y={},b=t.add,w=t.merge,E=t.remove,k=!p&&b&&E?[]:!1;for(o=0,i=e.length;i>o;o++){if(u=e[o]||{},s=u instanceof d?a=u:u[h.prototype.idAttribute||"id"],c=this.get(s))E&&(y[c.cid]=!0),w&&(u=u===a?a.attributes:u,t.parse&&(u=c.parse(u,t)),c.set(u,t),p&&!l&&c.hasChanged(m)&&(l=!0)),e[o]=c;else if(b){if(a=e[o]=this._prepareModel(u,t),!a)continue;g.push(a),this._addReference(a,t)}a=c||a,!k||!a.isNew()&&y[a.id]||k.push(a),y[a.id]=!0}if(E){for(o=0,i=this.length;i>o;++o)y[(a=this.models[o]).cid]||_.push(a);_.length&&this.remove(_,t)}if(g.length||k&&k.length)if(p&&(l=!0),this.length+=g.length,null!=f)for(o=0,i=g.length;i>o;o++)this.models.splice(f+o,0,g[o]);else{k&&(this.models.length=0);var S=k||g;for(o=0,i=S.length;i>o;o++)this.models.push(S[o])}if(l&&this.sort({silent:!0}),!t.silent){for(o=0,i=g.length;i>o;o++)(a=g[o]).trigger("add",a,this,t);(l||k&&k.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,o=this.models.length;o>r;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return s.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var o=e.reset?"reset":"set";r[o](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},N(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,o=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),o&&o(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(g,function(e){p.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var _=["groupBy","countBy","sortBy","indexBy"];n.each(_,function(e){p.prototype[e]=function(t,r){var o=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,o,r)}});var y=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(y.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];if(n.isFunction(r)||(r=this[e[t]]),r){var o=t.match(b),i=o[1],s=o[2];r=n.bind(r,this),i+=".delegateEvents"+this.cid,""===s?this.$el.on(i,r):this.$el.on(i,s,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}}}),t.sync=function(e,r,o){var i=k[e];n.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:i,dataType:"json"};if(o.url||(s.url=n.result(r,"url")||q()),null!=o.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||r.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){s.type="POST",o.emulateJSON&&(s.data._method=i);var a=o.beforeSend;o.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",i),a?a.apply(this,arguments):void 0}}"GET"===s.type||o.emulateJSON||(s.processData=!1),"PATCH"===s.type&&E&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=o.xhr=t.ajax(n.extend(s,o));return r.trigger("request",r,u,o),u};var E=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var S=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},x=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,O=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(S.prototype,a,{initialize:function(){},route:function(e,r,o){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(o=r,r=""),o||(o=this[r]);var i=this;return t.history.route(e,function(n){var s=i._extractParameters(e,n);i.execute(o,s),i.trigger.apply(i,["route:"+r].concat(s)),i.trigger("route",r,s),t.history.trigger("route",i,r,s)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(x,"(?:$1)?").replace(T,function(e,t){return t?e:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var D=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,R=/msie [\w.]+/,C=/\/$/,L=/#.*$/;D.started=!1,n.extend(D.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(C,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(j,"")},start:function(e){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),o=document.documentMode,i=R.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(I,"/"),i&&this._wantsHashChange){var s=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(j,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!D.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(L,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new D;var M=function(e,t){var r,o=this;r=e&&n.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},n.extend(r,o,t);var i=function(){this.constructor=r};return i.prototype=o.prototype,r.prototype=new i,e&&n.extend(r.prototype,e),r.__super__=o.prototype,r};d.extend=p.extend=S.extend=y.extend=D.extend=M;var q=function(){throw new Error('A "url" property or function must be specified')},N=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t})},{underscore:"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/node_modules/underscore/underscore.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/backbone/node_modules/underscore/underscore.js":[function(e,t,n){(function(){function e(e){function t(t,n,r,o,i,s){for(;i>=0&&s>i;i+=e){var a=o?o[i]:i;r=n(r,t[a],a,t)}return r}return function(n,r,o,i){r=b(r,i,4);var s=!x(n)&&y.keys(n),a=(s||n).length,u=e>0?0:a-1;return arguments.length<3&&(o=n[s?s[u]:u],u+=e),t(n,r,o,s,u,a)}}function r(e){return function(t,n,r){n=w(n,r);for(var o=null!=t&&t.length,i=e>0?0:o-1;i>=0&&o>i;i+=e)if(n(t[i],i,t))return i;return-1}}function o(e,t){var n=j.length,r=e.constructor,o=y.isFunction(r)&&r.prototype||u,i="constructor";for(y.has(e,i)&&!y.contains(t,i)&&t.push(i);n--;)i=j[n],i in e&&e[i]!==o[i]&&!y.contains(t,i)&&t.push(i)}var i=this,s=i._,a=Array.prototype,u=Object.prototype,c=Function.prototype,l=a.push,f=a.slice,d=u.toString,h=u.hasOwnProperty,p=Array.isArray,v=Object.keys,m=c.bind,g=Object.create,_=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=y),n._=y):i._=y,y.VERSION="1.8.2";var b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?y.identity:y.isFunction(e)?b(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return w(e,t,1/0)};var E=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var o=1;r>o;o++)for(var i=arguments[o],s=e(i),a=s.length,u=0;a>u;u++){var c=s[u];t&&void 0!==n[c]||(n[c]=i[c])}return n}},k=function(e){if(!y.isObject(e))return{};if(g)return g(e);_.prototype=e;var t=new _;return _.prototype=null,t},S=Math.pow(2,53)-1,x=function(e){var t=e&&e.length;return"number"==typeof t&&t>=0&&S>=t};y.each=y.forEach=function(e,t,n){t=b(t,n);var r,o;if(x(e))for(r=0,o=e.length;o>r;r++)t(e[r],r,e);else{var i=y.keys(e);for(r=0,o=i.length;o>r;r++)t(e[i[r]],i[r],e)}return e},y.map=y.collect=function(e,t,n){t=w(t,n);for(var r=!x(e)&&y.keys(e),o=(r||e).length,i=Array(o),s=0;o>s;s++){var a=r?r[s]:s;i[s]=t(e[a],a,e)}return i},y.reduce=y.foldl=y.inject=e(1),y.reduceRight=y.foldr=e(-1),y.find=y.detect=function(e,t,n){var r;return r=x(e)?y.findIndex(e,t,n):y.findKey(e,t,n),void 0!==r&&-1!==r?e[r]:void 0},y.filter=y.select=function(e,t,n){var r=[];return t=w(t,n),y.each(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r},y.reject=function(e,t,n){return y.filter(e,y.negate(w(t)),n)},y.every=y.all=function(e,t,n){t=w(t,n);for(var r=!x(e)&&y.keys(e),o=(r||e).length,i=0;o>i;i++){var s=r?r[i]:i;if(!t(e[s],s,e))return!1}return!0},y.some=y.any=function(e,t,n){t=w(t,n);for(var r=!x(e)&&y.keys(e),o=(r||e).length,i=0;o>i;i++){var s=r?r[i]:i;if(t(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n){return x(e)||(e=y.values(e)),y.indexOf(e,t,"number"==typeof n&&n)>=0},y.invoke=function(e,t){var n=f.call(arguments,2),r=y.isFunction(t);return y.map(e,function(e){var o=r?t:e[t];return null==o?o:o.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,o,i=-1/0,s=-1/0;if(null==t&&null!=e){e=x(e)?e:y.values(e);for(var a=0,u=e.length;u>a;a++)r=e[a],r>i&&(i=r)}else t=w(t,n),y.each(e,function(e,n,r){o=t(e,n,r),(o>s||o===-1/0&&i===-1/0)&&(i=e,s=o)});return i},y.min=function(e,t,n){var r,o,i=1/0,s=1/0;if(null==t&&null!=e){e=x(e)?e:y.values(e);for(var a=0,u=e.length;u>a;a++)r=e[a],i>r&&(i=r)}else t=w(t,n),y.each(e,function(e,n,r){o=t(e,n,r),(s>o||1/0===o&&1/0===i)&&(i=e,s=o)});return i},y.shuffle=function(e){for(var t,n=x(e)?e:y.values(e),r=n.length,o=Array(r),i=0;r>i;i++)t=y.random(0,i),t!==i&&(o[i]=o[t]),o[t]=n[i];return o},y.sample=function(e,t,n){return null==t||n?(x(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=w(t,n),y.pluck(y.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,r){var o={};return n=w(n,r),y.each(t,function(r,i){var s=n(r,i,t);e(o,r,s)}),o}};y.groupBy=T(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=T(function(e,t,n){e[n]=t}),y.countBy=T(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?f.call(e):x(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:x(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=w(t,n);var r=[],o=[];return y.each(e,function(e,n,i){(t(e,n,i)?r:o).push(e)}),[r,o]},y.first=y.head=y.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return f.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return f.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var O=function(e,t,n,r){for(var o=[],i=0,s=r||0,a=e&&e.length;a>s;s++){var u=e[s];if(x(u)&&(y.isArray(u)||y.isArguments(u))){t||(u=O(u,t,n));var c=0,l=u.length;for(o.length+=l;l>c;)o[i++]=u[c++]}else n||(o[i++]=u)}return o};y.flatten=function(e,t){return O(e,t,!1)},y.without=function(e){return y.difference(e,f.call(arguments,1))},y.uniq=y.unique=function(e,t,n,r){if(null==e)return[];y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=w(n,r));for(var o=[],i=[],s=0,a=e.length;a>s;s++){var u=e[s],c=n?n(u,s,e):u;t?(s&&i===c||o.push(u),i=c):n?y.contains(i,c)||(i.push(c),o.push(u)):y.contains(o,u)||o.push(u)}return o},y.union=function(){return y.uniq(O(arguments,!0,!0))},y.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,o=e.length;o>r;r++){var i=e[r];if(!y.contains(t,i)){for(var s=1;n>s&&y.contains(arguments[s],i);s++);s===n&&t.push(i)}}return t},y.difference=function(e){var t=O(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,"length").length||0,n=Array(t),r=0;t>r;r++)n[r]=y.pluck(e,r);return n},y.object=function(e,t){for(var n={},r=0,o=e&&e.length;o>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},y.indexOf=function(e,t,n){var r=0,o=e&&e.length;if("number"==typeof n)r=0>n?Math.max(0,o+n):n;else if(n&&o)return r=y.sortedIndex(e,t),e[r]===t?r:-1;if(t!==t)return y.findIndex(f.call(e,r),y.isNaN);for(;o>r;r++)if(e[r]===t)return r;return-1},y.lastIndexOf=function(e,t,n){var r=e?e.length:0;if("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1)),t!==t)return y.findLastIndex(f.call(e,0,r),y.isNaN);for(;--r>=0;)if(e[r]===t)return r;return-1},y.findIndex=r(1),y.findLastIndex=r(-1),y.sortedIndex=function(e,t,n,r){n=w(n,r,1);for(var o=n(t),i=0,s=e.length;s>i;){var a=Math.floor((i+s)/2);n(e[a])<o?i=a+1:s=a}return i},y.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),i=0;r>i;i++,e+=n)o[i]=e;return o};var A=function(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var i=k(e.prototype),s=e.apply(i,o);return y.isObject(s)?s:i};y.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,f.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=f.call(arguments,2),r=function(){return A(e,r,t,this,n.concat(f.call(arguments)))};return r},y.partial=function(e){var t=f.call(arguments,1),n=function(){for(var r=0,o=t.length,i=Array(o),s=0;o>s;s++)i[s]=t[s]===y?arguments[r++]:t[s];for(;r<arguments.length;)i.push(arguments[r++]);return A(e,n,this,this,i)};return n},y.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(r){var o=n.cache,i=""+(t?t.apply(this,arguments):r);return y.has(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return n.cache={},n},y.delay=function(e,t){var n=f.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,o,i,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:y.now(),s=null,i=e.apply(r,o),s||(r=o=null)};return function(){var c=y.now();a||n.leading!==!1||(a=c);var l=t-(c-a);return r=this,o=arguments,0>=l||l>t?(s&&(clearTimeout(s),s=null),a=c,i=e.apply(r,o),s||(r=o=null)):s||n.trailing===!1||(s=setTimeout(u,l)),i}},y.debounce=function(e,t,n){var r,o,i,s,a,u=function(){var c=y.now()-s;t>c&&c>=0?r=setTimeout(u,t-c):(r=null,n||(a=e.apply(i,o),r||(i=o=null)))};return function(){i=this,o=arguments,s=y.now();var c=n&&!r;return r||(r=setTimeout(u,t)),c&&(a=e.apply(i,o),i=o=null),a}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},y.once=y.partial(y.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),j=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(v)return v(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return D&&o(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return D&&o(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),o=0;n>o;o++)r[o]=e[t[o]];return r},y.mapObject=function(e,t,n){t=w(t,n);for(var r,o=y.keys(e),i=o.length,s={},a=0;i>a;a++)r=o[a],s[r]=t(e[r],r,e);return s},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),o=0;n>o;o++)r[o]=[t[o],e[t[o]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,o=n.length;o>r;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=E(y.allKeys),y.extendOwn=y.assign=E(y.keys),y.findKey=function(e,t,n){t=w(t,n);for(var r,o=y.keys(e),i=0,s=o.length;s>i;i++)if(r=o[i],t(e[r],r,e))return r},y.pick=function(e,t,n){var r,o,i={},s=e;if(null==s)return i;y.isFunction(t)?(o=y.allKeys(s),r=b(t,n)):(o=O(arguments,!1,!1,1),r=function(e,t,n){return t in n},s=Object(s));for(var a=0,u=o.length;u>a;a++){var c=o[a],l=s[c];r(l,c,s)&&(i[c]=l)}return i},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var r=y.map(O(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(r,t)}}return y.pick(e,t,n)},y.defaults=E(y.allKeys,!0),y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var o=Object(e),i=0;r>i;i++){var s=n[i];if(t[s]!==o[s]||!(s in o))return!1}return!0};var I=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var o=d.call(e);if(o!==d.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var i="[object Array]"===o;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),i){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!I(e[u],t[u],n,r))return!1}else{var c,l=y.keys(e);if(u=l.length,y.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!y.has(t,c)||!I(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};y.isEqual=function(e,t){return I(e,t)},y.isEmpty=function(e){return null==e?!0:x(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=p||function(e){return"[object Array]"===d.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&h.call(e,t)},y.noConflict=function(){return i._=s,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=function(e){return function(t){return null==t?void 0:t[e]}},y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=b(t,n,1);for(var o=0;e>o;o++)r[o]=t(o);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},C=y.invert(R),L=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}};y.escape=L(R),y.unescape=L(C),y.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),y.isFunction(r)?r.call(e):r};var M=0;y.uniqueId=function(e){var t=++M+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,P=function(e){return"\\"+N[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r=RegExp([(t.escape||q).source,(t.interpolate||q).source,(t.evaluate||q).source].join("|")+"|$","g"),o=0,i="__p+='";e.replace(r,function(t,n,r,s,a){return i+=e.slice(o,a).replace(U,P),o=a+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(i+="';\n"+s+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var s=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var u=function(e){return s.call(this,e,y)},c=t.variable||"obj";return u.source="function("+c+"){\n"+i+"}",u},y.chain=function(e){var t=y(e);return t._chain=!0,t};var F=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),F(this,n.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],F(this,n)}}),y.each(["concat","join","slice"],function(e){var t=a[e];y.prototype[e]=function(){return F(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}).call(this)},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/events/events.js":[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e
}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),u=1;o>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(i(n)){for(o=arguments.length,a=new Array(o-1),u=1;o>u;u++)a[u-1]=arguments[u];for(c=n.slice(),o=c.length,u=0;o>u;u++)c[u].apply(this,a)}return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned){var o;o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js":[function(e,t){function n(){if(!s){s=!0;for(var e,t=i.length;t;){e=i,i=[];for(var n=-1;++n<t;)e[n]();t=i.length}s=!1}}function r(){}var o=t.exports={},i=[],s=!1;o.nextTick=function(e){i.push(e),s||setTimeout(n,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars.runtime.js":[function(e,t,n){(function(t){"use strict";var r=e("./handlebars/base"),o=e("./handlebars/safe-string")["default"],i=e("./handlebars/exception")["default"],s=e("./handlebars/utils"),a=e("./handlebars/runtime"),u=function(){var e=new r.HandlebarsEnvironment;return s.extend(e,r),e.SafeString=o,e.Exception=i,e.Utils=s,e.escapeExpression=s.escapeExpression,e.VM=a,e.template=function(t){return a.template(t,e)},e},c=u();c.create=u;var l="undefined"!=typeof t?t:window,f=l.Handlebars;c.noConflict=function(){l.Handlebars===c&&(l.Handlebars=f)},c["default"]=c,n["default"]=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./handlebars/base":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/base.js","./handlebars/exception":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js","./handlebars/runtime":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/runtime.js","./handlebars/safe-string":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/safe-string.js","./handlebars/utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/base.js":[function(e,t,n){"use strict";function r(e,t){this.helpers=e||{},this.partials=t||{},o(this)}function o(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new s("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,o=n.fn;if(t===!0)return o(this);if(t===!1||null==t)return r(this);if(l(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var s=m(n.data);s.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:s}}return o(t,n)}),e.registerHelper("each",function(e,t){function n(t,n,s){r&&(r.key=t,r.index=n,r.first=0===n,r.last=!!s,o&&(r.contextPath=o+t)),d+=a(e[t],{data:r,blockParams:i.blockParams([e[t],t],[o+t,null])})}if(!t)throw new s("Must pass iterator to #each");var r,o,a=t.fn,u=t.inverse,c=0,d="";if(t.data&&t.ids&&(o=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),f(e)&&(e=e.call(this)),t.data&&(r=m(t.data)),e&&"object"==typeof e)if(l(e))for(var h=e.length;h>c;c++)n(c,c,c===e.length-1);else{var p;for(var v in e)e.hasOwnProperty(v)&&(p&&n(p,c-1),p=v,c++);p&&n(p,c-1,!0)}return 0===c&&(d=u(this)),d}),e.registerHelper("if",function(e,t){return f(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){f(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var r=m(t.data);r.contextPath=i.appendContextPath(t.data.contextPath,t.ids[0]),t={data:r}}return n(e,t)}),e.registerHelper("log",function(t,n){var r=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(r,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var i=e("./utils"),s=e("./exception")["default"],a="3.0.0";n.VERSION=a;var u=6;n.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=c;var l=i.isArray,f=i.isFunction,d=i.toString,h="[object Object]";n.HandlebarsEnvironment=r,r.prototype={constructor:r,logger:p,log:v,registerHelper:function(e,t){if(d.call(e)===h){if(t)throw new s("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(d.call(e)===h)i.extend(this.partials,e);else{if("undefined"==typeof t)throw new s("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&p.level<=e){var n=p.methodMap[e];(console[n]||console.log).call(console,t)}}};n.logger=p;var v=p.log;n.log=v;var m=function(e){var t=i.extend({},e);return t._parent=e,t};n.createFrame=m},{"./exception":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js":[function(e,t,n){"use strict";function r(e,t){var n,r,i=t&&t.loc;i&&(n=i.start.line,r=i.start.column,e+=" - "+n+":"+r);for(var s=Error.prototype.constructor.call(this,e),a=0;a<o.length;a++)this[o[a]]=s[o[a]];i&&(this.lineNumber=n,this.column=r)}var o=["description","fileName","lineNumber","message","name","number","stack"];r.prototype=new Error,n["default"]=r},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/runtime.js":[function(e,t,n){"use strict";function r(e){var t=e&&e[0]||1,n=d;if(t!==n){if(n>t){var r=h[n],o=h[t];throw new f("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+o+").")}throw new f("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){if(!t)throw new f("No environment passed to template");if(!e||!e.main)throw new f("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,r,o){o.hash&&(r=l.extend({},r,o.hash)),n=t.VM.resolvePartial.call(this,n,r,o);var i=t.VM.invokePartial.call(this,n,r,o);if(null==i&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),i=o.partials[o.name](r,o)),null!=i){if(o.indent){for(var s=i.split("\n"),a=0,u=s.length;u>a&&(s[a]||a+1!==u);a++)s[a]=o.indent+s[a];i=s.join("\n")}return i}throw new f("The partial "+o.name+" could not be compiled when running in runtime-only mode")},r={strict:function(e,t){if(!(t in e))throw new f('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,r=0;n>r;r++)if(e[r]&&null!=e[r][t])return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:l.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n,r,o){var s=this.programs[e],a=this.fn(e);return t||o||r||n?s=i(this,e,a,t,n,r,o):s||(s=this.programs[e]=i(this,e,a)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=l.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},o=function(t,n){n=n||{};var i=n.data;o._setup(n),!n.partial&&e.useData&&(i=c(t,i));var s,a=e.useBlockParams?[]:void 0;return e.useDepths&&(s=n.depths?[t].concat(n.depths):[t]),e.main.call(r,t,r.helpers,r.partials,i,a,s)};return o.isTop=!0,o._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)))},o._child=function(t,n,o,s){if(e.useBlockParams&&!o)throw new f("must pass block params");if(e.useDepths&&!s)throw new f("must pass parent depths");return i(r,t,e[t],n,0,o,s)},o}function i(e,t,n,r,o,i,s){var a=function(t,o){return o=o||{},n.call(e,t,e.helpers,e.partials,o.data||r,i&&[o.blockParams].concat(i),s&&[t].concat(s))};return a.program=t,a.depth=s?s.length:0,a.blockParams=o||0,a}function s(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e=n.partials[n.name],e}function a(e,t,n){if(n.partial=!0,void 0===e)throw new f("The partial "+n.name+" could not be found");return e instanceof Function?e(t,n):void 0}function u(){return""}function c(e,t){return t&&"root"in t||(t=t?p(t):{},t.root=e),t}var l=e("./utils"),f=e("./exception")["default"],d=e("./base").COMPILER_REVISION,h=e("./base").REVISION_CHANGES,p=e("./base").createFrame;n.checkRevision=r,n.template=o,n.program=i,n.resolvePartial=s,n.invokePartial=a,n.noop=u},{"./base":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/base.js","./exception":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/exception.js","./utils":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/safe-string.js":[function(e,t,n){"use strict";function r(e){this.string=e}r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},n["default"]=r},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars/utils.js":[function(e,t,n){"use strict";function r(e){return l[e]}function o(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function i(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function s(e){return e&&e.toHTML?e.toHTML():null==e?"":e?(e=""+e,d.test(e)?e.replace(f,r):e):e+""}function a(e){return e||0===e?v(e)&&0===e.length?!0:!1:!0}function u(e,t){return e.path=t,e}function c(e,t){return(e?e+".":"")+t}var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},f=/[&<>"'`]/g,d=/[&<>"'`]/;n.extend=o;var h=Object.prototype.toString;n.toString=h;var p=function(e){return"function"==typeof e};p(/x/)&&(p=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)});var p;n.isFunction=p;var v=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===h.call(e):!1};n.isArray=v,n.indexOf=i,n.escapeExpression=s,n.isEmpty=a,n.blockParams=u,n.appendContextPath=c},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/runtime.js":[function(e,t){t.exports=e("./dist/cjs/handlebars.runtime")["default"]},{"./dist/cjs/handlebars.runtime":"/Users/lupo/work/lupomontero/bonnet/node_modules/handlebars/dist/cjs/handlebars.runtime.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/lodash/index.js":[function(e,t,n){(function(e){(function(){function r(e,t){if(e!==t){var n=e===e,r=t===t;if(e>t||!n||"undefined"==typeof e&&r)return 1;if(t>e||!r||"undefined"==typeof t&&n)return-1}return 0}function o(e,t,n){if(t!==t)return m(e,n);for(var r=(n||0)-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}function i(e){return"function"==typeof e||!1}function s(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function a(e){return"string"==typeof e?e:null==e?"":e+""}function u(e){return e.charCodeAt(0)}function c(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function l(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function f(e,t){return r(e.criteria,t.criteria)||e.index-t.index}function d(e,t){for(var n=-1,o=e.criteria,i=t.criteria,s=o.length;++n<s;){var a=r(o[n],i[n]);if(a)return a}return e.index-t.index}function h(e){return Yt[e]}function p(e){return Ht[e]}function v(e){return"\\"+Vt[e]}function m(e,t,n){for(var r=e.length,o=n?t||r:(t||0)-1;n?o--:++o<r;){var i=e[o];if(i!==i)return o}return-1}function g(e){return e&&"object"==typeof e||!1}function _(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function y(e,t){for(var n=-1,r=e.length,o=-1,i=[];++n<r;)e[n]===t&&(e[n]=W,i[++o]=n);return i}function b(e,t){for(var n,r=-1,o=e.length,i=-1,s=[];++r<o;){var a=e[r],u=t?t(a,r,e):a;r&&n===u||(n=u,s[++i]=a)}return s}function w(e){for(var t=-1,n=e.length;++t<n&&_(e.charCodeAt(t)););return t}function E(e){for(var t=e.length;t--&&_(e.charCodeAt(t)););return t}function k(e){return Wt[e]}function S(e){function t(e){if(g(e)&&!Xa(e)&&!(e instanceof Q)){if(e instanceof _)return e;if(na.call(e,"__chain__")&&na.call(e,"__wrapped__"))return Nr(e)}return new _(e)}function n(){}function _(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Q(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Ra,this.__views__=null}function tt(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,r=new Q(this.__wrapped__);return r.__actions__=e?Zt(e):null,r.__dir__=this.__dir__,r.__dropCount__=this.__dropCount__,r.__filtered__=this.__filtered__,r.__iteratees__=t?Zt(t):null,r.__takeCount__=this.__takeCount__,r.__views__=n?Zt(n):null,r}function rt(){if(this.__filtered__){var e=new Q(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Yt(){var e=this.__wrapped__.value();if(!Xa(e))return Qn(e,this.__actions__);var t=this.__dir__,n=0>t,r=br(0,e.length,this.__views__),o=r.start,i=r.end,s=i-o,a=this.__dropCount__,u=Ta(s,this.__takeCount__),c=n?i:o-1,l=this.__iteratees__,f=l?l.length:0,d=0,h=[];e:for(;s--&&u>d;){c+=t;for(var p=-1,v=e[c];++p<f;){var m=l[p],g=m.iteratee,_=g(v,c,e),y=m.type;if(y==B)v=_;else if(!_){if(y==F)continue e;break e}}a?a--:h[d++]=v}return h}function Ht(){this.__data__={}}function Wt(e){return this.has(e)&&delete this.__data__[e]}function Gt(e){return"__proto__"==e?x:this.__data__[e]}function Vt(e){return"__proto__"!=e&&na.call(this.__data__,e)}function Jt(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function zt(e){var t=e?e.length:0;for(this.data={hash:Ea(null),set:new va};t--;)this.push(e[t])}function Kt(e,t){var n=e.data,r="string"==typeof t||Di(t)?n.set.has(t):n.hash[t];return r?0:-1}function Qt(e){var t=this.data;"string"==typeof e||Di(e)?t.set.add(e):t.hash[e]=!0}function Zt(e,t){var n=-1,r=e.length;for(t||(t=Bs(r));++n<r;)t[n]=e[n];return t}function en(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function tn(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function nn(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function rn(e,t){for(var n=-1,r=e.length,o=-1,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[++o]=s)}return i}function on(e,t){for(var n=-1,r=e.length,o=Bs(r);++n<r;)o[n]=t(e[n],n,e);return o}function sn(e){for(var t=-1,n=e.length,r=Ia;++t<n;){var o=e[t];o>r&&(r=o)}return r}function an(e){for(var t=-1,n=e.length,r=Ra;++t<n;){var o=e[t];r>o&&(r=o)}return r}function un(e,t,n,r){var o=-1,i=e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function cn(e,t,n,r){var o=e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function ln(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function fn(e,t){return"undefined"==typeof e?t:e}function dn(e,t,n,r){return"undefined"!=typeof e&&na.call(r,n)?e:t}function hn(e,t,n){var r=ru(t);if(!n)return vn(t,e,r);for(var o=-1,i=r.length;++o<i;){var s=r[o],a=e[s],u=n(a,t[s],s,e,t);(u===u?u===a:a!==a)&&("undefined"!=typeof a||s in e)||(e[s]=u)}return e}function pn(e,t){for(var n=-1,r=e.length,o=Or(r),i=t.length,s=Bs(i);++n<i;){var a=t[n];o?(a=parseFloat(a),s[n]=xr(a,r)?e[a]:x):s[n]=e[a]}return s}function vn(e,t,n){n||(n=t,t={});for(var r=-1,o=n.length;++r<o;){var i=n[r];t[i]=e[i]}return t}function mn(e,t){for(var n=-1,r=t.length;++n<r;){var o=t[n];e[o]=hr(e[o],O,e)}return e}function gn(e,t,n){var r=typeof e;return"function"==r?"undefined"!=typeof t&&Sr(e)?er(e,t,n):e:null==e?js:"object"==r?Pn(e):"undefined"==typeof t?Hn(e+""):Fn(e+"",t)}function _n(e,t,n,r,o,i,s){var a;if(n&&(a=o?n(e,r,o):n(e)),"undefined"!=typeof a)return a;if(!Di(e))return e;var u=Xa(e);if(u){if(a=wr(e),!t)return Zt(e,a)}else{var c=oa.call(e),l=c==K;if(c!=Z&&c!=G&&(!l||o))return Ft[c]?kr(e,c,t):o?e:{};if(a=Er(l?{}:e),!t)return vn(e,a,ru(e))}i||(i=[]),s||(s=[]);for(var f=i.length;f--;)if(i[f]==e)return s[f];return i.push(e),s.push(a),(u?en:In)(e,function(r,o){a[o]=_n(r,t,n,o,e,i,s)}),a}function yn(e,t,n,r){if("function"!=typeof e)throw new Ks(H);return ma(function(){e.apply(x,$n(n,r))},t)}function bn(e,t){var n=e?e.length:0,r=[];if(!n)return r;var i=-1,s=yr(),a=s==o,u=a&&t.length>=200?Ya(t):null,c=t.length;u&&(s=Kt,a=!1,t=u);e:for(;++i<n;){var l=e[i];if(a&&l===l){for(var f=c;f--;)if(t[f]===l)continue e;r.push(l)}else s(t,l)<0&&r.push(l)}return r}function wn(e,t){var n=e?e.length:0;if(!Or(n))return In(e,t);for(var r=-1,o=qr(e);++r<n&&t(o[r],r,o)!==!1;);return e}function En(e,t){var n=e?e.length:0;if(!Or(n))return Rn(e,t);for(var r=qr(e);n--&&t(r[n],n,r)!==!1;);return e}function kn(e,t){var n=!0;return wn(e,function(e,r,o){return n=!!t(e,r,o)}),n}function Sn(e,t,n,r){var o=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>o?0:o+n),r="undefined"==typeof r||r>o?o:+r||0,0>r&&(r+=o),o=n>r?0:r>>>0,n>>>=0;o>n;)e[n++]=t;return e}function xn(e,t){var n=[];return wn(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}function Tn(e,t,n,r){var o;return n(e,function(e,n,i){return t(e,n,i)?(o=r?n:e,!1):void 0}),o}function On(e,t,n,r){for(var o=(r||0)-1,i=e.length,s=-1,a=[];++o<i;){var u=e[o];if(g(u)&&Or(u.length)&&(Xa(u)||Ei(u))){t&&(u=On(u,t,n));var c=-1,l=u.length;for(a.length+=l;++c<l;)a[++s]=u[c]}else n||(a[++s]=u)}return a}function An(e,t,n){for(var r=-1,o=qr(e),i=n(e),s=i.length;++r<s;){var a=i[r];if(t(o[a],a,o)===!1)break}return e}function Dn(e,t,n){for(var r=qr(e),o=n(e),i=o.length;i--;){var s=o[i];if(t(r[s],s,r)===!1)break}return e}function jn(e,t){return An(e,t,Xi)}function In(e,t){return An(e,t,ru)}function Rn(e,t){return Dn(e,t,ru)}function Cn(e,t){for(var n=-1,r=t.length,o=-1,i=[];++n<r;){var s=t[n];eu(e[s])&&(i[++o]=s)}return i}function Ln(e,t,n){var r=-1,o="function"==typeof t,i=e?e.length:0,s=Or(i)?Bs(i):[];return wn(e,function(e){var i=o?t:null!=e&&e[t];s[++r]=i?i.apply(e,n):x}),s}function Mn(e,t,n,r,o,i){if(e===t)return 0!==e||1/e==1/t;var s=typeof e,a=typeof t;return"function"!=s&&"object"!=s&&"function"!=a&&"object"!=a||null==e||null==t?e!==e&&t!==t:qn(e,t,Mn,n,r,o,i)}function qn(e,t,n,r,o,i,s){var a=Xa(e),u=Xa(t),c=V,l=V;a||(c=oa.call(e),c==G?c=Z:c!=Z&&(a=Ni(e))),u||(l=oa.call(t),l==G?l=Z:l!=Z&&(u=Ni(t)));var f=c==Z,d=l==Z,h=c==l;if(h&&!a&&!f)return vr(e,t,c);var p=f&&na.call(e,"__wrapped__"),v=d&&na.call(t,"__wrapped__");if(p||v)return n(p?e.value():e,v?t.value():t,r,o,i,s);if(!h)return!1;i||(i=[]),s||(s=[]);for(var m=i.length;m--;)if(i[m]==e)return s[m]==t;i.push(e),s.push(t);var g=(a?pr:mr)(e,t,n,r,o,i,s);return i.pop(),s.pop(),g}function Nn(e,t,n,r,o){var i=t.length;if(null==e)return!i;for(var s=-1,a=!o;++s<i;)if(a&&r[s]?n[s]!==e[t[s]]:!na.call(e,t[s]))return!1;for(s=-1;++s<i;){var u=t[s];if(a&&r[s])var c=na.call(e,u);else{var l=e[u],f=n[s];c=o?o(l,f,u):x,"undefined"==typeof c&&(c=Mn(f,l,o,!0))}if(!c)return!1}return!0}function Un(e,t){var n=[];return wn(e,function(e,r,o){n.push(t(e,r,o))}),n}function Pn(e){var t=ru(e),n=t.length;if(1==n){var r=t[0],o=e[r];if(Ar(o))return function(e){return null!=e&&e[r]===o&&na.call(e,r)}}for(var i=Bs(n),s=Bs(n);n--;)o=e[t[n]],i[n]=o,s[n]=Ar(o);return function(e){return Nn(e,t,i,s)}}function Fn(e,t){return Ar(t)?function(n){return null!=n&&n[e]===t}:function(n){return null!=n&&Mn(t,n[e],null,!0)}}function Bn(e,t,n,r,o){if(!Di(e))return e;var i=Or(t.length)&&(Xa(t)||Ni(t));return(i?en:In)(t,function(t,s,a){if(g(t))return r||(r=[]),o||(o=[]),Yn(e,a,s,Bn,n,r,o);var u=e[s],c=n?n(u,t,s,e,a):x,l="undefined"==typeof c;l&&(c=t),!i&&"undefined"==typeof c||!l&&(c===c?c===u:u!==u)||(e[s]=c)}),e}function Yn(e,t,n,r,o,i,s){for(var a=i.length,u=t[n];a--;)if(i[a]==u)return void(e[n]=s[a]);var c=e[n],l=o?o(c,u,n,e,t):x,f="undefined"==typeof l;f&&(l=u,Or(u.length)&&(Xa(u)||Ni(u))?l=Xa(c)?c:c?Zt(c):[]:tu(u)||Ei(u)?l=Ei(c)?Fi(c):tu(c)?c:{}:f=!1),i.push(u),s.push(l),f?e[n]=r(l,u,o,i,s):(l===l?l!==c:c===c)&&(e[n]=l)}function Hn(e){return function(t){return null==t?x:t[e]}}function Wn(e,t){var n=t.length,o=pn(e,t);for(t.sort(r);n--;){var i=parseFloat(t[n]);if(i!=s&&xr(i)){var s=i;ga.call(e,i,1)}}return o}function Gn(e,t){return e+fa(ja()*(t-e+1))}function Vn(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}function $n(e,t,n){var r=-1,o=e.length;t=null==t?0:+t||0,0>t&&(t=-t>o?0:o+t),n="undefined"==typeof n||n>o?o:+n||0,0>n&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Bs(o);++r<o;)i[r]=e[r+t];return i}function Jn(e,t){var n;return wn(e,function(e,r,o){return n=t(e,r,o),!n}),!!n}function zn(e,t){var n=-1,r=yr(),i=e.length,s=r==o,a=s&&i>=200,u=a?Ya():null,c=[];u?(r=Kt,s=!1):(a=!1,u=t?[]:c);e:for(;++n<i;){var l=e[n],f=t?t(l,n,e):l;if(s&&l===l){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),c.push(l)}else r(u,f)<0&&((t||a)&&u.push(f),c.push(l))}return c}function Kn(e,t){for(var n=-1,r=t.length,o=Bs(r);++n<r;)o[n]=e[t[n]];return o}function Qn(e,t){var n=e;n instanceof Q&&(n=n.value());for(var r=-1,o=t.length;++r<o;){var i=[n],s=t[r];ha.apply(i,s.args),n=s.func.apply(s.thisArg,i)}return n}function Xn(e,t,n){var r=0,o=e?e.length:r;if("number"==typeof t&&t===t&&Ma>=o){for(;o>r;){var i=r+o>>>1,s=e[i];(n?t>=s:t>s)?r=i+1:o=i}return o}return Zn(e,t,js,n)}function Zn(e,t,n,r){t=n(t);for(var o=0,i=e?e.length:0,s=t!==t,a="undefined"==typeof t;i>o;){var u=fa((o+i)/2),c=n(e[u]),l=c===c;if(s)var f=l||r;else f=a?l&&(r||"undefined"!=typeof c):r?t>=c:t>c;f?o=u+1:i=u}return Ta(i,La)}function er(e,t,n){if("function"!=typeof e)return js;if("undefined"==typeof t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)};case 5:return function(n,r,o,i,s){return e.call(t,n,r,o,i,s)}}return function(){return e.apply(t,arguments)}}function tr(e){return ua.call(e,0)}function nr(e,t,n){for(var r=n.length,o=-1,i=xa(e.length-r,0),s=-1,a=t.length,u=Bs(i+a);++s<a;)u[s]=t[s];for(;++o<r;)u[n[o]]=e[o];for(;i--;)u[s++]=e[o++];return u}function rr(e,t,n){for(var r=-1,o=n.length,i=-1,s=xa(e.length-o,0),a=-1,u=t.length,c=Bs(s+u);++i<s;)c[i]=e[i];for(var l=i;++a<u;)c[l+a]=t[a];for(;++r<o;)c[l+n[r]]=e[i++];return c}function or(e,t){return function(n,r,o){var i=t?t():{};if(r=_r(r,o,3),Xa(n))for(var s=-1,a=n.length;++s<a;){var u=n[s];e(i,u,r(u,s,n),n)}else wn(n,function(t,n,o){e(i,t,r(t,n,o),o)});return i}}function ir(e){return function(){var t=arguments.length,n=arguments[0];if(2>t||null==n)return n;if(t>3&&Tr(arguments[1],arguments[2],arguments[3])&&(t=2),t>3&&"function"==typeof arguments[t-2])var r=er(arguments[--t-1],arguments[t--],5);else t>2&&"function"==typeof arguments[t-1]&&(r=arguments[--t]);for(var o=0;++o<t;){var i=arguments[o];i&&e(n,i,r)}return n}}function sr(e,t){function n(){return(this instanceof n?r:e).apply(t,arguments)}var r=ur(e);return n}function ar(e){return function(t){for(var n=-1,r=Ts(ls(t)),o=r.length,i="";++n<o;)i=e(i,r[n],n);return i}}function ur(e){return function(){var t=Fa(e.prototype),n=e.apply(t,arguments);return Di(n)?n:t}}function cr(e,t){return function(n,r,o){o&&Tr(n,r,o)&&(r=null);var i=_r(),s=null==r;if(i===gn&&s||(s=!1,r=i(r,o,3)),s){var a=Xa(n);if(a||!qi(n))return e(a?n:Mr(n));r=u}return gr(n,r,t)}}function lr(e,t,n,r,o,i,s,a,u,c){function l(){for(var b=arguments.length,w=b,E=Bs(b);w--;)E[w]=arguments[w];if(r&&(E=nr(E,r,o)),i&&(E=rr(E,i,s)),p||m){var k=l.placeholder,S=y(E,k);if(b-=S.length,c>b){var x=a?Zt(a):null,T=xa(c-b,0),D=p?S:null,j=p?null:S,I=p?E:null,L=p?null:E;t|=p?R:C,t&=~(p?C:R),v||(t&=~(O|A));var M=lr(e,t,n,I,D,L,j,x,u,T);return M.placeholder=k,M}}var q=d?n:this;return h&&(e=q[_]),a&&(E=Rr(E,a)),f&&u<E.length&&(E.length=u),(this instanceof l?g||ur(e):e).apply(q,E)}var f=t&M,d=t&O,h=t&A,p=t&j,v=t&D,m=t&I,g=!h&&ur(e),_=e;return l}function fr(e,t,n){var r=e.length;if(t=+t,r>=t||!ka(t))return"";var o=t-r;return n=null==n?" ":n+"",_s(n,ca(o/n.length)).slice(0,o)}function dr(e,t,n,r){function o(){for(var t=-1,a=arguments.length,u=-1,c=r.length,l=Bs(a+c);++u<c;)l[u]=r[u];for(;a--;)l[u++]=arguments[++t];return(this instanceof o?s:e).apply(i?n:this,l)}var i=t&O,s=ur(e);return o}function hr(e,t,n,r,o,i,s,a){var u=t&A;if(!u&&"function"!=typeof e)throw new Ks(H);var c=r?r.length:0;if(c||(t&=~(R|C),r=o=null),c-=o?o.length:0,t&C){var l=r,f=o;r=o=null}var d=!u&&Ha(e),h=[e,t,n,r,o,l,f,i,s,a];if(d&&d!==!0&&(Dr(h,d),t=h[1],a=h[9]),h[9]=null==a?u?0:e.length:xa(a-c,0)||0,t==O)var p=sr(h[0],h[2]);else p=t!=R&&t!=(O|R)||h[4].length?lr.apply(x,h):dr.apply(x,h);var v=d?Ba:Wa;return v(p,h)}function pr(e,t,n,r,o,i,s){var a=-1,u=e.length,c=t.length,l=!0;if(u!=c&&!(o&&c>u))return!1;for(;l&&++a<u;){var f=e[a],d=t[a];if(l=x,r&&(l=o?r(d,f,a):r(f,d,a)),"undefined"==typeof l)if(o)for(var h=c;h--&&(d=t[h],!(l=f&&f===d||n(f,d,r,o,i,s))););else l=f&&f===d||n(f,d,r,o,i,s)}return!!l}function vr(e,t,n){switch(n){case $:case J:return+e==+t;case z:return e.name==t.name&&e.message==t.message;case X:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case et:case nt:return e==t+""}return!1}function mr(e,t,n,r,o,i,s){var a=ru(e),u=a.length,c=ru(t),l=c.length;if(u!=l&&!o)return!1;for(var f,d=-1;++d<u;){var h=a[d],p=na.call(t,h);if(p){var v=e[h],m=t[h];p=x,r&&(p=o?r(m,v,h):r(v,m,h)),"undefined"==typeof p&&(p=v&&v===m||n(v,m,r,o,i,s))}if(!p)return!1;f||(f="constructor"==h)}if(!f){var g=e.constructor,_=t.constructor;if(g!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _))return!1}return!0}function gr(e,t,n){var r=n?Ra:Ia,o=r,i=o;return wn(e,function(e,s,a){var u=t(e,s,a);((n?o>u:u>o)||u===r&&u===i)&&(o=u,i=e)}),i}function _r(e,n,r){var o=t.callback||As;return o=o===As?gn:o,r?o(e,n,r):o}function yr(e,n,r){var i=t.indexOf||Qr;return i=i===Qr?o:i,e?i(e,n,r):i}function br(e,t,n){for(var r=-1,o=n?n.length:0;++r<o;){var i=n[r],s=i.size;switch(i.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Ta(t,e+s);break;case"takeRight":e=xa(e,t-s)}}return{start:e,end:t}}function wr(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&na.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Er(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=$s),new t}function kr(e,t,n){var r=e.constructor;switch(t){case ot:return tr(e);case $:case J:return new r(+e);case it:case st:case at:case ut:case ct:case lt:case ft:case dt:case ht:var o=e.buffer;return new r(n?tr(o):o,e.byteOffset,e.length);case X:case nt:return new r(e);case et:var i=new r(e.source,xt.exec(e));i.lastIndex=e.lastIndex}return i}function Sr(e){var n=t.support,r=!(n.funcNames?e.name:n.funcDecomp);if(!r){var o=ea.call(e);n.funcNames||(r=!Tt.test(o)),r||(r=Ct.test(o)||Ri(e),Ba(e,r))}return r}function xr(e,t){return e=+e,t=null==t?Na:t,e>-1&&e%1==0&&t>e}function Tr(e,t,n){if(!Di(n))return!1;var r=typeof t;if("number"==r)var o=n.length,i=Or(o)&&xr(t,o);else i="string"==r&&t in n;if(i){var s=n[t];return e===e?e===s:s!==s}return!1}function Or(e){return"number"==typeof e&&e>-1&&e%1==0&&Na>=e}function Ar(e){return e===e&&(0===e?1/e>0:!Di(e))}function Dr(e,t){var n=e[1],r=t[1],o=n|r,i=M|L,s=O|A,a=i|s|D|I,u=n&M&&!(r&M),c=n&L&&!(r&L),l=(c?e:t)[7],f=(u?e:t)[8],d=!(n>=L&&r>s||n>s&&r>=L),h=o>=i&&a>=o&&(L>n||(c||u)&&l.length<=f);if(!d&&!h)return e;r&O&&(e[2]=t[2],o|=n&O?0:D);var p=t[3];if(p){var v=e[3];e[3]=v?nr(v,p,t[4]):Zt(p),e[4]=v?y(e[3],W):Zt(t[4])}return p=t[5],p&&(v=e[5],e[5]=v?rr(v,p,t[6]):Zt(p),e[6]=v?y(e[5],W):Zt(t[6])),p=t[7],p&&(e[7]=Zt(p)),r&M&&(e[8]=null==e[8]?t[8]:Ta(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function jr(e,t){e=qr(e);for(var n=-1,r=t.length,o={};++n<r;){var i=t[n];i in e&&(o[i]=e[i])}return o}function Ir(e,t){var n={};return jn(e,function(e,r,o){t(e,r,o)&&(n[r]=e)}),n}function Rr(e,t){for(var n=e.length,r=Ta(t.length,n),o=Zt(e);r--;){var i=t[r];e[r]=xr(i,n)?o[i]:x}return e}function Cr(e){{var n;t.support}if(!g(e)||oa.call(e)!=Z||!na.call(e,"constructor")&&(n=e.constructor,"function"==typeof n&&!(n instanceof n)))return!1;var r;return jn(e,function(e,t){r=t}),"undefined"==typeof r||na.call(e,r)}function Lr(e){for(var n=Xi(e),r=n.length,o=r&&e.length,i=t.support,s=o&&Or(o)&&(Xa(e)||i.nonEnumArgs&&Ei(e)),a=-1,u=[];++a<r;){var c=n[a];
(s&&xr(c,o)||na.call(e,c))&&u.push(c)}return u}function Mr(e){return null==e?[]:Or(e.length)?Di(e)?e:$s(e):is(e)}function qr(e){return Di(e)?e:$s(e)}function Nr(e){return e instanceof Q?e.clone():new _(e.__wrapped__,e.__chain__,Zt(e.__actions__))}function Ur(e,t,n){t=(n?Tr(e,t,n):null==t)?1:xa(+t||1,1);for(var r=0,o=e?e.length:0,i=-1,s=Bs(ca(o/t));o>r;)s[++i]=$n(e,r,r+=t);return s}function Pr(e){for(var t=-1,n=e?e.length:0,r=-1,o=[];++t<n;){var i=e[t];i&&(o[++r]=i)}return o}function Fr(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Xa(n)||Ei(n))break}return bn(n,On(arguments,!1,!0,++e))}function Br(e,t,n){var r=e?e.length:0;return r?((n?Tr(e,t,n):null==t)&&(t=1),$n(e,0>t?0:t)):[]}function Yr(e,t,n){var r=e?e.length:0;return r?((n?Tr(e,t,n):null==t)&&(t=1),t=r-(+t||0),$n(e,0,0>t?0:t)):[]}function Hr(e,t,n){var r=e?e.length:0;if(!r)return[];for(t=_r(t,n,3);r--&&t(e[r],r,e););return $n(e,0,r+1)}function Wr(e,t,n){var r=e?e.length:0;if(!r)return[];var o=-1;for(t=_r(t,n,3);++o<r&&t(e[o],o,e););return $n(e,o)}function Gr(e,t,n,r){var o=e?e.length:0;return o?(n&&"number"!=typeof n&&Tr(e,t,n)&&(n=0,r=o),Sn(e,t,n,r)):[]}function Vr(e,t,n){var r=-1,o=e?e.length:0;for(t=_r(t,n,3);++r<o;)if(t(e[r],r,e))return r;return-1}function $r(e,t,n){var r=e?e.length:0;for(t=_r(t,n,3);r--;)if(t(e[r],r,e))return r;return-1}function Jr(e){return e?e[0]:x}function zr(e,t,n){var r=e?e.length:0;return n&&Tr(e,t,n)&&(t=!1),r?On(e,t):[]}function Kr(e){var t=e?e.length:0;return t?On(e,!0):[]}function Qr(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?xa(r+n,0):n||0;else if(n){var i=Xn(e,t),s=e[i];return(t===t?t===s:s!==s)?i:-1}return o(e,t,n)}function Xr(e){return Yr(e,1)}function Zr(){for(var e=[],t=-1,n=arguments.length,r=[],i=yr(),s=i==o;++t<n;){var a=arguments[t];(Xa(a)||Ei(a))&&(e.push(a),r.push(s&&a.length>=120?Ya(t&&a):null))}n=e.length;var u=e[0],c=-1,l=u?u.length:0,f=[],d=r[0];e:for(;++c<l;)if(a=u[c],(d?Kt(d,a):i(f,a))<0){for(t=n;--t;){var h=r[t];if((h?Kt(h,a):i(e[t],a))<0)continue e}d&&d.push(a),f.push(a)}return f}function eo(e){var t=e?e.length:0;return t?e[t-1]:x}function to(e,t,n){var r=e?e.length:0;if(!r)return-1;var o=r;if("number"==typeof n)o=(0>n?xa(r+n,0):Ta(n||0,r-1))+1;else if(n){o=Xn(e,t,!0)-1;var i=e[o];return(t===t?t===i:i!==i)?o:-1}if(t!==t)return m(e,o,!0);for(;o--;)if(e[o]===t)return o;return-1}function no(){var e=arguments[0];if(!e||!e.length)return e;for(var t=0,n=yr(),r=arguments.length;++t<r;)for(var o=0,i=arguments[t];(o=n(e,i,o))>-1;)ga.call(e,o,1);return e}function ro(e){return Wn(e||[],On(arguments,!1,!1,1))}function oo(e,t,n){var r=-1,o=e?e.length:0,i=[];for(t=_r(t,n,3);++r<o;){var s=e[r];t(s,r,e)&&(i.push(s),ga.call(e,r--,1),o--)}return i}function io(e){return Br(e,1)}function so(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Tr(e,t,n)&&(t=0,n=r),$n(e,t,n)):[]}function ao(e,t,n,r){var o=_r(n);return o===gn&&null==n?Xn(e,t):Zn(e,t,o(n,r,1))}function uo(e,t,n,r){var o=_r(n);return o===gn&&null==n?Xn(e,t,!0):Zn(e,t,o(n,r,1),!0)}function co(e,t,n){var r=e?e.length:0;return r?((n?Tr(e,t,n):null==t)&&(t=1),$n(e,0,0>t?0:t)):[]}function lo(e,t,n){var r=e?e.length:0;return r?((n?Tr(e,t,n):null==t)&&(t=1),t=r-(+t||0),$n(e,0>t?0:t)):[]}function fo(e,t,n){var r=e?e.length:0;if(!r)return[];for(t=_r(t,n,3);r--&&t(e[r],r,e););return $n(e,r+1)}function ho(e,t,n){var r=e?e.length:0;if(!r)return[];var o=-1;for(t=_r(t,n,3);++o<r&&t(e[o],o,e););return $n(e,0,o)}function po(){return zn(On(arguments,!1,!0))}function vo(e,t,n,r){var i=e?e.length:0;if(!i)return[];null!=t&&"boolean"!=typeof t&&(r=n,n=Tr(e,t,r)?null:t,t=!1);var s=_r();return(s!==gn||null!=n)&&(n=s(n,r,3)),t&&yr()==o?b(e,n):zn(e,n)}function mo(e){for(var t=-1,n=(e&&e.length&&sn(on(e,ta)))>>>0,r=Bs(n);++t<n;)r[t]=on(e,Hn(t));return r}function go(e){return bn(e,$n(arguments,1))}function _o(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Xa(n)||Ei(n))var r=r?bn(r,n).concat(bn(n,r)):n}return r?zn(r):[]}function yo(){for(var e=arguments.length,t=Bs(e);e--;)t[e]=arguments[e];return mo(t)}function bo(e,t){var n=-1,r=e?e.length:0,o={};for(!r||t||Xa(e[0])||(t=[]);++n<r;){var i=e[n];t?o[i]=t[n]:i&&(o[i[0]]=i[1])}return o}function wo(e){var n=t(e);return n.__chain__=!0,n}function Eo(e,t,n){return t.call(n,e),e}function ko(e,t,n){return t.call(n,e)}function So(){return wo(this)}function xo(){return new _(this.value(),this.__chain__)}function To(e){for(var t,r=this;r instanceof n;){var o=Nr(r);t?i.__wrapped__=o:t=o;var i=o;r=r.__wrapped__}return i.__wrapped__=e,t}function Oo(){var e=this.__wrapped__;return e instanceof Q?(this.__actions__.length&&(e=new Q(this)),new _(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})}function Ao(){return this.value()+""}function Do(){return Qn(this.__wrapped__,this.__actions__)}function jo(e){var t=e?e.length:0;return Or(t)&&(e=Mr(e)),pn(e,On(arguments,!1,!1,1))}function Io(e,t,n){var r=Xa(e)?nn:kn;return("function"!=typeof t||"undefined"!=typeof n)&&(t=_r(t,n,3)),r(e,t)}function Ro(e,t,n){var r=Xa(e)?rn:xn;return t=_r(t,n,3),r(e,t)}function Co(e,t,n){if(Xa(e)){var r=Vr(e,t,n);return r>-1?e[r]:x}return t=_r(t,n,3),Tn(e,t,wn)}function Lo(e,t,n){return t=_r(t,n,3),Tn(e,t,En)}function Mo(e,t){return Co(e,Pn(t))}function qo(e,t,n){return"function"==typeof t&&"undefined"==typeof n&&Xa(e)?en(e,t):wn(e,er(t,n,3))}function No(e,t,n){return"function"==typeof t&&"undefined"==typeof n&&Xa(e)?tn(e,t):En(e,er(t,n,3))}function Uo(e,t,n){var r=e?e.length:0;return Or(r)||(e=is(e),r=e.length),r?(n="number"==typeof n?0>n?xa(r+n,0):n||0:0,"string"==typeof e||!Xa(e)&&qi(e)?r>n&&e.indexOf(t,n)>-1:yr(e,t,n)>-1):!1}function Po(e,t){return Ln(e,t,$n(arguments,2))}function Fo(e,t,n){var r=Xa(e)?on:Un;return t=_r(t,n,3),r(e,t)}function Bo(e,t){return Fo(e,Hn(t))}function Yo(e,t,n,r){var o=Xa(e)?un:Vn;return o(e,_r(t,r,4),n,arguments.length<3,wn)}function Ho(e,t,n,r){var o=Xa(e)?cn:Vn;return o(e,_r(t,r,4),n,arguments.length<3,En)}function Wo(e,t,n){var r=Xa(e)?rn:xn;return t=_r(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function Go(e,t,n){if(n?Tr(e,t,n):null==t){e=Mr(e);var r=e.length;return r>0?e[Gn(0,r-1)]:x}var o=Vo(e);return o.length=Ta(0>t?0:+t||0,o.length),o}function Vo(e){e=Mr(e);for(var t=-1,n=e.length,r=Bs(n);++t<n;){var o=Gn(0,t);t!=o&&(r[t]=r[o]),r[o]=e[t]}return r}function $o(e){var t=e?e.length:0;return Or(t)?t:ru(e).length}function Jo(e,t,n){var r=Xa(e)?ln:Jn;return("function"!=typeof t||"undefined"!=typeof n)&&(t=_r(t,n,3)),r(e,t)}function zo(e,t,n){var r=-1,o=e?e.length:0,i=Or(o)?Bs(o):[];return n&&Tr(e,t,n)&&(t=null),t=_r(t,n,3),wn(e,function(e,n,o){i[++r]={criteria:t(e,n,o),index:r,value:e}}),s(i,f)}function Ko(e){var t=arguments;t.length>3&&Tr(t[1],t[2],t[3])&&(t=[e,t[1]]);var n=-1,r=e?e.length:0,o=On(t,!1,!1,1),i=Or(r)?Bs(r):[];return wn(e,function(e){for(var t=o.length,r=Bs(t);t--;)r[t]=null==e?x:e[o[t]];i[++n]={criteria:r,index:n,value:e}}),s(i,d)}function Qo(e,t){return Ro(e,Pn(t))}function Xo(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Ks(H);var n=e;e=t,t=n}return e=ka(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function Zo(e,t,n){return n&&Tr(e,t,n)&&(t=null),t=e&&null==t?e.length:xa(+t||0,0),hr(e,M,null,null,null,null,t)}function ei(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Ks(H);var r=e;e=t,t=r}return function(){return--e>0?n=t.apply(this,arguments):t=null,n}}function ti(e,t){var n=O;if(arguments.length>2){var r=$n(arguments,2),o=y(r,ti.placeholder);n|=R}return hr(e,n,t,r,o)}function ni(e){return mn(e,arguments.length>1?On(arguments,!1,!1,1):zi(e))}function ri(e,t){var n=O|A;if(arguments.length>2){var r=$n(arguments,2),o=y(r,ri.placeholder);n|=R}return hr(t,n,e,r,o)}function oi(e,t,n){n&&Tr(e,t,n)&&(t=null);var r=hr(e,j,null,null,null,null,null,t);return r.placeholder=oi.placeholder,r}function ii(e,t,n){n&&Tr(e,t,n)&&(t=null);var r=hr(e,I,null,null,null,null,null,t);return r.placeholder=ii.placeholder,r}function si(e,t,n){function r(){d&&la(d),u&&la(u),u=d=h=x}function o(){var n=t-(Qa()-l);if(0>=n||n>t){u&&la(u);var r=h;u=d=h=x,r&&(p=Qa(),c=e.apply(f,a),d||u||(a=f=null))}else d=ma(o,n)}function i(){d&&la(d),u=d=h=x,(m||v!==t)&&(p=Qa(),c=e.apply(f,a),d||u||(a=f=null))}function s(){if(a=arguments,l=Qa(),f=this,h=m&&(d||!g),v===!1)var n=g&&!d;else{u||g||(p=l);var r=v-(l-p),s=0>=r||r>v;s?(u&&(u=la(u)),p=l,c=e.apply(f,a)):u||(u=ma(i,r))}return s&&d?d=la(d):d||t===v||(d=ma(o,t)),n&&(s=!0,c=e.apply(f,a)),!s||d||u||(a=f=null),c}var a,u,c,l,f,d,h,p=0,v=!1,m=!0;if("function"!=typeof e)throw new Ks(H);if(t=0>t?0:+t||0,n===!0){var g=!0;m=!1}else Di(n)&&(g=n.leading,v="maxWait"in n&&xa(+n.maxWait||0,t),m="trailing"in n?n.trailing:m);return s.cancel=r,s}function ai(e){return yn(e,1,arguments,1)}function ui(e,t){return yn(e,t,arguments,2)}function ci(){var e=arguments,t=e.length;if(!t)return function(){return arguments[0]};if(!nn(e,i))throw new Ks(H);return function(){for(var n=0,r=e[n].apply(this,arguments);++n<t;)r=e[n].call(this,r);return r}}function li(){var e=arguments,t=e.length-1;if(0>t)return function(){return arguments[0]};if(!nn(e,i))throw new Ks(H);return function(){for(var n=t,r=e[n].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function fi(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Ks(H);var n=function(){var r=n.cache,o=t?t.apply(this,arguments):arguments[0];if(r.has(o))return r.get(o);var i=e.apply(this,arguments);return r.set(o,i),i};return n.cache=new fi.Cache,n}function di(e){if("function"!=typeof e)throw new Ks(H);return function(){return!e.apply(this,arguments)}}function hi(e){return ei(e,2)}function pi(e){var t=$n(arguments,1),n=y(t,pi.placeholder);return hr(e,R,null,t,n)}function vi(e){var t=$n(arguments,1),n=y(t,vi.placeholder);return hr(e,C,null,t,n)}function mi(e){var t=On(arguments,!1,!1,1);return hr(e,L,null,null,null,t)}function gi(e){if("function"!=typeof e)throw new Ks(H);return function(t){return e.apply(this,t)}}function _i(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new Ks(H);return n===!1?r=!1:Di(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Bt.leading=r,Bt.maxWait=+t,Bt.trailing=o,si(e,t,Bt)}function yi(e,t){return t=null==t?js:t,hr(t,R,null,[e],[])}function bi(e,t,n,r){return t&&"boolean"!=typeof t&&Tr(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),n="function"==typeof n&&er(n,r,1),_n(e,t,n)}function wi(e,t,n){return t="function"==typeof t&&er(t,n,1),_n(e,!0,t)}function Ei(e){var t=g(e)?e.length:x;return Or(t)&&oa.call(e)==G||!1}function ki(e){return e===!0||e===!1||g(e)&&oa.call(e)==$||!1}function Si(e){return g(e)&&oa.call(e)==J||!1}function xi(e){return e&&1===e.nodeType&&g(e)&&oa.call(e).indexOf("Element")>-1||!1}function Ti(e){if(null==e)return!0;var t=e.length;return Or(t)&&(Xa(e)||qi(e)||Ei(e)||g(e)&&eu(e.splice))?!t:!ru(e).length}function Oi(e,t,n,r){if(n="function"==typeof n&&er(n,r,3),!n&&Ar(e)&&Ar(t))return e===t;var o=n?n(e,t):x;return"undefined"==typeof o?Mn(e,t,n):!!o}function Ai(e){return g(e)&&"string"==typeof e.message&&oa.call(e)==z||!1}function Di(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}function ji(e,t,n,r){var o=ru(t),i=o.length;if(n="function"==typeof n&&er(n,r,3),!n&&1==i){var s=o[0],a=t[s];if(Ar(a))return null!=e&&a===e[s]&&na.call(e,s)}for(var u=Bs(i),c=Bs(i);i--;)a=u[i]=t[o[i]],c[i]=Ar(a);return Nn(e,o,u,c,n)}function Ii(e){return Li(e)&&e!=+e}function Ri(e){return null==e?!1:oa.call(e)==K?sa.test(ea.call(e)):g(e)&&At.test(e)||!1}function Ci(e){return null===e}function Li(e){return"number"==typeof e||g(e)&&oa.call(e)==X||!1}function Mi(e){return g(e)&&oa.call(e)==et||!1}function qi(e){return"string"==typeof e||g(e)&&oa.call(e)==nt||!1}function Ni(e){return g(e)&&Or(e.length)&&Pt[oa.call(e)]||!1}function Ui(e){return"undefined"==typeof e}function Pi(e){var t=e?e.length:0;return Or(t)?t?Zt(e):[]:is(e)}function Fi(e){return vn(e,Xi(e))}function Bi(e,t,n){var r=Fa(e);return n&&Tr(e,t,n)&&(t=null),t?vn(t,r,ru(t)):r}function Yi(e){if(null==e)return e;var t=Zt(arguments);return t.push(fn),nu.apply(x,t)}function Hi(e,t,n){return t=_r(t,n,3),Tn(e,t,In,!0)}function Wi(e,t,n){return t=_r(t,n,3),Tn(e,t,Rn,!0)}function Gi(e,t,n){return("function"!=typeof t||"undefined"!=typeof n)&&(t=er(t,n,3)),An(e,t,Xi)}function Vi(e,t,n){return t=er(t,n,3),Dn(e,t,Xi)}function $i(e,t,n){return("function"!=typeof t||"undefined"!=typeof n)&&(t=er(t,n,3)),In(e,t)}function Ji(e,t,n){return t=er(t,n,3),Dn(e,t,ru)}function zi(e){return Cn(e,Xi(e))}function Ki(e,t){return e?na.call(e,t):!1}function Qi(e,t,n){n&&Tr(e,t,n)&&(t=null);for(var r=-1,o=ru(e),i=o.length,s={};++r<i;){var a=o[r],u=e[a];t?na.call(s,u)?s[u].push(a):s[u]=[a]:s[u]=a}return s}function Xi(e){if(null==e)return[];Di(e)||(e=$s(e));var t=e.length;t=t&&Or(t)&&(Xa(e)||Pa.nonEnumArgs&&Ei(e))&&t||0;for(var n=e.constructor,r=-1,o="function"==typeof n&&n.prototype===e,i=Bs(t),s=t>0;++r<t;)i[r]=r+"";for(var a in e)s&&xr(a,t)||"constructor"==a&&(o||!na.call(e,a))||i.push(a);return i}function Zi(e,t,n){var r={};return t=_r(t,n,3),In(e,function(e,n,o){r[n]=t(e,n,o)}),r}function es(e,t,n){if(null==e)return{};if("function"!=typeof t){var r=on(On(arguments,!1,!1,1),zs);return jr(e,bn(Xi(e),r))}return t=er(t,n,3),Ir(e,function(e,n,r){return!t(e,n,r)})}function ts(e){for(var t=-1,n=ru(e),r=n.length,o=Bs(r);++t<r;){var i=n[t];o[t]=[i,e[i]]}return o}function ns(e,t,n){return null==e?{}:"function"==typeof t?Ir(e,er(t,n,3)):jr(e,On(arguments,!1,!1,1))}function rs(e,t,n){var r=null==e?x:e[t];return"undefined"==typeof r&&(r=n),eu(r)?r.call(e):r}function os(e,t,n,r){var o=Xa(e)||Ni(e);if(t=_r(t,r,4),null==n)if(o||Di(e)){var i=e.constructor;n=o?Xa(e)?new i:[]:Fa(eu(i)&&i.prototype)}else n={};return(o?en:In)(e,function(e,r,o){return t(n,e,r,o)}),n}function is(e){return Kn(e,ru(e))}function ss(e){return Kn(e,Xi(e))}function as(e,t,n){return t=+t||0,"undefined"==typeof n?(n=t,t=0):n=+n||0,e>=t&&n>e}function us(e,t,n){n&&Tr(e,t,n)&&(t=n=null);var r=null==e,o=null==t;if(null==n&&(o&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,o=!0)),r&&o&&(t=1,o=!1),e=+e||0,o?(t=e,e=0):t=+t||0,n||e%1||t%1){var i=ja();return Ta(e+i*(t-e+parseFloat("1e-"+((i+"").length-1))),t)}return Gn(e,t)}function cs(e){return e=a(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function ls(e){return e=a(e),e&&e.replace(Dt,h)}function fs(e,t,n){e=a(e),t+="";var r=e.length;return n=("undefined"==typeof n?r:Ta(0>n?0:+n||0,r))-t.length,n>=0&&e.indexOf(t,n)==n}function ds(e){return e=a(e),e&&bt.test(e)?e.replace(_t,p):e}function hs(e){return e=a(e),e&&Rt.test(e)?e.replace(It,"\\$&"):e}function ps(e,t,n){e=a(e),t=+t;var r=e.length;if(r>=t||!ka(t))return e;var o=(t-r)/2,i=fa(o),s=ca(o);return n=fr("",s,n),n.slice(0,i)+e+n}function vs(e,t,n){return e=a(e),e&&fr(e,t,n)+e}function ms(e,t,n){return e=a(e),e&&e+fr(e,t,n)}function gs(e,t,n){return n&&Tr(e,t,n)&&(t=0),Da(e,t)}function _s(e,t){var n="";if(e=a(e),t=+t,1>t||!e||!ka(t))return n;do t%2&&(n+=e),t=fa(t/2),e+=e;while(t);return n}function ys(e,t,n){return e=a(e),n=null==n?0:Ta(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function bs(e,n,r){var o=t.templateSettings;r&&Tr(e,n,r)&&(n=r=null),e=a(e),n=hn(hn({},r||n),o,dn);var i,s,u=hn(hn({},n.imports),o.imports,dn),c=ru(u),l=Kn(u,c),f=0,d=n.interpolate||jt,h="__p += '",p=Js((n.escape||jt).source+"|"+d.source+"|"+(d===kt?St:jt).source+"|"+(n.evaluate||jt).source+"|$","g"),m="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Ut+"]")+"\n";e.replace(p,function(t,n,r,o,a,u){return r||(r=o),h+=e.slice(f,u).replace(Lt,v),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+t.length,t}),h+="';\n";var g=n.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(s?h.replace(pt,""):h).replace(vt,"$1").replace(mt,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var _=Os(function(){return Ws(c,m+"return "+h).apply(x,l)});if(_.source=h,Ai(_))throw _;return _}function ws(e,t,n){var r=e;return(e=a(e))?(n?Tr(r,t,n):null==t)?e.slice(w(e),E(e)+1):(t+="",e.slice(c(e,t),l(e,t)+1)):e}function Es(e,t,n){var r=e;return e=a(e),e?e.slice((n?Tr(r,t,n):null==t)?w(e):c(e,t+"")):e}function ks(e,t,n){var r=e;return e=a(e),e?(n?Tr(r,t,n):null==t)?e.slice(0,E(e)+1):e.slice(0,l(e,t+"")+1):e}function Ss(e,t,n){n&&Tr(e,t,n)&&(t=null);var r=q,o=N;if(null!=t)if(Di(t)){var i="separator"in t?t.separator:i;r="length"in t?+t.length||0:r,o="omission"in t?a(t.omission):o}else r=+t||0;if(e=a(e),r>=e.length)return e;var s=r-o.length;if(1>s)return o;var u=e.slice(0,s);if(null==i)return u+o;if(Mi(i)){if(e.slice(s).search(i)){var c,l,f=e.slice(0,s);for(i.global||(i=Js(i.source,(xt.exec(i)||"")+"g")),i.lastIndex=0;c=i.exec(f);)l=c.index;u=u.slice(0,null==l?s:l)}}else if(e.indexOf(i,s)!=s){var d=u.lastIndexOf(i);d>-1&&(u=u.slice(0,d))}return u+o}function xs(e){return e=a(e),e&&yt.test(e)?e.replace(gt,k):e}function Ts(e,t,n){return n&&Tr(e,t,n)&&(t=null),e=a(e),e.match(t||Mt)||[]}function Os(){var e=arguments.length,t=arguments[0];try{for(var n=Bs(e?e-1:0);--e>0;)n[e-1]=arguments[e];return t.apply(x,n)}catch(r){return Ai(r)?r:new Hs(r)}}function As(e,t,n){return n&&Tr(e,t,n)&&(t=null),g(e)?Is(e):gn(e,t)}function Ds(e){return function(){return e}}function js(e){return e}function Is(e){return Pn(_n(e,!0))}function Rs(e,t){return Fn(e+"",_n(t,!0))}function Cs(e,t,n){if(null==n){var r=Di(t),o=r&&ru(t),i=o&&o.length&&Cn(t,o);(i?i.length:r)||(i=!1,n=t,t=e,e=this)}i||(i=Cn(t,ru(t)));var s=!0,a=-1,u=eu(e),c=i.length;n===!1?s=!1:Di(n)&&"chain"in n&&(s=n.chain);for(;++a<c;){var l=i[a],f=t[l];e[l]=f,u&&(e.prototype[l]=function(t){return function(){var n=this.__chain__;if(s||n){var r=e(this.__wrapped__);return(r.__actions__=Zt(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}var o=[this.value()];return ha.apply(o,arguments),t.apply(e,o)}}(f))}return e}function Ls(){return e._=ia,this}function Ms(){}function qs(e){return Hn(e+"")}function Ns(e){return function(t){return null==e?x:e[t]}}function Us(e,t,n){n&&Tr(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,o=xa(ca((t-e)/(n||1)),0),i=Bs(o);++r<o;)i[r]=e,e+=n;return i}function Ps(e,t,n){if(e=+e,1>e||!ka(e))return[];var r=-1,o=Bs(Ta(e,Ca));for(t=er(t,n,1);++r<e;)Ca>r?o[r]=t(r):t(r);return o}function Fs(e){var t=++ra;return a(e)+t}e=e?Xt.defaults($t.Object(),e,Xt.pick($t,Nt)):$t;var Bs=e.Array,Ys=e.Date,Hs=e.Error,Ws=e.Function,Gs=e.Math,Vs=e.Number,$s=e.Object,Js=e.RegExp,zs=e.String,Ks=e.TypeError,Qs=Bs.prototype,Xs=$s.prototype,Zs=(Zs=e.window)&&Zs.document,ea=Ws.prototype.toString,ta=Hn("length"),na=Xs.hasOwnProperty,ra=0,oa=Xs.toString,ia=e._,sa=Js("^"+hs(oa).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=Ri(aa=e.ArrayBuffer)&&aa,ua=Ri(ua=aa&&new aa(0).slice)&&ua,ca=Gs.ceil,la=e.clearTimeout,fa=Gs.floor,da=Ri(da=$s.getPrototypeOf)&&da,ha=Qs.push,pa=Xs.propertyIsEnumerable,va=Ri(va=e.Set)&&va,ma=e.setTimeout,ga=Qs.splice,_a=Ri(_a=e.Uint8Array)&&_a,ya=Ri(ya=e.WeakMap)&&ya,ba=function(){try{var t=Ri(t=e.Float64Array)&&t,n=new t(new aa(10),0,1)&&t}catch(r){}return n}(),wa=Ri(wa=Bs.isArray)&&wa,Ea=Ri(Ea=$s.create)&&Ea,ka=e.isFinite,Sa=Ri(Sa=$s.keys)&&Sa,xa=Gs.max,Ta=Gs.min,Oa=Ri(Oa=Ys.now)&&Oa,Aa=Ri(Aa=Vs.isFinite)&&Aa,Da=e.parseInt,ja=Gs.random,Ia=Vs.NEGATIVE_INFINITY,Ra=Vs.POSITIVE_INFINITY,Ca=Gs.pow(2,32)-1,La=Ca-1,Ma=Ca>>>1,qa=ba?ba.BYTES_PER_ELEMENT:0,Na=Gs.pow(2,53)-1,Ua=ya&&new ya,Pa=t.support={};!function(){Pa.funcDecomp=!Ri(e.WinRTError)&&Ct.test(S),Pa.funcNames="string"==typeof Ws.name;try{Pa.dom=11===Zs.createDocumentFragment().nodeType}catch(t){Pa.dom=!1}try{Pa.nonEnumArgs=!pa.call(arguments,1)}catch(t){Pa.nonEnumArgs=!0}}(0,0),t.templateSettings={escape:wt,evaluate:Et,interpolate:kt,variable:"",imports:{_:t}};var Fa=function(){function t(){}return function(n){if(Di(n)){t.prototype=n;var r=new t;t.prototype=null}return r||e.Object()}}(),Ba=Ua?function(e,t){return Ua.set(e,t),e}:js;ua||(tr=aa&&_a?function(e){var t=e.byteLength,n=ba?fa(t/qa):0,r=n*qa,o=new aa(t);if(n){var i=new ba(o,0,n);i.set(new ba(e,0,n))}return t!=r&&(i=new _a(o,r),i.set(new _a(e,r))),o}:Ds(null));var Ya=Ea&&va?function(e){return new zt(e)}:Ds(null),Ha=Ua?function(e){return Ua.get(e)}:Ms,Wa=function(){var e=0,t=0;return function(n,r){var o=Qa(),i=P-(o-t);if(t=o,i>0){if(++e>=U)return n}else e=0;return Ba(n,r)}}(),Ga=or(function(e,t,n){na.call(e,n)?++e[n]:e[n]=1}),Va=or(function(e,t,n){na.call(e,n)?e[n].push(t):e[n]=[t]}),$a=or(function(e,t,n){e[n]=t}),Ja=cr(sn),za=cr(an,!0),Ka=or(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Qa=Oa||function(){return(new Ys).getTime()},Xa=wa||function(e){return g(e)&&Or(e.length)&&oa.call(e)==V||!1};Pa.dom||(xi=function(e){return e&&1===e.nodeType&&g(e)&&!tu(e)||!1});var Za=Aa||function(e){return"number"==typeof e&&ka(e)},eu=i(/x/)||_a&&!i(_a)?function(e){return oa.call(e)==K}:i,tu=da?function(e){if(!e||oa.call(e)!=Z)return!1;var t=e.valueOf,n=Ri(t)&&(n=da(t))&&da(n);return n?e==n||da(e)==n:Cr(e)}:Cr,nu=ir(hn),ru=Sa?function(e){if(e)var t=e.constructor,n=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&n&&Or(n)?Lr(e):Di(e)?Sa(e):[]}:Lr,ou=ir(Bn),iu=ar(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),su=ar(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});8!=Da(qt+"08")&&(gs=function(e,t,n){return(n?Tr(e,t,n):null==t)?t=0:t&&(t=+t),e=ws(e),Da(e,t||(Ot.test(e)?16:10))});var au=ar(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),uu=ar(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))});return t.prototype=n.prototype,_.prototype=Fa(n.prototype),_.prototype.constructor=_,Q.prototype=Fa(n.prototype),Q.prototype.constructor=Q,Ht.prototype["delete"]=Wt,Ht.prototype.get=Gt,Ht.prototype.has=Vt,Ht.prototype.set=Jt,zt.prototype.push=Qt,fi.Cache=Ht,t.after=Xo,t.ary=Zo,t.assign=nu,t.at=jo,t.before=ei,t.bind=ti,t.bindAll=ni,t.bindKey=ri,t.callback=As,t.chain=wo,t.chunk=Ur,t.compact=Pr,t.constant=Ds,t.countBy=Ga,t.create=Bi,t.curry=oi,t.curryRight=ii,t.debounce=si,t.defaults=Yi,t.defer=ai,t.delay=ui,t.difference=Fr,t.drop=Br,t.dropRight=Yr,t.dropRightWhile=Hr,t.dropWhile=Wr,t.fill=Gr,t.filter=Ro,t.flatten=zr,t.flattenDeep=Kr,t.flow=ci,t.flowRight=li,t.forEach=qo,t.forEachRight=No,t.forIn=Gi,t.forInRight=Vi,t.forOwn=$i,t.forOwnRight=Ji,t.functions=zi,t.groupBy=Va,t.indexBy=$a,t.initial=Xr,t.intersection=Zr,t.invert=Qi,t.invoke=Po,t.keys=ru,t.keysIn=Xi,t.map=Fo,t.mapValues=Zi,t.matches=Is,t.matchesProperty=Rs,t.memoize=fi,t.merge=ou,t.mixin=Cs,t.negate=di,t.omit=es,t.once=hi,t.pairs=ts,t.partial=pi,t.partialRight=vi,t.partition=Ka,t.pick=ns,t.pluck=Bo,t.property=qs,t.propertyOf=Ns,t.pull=no,t.pullAt=ro,t.range=Us,t.rearg=mi,t.reject=Wo,t.remove=oo,t.rest=io,t.shuffle=Vo,t.slice=so,t.sortBy=zo,t.sortByAll=Ko,t.spread=gi,t.take=co,t.takeRight=lo,t.takeRightWhile=fo,t.takeWhile=ho,t.tap=Eo,t.throttle=_i,t.thru=ko,t.times=Ps,t.toArray=Pi,t.toPlainObject=Fi,t.transform=os,t.union=po,t.uniq=vo,t.unzip=mo,t.values=is,t.valuesIn=ss,t.where=Qo,t.without=go,t.wrap=yi,t.xor=_o,t.zip=yo,t.zipObject=bo,t.backflow=li,t.collect=Fo,t.compose=li,t.each=qo,t.eachRight=No,t.extend=nu,t.iteratee=As,t.methods=zi,t.object=bo,t.select=Ro,t.tail=io,t.unique=vo,Cs(t,t),t.attempt=Os,t.camelCase=iu,t.capitalize=cs,t.clone=bi,t.cloneDeep=wi,t.deburr=ls,t.endsWith=fs,t.escape=ds,t.escapeRegExp=hs,t.every=Io,t.find=Co,t.findIndex=Vr,t.findKey=Hi,t.findLast=Lo,t.findLastIndex=$r,t.findLastKey=Wi,t.findWhere=Mo,t.first=Jr,t.has=Ki,t.identity=js,t.includes=Uo,t.indexOf=Qr,t.inRange=as,t.isArguments=Ei,t.isArray=Xa,t.isBoolean=ki,t.isDate=Si,t.isElement=xi,t.isEmpty=Ti,t.isEqual=Oi,t.isError=Ai,t.isFinite=Za,t.isFunction=eu,t.isMatch=ji,t.isNaN=Ii,t.isNative=Ri,t.isNull=Ci,t.isNumber=Li,t.isObject=Di,t.isPlainObject=tu,t.isRegExp=Mi,t.isString=qi,t.isTypedArray=Ni,t.isUndefined=Ui,t.kebabCase=su,t.last=eo,t.lastIndexOf=to,t.max=Ja,t.min=za,t.noConflict=Ls,t.noop=Ms,t.now=Qa,t.pad=ps,t.padLeft=vs,t.padRight=ms,t.parseInt=gs,t.random=us,t.reduce=Yo,t.reduceRight=Ho,t.repeat=_s,t.result=rs,t.runInContext=S,t.size=$o,t.snakeCase=au,t.some=Jo,t.sortedIndex=ao,t.sortedLastIndex=uo,t.startCase=uu,t.startsWith=ys,t.template=bs,t.trim=ws,t.trimLeft=Es,t.trimRight=ks,t.trunc=Ss,t.unescape=xs,t.uniqueId=Fs,t.words=Ts,t.all=Io,t.any=Jo,t.contains=Uo,t.detect=Co,t.foldl=Yo,t.foldr=Ho,t.head=Jr,t.include=Uo,t.inject=Yo,Cs(t,function(){var e={};return In(t,function(n,r){t.prototype[r]||(e[r]=n)}),e}(),!1),t.sample=Go,t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Go(t,e)}):Go(this.value())},t.VERSION=T,en(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),en(["filter","map","takeWhile"],function(e,t){var n=t==F||t==Y;Q.prototype[e]=function(e,r){var o=this.clone(),i=o.__iteratees__||(o.__iteratees__=[]);return o.__filtered__=o.__filtered__||n,i.push({iteratee:_r(e,r,3),type:t}),o}}),en(["drop","take"],function(e,t){var n="__"+e+"Count__",r=e+"While";Q.prototype[e]=function(r){r=null==r?1:xa(fa(r)||0,0);var o=this.clone();if(o.__filtered__){var i=o[n];o[n]=t?Ta(i,r):i+r}else{var s=o.__views__||(o.__views__=[]);s.push({size:r,type:e+(o.__dir__<0?"Right":"")})}return o},Q.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},Q.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[r](e,t).reverse()}}),en(["first","last"],function(e,t){var n="take"+(t?"Right":"");Q.prototype[e]=function(){return this[n](1).value()[0]}}),en(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Q.prototype[e]=function(){return this[n](1)}}),en(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?Pn:Hn;Q.prototype[e]=function(e){return this[n](r(e))}}),Q.prototype.compact=function(){return this.filter(js)},Q.prototype.dropWhile=function(e,t){var n,r,o=this.__dir__<0;return e=_r(e,t,3),this.filter(function(t,i,s){return n=n&&(o?r>i:i>r),r=i,n||(n=!e(t,i,s))})},Q.prototype.reject=function(e,t){return e=_r(e,t,3),this.filter(function(t,n,r){return!e(t,n,r)})},Q.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=0>e?this.takeRight(-e):this.drop(e);return"undefined"!=typeof t&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},Q.prototype.toArray=function(){return this.drop(0)},In(Q.prototype,function(e,n){var r=t[n],o=/^(?:first|last)$/.test(n);t.prototype[n]=function(){var n=this.__wrapped__,i=arguments,s=this.__chain__,a=!!this.__actions__.length,u=n instanceof Q,c=u&&!a;if(o&&!s)return c?e.call(n):r.call(t,this.value());var l=function(e){var n=[e];return ha.apply(n,i),r.apply(t,n)};if(u||Xa(n)){var f=c?n:new Q(this),d=e.apply(f,i);if(!o&&(a||d.__actions__)){var h=d.__actions__||(d.__actions__=[]);h.push({func:ko,args:[l],thisArg:t})}return new _(d,s)}return this.thru(l)}}),en(["concat","join","pop","push","shift","sort","splice","unshift"],function(e){var n=Qs[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:join|pop|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;return o&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),Q.prototype.clone=tt,Q.prototype.reverse=rt,Q.prototype.value=Yt,t.prototype.chain=So,t.prototype.commit=xo,t.prototype.plant=To,t.prototype.reverse=Oo,t.prototype.toString=Ao,t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Do,t.prototype.collect=t.prototype.map,t.prototype.head=t.prototype.first,t.prototype.select=t.prototype.filter,t.prototype.tail=t.prototype.rest,t}var x,T="3.3.1",O=1,A=2,D=4,j=8,I=16,R=32,C=64,L=128,M=256,q=30,N="...",U=150,P=16,F=0,B=1,Y=2,H="Expected a function",W="__lodash_placeholder__",G="[object Arguments]",V="[object Array]",$="[object Boolean]",J="[object Date]",z="[object Error]",K="[object Function]",Q="[object Map]",X="[object Number]",Z="[object Object]",et="[object RegExp]",tt="[object Set]",nt="[object String]",rt="[object WeakMap]",ot="[object ArrayBuffer]",it="[object Float32Array]",st="[object Float64Array]",at="[object Int8Array]",ut="[object Int16Array]",ct="[object Int32Array]",lt="[object Uint8Array]",ft="[object Uint8ClampedArray]",dt="[object Uint16Array]",ht="[object Uint32Array]",pt=/\b__p \+= '';/g,vt=/\b(__p \+=) '' \+/g,mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gt=/&(?:amp|lt|gt|quot|#39|#96);/g,_t=/[&<>"'`]/g,yt=RegExp(gt.source),bt=RegExp(_t.source),wt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,kt=/<%=([\s\S]+?)%>/g,St=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xt=/\w*$/,Tt=/^\s*function[ \n\r\t]+\w/,Ot=/^0[xX]/,At=/^\[object .+?Constructor\]$/,Dt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,jt=/($^)/,It=/[.*+?^${}()|[\]\/\\]/g,Rt=RegExp(It.source),Ct=/\bthis\b/,Lt=/['\n\r\u2028\u2029\\]/g,Mt=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"{2,}(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),qt=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",Nt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Ut=-1,Pt={};Pt[it]=Pt[st]=Pt[at]=Pt[ut]=Pt[ct]=Pt[lt]=Pt[ft]=Pt[dt]=Pt[ht]=!0,Pt[G]=Pt[V]=Pt[ot]=Pt[$]=Pt[J]=Pt[z]=Pt[K]=Pt[Q]=Pt[X]=Pt[Z]=Pt[et]=Pt[tt]=Pt[nt]=Pt[rt]=!1;var Ft={};Ft[G]=Ft[V]=Ft[ot]=Ft[$]=Ft[J]=Ft[it]=Ft[st]=Ft[at]=Ft[ut]=Ft[ct]=Ft[X]=Ft[Z]=Ft[et]=Ft[nt]=Ft[lt]=Ft[ft]=Ft[dt]=Ft[ht]=!0,Ft[z]=Ft[K]=Ft[Q]=Ft[tt]=Ft[rt]=!1;var Bt={leading:!1,maxWait:0,trailing:!1},Yt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Wt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Gt={"function":!0,object:!0},Vt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$t=Gt[typeof window]&&window!==(this&&this.window)?window:this,Jt=Gt[typeof n]&&n&&!n.nodeType&&n,zt=Gt[typeof t]&&t&&!t.nodeType&&t,Kt=Jt&&zt&&"object"==typeof e&&e;!Kt||Kt.global!==Kt&&Kt.window!==Kt&&Kt.self!==Kt||($t=Kt);var Qt=zt&&zt.exports===Jt&&Jt,Xt=S();"function"==typeof define&&"object"==typeof define.amd&&define.amd?($t._=Xt,define(function(){return Xt})):Jt&&zt?Qt?(zt.exports=Xt)._=Xt:Jt._=Xt:$t._=Xt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/moment/moment.js":[function(e,t){(function(n){(function(r){function o(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function i(e,t){return jt.call(e,t)}function s(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(e){St.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function u(e,t){var n=!0;return g(function(){return n&&(a(e),n=!1),t.apply(this,arguments)},t)}function c(e,t){En[e]||(a(t),En[e]=!0)}function l(e,t){return function(n){return b(e.call(this,n),t)}}function f(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function d(e,t){var n,r,o=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(o,"months");
return 0>t-i?(n=e.clone().add(o-1,"months"),r=(t-i)/(i-n)):(n=e.clone().add(o+1,"months"),r=(t-i)/(n-i)),-(o+r)}function h(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function p(){}function v(e,t){t!==!1&&q(e),_(this,e),this._d=new Date(+e._d),Sn===!1&&(Sn=!0,St.updateOffset(this),Sn=!1)}function m(e){var t=D(e),n=t.year||0,r=t.quarter||0,o=t.month||0,i=t.week||0,s=t.day||0,a=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*c+6e4*u+36e5*a,this._days=+s+7*i,this._months=+o+3*r+12*n,this._data={},this._locale=St.localeData(),this._bubble()}function g(e,t){for(var n in t)i(t,n)&&(e[n]=t[n]);return i(t,"toString")&&(e.toString=t.toString),i(t,"valueOf")&&(e.valueOf=t.valueOf),e}function _(e,t){var n,r,o;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Pt.length>0)for(n in Pt)r=Pt[n],o=t[r],"undefined"!=typeof o&&(e[r]=o);return e}function y(e){return 0>e?Math.ceil(e):Math.floor(e)}function b(e,t,n){for(var r=""+Math.abs(e),o=e>=0;r.length<t;)r="0"+r;return(o?n?"+":"":"-")+r}function w(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function E(e,t){var n;return t=B(t,e),e.isBefore(t)?n=w(e,t):(n=w(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function k(e,t){return function(n,r){var o,i;return null===r||isNaN(+r)||(c(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),i=n,n=r,r=i),n="string"==typeof n?+n:n,o=St.duration(n,r),S(this,o,e),this}}function S(e,t,n,r){var o=t._milliseconds,i=t._days,s=t._months;r=null==r?!0:r,o&&e._d.setTime(+e._d+o*n),i&&_t(e,"Date",gt(e,"Date")+i*n),s&&mt(e,gt(e,"Month")+s*n),r&&St.updateOffset(e,i||s)}function x(e){return"[object Array]"===Object.prototype.toString.call(e)}function T(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function O(e,t,n){var r,o=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0;for(r=0;o>r;r++)(n&&e[r]!==t[r]||!n&&I(e[r])!==I(t[r]))&&s++;return s+i}function A(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=vn[e]||mn[t]||t}return e}function D(e){var t,n,r={};for(n in e)i(e,n)&&(t=A(n),t&&(r[t]=e[n]));return r}function j(e){var t,n;if(0===e.indexOf("week"))t=7,n="day";else{if(0!==e.indexOf("month"))return;t=12,n="month"}St[e]=function(o,i){var s,a,u=St._locale[e],c=[];if("number"==typeof o&&(i=o,o=r),a=function(e){var t=St().utc().set(n,e);return u.call(St._locale,t,o||"")},null!=i)return a(i);for(s=0;t>s;s++)c.push(a(s));return c}}function I(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function R(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function C(e,t,n){return dt(St([e,11,31+t-n]),t,n).week}function L(e){return M(e)?366:365}function M(e){return e%4===0&&e%100!==0||e%400===0}function q(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Rt]<0||e._a[Rt]>11?Rt:e._a[Ct]<1||e._a[Ct]>R(e._a[It],e._a[Rt])?Ct:e._a[Lt]<0||e._a[Lt]>24||24===e._a[Lt]&&(0!==e._a[Mt]||0!==e._a[qt]||0!==e._a[Nt])?Lt:e._a[Mt]<0||e._a[Mt]>59?Mt:e._a[qt]<0||e._a[qt]>59?qt:e._a[Nt]<0||e._a[Nt]>999?Nt:-1,e._pf._overflowDayOfYear&&(It>t||t>Ct)&&(t=Ct),e._pf.overflow=t)}function N(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===r)),e._isValid}function U(e){return e?e.toLowerCase().replace("_","-"):e}function P(e){for(var t,n,r,o,i=0;i<e.length;){for(o=U(e[i]).split("-"),t=o.length,n=U(e[i+1]),n=n?n.split("-"):null;t>0;){if(r=F(o.slice(0,t).join("-")))return r;if(n&&n.length>=t&&O(o,n,!0)>=t-1)break;t--}i++}return null}function F(t){var n=null;if(!Ut[t]&&Ft)try{n=St.locale(),e("./locale/"+t),St.locale(n)}catch(r){}return Ut[t]}function B(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(St.isMoment(e)||T(e)?+e:+St(e))-+n,n._d.setTime(+n._d+r),St.updateOffset(n,!1),n):St(e).local()}function Y(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function H(e){var t,n,r=e.match(Wt);for(t=0,n=r.length;n>t;t++)r[t]=wn[r[t]]?wn[r[t]]:Y(r[t]);return function(o){var i="";for(t=0;n>t;t++)i+=r[t]instanceof Function?r[t].call(o,e):r[t];return i}}function W(e,t){return e.isValid()?(t=G(t,e.localeData()),gn[t]||(gn[t]=H(t)),gn[t](e)):e.localeData().invalidDate()}function G(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Gt.lastIndex=0;r>=0&&Gt.test(e);)e=e.replace(Gt,n),Gt.lastIndex=0,r-=1;return e}function V(e,t){var n,r=t._strict;switch(e){case"Q":return nn;case"DDDD":return on;case"YYYY":case"GGGG":case"gggg":return r?sn:Jt;case"Y":case"G":case"g":return un;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?an:zt;case"S":if(r)return nn;case"SS":if(r)return rn;case"SSS":if(r)return on;case"DDD":return $t;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Qt;case"a":case"A":return t._locale._meridiemParse;case"x":return en;case"X":return tn;case"Z":case"ZZ":return Xt;case"T":return Zt;case"SSSS":return Kt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?rn:Vt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Vt;case"Do":return r?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(tt(et(e.replace("\\","")),"i"))}}function $(e){e=e||"";var t=e.match(Xt)||[],n=t[t.length-1]||[],r=(n+"").match(hn)||["-",0,0],o=+(60*r[1])+I(r[2]);return"+"===r[0]?o:-o}function J(e,t,n){var r,o=n._a;switch(e){case"Q":null!=t&&(o[Rt]=3*(I(t)-1));break;case"M":case"MM":null!=t&&(o[Rt]=I(t)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(t,e,n._strict),null!=r?o[Rt]=r:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(o[Ct]=I(t));break;case"Do":null!=t&&(o[Ct]=I(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=I(t));break;case"YY":o[It]=St.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":o[It]=I(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":o[Lt]=I(t);break;case"m":case"mm":o[Mt]=I(t);break;case"s":case"ss":o[qt]=I(t);break;case"S":case"SS":case"SSS":case"SSSS":o[Nt]=I(1e3*("0."+t));break;case"x":n._d=new Date(I(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=$(t);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(t),null!=r?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=I(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=St.parseTwoDigitYear(t)}}function z(e){var t,n,r,i,s,a,u;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(s=1,a=4,n=o(t.GG,e._a[It],dt(St(),1,4).year),r=o(t.W,1),i=o(t.E,1)):(s=e._locale._week.dow,a=e._locale._week.doy,n=o(t.gg,e._a[It],dt(St(),s,a).year),r=o(t.w,1),null!=t.d?(i=t.d,s>i&&++r):i=null!=t.e?t.e+s:s),u=ht(n,r,i,a,s),e._a[It]=u.year,e._dayOfYear=u.dayOfYear}function K(e){var t,n,r,i,s=[];if(!e._d){for(r=X(e),e._w&&null==e._a[Ct]&&null==e._a[Rt]&&z(e),e._dayOfYear&&(i=o(e._a[It],r[It]),e._dayOfYear>L(i)&&(e._pf._overflowDayOfYear=!0),n=ut(i,0,e._dayOfYear),e._a[Rt]=n.getUTCMonth(),e._a[Ct]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;7>t;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Lt]&&0===e._a[Mt]&&0===e._a[qt]&&0===e._a[Nt]&&(e._nextDay=!0,e._a[Lt]=0),e._d=(e._useUTC?ut:at).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Lt]=24)}}function Q(e){var t;e._d||(t=D(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],K(e))}function X(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Z(e){if(e._f===St.ISO_8601)return void rt(e);e._a=[],e._pf.empty=!0;var t,n,o,i,s,a=""+e._i,u=a.length,c=0;for(o=G(e._f,e._locale).match(Wt)||[],t=0;t<o.length;t++)i=o[t],n=(a.match(V(i,e))||[])[0],n&&(s=a.substr(0,a.indexOf(n)),s.length>0&&e._pf.unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),c+=n.length),wn[i]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(i),J(i,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(i);e._pf.charsLeftOver=u-c,a.length>0&&e._pf.unusedInput.push(a),e._pf.bigHour===!0&&e._a[Lt]<=12&&(e._pf.bigHour=r),e._a[Lt]=h(e._locale,e._a[Lt],e._meridiem),K(e),q(e)}function et(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,o){return t||n||r||o})}function tt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function nt(e){var t,n,r,o,i;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(o=0;o<e._f.length;o++)i=0,t=_({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=s(),t._f=e._f[o],Z(t),N(t)&&(i+=t._pf.charsLeftOver,i+=10*t._pf.unusedTokens.length,t._pf.score=i,(null==r||r>i)&&(r=i,n=t));g(e,n||t)}function rt(e){var t,n,r=e._i,o=cn.exec(r);if(o){for(e._pf.iso=!0,t=0,n=fn.length;n>t;t++)if(fn[t][1].exec(r)){e._f=fn[t][0]+(o[6]||" ");break}for(t=0,n=dn.length;n>t;t++)if(dn[t][1].exec(r)){e._f+=dn[t][0];break}r.match(Xt)&&(e._f+="Z"),Z(e)}else e._isValid=!1}function ot(e){rt(e),e._isValid===!1&&(delete e._isValid,St.createFromInputFallback(e))}function it(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function st(e){var t,n=e._i;n===r?e._d=new Date:T(n)?e._d=new Date(+n):null!==(t=Bt.exec(n))?e._d=new Date(+t[1]):"string"==typeof n?ot(e):x(n)?(e._a=it(n.slice(0),function(e){return parseInt(e,10)}),K(e)):"object"==typeof n?Q(e):"number"==typeof n?e._d=new Date(n):St.createFromInputFallback(e)}function at(e,t,n,r,o,i,s){var a=new Date(e,t,n,r,o,i,s);return 1970>e&&a.setFullYear(e),a}function ut(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ct(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function lt(e,t,n,r,o){return o.relativeTime(t||1,!!n,e,r)}function ft(e,t,n){var r=St.duration(e).abs(),o=Dt(r.as("s")),i=Dt(r.as("m")),s=Dt(r.as("h")),a=Dt(r.as("d")),u=Dt(r.as("M")),c=Dt(r.as("y")),l=o<_n.s&&["s",o]||1===i&&["m"]||i<_n.m&&["mm",i]||1===s&&["h"]||s<_n.h&&["hh",s]||1===a&&["d"]||a<_n.d&&["dd",a]||1===u&&["M"]||u<_n.M&&["MM",u]||1===c&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,lt.apply({},l)}function dt(e,t,n){var r,o=n-t,i=n-e.day();return i>o&&(i-=7),o-7>i&&(i+=7),r=St(e).add(i,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ht(e,t,n,r,o){var i,s,a=ut(e,0,1).getUTCDay();return a=0===a?7:a,n=null!=n?n:o,i=o-a+(a>r?7:0)-(o>a?7:0),s=7*(t-1)+(n-o)+i+1,{year:s>0?e:e-1,dayOfYear:s>0?s:L(e-1)+s}}function pt(e){var t,n=e._i,o=e._f;return e._locale=e._locale||St.localeData(e._l),null===n||o===r&&""===n?St.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),St.isMoment(n)?new v(n,!0):(o?x(o)?nt(e):Z(e):st(e),t=new v(e),t._nextDay&&(t.add(1,"d"),t._nextDay=r),t))}function vt(e,t){var n,r;if(1===t.length&&x(t[0])&&(t=t[0]),!t.length)return St();for(n=t[0],r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function mt(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),R(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function gt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function _t(e,t,n){return"Month"===t?mt(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function yt(e,t){return function(n){return null!=n?(_t(this,e,n),St.updateOffset(this,t),this):gt(this,e)}}function bt(e){return 400*e/146097}function wt(e){return 146097*e/400}function Et(e){St.duration.fn[e]=function(){return this._data[e]}}function kt(e){"undefined"==typeof ender&&(xt=At.moment,At.moment=e?u("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",St):St)}for(var St,xt,Tt,Ot="2.9.0",At="undefined"==typeof n||"undefined"!=typeof window&&window!==n.window?this:n,Dt=Math.round,jt=Object.prototype.hasOwnProperty,It=0,Rt=1,Ct=2,Lt=3,Mt=4,qt=5,Nt=6,Ut={},Pt=[],Ft="undefined"!=typeof t&&t&&t.exports,Bt=/^\/?Date\((\-?\d+)/i,Yt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ht=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Wt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Gt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Vt=/\d\d?/,$t=/\d{1,3}/,Jt=/\d{1,4}/,zt=/[+\-]?\d{1,6}/,Kt=/\d+/,Qt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Xt=/Z|[\+\-]\d\d:?\d\d/gi,Zt=/T/i,en=/[\+\-]?\d+/,tn=/[\+\-]?\d+(\.\d{1,3})?/,nn=/\d/,rn=/\d\d/,on=/\d{3}/,sn=/\d{4}/,an=/[+-]?\d{6}/,un=/[+-]?\d+/,cn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ln="YYYY-MM-DDTHH:mm:ssZ",fn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],dn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hn=/([\+\-]|\d\d)/gi,pn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),vn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},mn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},gn={},_n={s:45,m:45,h:22,d:26,M:11},yn="DDD w W M D d".split(" "),bn="M D H h m s w W".split(" "),wn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return b(this.year()%100,2)},YYYY:function(){return b(this.year(),4)},YYYYY:function(){return b(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+b(Math.abs(e),6)},gg:function(){return b(this.weekYear()%100,2)},gggg:function(){return b(this.weekYear(),4)},ggggg:function(){return b(this.weekYear(),5)},GG:function(){return b(this.isoWeekYear()%100,2)},GGGG:function(){return b(this.isoWeekYear(),4)},GGGGG:function(){return b(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return I(this.milliseconds()/100)},SS:function(){return b(I(this.milliseconds()/10),2)},SSS:function(){return b(this.milliseconds(),3)},SSSS:function(){return b(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+b(I(e/60),2)+":"+b(I(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+b(I(e/60),2)+b(I(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},En={},kn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],Sn=!1;yn.length;)Tt=yn.pop(),wn[Tt+"o"]=f(wn[Tt],Tt);for(;bn.length;)Tt=bn.pop(),wn[Tt+Tt]=l(wn[Tt],2);wn.DDDD=l(wn.DDD,3),g(p.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var r,o,i;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(o=St.utc([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=St([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.apply(t,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var o=this._relativeTime[n];return"function"==typeof o?o(e,t,n,r):o.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return dt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),St=function(e,t,n,o){var i;return"boolean"==typeof n&&(o=n,n=r),i={},i._isAMomentObject=!0,i._i=e,i._f=t,i._l=n,i._strict=o,i._isUTC=!1,i._pf=s(),pt(i)},St.suppressDeprecationWarnings=!1,St.createFromInputFallback=u("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),St.min=function(){var e=[].slice.call(arguments,0);return vt("isBefore",e)},St.max=function(){var e=[].slice.call(arguments,0);return vt("isAfter",e)},St.utc=function(e,t,n,o){var i;return"boolean"==typeof n&&(o=n,n=r),i={},i._isAMomentObject=!0,i._useUTC=!0,i._isUTC=!0,i._l=n,i._i=e,i._f=t,i._strict=o,i._pf=s(),pt(i).utc()},St.unix=function(e){return St(1e3*e)},St.duration=function(e,t){var n,r,o,s,a=e,u=null;return St.isDuration(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(u=Yt.exec(e))?(n="-"===u[1]?-1:1,a={y:0,d:I(u[Ct])*n,h:I(u[Lt])*n,m:I(u[Mt])*n,s:I(u[qt])*n,ms:I(u[Nt])*n}):(u=Ht.exec(e))?(n="-"===u[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},a={y:o(u[2]),M:o(u[3]),d:o(u[4]),h:o(u[5]),m:o(u[6]),s:o(u[7]),w:o(u[8])}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(s=E(St(a.from),St(a.to)),a={},a.ms=s.milliseconds,a.M=s.months),r=new m(a),St.isDuration(e)&&i(e,"_locale")&&(r._locale=e._locale),r},St.version=Ot,St.defaultFormat=ln,St.ISO_8601=function(){},St.momentProperties=Pt,St.updateOffset=function(){},St.relativeTimeThreshold=function(e,t){return _n[e]===r?!1:t===r?_n[e]:(_n[e]=t,!0)},St.lang=u("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return St.locale(e,t)}),St.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?St.defineLocale(e,t):St.localeData(e),n&&(St.duration._locale=St._locale=n)),St._locale._abbr},St.defineLocale=function(e,t){return null!==t?(t.abbr=e,Ut[e]||(Ut[e]=new p),Ut[e].set(t),St.locale(e),Ut[e]):(delete Ut[e],null)},St.langData=u("moment.langData is deprecated. Use moment.localeData instead.",function(e){return St.localeData(e)}),St.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return St._locale;if(!x(e)){if(t=F(e))return t;e=[e]}return P(e)},St.isMoment=function(e){return e instanceof v||null!=e&&i(e,"_isAMomentObject")},St.isDuration=function(e){return e instanceof m};for(Tt=kn.length-1;Tt>=0;--Tt)j(kn[Tt]);St.normalizeUnits=function(e){return A(e)},St.invalid=function(e){var t=St.utc(0/0);return null!=e?g(t._pf,e):t._pf.userInvalidated=!0,t},St.parseZone=function(){return St.apply(null,arguments).parseZone()},St.parseTwoDigitYear=function(e){return I(e)+(I(e)>68?1900:2e3)},St.isDate=T,g(St.fn=v.prototype,{clone:function(){return St(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=St(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():W(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return N(this)},isDSTShifted:function(){return this._a?this.isValid()&&O(this._a,(this._isUTC?St.utc(this._a):St(this._a)).toArray())>0:!1},parsingFlags:function(){return g({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=W(this,e||St.defaultFormat);return this.localeData().postformat(t)},add:k(1,"add"),subtract:k(-1,"subtract"),diff:function(e,t,n){var r,o,i=B(e,this),s=6e4*(i.utcOffset()-this.utcOffset());return t=A(t),"year"===t||"month"===t||"quarter"===t?(o=d(this,i),"quarter"===t?o/=3:"year"===t&&(o/=12)):(r=this-i,o="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-s)/864e5:"week"===t?(r-s)/6048e5:r),n?o:y(o)},from:function(e,t){return St.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(St(),e)},calendar:function(e){var t=e||St(),n=B(t,this).startOf("day"),r=this.diff(n,"days",!0),o=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,St(t)))},isLeapYear:function(){return M(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ct(e,this.localeData()),this.add(e-t,"d")):t},month:yt("Month",!0),startOf:function(e){switch(e=A(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=A(e),e===r||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){var n;return t=A("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=St.isMoment(e)?e:St(e),+this>+e):(n=St.isMoment(e)?+e:+St(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=A("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=St.isMoment(e)?e:St(e),+e>+this):(n=St.isMoment(e)?+e:+St(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return t=A(t||"millisecond"),"millisecond"===t?(e=St.isMoment(e)?e:St(e),+this===+e):(n=+St(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:u("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=St.apply(null,arguments),this>e?this:e}),max:u("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=St.apply(null,arguments),e>this?this:e}),zone:u("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,r=this._offset||0;return null!=e?("string"==typeof e&&(e=$(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==e&&(!t||this._changeInProgress?S(this,St.duration(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,St.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset($(this._i)),this},hasAlignedHourOffset:function(e){return e=e?St(e).utcOffset():0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return R(this.year(),this.month())},dayOfYear:function(e){var t=Dt((St(this).startOf("day")-St(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=dt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=dt(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=dt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return C(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return C(this.year(),e.dow,e.doy)},get:function(e){return e=A(e),this[e]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else e=A(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(e){var t;return e===r?this._locale._abbr:(t=St.localeData(e),null!=t&&(this._locale=t),this)},lang:u("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===r?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),St.fn.millisecond=St.fn.milliseconds=yt("Milliseconds",!1),St.fn.second=St.fn.seconds=yt("Seconds",!1),St.fn.minute=St.fn.minutes=yt("Minutes",!1),St.fn.hour=St.fn.hours=yt("Hours",!0),St.fn.date=yt("Date",!0),St.fn.dates=u("dates accessor is deprecated. Use date instead.",yt("Date",!0)),St.fn.year=yt("FullYear",!0),St.fn.years=u("years accessor is deprecated. Use year instead.",yt("FullYear",!0)),St.fn.days=St.fn.day,St.fn.months=St.fn.month,St.fn.weeks=St.fn.week,St.fn.isoWeeks=St.fn.isoWeek,St.fn.quarters=St.fn.quarter,St.fn.toJSON=St.fn.toISOString,St.fn.isUTC=St.fn.isUtc,g(St.duration.fn=m.prototype,{_bubble:function(){var e,t,n,r=this._milliseconds,o=this._days,i=this._months,s=this._data,a=0;s.milliseconds=r%1e3,e=y(r/1e3),s.seconds=e%60,t=y(e/60),s.minutes=t%60,n=y(t/60),s.hours=n%24,o+=y(n/24),a=y(bt(o)),o-=y(wt(a)),i+=y(o/30),o%=30,a+=y(i/12),i%=12,s.days=o,s.months=i,s.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return y(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*I(this._months/12)},humanize:function(e){var t=ft(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=St.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=St.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=A(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=A(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*bt(t),"month"===e?n:n/12;switch(t=this._days+Math.round(wt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;
case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:St.fn.lang,locale:St.fn.locale,toIsoString:u("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),o=Math.abs(this.minutes()),i=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||o||i?"T":"")+(r?r+"H":"")+(o?o+"M":"")+(i?i+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),St.duration.fn.toString=St.duration.fn.toISOString;for(Tt in pn)i(pn,Tt)&&Et(Tt.toLowerCase());St.duration.fn.asMilliseconds=function(){return this.as("ms")},St.duration.fn.asSeconds=function(){return this.as("s")},St.duration.fn.asMinutes=function(){return this.as("m")},St.duration.fn.asHours=function(){return this.as("h")},St.duration.fn.asDays=function(){return this.as("d")},St.duration.fn.asWeeks=function(){return this.as("weeks")},St.duration.fn.asMonths=function(){return this.as("M")},St.duration.fn.asYears=function(){return this.as("y")},St.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===I(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Ft?t.exports=St:"function"==typeof define&&define.amd?(define(function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(At.moment=xt),St}),kt(!0)):kt()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/pouchdb/dist/pouchdb.js":[function(require,module,exports){(function(global){!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.PouchDB=e()}}(function(){var define,module,exports;return function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t){"use strict";function n(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n)===!0)return e[n];return!1}function r(e){return function(t,n){t||n[0]&&n[0].error?e(t||n[0]):e(null,n.length?n[0]:n)}}function o(e){var t={},n=[];return u.traverseRevTree(e,function(e,r,o,i){var s=r+"-"+o;return e&&(t[s]=0),void 0!==i&&n.push({from:i,to:s}),s}),n.reverse(),n.forEach(function(e){t[e.from]=void 0===t[e.from]?1+t[e.to]:Math.min(t[e.from],1+t[e.to])}),t}function i(e,t,n){var r="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;if(t.descending&&r.reverse(),!r.length)return e._allDocs({limit:0},n);var o={offset:t.skip};return h.all(r.map(function(n){var r=a.extend(!0,{key:n,deleted:"ok"},t);return["limit","skip","keys"].forEach(function(e){delete r[e]}),new h(function(t,i){e._allDocs(r,function(e,r){return e?i(e):(o.total_rows=r.total_rows,void t(r.rows[0]||{key:n,error:"not_found"}))})})})).then(function(e){return o.rows=e,o})}function s(){var e=this;l.call(this);var t,n=0,r=["change","delete","create","update"];this.on("newListener",function(o){if(~r.indexOf(o)){if(n)return void n++;n++;var i=0;t=this.changes({conflicts:!0,include_docs:!0,continuous:!0,since:"now",onChange:function(t){t.seq<=i||(i=t.seq,e.emit("change",t),t.doc._deleted?e.emit("delete",t):"1"===t.doc._rev.split("-")[0]?e.emit("create",t):e.emit("update",t))}})}}),this.on("removeListener",function(e){~r.indexOf(e)&&(n--,n||t.cancel())})}var a=e(34),u=e(29),c=e(19),l=e(38).EventEmitter,f=e(25),d=e(13),h=a.Promise;a.inherits(s,l),t.exports=s,s.prototype.post=a.adapterFun("post",function(e,t,n){return"function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e)?n(c.error(c.NOT_AN_OBJECT)):void this.bulkDocs({docs:[e]},t,r(n))}),s.prototype.put=a.adapterFun("put",a.getArguments(function(e){var t,n,o,i,s=e.shift(),u="_id"in s;if("object"!=typeof s||Array.isArray(s))return(i=e.pop())(c.error(c.NOT_AN_OBJECT));for(s=a.clone(s);;)if(t=e.shift(),n=typeof t,"string"!==n||u?"string"!==n||!u||"_rev"in s?"object"===n?o=t:"function"===n&&(i=t):s._rev=t:(s._id=t,u=!0),!e.length)break;o=o||{};var l=a.invalidIdError(s._id);return l?i(l):a.isLocalId(s._id)&&"function"==typeof this._putLocal?s._deleted?this._removeLocal(s,i):this._putLocal(s,i):void this.bulkDocs({docs:[s]},o,r(i))})),s.prototype.putAttachment=a.adapterFun("putAttachment",function(e,t,n,r,o,i){function s(e){return e._attachments=e._attachments||{},e._attachments[t]={content_type:o,data:r},a.put(e)}var a=this;return"function"==typeof o&&(i=o,o=r,r=n,n=null),"undefined"==typeof o&&(o=r,r=n,n=null),a.get(e).then(function(e){if(e._rev!==n)throw c.error(c.REV_CONFLICT);return s(e)},function(t){if(t.reason===c.MISSING_DOC.message)return s({_id:e});throw t})}),s.prototype.removeAttachment=a.adapterFun("removeAttachment",function(e,t,n,r){var o=this;o.get(e,function(e,i){return e?void r(e):i._rev!==n?void r(c.error(c.REV_CONFLICT)):i._attachments?(delete i._attachments[t],0===Object.keys(i._attachments).length&&delete i._attachments,void o.put(i,r)):r()})}),s.prototype.remove=a.adapterFun("remove",function(e,t,n,o){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(o=n,n={})):(i=e,"function"==typeof t?(o=t,n={}):(o=n,n=t)),n=a.clone(n||{}),n.was_delete=!0;var s={_id:i._id,_rev:i._rev||n.rev};return s._deleted=!0,a.isLocalId(s._id)&&"function"==typeof this._removeLocal?this._removeLocal(i,o):void this.bulkDocs({docs:[s]},n,r(o))}),s.prototype.revsDiff=a.adapterFun("revsDiff",function(e,t,n){function r(e,t){c.has(e)||c.set(e,{missing:[]}),c.get(e).missing.push(t)}function o(t,n){var o=e[t].slice(0);u.traverseRevTree(n,function(e,n,i,s,a){var u=n+"-"+i,c=o.indexOf(u);-1!==c&&(o.splice(c,1),"available"!==a.status&&r(t,u))}),o.forEach(function(e){r(t,e)})}"function"==typeof t&&(n=t,t={}),t=a.clone(t);var i=Object.keys(e);if(!i.length)return n(null,{});var s=0,c=new a.Map;i.map(function(t){this._getRevisionTree(t,function(r,a){if(r&&404===r.status&&"missing"===r.message)c.set(t,{missing:e[t]});else{if(r)return n(r);o(t,a)}if(++s===i.length){var u={};return c.forEach(function(e,t){u[t]=e}),n(null,u)}})},this)}),s.prototype.compactDocument=a.adapterFun("compactDocument",function(e,t,n){var r=this;this._getRevisionTree(e,function(i,s){if(i)return n(i);var a=o(s),c=[],l=[];Object.keys(a).forEach(function(e){a[e]>t&&c.push(e)}),u.traverseRevTree(s,function(e,t,n,r,o){var i=t+"-"+n;"available"===o.status&&-1!==c.indexOf(i)&&l.push(i)}),r._doCompaction(e,l,n)})}),s.prototype.compact=a.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={});var n=this;e=a.clone(e||{}),n.get("_local/compaction")["catch"](function(){return!1}).then(function(r){return"function"==typeof n._compact?(r&&r.last_seq&&(e.last_seq=r.last_seq),n._compact(e,t)):void 0})}),s.prototype._compact=function(e,t){function n(e){s.push(o.compactDocument(e.id,0))}function r(e){var n=e.last_seq;h.all(s).then(function(){return f(o,"_local/compaction",function(e){return!e.last_seq||e.last_seq<n?(e.last_seq=n,e):!1})}).then(function(){t(null,{ok:!0})})["catch"](t)}var o=this,i={returnDocs:!1,last_seq:e.last_seq||0},s=[];o.changes(i).on("change",n).on("complete",r).on("error",t)},s.prototype.get=a.adapterFun("get",function(e,t,r){function o(){var n=[],o=i.length;return o?void i.forEach(function(i){s.get(e,{rev:i,revs:t.revs,attachments:t.attachments},function(e,t){n.push(e?{missing:i}:{ok:t}),o--,o||r(null,n)})}):r(null,n)}if("function"==typeof t&&(r=t,t={}),"string"!=typeof e)return r(c.error(c.INVALID_ID));if(a.isLocalId(e)&&"function"==typeof this._getLocal)return this._getLocal(e,r);var i=[],s=this;if(!t.open_revs)return this._get(e,t,function(e,o){if(t=a.clone(t),e)return r(e);var i=o.doc,c=o.metadata,l=o.ctx;if(t.conflicts){var f=u.collectConflicts(c);f.length&&(i._conflicts=f)}if(a.isDeleted(c,i._rev)&&(i._deleted=!0),t.revs||t.revs_info){var d=u.rootToLeaf(c.rev_tree),h=n(d,function(e){return-1!==e.ids.map(function(e){return e.id}).indexOf(i._rev.split("-")[1])}),p=h.ids.map(function(e){return e.id}).indexOf(i._rev.split("-")[1])+1,v=h.ids.length-p;if(h.ids.splice(p,v),h.ids.reverse(),t.revs&&(i._revisions={start:h.pos+h.ids.length-1,ids:h.ids.map(function(e){return e.id})}),t.revs_info){var m=h.pos+h.ids.length;i._revs_info=h.ids.map(function(e){return m--,{rev:m+"-"+e.id,status:e.opts.status}})}}if(t.local_seq&&(a.info('The "local_seq" option is deprecated and will be removed'),i._local_seq=o.metadata.seq),t.attachments&&i._attachments){var g=i._attachments,_=Object.keys(g).length;if(0===_)return r(null,i);Object.keys(g).forEach(function(e){this._getAttachment(g[e],{encode:!0,ctx:l},function(t,n){var o=i._attachments[e];o.data=n,delete o.stub,delete o.length,--_||r(null,i)})},s)}else{if(i._attachments)for(var y in i._attachments)i._attachments.hasOwnProperty(y)&&(i._attachments[y].stub=!0);r(null,i)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){return e?r(e):(i=u.collectLeaves(t).map(function(e){return e.rev}),void o())});else{if(!Array.isArray(t.open_revs))return r(c.error(c.UNKNOWN_ERROR,"function_clause"));i=t.open_revs;for(var l=0;l<i.length;l++){var f=i[l];if("string"!=typeof f||!/^\d+-/.test(f))return r(c.error(c.INVALID_REV))}o()}}),s.prototype.getAttachment=a.adapterFun("getAttachment",function(e,t,n,r){var o=this;n instanceof Function&&(r=n,n={}),n=a.clone(n),this._get(e,n,function(e,i){return e?r(e):i.doc._attachments&&i.doc._attachments[t]?(n.ctx=i.ctx,void o._getAttachment(i.doc._attachments[t],n,r)):r(c.error(c.MISSING_DOC))})}),s.prototype.allDocs=a.adapterFun("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e=a.clone(e),e.skip="undefined"!=typeof e.skip?e.skip:0,"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(n)return void t(c.error(c.QUERY_PARSE_ERROR,"Query parameter `"+n+"` is not compatible with multi-get"));if("http"!==this.type())return i(this,e,t)}return this._allDocs(e,t)}),s.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new d(this,e,t)},s.prototype.close=a.adapterFun("close",function(e){return this._closed=!0,this._close(e)}),s.prototype.info=a.adapterFun("info",function(e){var t=this;this._info(function(n,r){return n?e(n):(r.db_name=r.db_name||t._db_name,r.auto_compaction=!(!t.auto_compaction||"http"===t.type()),void e(null,r))})}),s.prototype.id=a.adapterFun("id",function(e){return this._id(e)}),s.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},s.prototype.bulkDocs=a.adapterFun("bulkDocs",function(e,t,n){if("function"==typeof t&&(n=t,t={}),t=a.clone(t),Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(c.error(c.MISSING_BULK_DOCS));for(var r=0;r<e.docs.length;++r)if("object"!=typeof e.docs[r]||Array.isArray(e.docs[r]))return n(c.error(c.NOT_AN_OBJECT));return e=a.clone(e),"new_edits"in t||(t.new_edits="new_edits"in e?e.new_edits:!0),t.new_edits||"http"===this.type()||e.docs.sort(function(e,t){var n=a.compare(e._id,t._id);if(0!==n)return n;var r=e._revisions?e._revisions.start:0,o=t._revisions?t._revisions.start:0;return a.compare(r,o)}),e.docs.forEach(function(e){e._deleted&&delete e._attachments}),this._bulkDocs(e,t,function(e,r){return e?n(e):(t.new_edits||(r=r.filter(function(e){return e.error})),void n(null,r))})}),s.prototype.registerDependentDatabase=a.adapterFun("registerDependentDatabase",function(e,t){function n(t){return t.dependentDbs=t.dependentDbs||{},t.dependentDbs[e]?!1:(t.dependentDbs[e]=!0,t)}var r=new this.constructor(e,this.__opts||{});f(this,"_local/_pouch_dependentDbs",n,function(e){return e?t(e):t(null,{db:r})})})},{}],2:[function(e,t){(function(n){"use strict";function r(e){return/^_(design|local)/.test(e)?e:encodeURIComponent(e)}function o(e){return e._attachments&&Object.keys(e._attachments)?f.Promise.all(Object.keys(e._attachments).map(function(t){var n=e._attachments[t];if(n.data&&"string"!=typeof n.data){if(p)return new f.Promise(function(e){f.readAsBinaryString(n.data,function(t){n.data=f.btoa(t),e()})});n.data=n.data.toString("base64")}})):f.Promise.resolve()}function i(e,t){if(/http(s?):/.test(e)){var n=f.parseUri(e);n.remote=!0,(n.user||n.password)&&(n.auth={username:n.user,password:n.password});var r=n.path.replace(/(^\/|\/$)/g,"").split("/");if(n.db=r.pop(),n.path=r.join("/"),t=t||{},t=f.clone(t),n.headers=t.headers||t.ajax&&t.ajax.headers||{},t.auth||n.auth){var o=t.auth||n.auth,i=f.btoa(o.username+":"+o.password);n.headers.Authorization="Basic "+i}return t.headers&&(n.headers=t.headers),n}return{host:"",path:"/",db:e,auth:!1}}function s(e,t){return a(e,e.db+"/"+t)}function a(e,t){if(e.remote){var n=e.path?"/":"";return e.protocol+"://"+e.host+":"+e.port+"/"+e.path+n+t}return"/"+t}function u(e,t){function n(e,t){var n=f.extend({},y,e);return h(n.method+" "+n.url),f.ajax(n,t)}function u(e){return e.split("/").map(encodeURIComponent).join("/")}var m=this;m.getHost=e.getHost?e.getHost:i;var g=m.getHost(e.name,e),_=s(g,"");m.getUrl=function(){return _},m.getHeaders=function(){return f.clone(g.headers)};var y=e.ajax||{};e=f.clone(e);var b=function(){n({headers:g.headers,method:"PUT",url:_},function(e){e&&401===e.status?n({headers:g.headers,method:"HEAD",url:_},function(e){e?t(e):t(null,m)}):e&&412!==e.status?t(e):t(null,m)})};e.skipSetup||n({headers:g.headers,method:"GET",url:_},function(e){e?404===e.status?(f.explain404("PouchDB is just detecting if the remote DB exists."),b()):t(e):t(null,m)}),m.type=function(){return"http"},m.id=f.adapterFun("id",function(e){n({headers:g.headers,method:"GET",url:a(g,"")},function(t,n){var r=n&&n.uuid?n.uuid+g.db:s(g,"");e(null,r)})}),m.request=f.adapterFun("request",function(e,t){e.headers=g.headers,e.url=s(g,e.url),n(e,t)}),m.compact=f.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={}),e=f.clone(e),n({headers:g.headers,url:s(g,"_compact"),method:"POST"},function(){function n(){m.info(function(r,o){o.compact_running?setTimeout(n,e.interval||200):t(null,{ok:!0})})}"function"==typeof t&&n()})}),m._info=function(e){n({headers:g.headers,method:"GET",url:s(g,"")},function(t,n){t?e(t):(n.host=s(g,""),e(null,n))})},m.get=f.adapterFun("get",function(e,t,o){"function"==typeof t&&(o=t,t={}),t=f.clone(t),void 0===t.auto_encode&&(t.auto_encode=!0);var i=[];t.revs&&i.push("revs=true"),t.revs_info&&i.push("revs_info=true"),t.local_seq&&i.push("local_seq=true"),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),i.push("open_revs="+t.open_revs)),t.attachments&&i.push("attachments=true"),t.rev&&i.push("rev="+t.rev),t.conflicts&&i.push("conflicts="+t.conflicts),i=i.join("&"),i=""===i?"":"?"+i,t.auto_encode&&(e=r(e));var a={headers:g.headers,method:"GET",url:s(g,e+i)},u=e.split("/");(u.length>1&&"_design"!==u[0]&&"_local"!==u[0]||u.length>2&&"_design"===u[0]&&"_local"!==u[0])&&(a.binary=!0),n(a,function(e,t,n){return e?o(e):void o(null,t,n)})}),m.remove=f.adapterFun("remove",function(e,t,o,i){var a;"string"==typeof t?(a={_id:e,_rev:t},"function"==typeof o&&(i=o,o={})):(a=e,"function"==typeof t?(i=t,o={}):(i=o,o=t));var u=a._rev||o.rev;n({headers:g.headers,method:"DELETE",url:s(g,r(a._id))+"?rev="+u},i)}),m.getAttachment=f.adapterFun("getAttachment",function(e,t,n,o){"function"==typeof n&&(o=n,n={}),n=f.clone(n),void 0===n.auto_encode&&(n.auto_encode=!0),n.auto_encode&&(e=r(e)),n.auto_encode=!1,m.get(e+"/"+u(t),n,o)}),m.removeAttachment=f.adapterFun("removeAttachment",function(e,t,o,i){var a=s(g,r(e)+"/"+u(t))+"?rev="+o;n({headers:g.headers,method:"DELETE",url:a},i)}),m.putAttachment=f.adapterFun("putAttachment",function(e,t,o,i,a,c){"function"==typeof a&&(c=a,a=i,i=o,o=null),"undefined"==typeof a&&(a=i,i=o,o=null);var l=r(e)+"/"+u(t),h=s(g,l);if(o&&(h+="?rev="+o),"string"==typeof i){var m;try{m=f.atob(i)}catch(_){return c(d.error(d.BAD_ARG,"Attachments need to be base64 encoded"))}i=p?f.createBlob([f.fixBinary(m)],{type:a}):m?new v(m,"binary"):""}var y={headers:f.clone(g.headers),method:"PUT",url:h,processData:!1,body:i,timeout:6e4};y.headers["Content-Type"]=a,n(y,c)}),m.put=f.adapterFun("put",f.getArguments(function(e){var t,i,a,u=e.shift(),c="_id"in u,l=e.pop();return"object"!=typeof u||Array.isArray(u)?l(d.error(d.NOT_AN_OBJECT)):(u=f.clone(u),void o(u).then(function(){for(;;)if(t=e.shift(),i=typeof t,"string"!==i||c?"string"!==i||!c||"_rev"in u?"object"===i&&(a=f.clone(t)):u._rev=t:(u._id=t,c=!0),!e.length)break;a=a||{};var o=f.invalidIdError(u._id);if(o)throw o;var d=[];a&&"undefined"!=typeof a.new_edits&&d.push("new_edits="+a.new_edits),d=d.join("&"),""!==d&&(d="?"+d),n({headers:g.headers,method:"PUT",url:s(g,r(u._id))+d,body:u},function(e,t){return e?l(e):(t.ok=!0,void l(null,t))})})["catch"](l))})),m.post=f.adapterFun("post",function(e,t,n){return"function"==typeof t&&(n=t,t={}),t=f.clone(t),"object"!=typeof e?n(d.error(d.NOT_AN_OBJECT)):("_id"in e||(e._id=f.uuid()),void m.put(e,t,function(e,t){return e?n(e):(t.ok=!0,void n(null,t))}))}),m._bulkDocs=function(e,t,r){"undefined"!=typeof t.new_edits&&(e.new_edits=t.new_edits),f.Promise.all(e.docs.map(o)).then(function(){n({headers:g.headers,method:"POST",url:s(g,"_bulk_docs"),body:e},function(e,t){return e?r(e):(t.forEach(function(e){e.ok=!0}),void r(null,t))})})["catch"](r)},m.allDocs=f.adapterFun("allDocs",function(e,t){"function"==typeof e&&(t=e,e={}),e=f.clone(e);var r,o=[],i="GET";if(e.conflicts&&o.push("conflicts=true"),e.descending&&o.push("descending=true"),e.include_docs&&o.push("include_docs=true"),e.attachments&&o.push("attachments=true"),e.key&&o.push("key="+encodeURIComponent(JSON.stringify(e.key))),e.startkey&&o.push("startkey="+encodeURIComponent(JSON.stringify(e.startkey))),e.endkey&&o.push("endkey="+encodeURIComponent(JSON.stringify(e.endkey))),"undefined"!=typeof e.inclusive_end&&o.push("inclusive_end="+!!e.inclusive_end),"undefined"!=typeof e.limit&&o.push("limit="+e.limit),"undefined"!=typeof e.skip&&o.push("skip="+e.skip),o=o.join("&"),""!==o&&(o="?"+o),"undefined"!=typeof e.keys){var a="keys="+encodeURIComponent(JSON.stringify(e.keys));a.length+o.length+1<=l?o+=(-1!==o.indexOf("?")?"&":"?")+a:(i="POST",r=JSON.stringify({keys:e.keys}))}n({headers:g.headers,method:i,url:s(g,"_all_docs"+o),body:r},t)}),m._changes=function(e){var t="batch_size"in e?e.batch_size:c;e=f.clone(e),e.timeout=e.timeout||3e4;var r={timeout:e.timeout-5e3},o="undefined"!=typeof e.limit?e.limit:!1;0===o&&(o=1);var i;i="returnDocs"in e?e.returnDocs:!0;var a=o;if(e.style&&(r.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(r.include_docs=!0),e.attachments&&(r.attachments=!0),e.continuous&&(r.feed="longpoll"),e.conflicts&&(r.conflicts=!0),e.descending&&(r.descending=!0),e.filter&&"string"==typeof e.filter&&(r.filter=e.filter,"_view"===e.filter&&e.view&&"string"==typeof e.view&&(r.view=e.view)),e.query_params&&"object"==typeof e.query_params)for(var u in e.query_params)e.query_params.hasOwnProperty(u)&&(r[u]=e.query_params[u]);var h,p="GET";if(e.doc_ids){r.filter="_doc_ids";var v=JSON.stringify(e.doc_ids);v.length<l?r.doc_ids=v:(p="POST",h={doc_ids:e.doc_ids})}if(e.continuous&&m._useSSE)return m.sse(e,r,i);var _,y,b=function(i,u){if(!e.aborted){r.since=i,"object"==typeof r.since&&(r.since=JSON.stringify(r.since)),e.descending?o&&(r.limit=a):r.limit=!o||a>t?t:a;var c="?"+Object.keys(r).map(function(e){return e+"="+r[e]}).join("&"),l={headers:g.headers,method:p,url:s(g,"_changes"+c),timeout:e.timeout,body:h};y=i,e.aborted||(_=n(l,u))}},w=10,E=0,k={results:[]},S=function(n,r){if(!e.aborted){var s=0;if(r&&r.results){s=r.results.length,k.last_seq=r.last_seq;var u={};u.query=e.query_params,r.results=r.results.filter(function(t){a--;var n=f.filterChange(e)(t);return n&&(i&&k.results.push(t),f.call(e.onChange,t)),n})}else if(n)return e.aborted=!0,void f.call(e.complete,n);r&&r.last_seq&&(y=r.last_seq);var c=o&&0>=a||r&&t>s||e.descending;if((!e.continuous||o&&0>=a)&&c)f.call(e.complete,null,k);else{n?E+=1:E=0;var l=1<<E,h=w*l,p=e.maximumWait||3e4;if(h>p)return void f.call(e.complete,n||d.error(d.UNKNOWN_ERROR));setTimeout(function(){b(y,S)},h)}}};return b(e.since||0,S),{cancel:function(){e.aborted=!0,_&&_.abort()}}},m.sse=function(e,t,n){function r(t){var r=JSON.parse(t.data);n&&c.results.push(r),c.last_seq=r.seq,f.call(e.onChange,r)}function o(t){return u.removeEventListener("message",r,!1),d===!1?(m._useSSE=!1,void(l=m._changes(e))):(u.close(),void f.call(e.complete,t))}t.feed="eventsource",t.since=e.since||0,t.limit=e.limit,delete t.timeout;var i="?"+Object.keys(t).map(function(e){return e+"="+t[e]}).join("&"),a=s(g,"_changes"+i),u=new EventSource(a),c={results:[],last_seq:!1},l=!1,d=!1;return u.addEventListener("message",r,!1),u.onopen=function(){d=!0},u.onerror=o,{cancel:function(){return l?l.cancel():(u.removeEventListener("message",r,!1),void u.close())}}},m._useSSE=!1,m.revsDiff=f.adapterFun("revsDiff",function(e,t,r){"function"==typeof t&&(r=t,t={}),n({headers:g.headers,method:"POST",url:s(g,"_revs_diff"),body:JSON.stringify(e)},r)}),m._close=function(e){e()},m.destroy=f.adapterFun("destroy",function(e){n({url:s(g,""),method:"DELETE",headers:g.headers},function(t,n){t?(m.emit("error",t),e(t)):(m.emit("destroyed"),e(null,n))})})}var c=25,l=1800,f=e(34),d=e(19),h=e(40)("pouchdb:http"),p="undefined"==typeof n||n.browser,v=e(18);u.destroy=f.toPromise(function(e,t,n){var r=i(e,t);t=t||{},"function"==typeof t&&(n=t,t={}),t=f.clone(t),t.headers=r.headers,t.method="DELETE",t.url=s(r,"");var o=t.ajax||{};t=f.extend({},t,o),f.ajax(t,n)}),u.valid=function(){return!0},t.exports=u}).call(this,e(39))},{}],3:[function(e,t){"use strict";function n(e,t){return new r.Promise(function(n,o){var s=r.createBlob([""],{type:"image/png"});e.objectStore(i).put(s,"key"),e.oncomplete=function(){var e=t.transaction([i],"readwrite"),s=e.objectStore(i).get("key");s.onerror=o,s.onsuccess=function(e){var t=e.target.result,o=URL.createObjectURL(t);r.ajax({url:o,cache:!0,binary:!0},function(e,t){e&&405===e.status?n(!0):(n(!(!t||"image/png"!==t.type)),e&&404===e.status&&r.explain404("PouchDB is just detecting blob URL support.")),URL.revokeObjectURL(o)})}}})["catch"](function(){return!1})}var r=e(34),o=e(5),i=o.DETECT_BLOB_SUPPORT_STORE;t.exports=n},{}],4:[function(e,t){"use strict";function n(e,t,n,i,s,_){function y(){var e=[l,c,u,d,f,a],t=g(i,e,"readwrite");return t.error?_(t.error):(I=t.txn,I.onerror=m(_),I.ontimeout=m(_),I.oncomplete=E,R=I.objectStore(l),C=I.objectStore(c),L=I.objectStore(u),M=I.objectStore(a),void S(function(e){return e?(H=!0,_(e)):void w()}))}function b(){r.processDocs(N,n,Y,I,B,x,t)}function w(){function e(){++n===N.length&&b()}function t(t){var n=p(t.target.result);n&&Y.set(n.id,n),e()}if(N.length)for(var n=0,o=0,i=N.length;i>o;o++){var s=N[o];if(s._id&&r.isLocalId(s._id))e();else{var a=R.get(s.metadata.id);a.onsuccess=t}}}function E(){H||(s.notify(n._name),n._docCount=-1,_(null,B))}function k(e,t){var n=L.get(e);n.onsuccess=function(n){if(n.target.result)t();else{var r=o.error(o.MISSING_STUB,"unknown stub attachment with digest "+e);r.status=412,t(r)}}}function S(e){function t(){++o===n.length&&e(r)}var n=[];if(N.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var r=e.data._attachments[t];r.stub&&n.push(r.digest)})}),!n.length)return e();var r,o=0;n.forEach(function(e){k(e,function(e){e&&!r&&(r=e),t()})})}function x(e,t,n,r,o,i,s){var a=e.data;a._id=e.metadata.id,a._rev=e.metadata.rev,n&&(a._deleted=!0);var u=a._attachments&&Object.keys(a._attachments).length;return u?A(e,t,n,r,o,s):void O(e,t,n,r,o,s)}function T(e){var t=r.compactTree(e.metadata);h(t,e.metadata.id,I)}function O(e,t,r,o,i,s){function a(o){i&&n.auto_compaction&&T(e),f.seq=o.target.result,delete f.rev;var s=v(f,t,r),a=R.put(s);a.onsuccess=c}function u(e){e.preventDefault(),e.stopPropagation();var t=C.index("_doc_id_rev"),n=t.getKey(l._doc_id_rev);n.onsuccess=function(e){var t=C.put(l,e.target.result);t.onsuccess=a}}function c(){B[s]={ok:!0,id:f.id,rev:t},Y.set(e.metadata.id,e.metadata),D(e,f.seq,o)}var l=e.data,f=e.metadata;l._doc_id_rev=f.id+"::"+f.rev,delete l._id,delete l._rev;var d=C.put(l);d.onsuccess=a,d.onerror=u}function A(e,t,n,r,o,i){function s(){c===l.length&&O(e,t,n,r,o,i)}function a(){c++,s()}var u=e.data,c=0,l=Object.keys(u._attachments);l.forEach(function(t){var n=e.data._attachments[t];if(n.stub)c++,s();else{var r=n.data;delete n.data;var o=n.digest;j(o,r,a)}})}function D(e,t,n){function r(){++i===s.length&&n()}function o(n){var o=e.data._attachments[n].digest,i=M.put({seq:t,digestSeq:o+"::"+t});i.onsuccess=r,i.onerror=function(e){e.preventDefault(),e.stopPropagation(),r()}}var i=0,s=Object.keys(e.data._attachments||{});if(!s.length)return n();for(var a=0;a<s.length;a++)o(s[a])}function j(e,t,n){var r=L.count(e);r.onsuccess=function(r){var o=r.target.result;if(o)return n();var i={digest:e,body:t},s=L.put(i);s.onsuccess=n}}for(var I,R,C,L,M,q,N=e.docs,U=0,P=N.length;P>U;U++){var F=N[U];F._id&&r.isLocalId(F._id)||(F=N[U]=r.parseDoc(F,t.new_edits),F.error&&!q&&(q=F))}if(q)return _(q);var B=new Array(N.length),Y=new r.Map,H=!1,W=n._blobSupport?"blob":"base64";r.preprocessAttachments(N,W,function(e){return e?_(e):void y()})}var r=e(34),o=e(19),i=e(6),s=e(5),a=s.ATTACH_AND_SEQ_STORE,u=s.ATTACH_STORE,c=s.BY_SEQ_STORE,l=s.DOC_STORE,f=s.LOCAL_STORE,d=s.META_STORE,h=i.compactRevs,p=i.decodeMetadata,v=i.encodeMetadata,m=i.idbError,g=i.openTransactionSafely;t.exports=n},{}],5:[function(e,t,n){"use strict";n.ADAPTER_VERSION=5,n.DOC_STORE="document-store",n.BY_SEQ_STORE="by-sequence",n.ATTACH_STORE="attach-store",n.ATTACH_AND_SEQ_STORE="attach-seq-store",n.META_STORE="meta-store",n.LOCAL_STORE="local-store",n.DETECT_BLOB_SUPPORT_STORE="detect-blob-support"},{}],6:[function(e,t,n){(function(t){"use strict";function r(e,t,n){try{e.apply(t,n)}catch(r){"undefined"!=typeof PouchDB&&PouchDB.emit("error",r)}}var o=e(19),i=e(34),s=e(5);n.taskQueue={running:!1,queue:[]},n.applyNext=function(){if(!n.taskQueue.running&&n.taskQueue.queue.length){n.taskQueue.running=!0;var e=n.taskQueue.queue.shift();e.action(function(o,i){r(e.callback,this,[o,i]),n.taskQueue.running=!1,t.nextTick(n.applyNext)})}},n.idbError=function(e){return function(t){var n=t.target&&t.target.error&&t.target.error.name||t.target;e(o.error(o.IDB_ERROR,n,t.type))}},n.encodeMetadata=function(e,t,n){return{data:i.safeJsonStringify(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}},n.decodeMetadata=function(e){if(!e)return null;var t=i.safeJsonParse(e.data);return t.winningRev=e.winningRev,t.deletedOrLocal="1"===e.deletedOrLocal,t.seq=e.seq,t},n.decodeDoc=function(e){if(!e)return e;var t=i.lastIndexOf(e._doc_id_rev,":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e},n.readBlobData=function(e,t,n,r){n?e?"string"!=typeof e?i.readAsBinaryString(e,function(e){r(i.btoa(e))}):r(e):r(""):e?"string"!=typeof e?r(e):(e=i.fixBinary(atob(e)),r(i.createBlob([e],{type:t}))):r(i.createBlob([""],{type:t}))},n.fetchAttachmentsIfNecessary=function(e,t,n,r){function o(){++u===a.length&&r&&r()}function i(e,t){var r=e._attachments[t],i=r.digest,a=n.objectStore(s.ATTACH_STORE).get(i);a.onsuccess=function(e){r.body=e.target.result.body,o()}}var a=Object.keys(e._attachments||{});if(!a.length)return r&&r();var u=0;a.forEach(function(n){t.attachments&&t.include_docs?i(e,n):(e._attachments[n].stub=!0,o())})},n.postProcessAttachments=function(e){return i.Promise.all(e.map(function(e){if(e.doc&&e.doc._attachments){var t=Object.keys(e.doc._attachments);return i.Promise.all(t.map(function(t){var r=e.doc._attachments[t];if("body"in r){var o=r.body,s=r.content_type;return new i.Promise(function(a){n.readBlobData(o,s,!0,function(n){e.doc._attachments[t]=i.extend(i.pick(r,["digest","content_type"]),{data:n}),a()})})}}))}}))},n.compactRevs=function(e,t,n){function r(){l--,l||o()}function o(){i.length&&i.forEach(function(e){var t=c.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::￿",!1,!1));t.onsuccess=function(t){var n=t.target.result;n||u["delete"](e)}})}var i=[],a=n.objectStore(s.BY_SEQ_STORE),u=n.objectStore(s.ATTACH_STORE),c=n.objectStore(s.ATTACH_AND_SEQ_STORE),l=e.length;e.forEach(function(e){var n=a.index("_doc_id_rev"),o=t+"::"+e;n.getKey(o).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return r();a["delete"](t);var n=c.index("seq").openCursor(IDBKeyRange.only(t));n.onsuccess=function(e){var t=e.target.result;if(t){var n=t.value.digestSeq.split("::")[0];i.push(n),c["delete"](t.primaryKey),t["continue"]()}else r()}}})},n.openTransactionSafely=function(e,t,n){try{return{txn:e.transaction(t,n)}}catch(r){return{error:r}}}}).call(this,e(39))},{}],7:[function(e,t){(function(n){"use strict";function r(e,t){var n=this;I.queue.push({action:function(t){o(n,e,t)},callback:t}),E()}function o(e,t,o){function i(e){var t=e.createObjectStore(y,{keyPath:"id"});e.createObjectStore(g,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(m,{keyPath:"digest"}),e.createObjectStore(w,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(_),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(b,{keyPath:"_id"});var n=e.createObjectStore(v,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}function l(e,t){var n=e.objectStore(y);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(e){var r=e.target.result;if(r){var o=r.value,i=a.isDeleted(o);o.deletedOrLocal=i?"1":"0",n.put(o),r["continue"]()}else t()}}function f(e){e.createObjectStore(b,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function E(e,t){var n=e.objectStore(b),r=e.objectStore(y),o=e.objectStore(g),i=r.openCursor();i.onsuccess=function(e){var i=e.target.result;if(i){var s=i.value,c=s.id,l=a.isLocalId(c),f=u.winningRev(s);if(l){var d=c+"::"+f,h=c+"::",p=c+"::~",v=o.index("_doc_id_rev"),m=IDBKeyRange.bound(h,p,!1,!1),g=v.openCursor(m);g.onsuccess=function(e){if(g=e.target.result){var t=g.value;t._doc_id_rev===d&&n.put(t),o["delete"](g.primaryKey),g["continue"]()}else r["delete"](i.primaryKey),i["continue"]()}}else i["continue"]()}else t&&t()}}function I(e){var t=e.createObjectStore(v,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}function L(e,t){var n=e.objectStore(g),r=e.objectStore(m),o=e.objectStore(v),i=r.count();i.onsuccess=function(e){var r=e.target.result;return r?void(n.openCursor().onsuccess=function(e){var n=e.target.result;if(!n)return t();for(var r=n.value,i=n.primaryKey,s=Object.keys(r._attachments||{}),a={},u=0;u<s.length;u++){var c=r._attachments[s[u]];a[c.digest]=!0}var l=Object.keys(a);for(u=0;u<l.length;u++){var f=l[u];o.put({seq:i,digestSeq:f+"::"+i})}n["continue"]()}):t()}}function M(e){function t(e){return e.data?x(e):(e.deletedOrLocal="1"===e.deletedOrLocal,e)}var n=e.objectStore(g),r=e.objectStore(y),o=r.openCursor();o.onsuccess=function(e){function o(){var e=a.id+"::",t=a.id+"::￿",r=n.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,t)),o=0;r.onsuccess=function(e){var t=e.target.result;if(!t)return a.seq=o,i();var n=t.primaryKey;n>o&&(o=n),t["continue"]()}}function i(){var e=T(a,a.winningRev,a.deletedOrLocal),t=r.put(e);
t.onsuccess=function(){s["continue"]()}}var s=e.target.result;if(s){var a=t(s.value);return a.winningRev=a.winningRev||u.winningRev(a),a.seq?i():void o()}}}function q(e,t,n,r,o){try{if(e&&t)return o?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return o?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(i){return{error:i}}return null}function N(e,t,n){function r(){n(null,{total_rows:e,offset:t.skip,rows:T})}var o="startkey"in t?t.startkey:!1,i="endkey"in t?t.endkey:!1,s="key"in t?t.key:!1,l=t.skip||0,f="number"==typeof t.limit?t.limit:-1,d=t.inclusive_end!==!1,h="descending"in t&&t.descending?"prev":null,p=q(o,i,d,s,h);if(p&&p.error){var v=p.error;return"DataError"===v.name&&0===v.code?n(null,{total_rows:e,offset:t.skip,rows:[]}):n(c.error(c.IDB_ERROR,v.name,v.message))}var _=[y,g];t.attachments&&_.push(m);var b=R(Y,_,"readonly");if(b.error)return n(b.error);var w=b.txn;w.oncomplete=function(){t.attachments?D(T).then(r):r()};var E=w.objectStore(y),k=h?E.openCursor(p,h):E.openCursor(p),T=[];k.onsuccess=function(e){function n(e,n){var o={id:e.id,key:e.id,value:{rev:i}};t.include_docs&&(o.doc=n,t.conflicts&&(o.doc._conflicts=u.collectConflicts(e)),O(o.doc,t,w));var s=a.isDeleted(e,i);if("ok"===t.deleted)s&&(o.value.deleted=!0,o.doc=null),T.push(o);else if(!s&&l--<=0&&(T.push(o),0===--f))return;r["continue"]()}if(e.target.result){var r=e.target.result,o=x(r.value),i=o.winningRev;if(t.include_docs){var s=w.objectStore(g).index("_doc_id_rev"),c=o.id+"::"+i;s.get(c).onsuccess=function(e){n(x(r.value),S(e.target.result))}}else n(o)}}}function U(t){if(-1!==e._docCount)return t(null,e._docCount);var n,r=R(Y,[y],"readonly");if(r.error)return t(r.error);var o=r.txn,i=o.objectStore(y).index("deletedOrLocal");i.count(IDBKeyRange.only("0")).onsuccess=function(e){n=e.target.result},o.onerror=A(t),o.oncomplete=function(){e._docCount=n,t(null,e._docCount)}}var P=t.name,F=null,B=!1,Y=null;e._docCount=-1,e._blobSupport=null,e._name=P,e.type=function(){return"idb"},e._id=a.toPromise(function(e){e(null,F)}),e._bulkDocs=function(t,n,o){d(t,n,e,Y,r.Changes,o)},e._get=function(e,t,n){function r(){n(s,{doc:o,metadata:i,ctx:u})}var o,i,s,u;if(t=a.clone(t),t.ctx)u=t.ctx;else{var l=R(Y,[y,g,m],"readonly");if(l.error)return n(l.error);u=l.txn}u.objectStore(y).get(e).onsuccess=function(e){if(i=x(e.target.result),!i)return s=c.error(c.MISSING_DOC,"missing"),r();if(a.isDeleted(i)&&!t.rev)return s=c.error(c.MISSING_DOC,"deleted"),r();var n=u.objectStore(g),l=t.rev||i.winningRev,f=i.id+"::"+l;n.index("_doc_id_rev").get(f).onsuccess=function(e){return o=e.target.result,o&&(o=S(o)),o?void r():(s=c.error(c.MISSING_DOC,"missing"),r())}}},e._getAttachment=function(e,t,n){var r;if(t=a.clone(t),t.ctx)r=t.ctx;else{var o=R(Y,[y,g,m],"readonly");if(o.error)return n(o.error);r=o.txn}var i=e.digest,s=e.content_type;r.objectStore(m).get(i).onsuccess=function(e){var r=e.target.result.body;j(r,s,t.encode,function(e){n(null,e)})}},e._allDocs=function(e,t){U(function(n,r){return n?t(n):0===e.limit?t(null,{total_rows:r,offset:e.skip,rows:[]}):void N(r,e,t)})},e._info=function(t){U(function(n,r){if(n)return t(n);if(null===Y||!C[e._name]){var o=new Error("db isn't open");return o.id="idbNull",t(o)}var i=0,s=R(Y,[g],"readonly");if(s.error)return t(s.error);var a=s.txn;a.objectStore(g).openCursor(null,"prev").onsuccess=function(e){var t=e.target.result;i=t?t.key:0},a.oncomplete=function(){t(null,{doc_count:r,update_seq:i,idb_attachment_format:e._blobSupport?"binary":"base64"})}})},e._changes=function(t){function n(e){function n(){return a.seq!==s?e["continue"]():(f=s,a.winningRev===i._rev?o(i):void r())}function r(){var e=i._id+"::"+a.winningRev,t=v.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,e+"￿"));t.onsuccess=function(e){o(S(e.target.result.value))}}function o(n){var r=t.processChange(n,a,t);r.seq=a.seq,E(r)&&(w++,h&&b.push(r),t.attachments&&t.include_docs?O(n,t,p,function(){D([r]).then(function(){t.onChange(r)})}):t.onChange(r)),w!==d&&e["continue"]()}var i=S(e.value),s=e.key;if(c&&!c.has(i._id))return e["continue"]();var a;return(a=k.get(i._id))?n():void(_.get(i._id).onsuccess=function(e){a=x(e.target.result),k.set(i._id,a),n()})}function o(e){var t=e.target.result;t&&n(t)}function i(){var e=[y,g];t.attachments&&e.push(m);var n=R(Y,e,"readonly");if(n.error)return t.complete(n.error);p=n.txn,p.onerror=A(t.complete),p.oncomplete=s,v=p.objectStore(g),_=p.objectStore(y);var r;r=l?v.openCursor(null,l):v.openCursor(IDBKeyRange.lowerBound(t.since,!0)),r.onsuccess=o}function s(){function e(){t.complete(null,{results:b,last_seq:f})}!t.continuous&&t.attachments?D(b).then(e):e()}if(t=a.clone(t),t.continuous){var u=P+":"+a.uuid();return r.Changes.addListener(P,u,e,t),r.Changes.notify(P),{cancel:function(){r.Changes.removeListener(P,u)}}}var c=t.doc_ids&&new a.Set(t.doc_ids),l=t.descending?"prev":null;t.since=t.since||0;var f=t.since,d="limit"in t?t.limit:-1;0===d&&(d=1);var h;h="returnDocs"in t?t.returnDocs:!0;var p,v,_,b=[],w=0,E=a.filterChange(t),k=new a.Map;i()},e._close=function(e){return null===Y?e(c.error(c.NOT_OPEN)):(Y.close(),delete C[P],Y=null,void e())},e._getRevisionTree=function(e,t){var n=R(Y,[y],"readonly");if(n.error)return t(n.error);var r=n.txn,o=r.objectStore(y).get(e);o.onsuccess=function(e){var n=x(e.target.result);n?t(null,n.rev_tree):t(c.error(c.MISSING_DOC))}},e._doCompaction=function(e,t,n){var r=[y,g,m,v],o=R(Y,r,"readwrite");if(o.error)return n(o.error);var i=o.txn,s=i.objectStore(y);s.get(e).onsuccess=function(n){var r=x(n.target.result);u.traverseRevTree(r.rev_tree,function(e,n,r,o,i){var s=n+"-"+r;-1!==t.indexOf(s)&&(i.status="missing")}),k(t,e,i);var o=r.winningRev,s=r.deletedOrLocal;i.objectStore(y).put(T(r,o,s))},i.onerror=A(n),i.oncomplete=function(){a.call(n)}},e._getLocal=function(e,t){var n=R(Y,[b],"readonly");if(n.error)return t(n.error);var r=n.txn,o=r.objectStore(b).get(e);o.onerror=A(t),o.onsuccess=function(e){var n=e.target.result;n?(delete n._doc_id_rev,t(null,n)):t(c.error(c.MISSING_DOC))}},e._putLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),delete e._revisions;var r=e._rev,o=e._id;e._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var i,s=t.ctx;if(!s){var a=R(Y,[b],"readwrite");if(a.error)return n(a.error);s=a.txn,s.onerror=A(n),s.oncomplete=function(){i&&n(null,i)}}var u,l=s.objectStore(b);r?(u=l.get(o),u.onsuccess=function(o){var s=o.target.result;if(s&&s._rev===r){var a=l.put(e);a.onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,i)}}else n(c.error(c.REV_CONFLICT))}):(u=l.add(e),u.onerror=function(e){n(c.error(c.REV_CONFLICT)),e.preventDefault(),e.stopPropagation()},u.onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,i)})},e._removeLocal=function(e,t){var n=R(Y,[b],"readwrite");if(n.error)return t(n.error);var r,o=n.txn;o.oncomplete=function(){r&&t(null,r)};var i=e._id,s=o.objectStore(b),a=s.get(i);a.onerror=A(t),a.onsuccess=function(n){var o=n.target.result;o&&o._rev===e._rev?(s["delete"](i),r={ok:!0,id:i,rev:"0-0"}):t(c.error(c.MISSING_DOC))}};var H=C[P];if(H)return Y=H.idb,F=H.instanceId,e._blobSupport=H.blobSupport,void n.nextTick(function(){o(null,e)});var W=indexedDB.open(P,p);"openReqList"in r||(r.openReqList={}),r.openReqList[P]=W,W.onupgradeneeded=function(e){function t(){var e=o[s-1];s++,e&&e(r,t)}var n=e.target.result;if(e.oldVersion<1)return i(n);var r=e.currentTarget.transaction;e.oldVersion<3&&f(n),e.oldVersion<4&&I(n);var o=[l,E,L,M],s=e.oldVersion;t()},W.onsuccess=function(t){Y=t.target.result,Y.onversionchange=function(){Y.close(),delete C[P]},Y.onabort=function(){Y.close(),delete C[P]};var n=Y.transaction([w,_],"readwrite"),r=n.objectStore(w).get(w);r.onsuccess=function(t){var r=function(){null!==e._blobSupport&&B&&(C[P]={idb:Y,instanceId:F,blobSupport:e._blobSupport,loaded:!0},o(null,e))},i=t.target.result||{id:w};P+"_id"in i?(F=i[P+"_id"],B=!0,r()):(F=a.uuid(),i[P+"_id"]=F,n.objectStore(w).put(i).onsuccess=function(){B=!0,r()}),s||(s=h(n,Y)),s.then(function(t){e._blobSupport=t,r()})}},W.onerror=A(o)}function i(e,t,n){"openReqList"in r||(r.openReqList={}),r.Changes.removeAllListeners(e),r.openReqList[e]&&r.openReqList[e].result&&(r.openReqList[e].result.close(),delete C[e]);var o=indexedDB.deleteDatabase(e);o.onsuccess=function(){r.openReqList[e]&&(r.openReqList[e]=null),a.hasLocalStorage()&&e in localStorage&&delete localStorage[e],n(null,{ok:!0})},o.onerror=A(n)}var s,a=e(34),u=e(29),c=e(19),l=e(6),f=e(5),d=e(4),h=e(3),p=f.ADAPTER_VERSION,v=f.ATTACH_AND_SEQ_STORE,m=f.ATTACH_STORE,g=f.BY_SEQ_STORE,_=f.DETECT_BLOB_SUPPORT_STORE,y=f.DOC_STORE,b=f.LOCAL_STORE,w=f.META_STORE,E=l.applyNext,k=l.compactRevs,S=l.decodeDoc,x=l.decodeMetadata,T=l.encodeMetadata,O=l.fetchAttachmentsIfNecessary,A=l.idbError,D=l.postProcessAttachments,j=l.readBlobData,I=l.taskQueue,R=l.openTransactionSafely,C={};r.valid=function(){var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return!e&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange},r.destroy=a.toPromise(function(e,t,n){I.queue.push({action:function(n){i(e,t,n)},callback:n}),E()}),r.Changes=new a.Changes,t.exports=r}).call(this,e(39))},{}],8:[function(e,t){t.exports=["idb","websql"]},{}],9:[function(e,t){"use strict";function n(e,t,n,s,v,m){function g(){return D?m(D):(v.notify(n._name),n._docCount=-1,void m(null,j))}function _(e,t){var n="SELECT count(*) as cnt FROM "+c+" WHERE digest=?";A.executeSql(n,[e],function(n,r){if(0===r.rows.item(0).cnt){var i=o.error(o.MISSING_STUB,"unknown stub attachment with digest "+e);t(i)}else t()})}function y(e){function t(){++o===n.length&&e(r)}var n=[];if(T.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var r=e.data._attachments[t];r.stub&&n.push(r.digest)})}),!n.length)return e();var r,o=0;n.forEach(function(e){_(e,function(e){e&&!r&&(r=e),t()})})}function b(e,t,o,i,s,c,p){function v(){function t(e,t){function r(){return++i===s.length&&t(),!1}function o(t){var o="INSERT INTO "+l+" (digest, seq) VALUES (?,?)",i=[n._attachments[t].digest,e];A.executeSql(o,i,r,r)}var i=0,s=Object.keys(n._attachments||{});if(!s.length)return t();for(var a=0;a<s.length;a++)o(s[a])}var n=e.data,r=o?1:0,i=n._id,s=n._rev,a=d(n),c="INSERT INTO "+u+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",h=[i,s,a,r];A.executeSql(c,h,function(e,n){var r=n.insertId;t(r,function(){y(e,r)})},function(){var e=f("seq",u,null,"doc_id=? AND rev=?");return A.executeSql(e,[i,s],function(e,n){var o=n.rows.item(0).seq,c="UPDATE "+u+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",l=[a,r,i,s];e.executeSql(c,l,function(e){t(o,function(){y(e,o)})})}),!1})}function m(e){b||(e?(b=e,i(b)):w===E.length&&v())}function g(e){w++,m(e)}function _(){if(s&&n.auto_compaction){var t=e.metadata.id,o=r.compactTree(e.metadata);h(o,t,A)}}function y(n,o){_(),e.metadata.seq=o,delete e.metadata.rev;var c=s?"UPDATE "+a+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+u+" WHERE doc_id="+a+".id AND rev=?) WHERE id=?":"INSERT INTO "+a+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",l=r.safeJsonStringify(e.metadata),f=e.metadata.id,d=s?[l,o,t,f]:[f,o,o,l];n.executeSql(c,d,function(){j[p]={ok:!0,id:e.metadata.id,rev:t},I.set(f,e.metadata),i()})}var b=null,w=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev;var E=Object.keys(e.data._attachments||{});o&&(e.data._deleted=!0),E.forEach(function(t){var n=e.data._attachments[t];if(n.stub)w++,m();else{var r=n.data;delete n.data;var o=n.digest;k(o,r,g)}}),E.length||v()}function w(){r.processDocs(T,n,I,A,j,b,t)}function E(e){function t(){++n===T.length&&e()}if(!T.length)return e();var n=0;T.forEach(function(e){if(e._id&&r.isLocalId(e._id))return t();var n=e.metadata.id;A.executeSql("SELECT json FROM "+a+" WHERE id = ?",[n],function(e,o){if(o.rows.length){var i=r.safeJsonParse(o.rows.item(0).json);I.set(n,i)}t()})})}function k(e,t,n){var r="SELECT digest FROM "+c+" WHERE digest=?";A.executeSql(r,[e],function(o,s){return s.rows.length?n():(r="INSERT INTO "+c+" (digest, body, escaped) VALUES (?,?,1)",void o.executeSql(r,[e,i.escapeBlob(t)],function(){n()},function(){return n(),!1}))})}var S=t.new_edits,x=e.docs,T=x.map(function(e){if(e._id&&r.isLocalId(e._id))return e;var t=r.parseDoc(e,S);return t}),O=T.filter(function(e){return e.error});if(O.length)return m(O[0]);var A,D,j=new Array(T.length),I=new r.Map;r.preprocessAttachments(T,"binary",function(e){return e?m(e):void s.transaction(function(e){A=e,y(function(e){e?D=e:E(w)})},p(m),g)})}var r=e(34),o=e(19),i=e(11),s=e(10),a=s.DOC_STORE,u=s.BY_SEQ_STORE,c=s.ATTACH_STORE,l=s.ATTACH_AND_SEQ_STORE,f=i.select,d=i.stringifyDoc,h=i.compactRevs,p=i.unknownError;t.exports=n},{}],10:[function(e,t,n){"use strict";function r(e){return"'"+e+"'"}n.ADAPTER_VERSION=7,n.DOC_STORE=r("document-store"),n.BY_SEQ_STORE=r("by-sequence"),n.ATTACH_STORE=r("attach-store"),n.LOCAL_STORE=r("local-store"),n.META_STORE=r("metadata-store"),n.ATTACH_AND_SEQ_STORE=r("attach-seq-store")},{}],11:[function(e,t){"use strict";function n(e){return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function r(e){return e.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function o(e){return delete e._id,delete e._rev,JSON.stringify(e)}function i(e,t,n){return e=JSON.parse(e),e._id=t,e._rev=n,e}function s(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function a(e,t,n,r,o){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(o?" ORDER BY "+o:"")}function u(e,t,n){function r(){++i===e.length&&o()}function o(){if(a.length){var e="SELECT DISTINCT digest AS digest FROM "+_+" WHERE seq IN "+s(a.length);n.executeSql(e,a,function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).digest);if(n.length){var o="DELETE FROM "+_+" WHERE seq IN ("+a.map(function(){return"?"}).join(",")+")";e.executeSql(o,a,function(e){var t="SELECT digest FROM "+_+" WHERE digest IN ("+n.map(function(){return"?"}).join(",")+")";e.executeSql(t,n,function(e,t){for(var r=new h.Set,o=0;o<t.rows.length;o++)r.add(t.rows.item(o).digest);n.forEach(function(t){r.has(t)||(e.executeSql("DELETE FROM "+_+" WHERE digest=?",[t]),e.executeSql("DELETE FROM "+g+" WHERE digest=?",[t]))})})})}})}}if(e.length){var i=0,a=[];e.forEach(function(e){var o="SELECT seq FROM "+m+" WHERE doc_id=? AND rev=?";n.executeSql(o,[t,e],function(e,t){if(!t.rows.length)return r();var n=t.rows.item(0).seq;a.push(n),e.executeSql("DELETE FROM "+m+" WHERE seq=?",[n],r)})})}}function c(e){return function(t){var n=t&&t.constructor.toString().match(/function ([^\(]+)/),r=n&&n[1]||t.type,o=t.target||t.message;e(p.error(p.WSQ_ERROR,o,r))}}function l(e){if("size"in e)return 1e6*e.size;var t=/Android/.test(window.navigator.userAgent);return t?5e6:1}function f(e,t,n,r){var o="undefined"!=typeof sqlitePlugin&&sqlitePlugin.openDatabase&&sqlitePlugin.openDatabase.bind(sqlitePlugin),i=o||"undefined"!=typeof openDatabase&&openDatabase,s=y[e];return s||(s=y[e]=i(e,t,n,r),s._sqlitePlugin=!!o),s}function d(){return"undefined"!=typeof openDatabase||"undefined"!=typeof SQLitePlugin}var h=e(34),p=e(19),v=e(10),m=v.BY_SEQ_STORE,g=v.ATTACH_STORE,_=v.ATTACH_AND_SEQ_STORE,y={};t.exports={escapeBlob:n,unescapeBlob:r,stringifyDoc:o,unstringifyDoc:i,qMarks:s,select:a,compactRevs:u,unknownError:c,getSize:l,openDB:f,valid:d}},{}],12:[function(e,t){"use strict";function n(e,t,n,r,i){function s(){++c===u.length&&i&&i()}function a(e,t){var i=e._attachments[t],a={encode:!0,ctx:r};n._getAttachment(i,a,function(n,r){e._attachments[t]=o.extend(o.pick(i,["digest","content_type"]),{data:r}),s()})}var u=Object.keys(e._attachments||{});if(!u.length)return i&&i();var c=0;u.forEach(function(n){t.attachments&&t.include_docs?a(e,n):(e._attachments[n].stub=!0,s())})}function r(e,t){function u(){o.hasLocalStorage()&&(window.localStorage["_pouch__websqldb_"+$._name]=!0),t(null,$)}function L(e,t){e.executeSql(D),e.executeSql("ALTER TABLE "+h+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(O),e.executeSql("ALTER TABLE "+d+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+d+" (local, id)");var n="SELECT "+d+".winningseq AS seq, "+d+".json AS metadata FROM "+h+" JOIN "+d+" ON "+h+".seq = "+d+".winningseq";e.executeSql(n,[],function(e,n){for(var r=[],i=[],s=0;s<n.rows.length;s++){var a=n.rows.item(s),u=a.seq,c=JSON.parse(a.metadata);o.isDeleted(c)&&r.push(u),o.isLocalId(c.id)&&i.push(c.id)}e.executeSql("UPDATE "+d+"SET local = 1 WHERE id IN "+_(i.length),i,function(){e.executeSql("UPDATE "+h+" SET deleted = 1 WHERE seq IN "+_(r.length),r,t)})})})})}function M(e,t){var n="CREATE TABLE IF NOT EXISTS "+v+" (id UNIQUE, rev, json)";e.executeSql(n,[],function(){var n="SELECT "+d+".id AS id, "+h+".json AS data FROM "+h+" JOIN "+d+" ON "+h+".seq = "+d+".winningseq WHERE local = 1";e.executeSql(n,[],function(e,n){function r(){if(!o.length)return t(e);var n=o.shift(),i=JSON.parse(n.data)._rev;e.executeSql("INSERT INTO "+v+" (id, rev, json) VALUES (?,?,?)",[n.id,i,n.data],function(e){e.executeSql("DELETE FROM "+d+" WHERE id=?",[n.id],function(e){e.executeSql("DELETE FROM "+h+" WHERE seq=?",[n.seq],function(){r()})})})}for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i));r()})})}function q(e,t){function n(n){function r(){if(!n.length)return t(e);var o=n.shift(),i=a(o.hex,V),s=i.lastIndexOf("::"),u=i.substring(0,s),c=i.substring(s+2),l="UPDATE "+h+" SET doc_id=?, rev=? WHERE doc_id_rev=?";e.executeSql(l,[u,c,i],function(){r()})}r()}var r="ALTER TABLE "+h+" ADD COLUMN doc_id";e.executeSql(r,[],function(e){var t="ALTER TABLE "+h+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(A,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+h;e.executeSql(t,[],function(e,t){for(var r=[],o=0;o<t.rows.length;o++)r.push(t.rows.item(o));n(r)})})})})}function N(e,t){function n(e){var n="SELECT COUNT(*) AS cnt FROM "+p;e.executeSql(n,[],function(e,n){function r(){var n=w(C+", "+d+".id AS id",[d,h],R,null,d+".id ");n+=" LIMIT "+s+" OFFSET "+i,i+=s,e.executeSql(n,[],function(e,n){function o(e,t){var n=i[e]=i[e]||[];-1===n.indexOf(t)&&n.push(t)}if(!n.rows.length)return t(e);for(var i={},s=0;s<n.rows.length;s++)for(var a=n.rows.item(s),u=b(a.data,a.id,a.rev),c=Object.keys(u._attachments||{}),l=0;l<c.length;l++){var f=u._attachments[c[l]];o(f.digest,a.seq)}var d=[];if(Object.keys(i).forEach(function(e){var t=i[e];t.forEach(function(t){d.push([e,t])})}),!d.length)return r();var h=0;d.forEach(function(t){var n="INSERT INTO "+g+" (digest, seq) VALUES (?,?)";e.executeSql(n,t,function(){++h===d.length&&r()})})})}var o=n.rows.item(0).cnt;if(!o)return t(e);var i=0,s=10;r()})}var r="CREATE TABLE IF NOT EXISTS "+g+" (digest, seq INTEGER)";e.executeSql(r,[],function(e){e.executeSql(I,[],function(e){e.executeSql(j,[],n)})})}function U(e,t){var n="ALTER TABLE "+p+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(n,[],t)}function P(e,t){var n="ALTER TABLE "+d+" ADD COLUMN max_seq INTEGER";e.executeSql(n,[],function(e){var n="UPDATE "+d+" SET max_seq=(SELECT MAX(seq) FROM "+h+" WHERE doc_id=id)";e.executeSql(n,[],function(e){var n="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+d+" (max_seq)";e.executeSql(n,[],t)})})}function F(e,t){e.executeSql('SELECT HEX("a") AS hex',[],function(e,n){var r=n.rows.item(0).hex;V=2===r.length?"UTF-8":"UTF-16",t()})}function B(){for(;K.length>0;){var e=K.pop();e(null,J)}}function Y(e,t){if(0===t){var n="CREATE TABLE IF NOT EXISTS "+m+" (dbid, db_version INTEGER)",r="CREATE TABLE IF NOT EXISTS "+p+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",i="CREATE TABLE IF NOT EXISTS "+g+" (digest, seq INTEGER)",s="CREATE TABLE IF NOT EXISTS "+d+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",a="CREATE TABLE IF NOT EXISTS "+h+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",u="CREATE TABLE IF NOT EXISTS "+v+" (id UNIQUE, rev, json)";e.executeSql(r),e.executeSql(u),e.executeSql(i,[],function(){e.executeSql(j),e.executeSql(I)}),e.executeSql(s,[],function(){e.executeSql(D),e.executeSql(a,[],function(){e.executeSql(O),e.executeSql(A),e.executeSql(n,[],function(){var t="INSERT INTO "+m+" (db_version, dbid) VALUES (?,?)";J=o.uuid();var n=[f,J];e.executeSql(t,n,function(){B()})})})})}else{var c=function(){var n=f>t;n&&e.executeSql("UPDATE "+m+" SET db_version = "+f);var r="SELECT dbid FROM "+m;e.executeSql(r,[],function(e,t){J=t.rows.item(0).dbid,B()})},l=[L,M,q,N,U,P,c],_=t,y=function(e){l[_-1](e,y),_++};y(e)}}function H(){Q.transaction(function(e){F(e,function(){W(e)})},k(t),u)}function W(e){var t="SELECT sql FROM sqlite_master WHERE tbl_name = "+m;e.executeSql(t,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+m,[],function(e,t){var n=t.rows.item(0).db_version;Y(e,n)}):e.executeSql("ALTER TABLE "+m+" ADD COLUMN db_version INTEGER",[],function(){Y(e,1)}):Y(e,0)})}function G(e,t){if(-1!==$._docCount)return t($._docCount);var n=w("COUNT("+d+".id) AS 'num'",[d,h],R,h+".deleted=0");e.executeSql(n,[],function(e,n){$._docCount=n.rows.item(0).num,t($._docCount)})}var V,$=this,J=null,z=S(e),K=[];$._docCount=-1,$._name=e.name;var Q=x($._name,T,$._name,z);return Q?("function"!=typeof Q.readTransaction&&(Q.readTransaction=Q.transaction),o.isCordova()?window.addEventListener($._name+"_pouch",function X(){window.removeEventListener($._name+"_pouch",X,!1),H()},!1):H(),$.type=function(){return"websql"},$._id=o.toPromise(function(e){e(null,J)}),$._info=function(e){Q.readTransaction(function(t){G(t,function(n){var r="SELECT MAX(seq) AS seq FROM "+h;t.executeSql(r,[],function(t,r){var o=r.rows.item(0).seq||0;e(null,{doc_count:n,update_seq:o,sqlite_plugin:Q._sqlitePlugin,websql_encoding:V})})})},k(e))},$._bulkDocs=function(e,t,n){l(e,t,$,Q,r.Changes,n)},$._get=function(e,t,n){function r(){n(u,{doc:i,metadata:a,ctx:f})}t=o.clone(t);var i,a,u;if(!t.ctx)return void Q.readTransaction(function(r){t.ctx=r,$._get(e,t,n)});var c,l,f=t.ctx;t.rev?(c=w(C,[d,h],d+".id="+h+".doc_id",[h+".doc_id=?",h+".rev=?"]),l=[e,t.rev]):(c=w(C,[d,h],R,d+".id=?"),l=[e]),f.executeSql(c,l,function(e,n){if(!n.rows.length)return u=s.error(s.MISSING_DOC,"missing"),r();var c=n.rows.item(0);return a=o.safeJsonParse(c.metadata),c.deleted&&!t.rev?(u=s.error(s.MISSING_DOC,"deleted"),r()):(i=b(c.data,a.id,c.rev),void r())})},$._allDocs=function(e,t){var r,s=[],a="startkey"in e?e.startkey:!1,u="endkey"in e?e.endkey:!1,c="key"in e?e.key:!1,l="descending"in e?e.descending:!1,f="limit"in e?e.limit:-1,p="skip"in e?e.skip:0,v=e.inclusive_end!==!1,m=[],g=[];if(c!==!1)g.push(d+".id = ?"),m.push(c);else if(a!==!1||u!==!1){if(a!==!1&&(g.push(d+".id "+(l?"<=":">=")+" ?"),m.push(a)),u!==!1){var _=l?">":"<";v&&(_+="="),g.push(d+".id "+_+" ?"),m.push(u)}c!==!1&&(g.push(d+".id = ?"),m.push(c))}"ok"!==e.deleted&&g.push(h+".deleted = 0"),Q.readTransaction(function(t){G(t,function(a){if(r=a,0!==f){var u=w(C,[d,h],R,g,d+".id "+(l?"DESC":"ASC"));u+=" LIMIT "+f+" OFFSET "+p,t.executeSql(u,m,function(t,r){for(var a=0,u=r.rows.length;u>a;a++){var c=r.rows.item(a),l=o.safeJsonParse(c.metadata),f=l.id,d=b(c.data,f,c.rev),h=d._rev,p={id:f,key:f,value:{rev:h}};if(e.include_docs&&(p.doc=d,p.doc._rev=h,e.conflicts&&(p.doc._conflicts=i.collectConflicts(l)),n(p.doc,e,$,t)),c.deleted){if("ok"!==e.deleted)continue;p.value.deleted=!0,p.doc=null}s.push(p)}})}})},k(t),function(){t(null,{total_rows:r,offset:e.skip,rows:s})})},$._changes=function(e){function t(){var t=d+".json AS metadata, "+d+".max_seq AS maxSeq, "+h+".json AS winningDoc, "+h+".rev AS winningRev ",r=d+" JOIN "+h,i=d+".id="+h+".doc_id AND "+d+".winningseq="+h+".seq",f=["maxSeq > ?"],p=[e.since];e.doc_ids&&(f.push(d+".id IN "+_(e.doc_ids.length)),p=p.concat(e.doc_ids));var v="maxSeq "+(s?"DESC":"ASC"),m=w(t,r,i,f,v),g=o.filterChange(e);e.view||e.filter||(m+=" LIMIT "+a);var y=e.since||0;Q.readTransaction(function(t){t.executeSql(m,p,function(t,r){function i(t){return function(){e.onChange(t)}}for(var s=0,f=r.rows.length;f>s;s++){var d=r.rows.item(s),h=o.safeJsonParse(d.metadata);y=d.maxSeq;var p=b(d.winningDoc,h.id,d.winningRev),v=e.processChange(p,h,e);if(v.seq=d.maxSeq,g(v)&&(l++,u&&c.push(v),e.attachments&&e.include_docs?n(p,e,$,t,i(v)):i(v)()),l===a)break}})},k(e.complete),function(){e.continuous||e.complete(null,{results:c,last_seq:y})})}if(e=o.clone(e),e.continuous){var i=$._name+":"+o.uuid();return r.Changes.addListener($._name,i,$,e),r.Changes.notify($._name),{cancel:function(){r.Changes.removeListener($._name,i)}}}var s=e.descending;e.since=e.since&&!s?e.since:0;var a="limit"in e?e.limit:-1;0===a&&(a=1);var u;u="returnDocs"in e?e.returnDocs:!0;var c=[],l=0;t()},$._close=function(e){e()},$._getAttachment=function(e,t,n){var r,i=t.ctx,s=e.digest,u=e.content_type,l="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+p+" WHERE digest=?";i.executeSql(l,[s],function(e,i){var s=i.rows.item(0),l=s.escaped?c.unescapeBlob(s.body):a(s.body,V);t.encode?r=btoa(l):(l=o.fixBinary(l),r=o.createBlob([l],{type:u})),n(null,r)})},$._getRevisionTree=function(e,t){Q.readTransaction(function(n){var r="SELECT json AS metadata FROM "+d+" WHERE id = ?";n.executeSql(r,[e],function(e,n){if(n.rows.length){var r=o.safeJsonParse(n.rows.item(0).metadata);t(null,r.rev_tree)}else t(s.error(s.MISSING_DOC))})})},$._doCompaction=function(e,t,n){return t.length?void Q.transaction(function(n){var r="SELECT json AS metadata FROM "+d+" WHERE id = ?";n.executeSql(r,[e],function(n,r){var s=o.safeJsonParse(r.rows.item(0).metadata);i.traverseRevTree(s.rev_tree,function(e,n,r,o,i){var s=n+"-"+r;-1!==t.indexOf(s)&&(i.status="missing")});var a="UPDATE "+d+" SET json = ? WHERE id = ?";n.executeSql(a,[o.safeJsonStringify(s),e])}),E(t,e,n)},k(n),function(){n()}):n()},$._getLocal=function(e,t){Q.readTransaction(function(n){var r="SELECT json, rev FROM "+v+" WHERE id=?";n.executeSql(r,[e],function(n,r){if(r.rows.length){var o=r.rows.item(0),i=b(o.json,e,o.rev);t(null,i)}else t(s.error(s.MISSING_DOC))})})},$._putLocal=function(e,t,n){function r(e){var r,l;i?(r="UPDATE "+v+" SET rev=?, json=? WHERE id=? AND rev=?",l=[o,c,a,i]):(r="INSERT INTO "+v+" (id, rev, json) VALUES (?,?,?)",l=[a,o,c]),e.executeSql(r,l,function(e,r){r.rowsAffected?(u={ok:!0,id:a,rev:o},t.ctx&&n(null,u)):n(s.error(s.REV_CONFLICT))},function(){return n(s.error(s.REV_CONFLICT)),!1})}"function"==typeof t&&(n=t,t={}),delete e._revisions;var o,i=e._rev,a=e._id;o=e._rev=i?"0-"+(parseInt(i.split("-")[1],10)+1):"0-1";var u,c=y(e);t.ctx?r(t.ctx):Q.transaction(function(e){r(e)},k(n),function(){u&&n(null,u)})},void($._removeLocal=function(e,t){var n;Q.transaction(function(r){var o="DELETE FROM "+v+" WHERE id=? AND rev=?",i=[e._id,e._rev];r.executeSql(o,i,function(r,o){return o.rowsAffected?void(n={ok:!0,id:e._id,rev:"0-0"}):t(s.error(s.MISSING_DOC))})},k(t),function(){n&&t(null,n)})})):t(s.error(s.UNKNOWN_ERROR))}var o=e(34),i=e(29),s=e(19),a=e(22),u=e(10),c=e(11),l=e(9),f=u.ADAPTER_VERSION,d=u.DOC_STORE,h=u.BY_SEQ_STORE,p=u.ATTACH_STORE,v=u.LOCAL_STORE,m=u.META_STORE,g=u.ATTACH_AND_SEQ_STORE,_=c.qMarks,y=c.stringifyDoc,b=c.unstringifyDoc,w=c.select,E=c.compactRevs,k=c.unknownError,S=c.getSize,x=c.openDB,T=1,O="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+h+" (seq, deleted)",A="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+h+" (doc_id, rev)",D="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+d+" (winningseq)",j="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+g+" (seq)",I="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+g+" (digest, seq)",R=h+".seq = "+d+".winningseq",C=h+".seq AS seq, "+h+".deleted AS deleted, "+h+".json AS data, "+h+".rev AS rev, "+d+".json AS metadata";r.valid=c.valid,r.destroy=o.toPromise(function(e,t,n){r.Changes.removeAllListeners(e);var i=S(t),s=x(e,T,e,i);s.transaction(function(e){var t=[d,h,p,m,v,g];t.forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},k(n),function(){o.hasLocalStorage()&&(delete window.localStorage["_pouch__websqldb_"+e],delete window.localStorage[e]),n(null,{ok:!0})})}),r.Changes=new o.Changes,t.exports=r},{}],13:[function(e,t){"use strict";function n(e,t,n){function r(){i.cancel()}a.call(this);var i=this;this.db=e,t=t?o.clone(t):{};var s=n||t.complete||function(){},u=t.complete=o.once(function(t,n){t?i.emit("error",t):i.emit("complete",n),i.removeAllListeners(),e.removeListener("destroyed",r)});s&&(i.on("complete",function(e){s(null,e)}),i.on("error",function(e){s(e)}));var c=t.onChange;c&&i.on("change",c),e.once("destroyed",r),t.onChange=function(e){t.isCancelled||(i.emit("change",e),i.startSeq&&i.startSeq<=e.seq&&(i.emit("uptodate"),i.startSeq=!1),e.deleted?i.emit("delete",e):1===e.changes.length&&"1-"===e.changes[0].rev.slice(0,2)?i.emit("create",e):i.emit("update",e))};var l=new o.Promise(function(e,n){t.complete=function(t,r){t?n(t):e(r)}});i.once("cancel",function(){c&&i.removeListener("change",c),t.complete(null,{status:"cancelled"})}),this.then=l.then.bind(l),this["catch"]=l["catch"].bind(l),this.then(function(e){u(null,e)},u),e.taskqueue.isReady?i.doChanges(t):e.taskqueue.addTask(function(){i.isCancelled?i.emit("cancel"):i.doChanges(t)})}function r(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=i.collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));var s={id:t.id,changes:r,doc:e};return o.isDeleted(t,e._rev)&&(s.deleted=!0),n.conflicts&&(s.doc._conflicts=i.collectConflicts(t),s.doc._conflicts.length||delete s.doc._conflicts),s}var o=e(34),i=e(29),s=e(19),a=e(38).EventEmitter,u=e(27),c=e(28);t.exports=n,o.inherits(n,a),n.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},n.prototype.doChanges=function(e){var t=this,n=e.complete;if(e=o.clone(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=r,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"===e.since)return void this.db.info().then(function(r){return t.isCancelled?void n(null,{status:"cancelled"}):(e.since=r.update_seq,void t.doChanges(e))},n);if(e.continuous&&"now"!==e.since&&this.db.info().then(function(e){t.startSeq=e.update_seq},function(e){if("idbNull"!==e.id)throw e}),"http"!==this.db.type()&&e.filter&&"string"==typeof e.filter&&!e.doc_ids)return this.filterChanges(e);"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=n;var i=this.db._changes(e);if(i&&"function"==typeof i.cancel){var s=t.cancel;t.cancel=o.getArguments(function(e){i.cancel(),s.apply(this,e)})}},n.prototype.filterChanges=function(e){var t=this,n=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var r=s.error(s.BAD_REQUEST,"`view` filter parameter is not provided.");return void n(r)}var o=e.view.split("/");this.db.get("_design/"+o[0],function(r,i){if(t.isCancelled)return void n(null,{status:"cancelled"});if(r)return void n(s.generateErrorFromResponse(r));if(i&&i.views&&i.views[o[1]]){var a=c(i.views[o[1]].map);return e.filter=a,void t.doChanges(e)}var u=i.views?"missing json key: "+o[1]:"missing json key: views";r||(r=s.error(s.MISSING_DOC,u)),n(r)})}else{var i=e.filter.split("/");this.db.get("_design/"+i[0],function(r,o){if(t.isCancelled)return void n(null,{status:"cancelled"});if(r)return void n(s.generateErrorFromResponse(r));if(o&&o.filters&&o.filters[i[1]]){var a=u(o.filters[i[1]]);return e.filter=a,void t.doChanges(e)}var c=o&&o.filters?"missing json key: "+i[1]:"missing json key: filters";return r||(r=s.error(s.MISSING_DOC,c)),void n(r)})}}},{}],14:[function(e,t){"use strict";function n(e,t,n,r){return e.get(t)["catch"](function(n){if(404===n.status)return"http"===e.type()&&o.explain404("PouchDB is just checking if a remote checkpoint exists."),{_id:t};
throw n}).then(function(t){return r.cancelled?void 0:(t.last_seq=n,e.put(t))})}function r(e,t,n,r){this.src=e,this.target=t,this.id=n,this.returnValue=r}var o=e(34),i=e(62),s=i.collate;r.prototype.writeCheckpoint=function(e){var t=this;return this.updateTarget(e).then(function(){return t.updateSource(e)})},r.prototype.updateTarget=function(e){return n(this.target,this.id,e,this.returnValue)},r.prototype.updateSource=function(e){var t=this;return this.readOnlySource?o.Promise.resolve(!0):n(this.src,this.id,e,this.returnValue)["catch"](function(e){var n="number"==typeof e.status&&4===Math.floor(e.status/100);if(n)return t.readOnlySource=!0,!0;throw e})},r.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.src.get(e.id).then(function(e){return 0===s(t.last_seq,e.last_seq)?e.last_seq:0},function(n){if(404===n.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:0}).then(function(){return 0},function(n){return 401===n.status?(e.readOnlySource=!0,t.last_seq):0});throw n})})["catch"](function(e){if(404!==e.status)throw e;return 0})},t.exports=r},{}],15:[function(e,t){(function(n,r){"use strict";function o(e){e&&r.debug&&console.error(e)}function i(e,t,r){if(!(this instanceof i))return new i(e,t,r);var l=this;("function"==typeof t||"undefined"==typeof t)&&(r=t,t={}),e&&"object"==typeof e&&(t=e,e=void 0),"undefined"==typeof r&&(r=o),t=t||{},this.__opts=t;var f=r;l.auto_compaction=t.auto_compaction,l.prefix=i.prefix,s.call(l),l.taskqueue=new u;var d=new c(function(o,s){r=function(e,t){return e?s(e):(delete t.then,void o(t))},t=a.clone(t);var u,c,f=t.name||e;return function(){try{if("string"!=typeof f)throw c=new Error("Missing/invalid DB name"),c.code=400,c;if(u=i.parseAdapter(f,t),t.originalName=f,t.name=u.name,t.prefix&&"http"!==u.adapter&&"https"!==u.adapter&&(t.name=t.prefix+t.name),t.adapter=t.adapter||u.adapter,l._adapter=t.adapter,l._db_name=f,!i.adapters[t.adapter])throw c=new Error("Adapter is missing"),c.code=404,c;if(!i.adapters[t.adapter].valid())throw c=new Error("Invalid Adapter"),c.code=404,c}catch(e){l.taskqueue.fail(e),l.changes=a.toPromise(function(t){t.complete&&t.complete(e)})}}(),c?s(c):(l.adapter=t.adapter,l.replicate={},l.replicate.from=function(e,t,n){return l.constructor.replicate(e,l,t,n)},l.replicate.to=function(e,t,n){return l.constructor.replicate(l,e,t,n)},l.sync=function(e,t,n){return l.constructor.sync(l,e,t,n)},l.replicate.sync=l.sync,l.destroy=a.adapterFun("destroy",function(e){var t=this,n=this.__opts||{};t.info(function(r,o){return r?e(r):(n.internal=!0,void t.constructor.destroy(o.db_name,n,e))})}),i.adapters[t.adapter].call(l,t,function(e){function n(e){"destroyed"===e&&(l.emit("destroyed"),i.removeListener(f,n))}return e?void(r&&(l.taskqueue.fail(e),r(e))):(i.on(f,n),l.emit("created",l),i.emit("created",t.originalName),l.taskqueue.ready(l),void r(null,l))}),t.skipSetup&&(l.taskqueue.ready(l),n.nextTick(function(){r(null,l)})),void(a.isCordova()&&cordova.fireWindowEvent(t.name+"_pouch",{})))});d.then(function(e){f(null,e)},f),l.then=d.then.bind(d),l["catch"]=d["catch"].bind(d)}var s=e(1),a=e(34),u=e(33),c=a.Promise;a.inherits(i,s),i.debug=e(40),t.exports=i}).call(this,e(39),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t){(function(n){"use strict";function r(e,t){function r(t,n,r){if(e.binary||e.json||!e.processData||"string"==typeof t){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(o){return r(o)}}else t=JSON.stringify(t);Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?s.generateErrorFromResponse(e):e})),r(null,t,n)}function u(e,t){var n,r;if(e.code&&e.status){var o=new Error(e.message||e.code);return o.status=e.status,t(o)}try{n=JSON.parse(e.responseText),r=s.generateErrorFromResponse(n)}catch(i){r=s.generateErrorFromResponse(e)}t(r)}function c(){return n.browser?"":new i("","binary")}var l=!1,f=a.getArguments(function(e){l||(t.apply(this,e),l=!0)});"function"==typeof e&&(f=e,e={}),e=a.clone(e);var d={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};return e=a.extend(!0,d,e),e.json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),o(e,function(t,n,o){if(t)return t.status=n?n.statusCode:400,u(t,f);var i,a=n.headers&&n.headers["content-type"],l=o||c();e.binary||!e.json&&e.processData||"object"==typeof l||!(/json/.test(a)||/^[\s]*\{/.test(l)&&/\}[\s]*$/.test(l))||(l=JSON.parse(l)),n.statusCode>=200&&n.statusCode<300?r(l,n,f):(e.binary&&(l=JSON.parse(l.toString())),i=s.generateErrorFromResponse(l),i.status=n.statusCode,f(i))})}var o=e(24),i=e(18),s=e(19),a=e(34);t.exports=r}).call(this,e(39))},{}],17:[function(e,t){(function(e){"use strict";function n(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(r){if("TypeError"!==r.name)throw r;for(var o=e.BlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,i=new o,s=0;s<t.length;s+=1)i.append(t[s]);return i.getBlob(n.type)}}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t){t.exports={}},{}],19:[function(e,t,n){"use strict";function r(e){Error.call(e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}var o=e(43);o(r,Error),r.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})},n.UNAUTHORIZED=new r({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),n.MISSING_BULK_DOCS=new r({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),n.MISSING_DOC=new r({status:404,error:"not_found",reason:"missing"}),n.REV_CONFLICT=new r({status:409,error:"conflict",reason:"Document update conflict"}),n.INVALID_ID=new r({status:400,error:"invalid_id",reason:"_id field must contain a string"}),n.MISSING_ID=new r({status:412,error:"missing_id",reason:"_id is required for puts"}),n.RESERVED_ID=new r({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),n.NOT_OPEN=new r({status:412,error:"precondition_failed",reason:"Database not open"}),n.UNKNOWN_ERROR=new r({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),n.BAD_ARG=new r({status:500,error:"badarg",reason:"Some query argument is invalid"}),n.INVALID_REQUEST=new r({status:400,error:"invalid_request",reason:"Request was invalid"}),n.QUERY_PARSE_ERROR=new r({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),n.DOC_VALIDATION=new r({status:500,error:"doc_validation",reason:"Bad special document member"}),n.BAD_REQUEST=new r({status:400,error:"bad_request",reason:"Something wrong with the request"}),n.NOT_AN_OBJECT=new r({status:400,error:"bad_request",reason:"Document must be a JSON object"}),n.DB_MISSING=new r({status:404,error:"not_found",reason:"Database not found"}),n.IDB_ERROR=new r({status:500,error:"indexed_db_went_bad",reason:"unknown"}),n.WSQ_ERROR=new r({status:500,error:"web_sql_went_bad",reason:"unknown"}),n.LDB_ERROR=new r({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),n.FORBIDDEN=new r({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),n.INVALID_REV=new r({status:400,error:"bad_request",reason:"Invalid rev format"}),n.FILE_EXISTS=new r({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),n.MISSING_STUB=new r({status:412,error:"missing_stub"}),n.error=function(e,t,n){function o(t){for(var r in e)"function"!=typeof e[r]&&(this[r]=e[r]);void 0!==n&&(this.name=n),void 0!==t&&(this.reason=t)}return o.prototype=r.prototype,new o(t)},n.getErrorTypeByProp=function(e,t,r){var o=n,i=Object.keys(o).filter(function(n){var r=o[n];return"function"!=typeof r&&r[e]===t}),s=r&&i.filter(function(e){var t=o[e];return t.message===r})[0]||i[0];return s?o[s]:null},n.generateErrorFromResponse=function(e){var t,r,o,i,s,a=n;return r=e.error===!0&&"string"==typeof e.name?e.name:e.error,s=e.reason,o=a.getErrorTypeByProp("name",r,s),e.missing||"missing"===s||"deleted"===s||"not_found"===r?o=a.MISSING_DOC:"doc_validation"===r?(o=a.DOC_VALIDATION,i=s):"bad_request"===r&&o.message!==s&&(0===s.indexOf("unknown stub attachment")?(o=a.MISSING_STUB,i=s):o=a.BAD_REQUEST),o||(o=a.getErrorTypeByProp("status",e.status,s)||a.UNKNOWN_ERROR),t=a.error(o,s,r),i&&(t.message=i),e.id&&(t.id=e.id),e.status&&(t.status=e.status),e.statusText&&(t.name=e.statusText),e.missing&&(t.missing=e.missing),t}},{}],20:[function(e,t){(function(n,r){"use strict";function o(e,t,n){if("function"==typeof e.slice)return t||n?n?e.slice(t,n):e.slice(t):e.slice();t=Math.floor(t||0),n=Math.floor(n||0);var r=e.byteLength;if(t=0>t?Math.max(t+r,0):Math.min(r,t),n=0>n?Math.max(n+r,0):Math.min(r,n),0>=n-t)return new ArrayBuffer(0);var o=new ArrayBuffer(n-t),i=new Uint8Array(o),s=new Uint8Array(e,t,n-t);return i.set(s),o}function i(e){var t=[255&e,e>>>8&255,e>>>16&255,e>>>24&255];return t.map(function(e){return String.fromCharCode(e)}).join("")}function s(e){for(var t="",n=0;n<e.length;n++)t+=i(e[n]);return btoa(t)}var a=e(37),u=e(73),c=r.setImmediate||r.setTimeout,l=32768;t.exports=function(e,t){function r(e,t,n,r){d?e.appendBinary(t.substring(n,r)):e.append(o(t,n,r))}function i(){var n=m*p,o=n+p;if(m++,v>m)r(g,e,n,o),c(i);else{r(g,e,n,o);var a=g.end(!0),u=s(a);t(null,u),g.destroy()}}if(!n.browser){var f=a.createHash("md5").update(e).digest("base64");return void t(null,f)}var d="string"==typeof e,h=d?e.length:e.byteLength,p=Math.min(l,h),v=Math.ceil(h/p),m=0,g=d?new u:new u.ArrayBuffer;i()}}).call(this,e(39),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function o(e){if(!/^\d+\-./.test(e))return s.error(s.INVALID_REV);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function i(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,o=[r[0],t,[]],i=1,s=r.length;s>i;i++)o=[r[i],{status:"missing"},[o]];return[{pos:n,ids:o}]}var s=e(19),a=e(26),u=r(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),c=r(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);n.invalidIdError=function(e){var t;if(e?"string"!=typeof e?t=s.error(s.INVALID_ID):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=s.error(s.RESERVED_ID)):t=s.error(s.MISSING_ID),t)throw t},n.parseDoc=function(e,t){var r,l,f,d={status:"available"};if(e._deleted&&(d.deleted=!0),t)if(e._id||(e._id=a()),l=a(32,16).toLowerCase(),e._rev){if(f=o(e._rev),f.error)return f;e._rev_tree=[{pos:f.prefix,ids:[f.id,{status:"missing"},[[l,d,[]]]]}],r=f.prefix+1}else e._rev_tree=[{pos:1,ids:[l,d,[]]}],r=1;else if(e._revisions&&(e._rev_tree=i(e._revisions,d),r=e._revisions.start,l=e._revisions.ids[0]),!e._rev_tree){if(f=o(e._rev),f.error)return f;r=f.prefix,l=f.id,e._rev_tree=[{pos:r,ids:[l,d,[]]}]}n.invalidIdError(e._id),e._rev=r+"-"+l;var h={metadata:{},data:{}};for(var p in e)if(e.hasOwnProperty(p)){var v="_"===p[0];if(v&&!u[p]){var m=s.error(s.DOC_VALIDATION,p);throw m.message=s.DOC_VALIDATION.message+": "+p,m}v&&!c[p]?h.metadata[p.slice(1)]=e[p]:h.data[p]=e[p]}return h}},{}],22:[function(e,t){"use strict";function n(e){return decodeURIComponent(window.escape(e))}function r(e){return 65>e?e-48:e-55}function o(e,t,n){for(var o="";n>t;)o+=String.fromCharCode(r(e.charCodeAt(t++))<<4|r(e.charCodeAt(t++)));return o}function i(e,t,n){for(var o="";n>t;)o+=String.fromCharCode(r(e.charCodeAt(t+2))<<12|r(e.charCodeAt(t+3))<<8|r(e.charCodeAt(t))<<4|r(e.charCodeAt(t+1))),t+=4;return o}function s(e,t){return"UTF-8"===t?n(o(e,0,e.length)):i(e,0,e.length)}t.exports=s},{}],23:[function(e,t){"use strict";function n(e){for(var t=r,n=t.parser[t.strictMode?"strict":"loose"].exec(e),o={},i=14;i--;){var s=t.key[i],a=n[i]||"",u=-1!==["user","password"].indexOf(s);o[s]=u?decodeURIComponent(a):a}return o[t.q.name]={},o[t.key[12]].replace(t.q.parser,function(e,n,r){n&&(o[t.q.name][n]=r)}),o}var r={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};t.exports=n},{}],24:[function(e,t){"use strict";var n=e(17),r=e(34);t.exports=function(e,t){var o,i,s,a=function(){o.abort()};if(o=e.xhr?new e.xhr:new XMLHttpRequest,"GET"===e.method&&!e.cache){var u=-1!==e.url.indexOf("?");e.url+=(u?"&":"?")+"_nonce="+Date.now()}o.open(e.method,e.url),o.withCredentials=!0,e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(o.responseType="arraybuffer"),"body"in e||(e.body=null);for(var c in e.headers)e.headers.hasOwnProperty(c)&&o.setRequestHeader(c,e.headers[c]);return e.timeout>0&&(i=setTimeout(a,e.timeout),o.onprogress=function(){clearTimeout(i),i=setTimeout(a,e.timeout)},"undefined"==typeof s&&(s=-1!==Object.keys(o).indexOf("upload")),s&&(o.upload.onprogress=o.onprogress)),o.onreadystatechange=function(){if(4===o.readyState){var r={statusCode:o.status};if(o.status>=200&&o.status<300){var i;i=e.binary?n([o.response||""],{type:o.getResponseHeader("Content-Type")}):o.responseText,t(null,r,i)}else{var s={};try{s=JSON.parse(o.response)}catch(a){}t(s,r)}}},e.body&&e.body instanceof Blob?r.readAsBinaryString(e.body,function(e){o.send(r.fixBinary(e))}):o.send(e.body),{abort:a}}},{}],25:[function(e,t){"use strict";var n=e(72).upsert;t.exports=function(e,t,r,o){return n.call(e,t,r,o)}},{}],26:[function(e,t){"use strict";function n(e){return 0|Math.random()*e}function r(e,t){t=t||o.length;var r="",i=-1;if(e){for(;++i<e;)r+=o[n(t)];return r}for(;++i<36;)switch(i){case 8:case 13:case 18:case 23:r+="-";break;case 19:r+=o[3&n(16)|8];break;default:r+=o[n(16)]}return r}var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t.exports=r},{}],27:[function(_dereq_,module,exports){"use strict";function evalFilter(input){return eval(["(function () { return ",input," })()"].join(""))}module.exports=evalFilter},{}],28:[function(_dereq_,module,exports){"use strict";function evalView(input){return eval(["(function () {","  return function (doc) {","    var emitted = false;","    var emit = function (a, b) {","      emitted = true;","    };","    var view = "+input+";","    view(doc);","    if (emitted) {","      return true;","    }","  }","})()"].join("\n"))}module.exports=evalView},{}],29:[function(e,t){"use strict";function n(e,t,n){for(var r,o=0,i=e.length;i>o;)r=o+i>>>1,n(e[r],t)<0?o=r+1:i=r;return o}function r(e,t,r){var o=n(e,t,r);e.splice(o,0,t)}function o(e){for(var t,n=e.shift(),r=[n.id,n.opts,[]],o=r;e.length;)n=e.shift(),t=[n.id,n.opts,[]],o[2].push(t),o=t;return r}function i(e,t){return e[0]<t[0]?-1:1}function s(e,t){for(var n=[{tree1:e,tree2:t}],o=!1;n.length>0;){var s=n.pop(),a=s.tree1,u=s.tree2;(a[1].status||u[1].status)&&(a[1].status="available"===a[1].status||"available"===u[1].status?"available":"missing");for(var c=0;c<u[2].length;c++)if(a[2][0]){for(var l=!1,f=0;f<a[2].length;f++)a[2][f][0]===u[2][c][0]&&(n.push({tree1:a[2][f],tree2:u[2][c]}),l=!0);l||(o="new_branch",r(a[2],u[2][c],i))}else o="new_leaf",a[2][0]=u[2][c]}return{conflicts:o,tree:e}}function a(e,t,n){var r,o=[],i=!1,a=!1;return e.length?(e.forEach(function(e){if(e.pos===t.pos&&e.ids[0]===t.ids[0])r=s(e.ids,t.ids),o.push({pos:e.pos,ids:r.tree}),i=i||r.conflicts,a=!0;else if(n!==!0){var u=e.pos<t.pos?e:t,c=e.pos<t.pos?t:e,l=c.pos-u.pos,f=[],d=[];for(d.push({ids:u.ids,diff:l,parent:null,parentIdx:null});d.length>0;){var h=d.pop();0!==h.diff?h.ids&&h.ids[2].forEach(function(e,t){d.push({ids:e,diff:h.diff-1,parent:h.ids,parentIdx:t})}):h.ids[0]===c.ids[0]&&f.push(h)}var p=f[0];p?(r=s(p.ids,c.ids),p.parent[2][p.parentIdx]=r.tree,o.push({pos:u.pos,ids:u.ids}),i=i||r.conflicts,a=!0):o.push(e)}else o.push(e)}),a||o.push(t),o.sort(function(e,t){return e.pos-t.pos}),{tree:o,conflicts:i||"internal_node"}):{tree:[t],conflicts:"new_leaf"}}function u(e,t){var n=l.rootToLeaf(e).map(function(e){var n=e.ids.slice(-t);return{pos:e.pos+(e.ids.length-n.length),ids:o(n)}});return n.reduce(function(e,t){return a(e,t,!0).tree},[n.shift()])}var c=e(65),l={};l.merge=function(e,t,n){e=c(!0,[],e),t=c(!0,{},t);var r=a(e,t);return{tree:u(r.tree,n),conflicts:r.conflicts}},l.winningRev=function(e){var t=[];return l.traverseRevTree(e.rev_tree,function(e,n,r,o,i){e&&t.push({pos:n,id:r,deleted:!!i.deleted})}),t.sort(function(e,t){return e.deleted!==t.deleted?e.deleted>t.deleted?1:-1:e.pos!==t.pos?t.pos-e.pos:e.id<t.id?1:-1}),t[0].pos+"-"+t[0].id},l.traverseRevTree=function(e,t){for(var n,r=e.slice();n=r.pop();)for(var o=n.pos,i=n.ids,s=i[2],a=t(0===s.length,o,i[0],n.ctx,i[1]),u=0,c=s.length;c>u;u++)r.push({pos:o+1,ids:s[u],ctx:a})},l.collectLeaves=function(e){var t=[];return l.traverseRevTree(e,function(e,n,r,o,i){e&&t.push({rev:n+"-"+r,pos:n,opts:i})}),t.sort(function(e,t){return t.pos-e.pos}),t.forEach(function(e){delete e.pos}),t},l.collectConflicts=function(e){var t=l.winningRev(e),n=l.collectLeaves(e.rev_tree),r=[];return n.forEach(function(e){e.rev===t||e.opts.deleted||r.push(e.rev)}),r},l.rootToLeaf=function(e){var t=[];return l.traverseRevTree(e,function(e,n,r,o,i){if(o=o?o.slice(0):[],o.push({id:r,opts:i}),e){var s=n+1-o.length;t.unshift({pos:s,ids:o})}return o}),t},t.exports=l},{}],30:[function(e,t,n){"use strict";function r(e,t){e=parseInt(e,10),t=parseInt(t,10),e!==e&&(e=0),t!==t||e>=t?t=(e||1)<<1:t+=1;var n=Math.random(),r=t-e;return~~(r*n+e)}function o(e){var t=0;return e||(t=2e3),r(e,t)}function i(e,t,n,r,i,s,a){return r.retry===!1?(i.emit("error",a),void i.removeAllListeners()):(r.default_back_off=r.default_back_off||0,r.retries=r.retries||0,"function"!=typeof r.back_off_function&&(r.back_off_function=o),r.retries++,r.max_retries&&r.retries>r.max_retries?(i.emit("error",new Error("tried "+r.retries+" times but replication failed")),void i.removeAllListeners()):(i.emit("requestError",a),"active"===i.state&&(i.emit("paused",a),i.state="stopped",i.once("active",function(){r.current_back_off=r.default_back_off})),r.current_back_off=r.current_back_off||r.default_back_off,r.current_back_off=r.back_off_function(r.current_back_off),void setTimeout(function(){u(e,t,n,r,i)},r.current_back_off)))}function s(){d.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new f.Promise(function(t,n){e.once("complete",t),e.once("error",n)});e.then=function(e,n){return t.then(e,n)},e["catch"]=function(e){return t["catch"](e)},e["catch"](function(){})}function a(e,t,n){var r=n.filter?n.filter.toString():"";return e.id().then(function(e){return t.id().then(function(t){var o=e+t+r+JSON.stringify(n.query_params)+n.doc_ids;return f.MD5(o).then(function(e){return e=e.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+e})})})}function u(e,t,n,r,o,s){function a(){if(0!==T.docs.length){var e=T.docs;return n.bulkDocs({docs:e,new_edits:!1}).then(function(t){if(U.cancelled)throw b(),new Error("cancelled");var n=[],r={};t.forEach(function(e){e.error&&(s.doc_write_failures++,n.push(e),r[e.id]=e)}),s.errors=n,F=F.concat(n),s.docs_written+=T.docs.length-n.length;var i=n.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(B=[],e.forEach(function(e){var t=r[e._id];t?o.emit("denied",f.clone(t)):B.push(e)}),i.length>0){var a=new Error("bulkDocs error");throw a.other_errors=n,y("target.bulkDocs failed to write docs",a),new Error("bulkWrite partial failure")}},function(t){throw s.doc_write_failures+=e.length,t})}}function u(e){for(var n=T.diffs,r=n[e].missing,o=[],i=0;i<r.length;i+=p)o.push(r.slice(i,Math.min(r.length,i+p)));return f.Promise.all(o.map(function(r){var o={revs:!0,open_revs:r,attachments:!0};return t.get(e,o).then(function(t){t.forEach(function(e){return U.cancelled?b():void(e.ok&&(s.docs_read++,T.pendingRevs++,T.docs.push(e.ok)))}),delete n[e]})}))}function c(){var e=Object.keys(T.diffs);return f.Promise.all(e.map(u))}function l(){var e=Object.keys(T.diffs).filter(function(e){var t=T.diffs[e].missing;return 1===t.length&&"1-"===t[0].slice(0,2)});return e.length?t.allDocs({keys:e,include_docs:!0}).then(function(e){if(U.cancelled)throw b(),new Error("cancelled");e.rows.forEach(function(e){!e.doc||e.deleted||"1-"!==e.value.rev.slice(0,2)||e.doc._attachments&&0!==Object.keys(e.doc._attachments).length||(s.docs_read++,T.pendingRevs++,T.docs.push(e.doc),delete T.diffs[e.id])})}):f.Promise.resolve()}function d(){return l().then(c)}function v(){return D=!0,P.writeCheckpoint(T.seq).then(function(){if(D=!1,U.cancelled)throw b(),new Error("cancelled");s.last_seq=R=T.seq;var e=f.clone(s);e.docs=B,o.emit("change",e),T=void 0,S()})["catch"](function(e){throw D=!1,y("writeCheckpoint completed with error",e),e})}function m(){var e={};return T.changes.forEach(function(t){e[t.id]=t.changes.map(function(e){return e.rev})}),n.revsDiff(e).then(function(e){if(U.cancelled)throw b(),new Error("cancelled");T.diffs=e,T.pendingRevs=0})}function g(){if(!U.cancelled&&!T){if(0===O.length)return void _(!0);T=O.shift(),m().then(d).then(a).then(v).then(g)["catch"](function(e){y("batch processing terminated with error",e)})}}function _(e){return 0===A.changes.length?void(0!==O.length||T||((C&&Y.live||j)&&(o.emit("paused"),o.emit("uptodate",s)),j&&b())):void((e||j||A.changes.length>=L)&&(O.push(A),A={seq:0,changes:[],docs:[]},g()))}function y(e,t){I||(t.message||(t.message=e),s.ok=!1,s.status="aborting",s.errors.push(t),F=F.concat(t),O=[],A={seq:0,changes:[],docs:[]},b())}function b(){if(!(I||U.cancelled&&(s.status="cancelled",D))){s.status=s.status||"complete",s.end_time=new Date,s.last_seq=R,I=U.cancelled=!0;var a=F.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(a.length>0){var u=F.pop();F.length>0&&(u.other_errors=F),u.result=s,i(e,t,n,r,o,s,u)}else s.errors=F,o.emit("complete",s),o.removeAllListeners()}}function w(e){if(U.cancelled)return b();var t=f.filterChange(r)(e);t&&(0!==A.changes.length||0!==O.length||T||o.emit("outofdate",s),A.seq=e.seq,A.changes.push(e),_(0===O.length))}function E(e){return q=!1,U.cancelled?b():(e.results.length>0?(Y.since=e.last_seq,S()):C?(Y.live=!0,S()):j=!0,void _(!0))}function k(e){return q=!1,U.cancelled?b():void y("changes rejected",e)}function S(){function e(){r.cancel()}function n(){o.removeListener("cancel",e)}if(!q&&!j&&O.length<M){q=!0,o.once("cancel",e);var r=t.changes(Y).on("change",w);r.then(n,n),r.then(E)["catch"](k)}}function x(){P.getCheckpoint().then(function(e){R=e,Y={since:R,limit:L,batch_size:L,style:"all_docs",doc_ids:N,returnDocs:!0},r.filter&&(Y.include_docs=!0),r.query_params&&(Y.query_params=r.query_params),S()})["catch"](function(e){y("getCheckpoint rejected with ",e)})}var T,O=[],A={seq:0,changes:[],docs:[]},D=!1,j=!1,I=!1,R=0,C=r.continuous||r.live||!1,L=r.batch_size||100,M=r.batches_limit||10,q=!1,N=r.doc_ids,U={cancelled:!1},P=new h(t,n,e,U),F=[],B=[];s=s||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var Y={};o.ready(t,n),o.once("cancel",b),"function"==typeof r.onChange&&o.on("change",r.onChange),"function"==typeof r.complete&&(o.once("error",r.complete),o.once("complete",function(e){r.complete(null,e)})),"undefined"==typeof r.since?x():(D=!0,P.writeCheckpoint(r.since).then(function(){return D=!1,U.cancelled?void b():(R=r.since,void x())})["catch"](function(e){throw D=!1,y("writeCheckpoint completed with error",e),e}))}function c(e,t){var n=t.PouchConstructor;return"string"==typeof e?new n(e):e.then?e:f.Promise.resolve(e)}function l(e,t,n,r){"function"==typeof n&&(r=n,n={}),"undefined"==typeof n&&(n={}),n.complete||(n.complete=r||function(){}),n=f.clone(n),n.continuous=n.continuous||n.live,n.retry="retry"in n?n.retry:v,n.PouchConstructor=n.PouchConstructor||this;var o=new s(n);return c(e,n).then(function(e){return c(t,n).then(function(t){return a(e,t,n).then(function(r){u(r,e,t,n,o)})})})["catch"](function(e){o.emit("error",e),n.complete(e)}),o}var f=e(34),d=e(38).EventEmitter,h=e(14),p=50,v=!1;f.inherits(s,d),s.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},s.prototype.ready=function(e,t){function n(){o.cancel()}function r(){e.removeListener("destroyed",n),t.removeListener("destroyed",n)}var o=this;this.once("change",function(){("pending"===this.state||"stopped"===this.state)&&(o.state="active",o.emit("active"))}),e.once("destroyed",n),t.once("destroyed",n),this.then(r,r)},n.toPouch=c,n.replicate=l},{}],31:[function(e,t){"use strict";var n=e(15),r=e(34),o=r.Promise,i=e(38).EventEmitter;n.adapters={},n.preferredAdapters=e(8),n.prefix="_pouch_";var s=new i,a=["on","addListener","emit","listeners","once","removeAllListeners","removeListener","setMaxListeners"];a.forEach(function(e){n[e]=s[e].bind(s)}),n.setMaxListeners(0),n.parseAdapter=function(e,t){var o,i,s=e.match(/([a-z\-]*):\/\/(.*)/);if(s){if(e=/http(s?)/.test(s[1])?s[1]+"://"+s[2]:s[2],o=s[1],!n.adapters[o].valid())throw"Invalid adapter";return{name:e,adapter:s[1]}}var a="idb"in n.adapters&&"websql"in n.adapters&&r.hasLocalStorage()&&localStorage["_pouch__websqldb_"+n.prefix+e];if("undefined"!=typeof t&&t.db)i="leveldb";else for(var u=0;u<n.preferredAdapters.length;++u)if(i=n.preferredAdapters[u],i in n.adapters){if(a&&"idb"===i)continue;break}if(o=n.adapters[i],i&&o){var c="use_prefix"in o?o.use_prefix:!0;return{name:c?n.prefix+e:e,adapter:i}}throw"No valid adapter found"},n.destroy=r.toPromise(function(e,t,i){function s(){c.destroy(d,t,function(t,r){t?i(t):(n.emit("destroyed",e),n.emit(e,"destroyed"),i(null,r||{ok:!0}))})}("function"==typeof t||"undefined"==typeof t)&&(i=t,t={}),e&&"object"==typeof e&&(t=e,e=void 0),t.internal||console.log("PouchDB.destroy() is deprecated and will be removed. Please use db.destroy() instead.");var a=n.parseAdapter(t.name||e,t),u=a.name,c=n.adapters[a.adapter],l="use_prefix"in c?c.use_prefix:!0,f=l?u.replace(new RegExp("^"+n.prefix),""):u,d=("http"===a.adapter||"https"===a.adapter?"":t.prefix||"")+u,h=r.extend(!0,{},t,{adapter:a.adapter});new n(f,h,function(e,a){return e?i(e):void a.get("_local/_pouch_dependentDbs",function(e,u){if(e)return 404!==e.status?i(e):s();var c=u.dependentDbs,f=Object.keys(c).map(function(e){var o=l?e.replace(new RegExp("^"+n.prefix),""):e,i=r.extend(!0,t,a.__opts||{});return a.constructor.destroy(o,i)});o.all(f).then(s,function(e){i(e)})})})}),n.adapter=function(e,t){t.valid()&&(n.adapters[e]=t)},n.plugin=function(e){Object.keys(e).forEach(function(t){n.prototype[t]=e[t]})},n.defaults=function(e){function t(t,o,i){("function"==typeof o||"undefined"==typeof o)&&(i=o,o={}),t&&"object"==typeof t&&(o=t,t=void 0),o=r.extend(!0,{},e,o),n.call(this,t,o,i)}return r.inherits(t,n),t.destroy=r.toPromise(function(t,o,i){return("function"==typeof o||"undefined"==typeof o)&&(i=o,o={}),t&&"object"==typeof t&&(o=t,t=void 0),o=r.extend(!0,{},e,o),n.destroy(t,o,i)}),a.forEach(function(e){t[e]=s[e].bind(s)}),t.setMaxListeners(0),t.preferredAdapters=n.preferredAdapters.slice(),Object.keys(n).forEach(function(e){e in t||(t[e]=n[e])}),t},t.exports=n},{}],32:[function(e,t){"use strict";function n(e,t,n,s){return"function"==typeof n&&(s=n,n={}),"undefined"==typeof n&&(n={}),n=o.clone(n),n.PouchConstructor=n.PouchConstructor||this,e=i.toPouch(e,n),t=i.toPouch(t,n),new r(e,t,n,s)}function r(e,t,n,r){function i(e){v||(v=!0,d.emit("cancel",e))}function a(e){d.emit("change",{direction:"pull",change:e})}function u(e){d.emit("change",{direction:"push",change:e})}function c(e){d.emit("denied",{direction:"push",doc:e})}function l(e){d.emit("denied",{direction:"pull",doc:e})}function f(e){return function(t,n){var r="change"===t&&(n===a||n===u),o="cancel"===t&&n===i,s=t in m&&n===m[t];(r||o||s)&&(t in g||(g[t]={}),g[t][e]=!0,2===Object.keys(g[t]).length&&d.removeAllListeners(t))}}var d=this;this.canceled=!1;var h,p;"onChange"in n&&(h=n.onChange,delete n.onChange),"function"!=typeof r||n.complete?"complete"in n&&(p=n.complete,delete n.complete):p=r,this.push=s(e,t,n),this.pull=s(t,e,n);var v=!1,m={},g={};n.live&&(this.push.on("complete",d.pull.cancel.bind(d.pull)),this.pull.on("complete",d.push.cancel.bind(d.push))),this.on("newListener",function(e){"change"===e?(d.pull.on("change",a),d.push.on("change",u)):"denied"===e?(d.pull.on("denied",l),d.push.on("denied",c)):"cancel"===e?(d.pull.on("cancel",i),d.push.on("cancel",i)):"error"===e||"removeListener"===e||"complete"===e||e in m||(m[e]=function(t){d.emit(e,t)},d.pull.on(e,m[e]),d.push.on(e,m[e]))}),this.on("removeListener",function(e){"change"===e?(d.pull.removeListener("change",a),d.push.removeListener("change",u)):"cancel"===e?(d.pull.removeListener("cancel",i),d.push.removeListener("cancel",i)):e in m&&"function"==typeof m[e]&&(d.pull.removeListener(e,m[e]),d.push.removeListener(e,m[e]),delete m[e])}),this.pull.on("removeListener",f("pull")),this.push.on("removeListener",f("push"));var _=o.Promise.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return d.emit("complete",t),p&&p(null,t),d.removeAllListeners(),t},function(e){throw d.cancel(),d.emit("error",e),p&&p(e),d.removeAllListeners(),e});this.then=function(e,t){return _.then(e,t)},this["catch"]=function(e){return _["catch"](e)}}var o=e(34),i=e(30),s=i.replicate,a=e(38).EventEmitter;o.inherits(r,a),t.exports=n,r.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}},{}],33:[function(e,t){"use strict";function n(){this.isReady=!1,this.failed=!1,this.queue=[]}t.exports=n,n.prototype.execute=function(){var e,t;if(this.failed)for(;e=this.queue.shift();)"function"!=typeof e?(t=e.parameters[e.parameters.length-1],"function"==typeof t?t(this.failed):"changes"===e.name&&"function"==typeof t.complete&&t.complete(this.failed)):e(this.failed);else if(this.isReady)for(;e=this.queue.shift();)"function"==typeof e?e():e.task=this.db[e.name].apply(this.db,e.parameters)},n.prototype.fail=function(e){this.failed=e,this.execute()},n.prototype.ready=function(e){return this.failed?!1:0===arguments.length?this.isReady:(this.isReady=e?!0:!1,this.db=e,void this.execute())},n.prototype.addTask=function(e,t){if("function"!=typeof e){var n={name:e,parameters:t};return this.queue.push(n),this.failed&&this.execute(),n}this.queue.push(e),this.failed&&this.execute()}},{}],34:[function(e,t,n){(function(t,r){function o(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function i(){if(!(this instanceof i))return new i;var e=this;c.call(this),this.isChrome=o(),this.listeners={},this.hasLocal=!1,this.isChrome||(this.hasLocal=n.hasLocalStorage()),this.isChrome?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):this.hasLocal&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}var s=e(29);n.extend=e(65),n.ajax=e(16),n.createBlob=e(17),n.uuid=e(26),n.getArguments=e(36);var a=e(18),u=e(19),c=e(38).EventEmitter,l=e(64);n.Map=l.Map,n.Set=l.Set;var f=e(21);n.Promise="function"==typeof r.Promise?r.Promise:e(47);
var d=n.Promise;n.lastIndexOf=function(e,t){for(var n=e.length-1;n>=0;n--)if(e.charAt(n)===t)return n;return-1},n.clone=function(e){return n.extend(!0,{},e)},n.pick=function(e,t){for(var n={},r=0,o=t.length;o>r;r++){var i=t[r];n[i]=e[i]}return n},n.inherits=e(43),n.call=n.getArguments(function(e){if(e.length){var t=e.shift();"function"==typeof t&&t.apply(this,e)}}),n.isLocalId=function(e){return/^_local/.test(e)},n.isDeleted=function(e,t){t||(t=s.winningRev(e));var n=t.indexOf("-");-1!==n&&(t=t.substring(n+1));var r=!1;return s.traverseRevTree(e.rev_tree,function(e,n,o,i,s){o===t&&(r=!!s.deleted)}),r},n.revExists=function(e,t){var n=!1;return s.traverseRevTree(e.rev_tree,function(e,r,o){r+"-"+o===t&&(n=!0)}),n},n.filterChange=function(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){if(e.filter&&n&&!e.filter.call(this,r.doc,t))return!1;if(e.include_docs){if(!e.attachments)for(var o in r.doc._attachments)r.doc._attachments.hasOwnProperty(o)&&(r.doc._attachments[o].stub=!0)}else delete r.doc;return!0}},n.parseDoc=f.parseDoc,n.invalidIdError=f.invalidIdError,n.isCordova=function(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap},n.hasLocalStorage=function(){if(o())return!1;try{return localStorage}catch(e){return!1}},n.Changes=i,n.inherits(i,c),i.prototype.addListener=function(e,r,o,i){function s(){if(a.listeners[r]){if(u)return void(u="waiting");u=!0,o.changes({style:i.style,include_docs:i.include_docs,attachments:i.attachments,conflicts:i.conflicts,continuous:!1,descending:!1,filter:i.filter,doc_ids:i.doc_ids,view:i.view,since:i.since,query_params:i.query_params}).on("change",function(e){e.seq>i.since&&!i.cancelled&&(i.since=e.seq,n.call(i.onChange,e))}).on("complete",function(){"waiting"===u&&t.nextTick(function(){a.notify(e)}),u=!1}).on("error",function(){u=!1})}}if(!this.listeners[r]){var a=this,u=!1;this.listeners[r]=s,this.on(e,s)}},i.prototype.removeListener=function(e,t){t in this.listeners&&c.prototype.removeListener.call(this,e,this.listeners[t])},i.prototype.notifyLocalWindows=function(e){this.isChrome?chrome.storage.local.set({dbName:e}):this.hasLocal&&(localStorage[e]="a"===localStorage[e]?"b":"a")},i.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)},n.atob="function"==typeof atob?function(e){return atob(e)}:function(e){var t=new a(e,"base64");if(t.toString("base64")!==e)throw"Cannot base64 encode full string";return t.toString("binary")},n.btoa="function"==typeof btoa?function(e){return btoa(e)}:function(e){return new a(e,"binary").toString("base64")},n.fixBinary=function(e){if(!t.browser)return e;for(var n=e.length,r=new ArrayBuffer(n),o=new Uint8Array(r),i=0;n>i;i++)o[i]=e.charCodeAt(i);return r},n.readAsBinaryString=function(e,t){var r=new FileReader,o="function"==typeof r.readAsBinaryString;r.onloadend=function(e){var r=e.target.result||"";return o?t(r):void t(n.arrayBufferToBinaryString(r))},o?r.readAsBinaryString(e):r.readAsArrayBuffer(e)},n.readAsArrayBuffer=function(e,t){var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)},n.once=function(e){var t=!1;return n.getArguments(function(n){if(t)throw new Error("once called  more than once");t=!0,e.apply(this,n)})},n.toPromise=function(e){return n.getArguments(function(r){var o,i=this,s="function"==typeof r[r.length-1]?r.pop():!1;s&&(o=function(e,n){t.nextTick(function(){s(e,n)})});var a=new d(function(t,o){var s;try{var a=n.once(function(e,n){e?o(e):t(n)});r.push(a),s=e.apply(i,r),s&&"function"==typeof s.then&&t(s)}catch(u){o(u)}});return o&&a.then(function(e){o(null,e)},o),a.cancel=function(){return this},a})},n.adapterFun=function(t,r){function o(e,t,n){if(i.enabled){for(var r=[e._db_name,t],o=0;o<n.length-1;o++)r.push(n[o]);i.apply(null,r);var s=n[n.length-1];n[n.length-1]=function(n,r){var o=[e._db_name,t];o=o.concat(n?["error",n]:["success",r]),i.apply(null,o),s(n,r)}}}var i=e(40)("pouchdb:api");return n.toPromise(n.getArguments(function(e){if(this._closed)return d.reject(new Error("database is closed"));var i=this;return o(i,t,e),this.taskqueue.isReady?r.apply(this,e):new n.Promise(function(n,r){i.taskqueue.addTask(function(o){o?r(o):n(i[t].apply(i,e))})})}))},n.arrayBufferToBinaryString=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;r>o;o++)t+=String.fromCharCode(n[o]);return t},n.cancellableFun=function(e,t,r){r=r?n.clone(!0,{},r):{};var o=new c,i=r.complete||function(){},s=r.complete=n.once(function(e,t){e?i(e):(o.emit("end",t),i(null,t)),o.removeAllListeners()}),a=r.onChange||function(){},u=0;t.on("destroyed",function(){o.removeAllListeners()}),r.onChange=function(e){a(e),e.seq<=u||(u=e.seq,o.emit("change",e),e.deleted?o.emit("delete",e):1===e.changes.length&&"1-"===e.changes[0].rev.slice(0,1)?o.emit("create",e):o.emit("update",e))};var l=new d(function(e,t){r.complete=function(n,r){n?t(n):e(r)}});return l.then(function(e){s(null,e)},s),l.cancel=function(){l.isCancelled=!0,t.taskqueue.isReady&&r.complete(null,{status:"cancelled"})},t.taskqueue.isReady?e(t,r,l):t.taskqueue.addTask(function(){l.isCancelled?r.complete(null,{status:"cancelled"}):e(t,r,l)}),l.on=o.on.bind(o),l.once=o.once.bind(o),l.addListener=o.addListener.bind(o),l.removeListener=o.removeListener.bind(o),l.removeAllListeners=o.removeAllListeners.bind(o),l.setMaxListeners=o.setMaxListeners.bind(o),l.listeners=o.listeners.bind(o),l.emit=o.emit.bind(o),l},n.MD5=n.toPromise(e(20)),n.explain404=function(e){t.browser&&"console"in r&&"info"in console&&console.info("The above 404 is totally normal. "+e)},n.info=function(e){"undefined"!=typeof console&&"info"in console&&console.info(e)},n.parseUri=e(23),n.compare=function(e,t){return t>e?-1:e>t?1:0},n.updateDoc=function(e,t,r,o,i,a,c){if(n.revExists(e,t.metadata.rev))return r[o]=t,i();var l=n.isDeleted(e),f=n.isDeleted(t.metadata),d=/^1-/.test(t.metadata.rev);if(l&&!f&&c&&d){var h=t.data;h._rev=s.winningRev(e),h._id=t.metadata.id,t=n.parseDoc(h,c)}var p=s.merge(e.rev_tree,t.metadata.rev_tree[0],1e3),v=c&&(l&&f||!l&&"new_leaf"!==p.conflicts||l&&!f&&"new_branch"===p.conflicts);if(v){var m=u.error(u.REV_CONFLICT);return r[o]=m,i()}var g=t.metadata.rev;t.metadata.rev_tree=p.tree,e.rev_map&&(t.metadata.rev_map=e.rev_map);var _=s.winningRev(t.metadata);f=n.isDeleted(t.metadata,_);var y=0;(c||_===g)&&(y=l===f?0:f>l?-1:1),a(t,_,f,i,!0,y,o)},n.processDocs=function(e,t,r,o,i,a,c,l){function f(e,t,r){var o=s.winningRev(e.metadata),l=n.isDeleted(e.metadata,o);if("was_delete"in c&&l)return i[t]=u.error(u.MISSING_DOC,"deleted"),r();var f=l?0:1;a(e,o,l,r,!1,f,t)}function d(){++v===m&&l&&l()}if(e.length){var h=c.new_edits,p=new n.Map,v=0,m=e.length;e.forEach(function(e,r){if(e._id&&n.isLocalId(e._id))return void t[e._deleted?"_removeLocal":"_putLocal"](e,{ctx:o},function(e){i[r]=e?e:{ok:!0},d()});var s=e.metadata.id;p.has(s)?(m--,p.get(s).push([e,r])):p.set(s,[[e,r]])}),p.forEach(function(e,t){function o(){++u<e.length?s():d()}function s(){var s=e[u],c=s[0],l=s[1];r.has(t)?n.updateDoc(r.get(t),c,i,l,o,a,h):f(c,l,o)}var u=0;s()})}},n.preprocessAttachments=function(e,t,r){function o(e){try{return n.atob(e)}catch(t){var r=u.error(u.BAD_ARG,"Attachments need to be base64 encoded");return{error:r}}}function i(e,r){if(e.stub)return r();if("string"==typeof e.data){var i=o(e.data);if(i.error)return r(i.error);e.length=i.length,e.data="blob"===t?n.createBlob([n.fixBinary(i)],{type:e.content_type}):"base64"===t?n.btoa(i):i,n.MD5(i).then(function(t){e.digest="md5-"+t,r()})}else n.readAsArrayBuffer(e.data,function(o){"binary"===t?e.data=n.arrayBufferToBinaryString(o):"base64"===t&&(e.data=n.btoa(n.arrayBufferToBinaryString(o))),n.MD5(o).then(function(t){e.digest="md5-"+t,e.length=o.byteLength,r()})})}function s(){c++,e.length===c&&(a?r(a):r())}if(!e.length)return r();var a,c=0;e.forEach(function(e){function t(e){a=e,r++,r===n.length&&s()}var n=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],r=0;if(!n.length)return s();for(var o in e.data._attachments)e.data._attachments.hasOwnProperty(o)&&i(e.data._attachments[o],t)})},n.compactTree=function(e){var t=[];return s.traverseRevTree(e.rev_tree,function(e,n,r,o,i){"available"!==i.status||e||(t.push(n+"-"+r),i.status="missing")}),t};var h=e(74);n.safeJsonParse=function(e){try{return JSON.parse(e)}catch(t){return h.parse(e)}},n.safeJsonStringify=function(e){try{return JSON.stringify(e)}catch(t){return h.stringify(e)}}}).call(this,e(39),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(e,t){t.exports="3.3.1"},{}],36:[function(e,t){"use strict";function n(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}t.exports=n},{}],37:[function(){},{}],38:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),u=1;o>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(i(n)){for(o=arguments.length,a=new Array(o-1),u=1;o>u;u++)a[u-1]=arguments[u];for(c=n.slice(),o=c.length,u=0;o>u;u++)c[u].apply(this,a)}return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned){var o;o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],39:[function(e,t){function n(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var r=[];if(t){var o=document.createElement("div"),i=new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})});return i.observe(o,{attributes:!0}),function(e){r.length||o.setAttribute("yes","no"),r.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],40:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?c.removeItem("debug"):c.debug=e}catch(t){}}function a(){var e;try{e=c.debug}catch(t){}return e}function u(){try{return window.localStorage}catch(e){}}n=t.exports=e(41),n.log=i,n.formatArgs=o,n.save=s,n.load=a,n.useColors=r;var c;c="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{}],41:[function(e,t,n){function r(){return n.colors[l++%n.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,i=t-(c||t);e.diff=i,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%"===t)return t;a++;var o=n.formatters[r];if("function"==typeof o){var i=s[a];t=o.call(e,i),s.splice(a,1),a--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s));var u=o.log||n.log||console.log.bind(console);u.apply(e,s)}t.enabled=!1,o.enabled=!0;var i=n.enabled(e)?o:t;return i.namespace=e,i}function i(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,o=0;r>o;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function a(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=o,n.coerce=u,n.disable=s,n.enable=i,n.enabled=a,n.humanize=e(42),n.names=[],n.skips=[],n.formatters={};var c,l=0},{}],42:[function(e,t){function n(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"y":return n*l;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"h":return n*u;case"minutes":case"minute":case"m":return n*a;case"seconds":case"second":case"s":return n*s;case"ms":return n}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return i(e,c,"day")||i(e,u,"hour")||i(e,a,"minute")||i(e,s,"second")||e+" ms"}function i(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,u=60*a,c=24*u,l=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?o(e):r(e)}},{}],43:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],44:[function(e,t){"use strict";function n(){}t.exports=n},{}],45:[function(e,t){"use strict";function n(e){function t(e,t){function r(e){c[t]=e,++l===n&!u&&(u=!0,a.resolve(d,c))}i(e).then(r,function(e){u||(u=!0,a.reject(d,e))})}if("[object Array]"!==Object.prototype.toString.call(e))return o(new TypeError("must be an array"));var n=e.length,u=!1;if(!n)return i([]);for(var c=new Array(n),l=0,f=-1,d=new r(s);++f<n;)t(e[f],f);return d}var r=e(48),o=e(51),i=e(52),s=e(44),a=e(46);t.exports=n},{}],46:[function(e,t,n){"use strict";function r(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}var o=e(55),i=e(53),s=e(54);n.resolve=function(e,t){var a=o(r,t);if("error"===a.status)return n.reject(e,a.value);var u=a.value;if(u)i.safely(e,u);else{e.state=s.FULFILLED,e.outcome=t;for(var c=-1,l=e.queue.length;++c<l;)e.queue[c].callFulfilled(t)}return e},n.reject=function(e,t){e.state=s.REJECTED,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e}},{}],47:[function(e,t,n){t.exports=n=e(48),n.resolve=e(52),n.reject=e(51),n.all=e(45),n.race=e(50)},{}],48:[function(e,t){"use strict";function n(e){if(!(this instanceof n))return new n(e);if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=s.PENDING,this.queue=[],this.outcome=void 0,e!==o&&i.safely(this,e)}var r=e(56),o=e(44),i=e(53),s=e(54),a=e(49);t.exports=n,n.prototype["catch"]=function(e){return this.then(null,e)},n.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s.FULFILLED||"function"!=typeof t&&this.state===s.REJECTED)return this;var i=new n(o);if(this.state!==s.PENDING){var u=this.state===s.FULFILLED?e:t;r(i,u,this.outcome)}else this.queue.push(new a(i,e,t));return i}},{}],49:[function(e,t){"use strict";function n(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}var r=e(46),o=e(56);t.exports=n,n.prototype.callFulfilled=function(e){r.resolve(this.promise,e)},n.prototype.otherCallFulfilled=function(e){o(this.promise,this.onFulfilled,e)},n.prototype.callRejected=function(e){r.reject(this.promise,e)},n.prototype.otherCallRejected=function(e){o(this.promise,this.onRejected,e)}},{}],50:[function(e,t){"use strict";function n(e){function t(e){i(e).then(function(e){u||(u=!0,a.resolve(l,e))},function(e){u||(u=!0,a.reject(l,e))})}if("[object Array]"!==Object.prototype.toString.call(e))return o(new TypeError("must be an array"));var n=e.length,u=!1;if(!n)return i([]);for(var c=-1,l=new r(s);++c<n;)t(e[c]);return l}var r=e(48),o=e(51),i=e(52),s=e(44),a=e(46);t.exports=n},{}],51:[function(e,t){"use strict";function n(e){var t=new r(o);return i.reject(t,e)}var r=e(48),o=e(44),i=e(46);t.exports=n},{}],52:[function(e,t){"use strict";function n(e){if(e)return e instanceof r?e:i.resolve(new r(o),e);var t=typeof e;switch(t){case"boolean":return s;case"undefined":return u;case"object":return a;case"number":return c;case"string":return l}}var r=e(48),o=e(44),i=e(46);t.exports=n;var s=i.resolve(new r(o),!1),a=i.resolve(new r(o),null),u=i.resolve(new r(o),void 0),c=i.resolve(new r(o),0),l=i.resolve(new r(o),"")},{}],53:[function(e,t,n){"use strict";function r(e,t){function n(t){a||(a=!0,o.reject(e,t))}function r(t){a||(a=!0,o.resolve(e,t))}function s(){t(r,n)}var a=!1,u=i(s);"error"===u.status&&n(u.value)}var o=e(46),i=e(55);n.safely=r},{}],54:[function(e,t,n){n.REJECTED=["REJECTED"],n.FULFILLED=["FULFILLED"],n.PENDING=["PENDING"]},{}],55:[function(e,t){"use strict";function n(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}t.exports=n},{}],56:[function(e,t){"use strict";function n(e,t,n){r(function(){var r;try{r=t(n)}catch(i){return o.reject(e,i)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}var r=e(57),o=e(46);t.exports=n},{}],57:[function(e,t){"use strict";function n(){o=!0;for(var e,t,n=a.length;n;){for(t=a,a=[],e=-1;++e<n;)t[e]();n=a.length}o=!1}function r(e){1!==a.push(e)||o||i()}for(var o,i,s=[e(37),e(59),e(58),e(60),e(61)],a=[],u=-1,c=s.length;++u<c;)if(s[u]&&s[u].test&&s[u].test()){i=s[u].install(n);break}t.exports=r},{}],58:[function(e,t,n){(function(e){"use strict";n.test=function(){return e.setImmediate?!1:"undefined"!=typeof e.MessageChannel},n.install=function(t){var n=new e.MessageChannel;return n.port1.onmessage=t,function(){n.port2.postMessage(0)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(e,t,n){(function(e){"use strict";var t=e.MutationObserver||e.WebKitMutationObserver;n.test=function(){return t},n.install=function(n){var r=0,o=new t(n),i=e.document.createTextNode("");return o.observe(i,{characterData:!0}),function(){i.data=r=++r%2}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(e,t,n){(function(e){"use strict";n.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},n.install=function(t){return function(){var n=e.document.createElement("script");return n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n),t}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],61:[function(e,t,n){"use strict";n.test=function(){return!0},n.install=function(e){return function(){setTimeout(e,0)}}},{}],62:[function(e,t,n){"use strict";function r(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return l(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),o=-1,i=r.length,s="";if(t)for(;++o<i;)s+=n.toIndexableString(r[o]);else for(;++o<i;){var a=r[o];s+=n.toIndexableString(a)+n.toIndexableString(e[a])}return s}return""}function o(e,t){var n,r=t,o="1"===e[t];if(o)n=0,t++;else{var i="0"===e[t];t++;var s="",a=e.substring(t,t+d),u=parseInt(a,10)+f;for(i&&(u=-u),t+=d;;){var c=e[t];if("\x00"===c)break;s+=c,t++}s=s.split("."),n=1===s.length?parseInt(s,10):parseFloat(s[0]+"."+s[1]),i&&(n-=10),0!==u&&(n=parseFloat(n+"e"+u))}return{num:n,length:t-r}}function i(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(n);else if(i===e.length-2){var s=e.pop();o[s]=n}else e.push(n)}}function s(e,t){for(var r=Math.min(e.length,t.length),o=0;r>o;o++){var i=n.collate(e[o],t[o]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}function a(e,t){return e===t?0:e>t?1:-1}function u(e,t){for(var r=Object.keys(e),o=Object.keys(t),i=Math.min(r.length,o.length),s=0;i>s;s++){var a=n.collate(r[s],o[s]);if(0!==a)return a;if(a=n.collate(e[r[s]],t[o[s]]),0!==a)return a}return r.length===o.length?0:r.length>o.length?1:-1}function c(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);return~n?null===e?1:Array.isArray(e)?5:3>n?n+2:n+3:Array.isArray(e)?5:void 0}function l(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=0>e,o=r?"0":"2",i=(r?-n:n)-f,s=p.padLeft(i.toString(),"0",d);o+=h+s;var a=Math.abs(parseFloat(t[0]));r&&(a=10-a);var u=a.toFixed(20);return u=u.replace(/\.?0+$/,""),o+=h+u}var f=-324,d=3,h="",p=e(63);n.collate=function(e,t){if(e===t)return 0;e=n.normalizeKey(e),t=n.normalizeKey(t);var r=c(e),o=c(t);if(r-o!==0)return r-o;if(null===e)return 0;switch(typeof e){case"number":return e-t;case"boolean":return e===t?0:t>e?-1:1;case"string":return a(e,t)}return Array.isArray(e)?s(e,t):u(e,t)},n.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":return 1/0===e||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var o=0;r>o;o++)e[o]=n.normalizeKey(t[o])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];"undefined"!=typeof s&&(e[i]=n.normalizeKey(s))}}}}return e},n.toIndexableString=function(e){var t="\x00";return e=n.normalizeKey(e),c(e)+h+r(e)+t},n.parseIndexableString=function(e){for(var t=[],n=[],r=0;;){var s=e[r++];if("\x00"!==s)switch(s){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var a=o(e,r);t.push(a.num),r+=a.length;break;case"4":for(var u="";;){var c=e[r];if("\x00"===c)break;u+=c,r++}u=u.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(u);break;case"5":var l={element:[],index:t.length};t.push(l.element),n.push(l);break;case"6":var f={element:{},index:t.length};t.push(f.element),n.push(f);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+s)}else{if(1===t.length)return t.pop();i(t,n)}}}},{}],63:[function(e,t,n){"use strict";function r(e,t,n){for(var r="",o=n-e.length;r.length<o;)r+=t;return r}n.padLeft=function(e,t,n){var o=r(e,t,n);return o+e},n.padRight=function(e,t,n){var o=r(e,t,n);return e+o},n.stringLexCompare=function(e,t){var n,r=e.length,o=t.length;for(n=0;r>n;n++){if(n===o)return 1;var i=e.charAt(n),s=t.charAt(n);if(i!==s)return s>i?-1:1}return o>r?-1:0},n.intToDecimalForm=function(e){var t=0>e,n="";do{var r=t?-Math.ceil(e%10):Math.floor(e%10);n=r+n,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&"0"!==n&&(n="-"+n),n}},{}],64:[function(e,t,n){"use strict";function r(){this.store={}}function o(e){if(this.store=new r,e&&Array.isArray(e))for(var t=0,n=e.length;n>t;t++)this.add(e[t])}n.Map=r,n.Set=o,r.prototype.mangle=function(e){if("string"!=typeof e)throw new TypeError("key must be a string but Got "+e);return"$"+e},r.prototype.unmangle=function(e){return e.substring(1)},r.prototype.get=function(e){var t=this.mangle(e);return t in this.store?this.store[t]:void 0},r.prototype.set=function(e,t){var n=this.mangle(e);return this.store[n]=t,!0},r.prototype.has=function(e){var t=this.mangle(e);return t in this.store},r.prototype["delete"]=function(e){var t=this.mangle(e);return t in this.store?(delete this.store[t],!0):!1},r.prototype.forEach=function(e){var t=this,n=Object.keys(t.store);n.forEach(function(n){var r=t.store[n];n=t.unmangle(n),e(r,n)})},o.prototype.add=function(e){return this.store.set(e,!0)},o.prototype.has=function(e){return this.store.has(e)},o.prototype["delete"]=function(e){return this.store["delete"](e)}},{}],65:[function(e,t){"use strict";function n(e){return null===e?String(e):"object"==typeof e||"function"==typeof e?u[d.call(e)]||"object":typeof e}function r(e){return null!==e&&e===e.window}function o(e){if(!e||"object"!==n(e)||e.nodeType||r(e))return!1;try{if(e.constructor&&!h.call(e,"constructor")&&!h.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var o;for(o in e);return void 0===o||h.call(e,o)}function i(e){return"function"===n(e)}function s(){for(var e=[],t=-1,n=arguments.length,r=new Array(n);++t<n;)r[t]=arguments[t];var o={};e.push({args:r,result:{container:o,key:"key"}});for(var i;i=e.pop();)a(e,i.args,i.result);return o.key}function a(e,t,n){var r,s,a,u,c,l,f,d=t[0]||{},h=1,v=t.length,m=!1,g=/\d+/;for("boolean"==typeof d&&(m=d,d=t[1]||{},h=2),"object"==typeof d||i(d)||(d={}),v===h&&(d=this,--h);v>h;h++)if(null!=(r=t[h])){f=p(r);for(s in r)if(!(s in Object.prototype)){if(f&&!g.test(s))continue;if(a=d[s],u=r[s],d===u)continue;m&&u&&(o(u)||(c=p(u)))?(c?(c=!1,l=a&&p(a)?a:[]):l=a&&o(a)?a:{},e.push({args:[m,l,u],result:{container:d,key:s}})):void 0!==u&&(p(r)&&i(u)||(d[s]=u))}}n.container[n.key]=d}for(var u={},c=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],l=0;l<c.length;l++){var f=c[l];u["[object "+f+"]"]=f.toLowerCase()}var d=u.toString,h=u.hasOwnProperty,p=Array.isArray||function(e){return"array"===n(e)};t.exports=s},{}],66:[function(e,t){"use strict";var n=e(70),r=e(71),o=r.Promise;t.exports=function(e){var t=e.db,i=e.viewName,s=e.map,a=e.reduce,u=e.temporary,c=s.toString()+(a&&a.toString())+"undefined";if(!u&&t._cachedViews){var l=t._cachedViews[c];if(l)return o.resolve(l)}return t.info().then(function(e){function o(e){e.views=e.views||{};var t=i;-1===t.indexOf("/")&&(t=i+"/"+i);var n=e.views[t]=e.views[t]||{};if(!n[l])return n[l]=!0,e}var l=e.db_name+"-mrview-"+(u?"temp":r.MD5(c));return n(t,"_local/mrviews",o).then(function(){return t.registerDependentDatabase(l).then(function(e){var n=e.db;n.auto_compaction=!0;var r={name:l,db:n,sourceDB:t,adapter:t.adapter,mapFun:s,reduceFun:a};return r.db.get("_local/lastSeq")["catch"](function(e){if(404!==e.status)throw e}).then(function(e){return r.seq=e?e.seq:0,u||(t._cachedViews=t._cachedViews||{},t._cachedViews[c]=r,r.db.on("destroyed",function(){delete t._cachedViews[c]})),r})})})})}},{}],67:[function(_dereq_,module,exports){"use strict";module.exports=function(func,emit,sum,log,isArray,toJSON){return eval("'use strict'; ("+func.replace(/;\s*$/,"")+");")}},{}],68:[function(e,t,n){(function(t){"use strict";function r(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function o(e){return 1===e.length&&/^1-/.test(e[0].rev)}function i(e,t,n){try{return{output:t.apply(null,n)}}catch(r){return e.emit("error",r),{error:r}}}function s(e,t){var n=I(e.key,t.key);return 0!==n?n:I(e.value,t.value)}function a(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function u(e){var t=e.value,n=t&&"object"==typeof t&&t._id||e.id;return n}function c(e){var t=new Error("builtin "+e+" function requires map values to be numbers or number arrays");return t.name="invalid_value",t.status=500,t}function l(e){for(var t=0,n=0,r=e.length;r>n;n++){var o=e[n];if("number"!=typeof o){if(!Array.isArray(o))throw c("_sum");t="number"==typeof t?[t]:t;for(var i=0,s=o.length;s>i;i++){var a=o[i];if("number"!=typeof a)throw c("_sum");"undefined"==typeof t[i]?t.push(a):t[i]+=a}}else"number"==typeof t?t+=o:t[0]+=o}return t}function f(e,t,n,r){var o=t[e];"undefined"!=typeof o&&(r&&(o=encodeURIComponent(JSON.stringify(o))),n.push(e+"="+o))}function d(e,t){var n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if("undefined"!=typeof e[n]&&"undefined"!=typeof e[r]&&I(e[n],e[r])>0)throw new T("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&e.reduce!==!1){if(e.include_docs)throw new T("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new T("Multi-key fetches for reduce views must use {group: true}")}if(e.group_level){if("number"!=typeof e.group_level)throw new T('Invalid value for integer: "'+e.group_level+'"');
if(e.group_level<0)throw new T('Invalid value for positive integer: "'+e.group_level+'"')}}function h(e,t,n){var o,i=[],s="GET";if(f("reduce",n,i),f("include_docs",n,i),f("attachments",n,i),f("limit",n,i),f("descending",n,i),f("group",n,i),f("group_level",n,i),f("skip",n,i),f("stale",n,i),f("conflicts",n,i),f("startkey",n,i,!0),f("endkey",n,i,!0),f("inclusive_end",n,i),f("key",n,i,!0),i=i.join("&"),i=""===i?"":"?"+i,"undefined"!=typeof n.keys){var a=2e3,u="keys="+encodeURIComponent(JSON.stringify(n.keys));u.length+i.length+1<=a?i+=("?"===i[0]?"&":"?")+u:(s="POST","string"==typeof t?o=JSON.stringify({keys:n.keys}):t.keys=n.keys)}if("string"==typeof t){var c=r(t);return e.request({method:s,url:"_design/"+c[0]+"/_view/"+c[1]+i,body:o})}return o=o||{},Object.keys(t).forEach(function(e){o[e]=Array.isArray(t[e])?t[e]:t[e].toString()}),e.request({method:"POST",url:"_temp_view"+i,body:o})}function p(e){return function(t){if(404===t.status)return e;throw t}}function v(e,t,n){function r(){return o(f)?N.resolve(u):t.db.get(a)["catch"](p(u))}function i(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):N.resolve({rows:[]})}function s(e,t){for(var n=[],r={},o=0,i=t.rows.length;i>o;o++){var s=t.rows[o],a=s.doc;if(a&&(n.push(a),r[a._id]=!0,a._deleted=!l[a._id],!a._deleted)){var u=l[a._id];"value"in u&&(a.value=u.value)}}var c=Object.keys(l);return c.forEach(function(e){if(!r[e]){var t={_id:e},o=l[e];"value"in o&&(t.value=o.value),n.push(t)}}),e.keys=q.uniq(c.concat(e.keys)),n.push(e),n}var a="_local/doc_"+e,u={_id:a,keys:[]},c=n[e],l=c.indexableKeysToKeyValues,f=c.changes;return r().then(function(e){return i(e).then(function(t){return s(e,t)})})}function m(e,t,n){var r="_local/lastSeq";return e.db.get(r)["catch"](p({_id:r,seq:0})).then(function(r){var o=Object.keys(t);return N.all(o.map(function(n){return v(n,e,t)})).then(function(t){var o=q.flatten(t);return r.seq=n,o.push(r),e.db.bulkDocs({docs:o})})})}function g(e){var t="string"==typeof e?e:e.name,n=U[t];return n||(n=U[t]=new j),n}function _(e){return q.sequentialize(g(e),function(){return y(e)})()}function y(e){function t(e,t){var n={id:o._id,key:C(e)};"undefined"!=typeof t&&null!==t&&(n.value=C(t)),r.push(n)}function n(t,n){return function(){return m(e,t,n)}}var r,o,a;if("function"==typeof e.mapFun&&2===e.mapFun.length){var u=e.mapFun;a=function(e){return u(e,t)}}else a=M(e.mapFun.toString(),t,l,A,Array.isArray,JSON.parse);var c=e.seq||0,f=new j;return new N(function(t,u){function l(){f.finish().then(function(){e.seq=c,t()})}function d(){function t(e){u(e)}e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:c,limit:F}).on("complete",function(t){var u=t.results;if(!u.length)return l();for(var h={},p=0,v=u.length;v>p;p++){var m=u[p];if("_"!==m.doc._id[0]){r=[],o=m.doc,o._deleted||i(e.sourceDB,a,[o]),r.sort(s);for(var g,_={},y=0,b=r.length;b>y;y++){var w=r[y],E=[w.key,w.id];w.key===g&&E.push(y);var k=R(E);_[k]=w,g=w.key}h[m.doc._id]={indexableKeysToKeyValues:_,changes:m.changes}}c=m.seq}return f.add(n(h,c)),u.length<F?l():d()}).on("error",t)}d()})}function b(e,t,n){0===n.group_level&&delete n.group_level;var r,o=n.group||n.group_level;r=B[e.reduceFun]?B[e.reduceFun]:M(e.reduceFun.toString(),null,l,A,Array.isArray,JSON.parse);var s=[],u=n.group_level;t.forEach(function(e){var t=s[s.length-1],n=o?e.key:null;return o&&Array.isArray(n)&&"number"==typeof u&&(n=n.length>u?n.slice(0,u):n),t&&0===I(t.key[0][0],n)?(t.key.push([n,e.id]),void t.value.push(e.value)):void s.push({key:[[n,e.id]],value:[e.value]})});for(var c=0,f=s.length;f>c;c++){var d=s[c],h=i(e.sourceDB,r,[d.key,d.value,!1]);d.value=h.error?null:h.output,d.key=d.key[0][0]}return{rows:a(s,n.limit,n.skip)}}function w(e,t){return q.sequentialize(g(e),function(){return E(e,t)})()}function E(e,t){function n(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return o=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(n>t||t>n))return e.doc.value}var r=D.parseIndexableString(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}})})}function r(n){var r;if(r=i?b(e,n,t):{total_rows:o,offset:s,rows:n},t.include_docs){var a=q.uniq(n.map(u));return e.sourceDB.allDocs({keys:a,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments}).then(function(e){var t={};return e.rows.forEach(function(e){e.doc&&(t["$"+e.id]=e.doc)}),n.forEach(function(e){var n=u(e),r=t["$"+n];r&&(e.doc=r)}),r})}return r}var o,i=e.reduceFun&&t.reduce!==!1,s=t.skip||0;"undefined"==typeof t.keys||t.keys.length||(t.limit=0,delete t.keys);var a=function(e){return e.reduce(function(e,t){return e.concat(t)})};if("undefined"!=typeof t.keys){var c=t.keys,l=c.map(function(e){var t={startkey:R([e]),endkey:R([e,{}])};return n(t)});return N.all(l).then(a).then(r)}var f={descending:t.descending};if("undefined"!=typeof t.startkey&&(f.startkey=R(t.descending?[t.startkey,{}]:[t.startkey])),"undefined"!=typeof t.endkey){var d=t.inclusive_end!==!1;t.descending&&(d=!d),f.endkey=R(d?[t.endkey,{}]:[t.endkey])}if("undefined"!=typeof t.key){var h=R([t.key]),p=R([t.key,{}]);f.descending?(f.endkey=h,f.startkey=p):(f.startkey=h,f.endkey=p)}return i||("number"==typeof t.limit&&(f.limit=t.limit),f.skip=s),n(f).then(r)}function k(e){return e.request({method:"POST",url:"_view_cleanup"})}function S(e){return e.get("_local/mrviews").then(function(t){var n={};Object.keys(t.views).forEach(function(e){var t=r(e),o="_design/"+t[0],i=t[1];n[o]=n[o]||{},n[o][i]=!0});var o={keys:Object.keys(n),include_docs:!0};return e.allDocs(o).then(function(r){var o={};r.rows.forEach(function(e){var r=e.key.substring(8);Object.keys(n[e.key]).forEach(function(n){var i=r+"/"+n;t.views[i]||(i=n);var s=Object.keys(t.views[i]),a=e.doc&&e.doc.views&&e.doc.views[n];s.forEach(function(e){o[e]=o[e]||a})})});var i=Object.keys(o).filter(function(e){return!o[e]}),s=i.map(function(t){return q.sequentialize(g(t),function(){return e.constructor.destroy(t,e.__opts)})()});return N.all(s).then(function(){return{ok:!0}})})},p({ok:!0}))}function x(e,n,o){if("http"===e.type())return h(e,n,o);if("string"!=typeof n){d(o,n);var i={db:e,viewName:"temp_view/temp_view",map:n.map,reduce:n.reduce,temporary:!0};return P.add(function(){return L(i).then(function(e){function t(){return e.db.destroy()}return q.fin(_(e).then(function(){return w(e,o)}),t)})}),P.finish()}var s=n,a=r(s),u=a[0],c=a[1];return e.get("_design/"+u).then(function(n){var r=n.views&&n.views[c];if(!r||"string"!=typeof r.map)throw new O("ddoc "+u+" has no view named "+c);d(o,r);var i={db:e,viewName:s,map:r.map,reduce:r.reduce};return L(i).then(function(e){return"ok"===o.stale||"update_after"===o.stale?("update_after"===o.stale&&t.nextTick(function(){_(e)}),w(e,o)):_(e).then(function(){return w(e,o)})})})}function T(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,T)}catch(t){}}function O(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,O)}catch(t){}}var A,D=e(62),j=e(69),I=D.collate,R=D.toIndexableString,C=D.normalizeKey,L=e(66),M=e(67);A="undefined"!=typeof console&&"function"==typeof console.log?Function.prototype.bind.call(console.log,console):function(){};var q=e(71),N=q.Promise,U={},P=new j,F=50,B={_sum:function(e,t){return l(t)},_count:function(e,t){return t.length},_stats:function(e,t){function n(e){for(var t=0,n=0,r=e.length;r>n;n++){var o=e[n];t+=o*o}return t}return{sum:l(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:n(t)}}};n.viewCleanup=q.callbackify(function(){var e=this;return"http"===e.type()?k(e):S(e)}),n.query=function(e,t,n){"function"==typeof t&&(n=t,t={}),t=q.extend(!0,{},t),"function"==typeof e&&(e={map:e});var r=this,o=N.resolve().then(function(){return x(r,e,t)});return q.promisedCallback(o,n),o},q.inherits(T,Error),q.inherits(O,Error)}).call(this,e(39))},{}],69:[function(e,t){"use strict";function n(){this.promise=new r(function(e){e()})}var r=e(71).Promise;n.prototype.add=function(e){return this.promise=this.promise["catch"](function(){}).then(function(){return e()}),this.promise},n.prototype.finish=function(){return this.promise},t.exports=n},{}],70:[function(e,t){"use strict";var n=e(72).upsert;t.exports=function(e,t,r){return n.apply(e,[t,r])}},{}],71:[function(e,t,n){(function(t,r){"use strict";n.Promise="function"==typeof r.Promise?r.Promise:e(47),n.inherits=e(43),n.extend=e(65);var o=e(36);n.promisedCallback=function(e,n){return n&&e.then(function(e){t.nextTick(function(){n(null,e)})},function(e){t.nextTick(function(){n(e)})}),e},n.callbackify=function(e){return o(function(t){var r=t.pop(),o=e.apply(this,t);return"function"==typeof r&&n.promisedCallback(o,r),o})},n.fin=function(e,t){return e.then(function(e){var n=t();return"function"==typeof n.then?n.then(function(){return e}):e},function(e){var n=t();if("function"==typeof n.then)return n.then(function(){throw e});throw e})},n.sequentialize=function(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}},n.flatten=function(e){for(var t=[],n=0,r=e.length;r>n;n++)t=t.concat(e[n]);return t},n.uniq=function(e){for(var t={},n=0,r=e.length;r>n;n++)t["$"+e[n]]=!0;var o=Object.keys(t),i=new Array(o.length);for(n=0,r=o.length;r>n;n++)i[n]=o[n].substring(1);return i};var i=e(37),s=e(73);n.MD5=function(e){return t.browser?s.hash(e):i.createHash("md5").update(e).digest("hex")}}).call(this,e(39),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],72:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return new i(function(r,i){return"string"!=typeof t?i(new Error("doc id is required")):void e.get(t,function(s,a){if(s){if(404!==s.status)return i(s);a={}}var u=n(a);return u?(u._id=t,u._rev=a._rev,void r(o(e,u,n))):r({updated:!1,rev:a._rev})})})}function o(e,t,n){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(o){if(409!==o.status)throw o;return r(e,t._id,n)})}var i;i="undefined"!=typeof window&&window.PouchDB?window.PouchDB.utils.Promise:"function"==typeof t.Promise?t.Promise:e(47),n.upsert=function(e,t,n){var o=this,i=r(o,e,t);return"function"!=typeof n?i:void i.then(function(e){n(null,e)},n)},n.putIfNotExists=function(e,t,n){var o=this;"string"!=typeof e&&(n=t,t=e,e=t._id);var i=function(e){return e._rev?!1:t},s=r(o,e,i);return"function"!=typeof n?s:void s.then(function(e){n(null,e)},n)},"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(n)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],73:[function(e,t,n){!function(e){if("object"==typeof n)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var r;try{r=window}catch(o){r=self}r.SparkMD5=e()}}(function(){"use strict";var e=function(e,t){return e+t&4294967295},t=function(t,n,r,o,i,s){return n=e(e(n,t),e(o,s)),e(n<<i|n>>>32-i,r)},n=function(e,n,r,o,i,s,a){return t(n&r|~n&o,e,n,i,s,a)},r=function(e,n,r,o,i,s,a){return t(n&o|r&~o,e,n,i,s,a)},o=function(e,n,r,o,i,s,a){return t(n^r^o,e,n,i,s,a)},i=function(e,n,r,o,i,s,a){return t(r^(n|~o),e,n,i,s,a)},s=function(t,s){var a=t[0],u=t[1],c=t[2],l=t[3];a=n(a,u,c,l,s[0],7,-680876936),l=n(l,a,u,c,s[1],12,-389564586),c=n(c,l,a,u,s[2],17,606105819),u=n(u,c,l,a,s[3],22,-1044525330),a=n(a,u,c,l,s[4],7,-176418897),l=n(l,a,u,c,s[5],12,1200080426),c=n(c,l,a,u,s[6],17,-1473231341),u=n(u,c,l,a,s[7],22,-45705983),a=n(a,u,c,l,s[8],7,1770035416),l=n(l,a,u,c,s[9],12,-1958414417),c=n(c,l,a,u,s[10],17,-42063),u=n(u,c,l,a,s[11],22,-1990404162),a=n(a,u,c,l,s[12],7,1804603682),l=n(l,a,u,c,s[13],12,-40341101),c=n(c,l,a,u,s[14],17,-1502002290),u=n(u,c,l,a,s[15],22,1236535329),a=r(a,u,c,l,s[1],5,-165796510),l=r(l,a,u,c,s[6],9,-1069501632),c=r(c,l,a,u,s[11],14,643717713),u=r(u,c,l,a,s[0],20,-373897302),a=r(a,u,c,l,s[5],5,-701558691),l=r(l,a,u,c,s[10],9,38016083),c=r(c,l,a,u,s[15],14,-660478335),u=r(u,c,l,a,s[4],20,-405537848),a=r(a,u,c,l,s[9],5,568446438),l=r(l,a,u,c,s[14],9,-1019803690),c=r(c,l,a,u,s[3],14,-187363961),u=r(u,c,l,a,s[8],20,1163531501),a=r(a,u,c,l,s[13],5,-1444681467),l=r(l,a,u,c,s[2],9,-51403784),c=r(c,l,a,u,s[7],14,1735328473),u=r(u,c,l,a,s[12],20,-1926607734),a=o(a,u,c,l,s[5],4,-378558),l=o(l,a,u,c,s[8],11,-2022574463),c=o(c,l,a,u,s[11],16,1839030562),u=o(u,c,l,a,s[14],23,-35309556),a=o(a,u,c,l,s[1],4,-1530992060),l=o(l,a,u,c,s[4],11,1272893353),c=o(c,l,a,u,s[7],16,-155497632),u=o(u,c,l,a,s[10],23,-1094730640),a=o(a,u,c,l,s[13],4,681279174),l=o(l,a,u,c,s[0],11,-358537222),c=o(c,l,a,u,s[3],16,-722521979),u=o(u,c,l,a,s[6],23,76029189),a=o(a,u,c,l,s[9],4,-640364487),l=o(l,a,u,c,s[12],11,-421815835),c=o(c,l,a,u,s[15],16,530742520),u=o(u,c,l,a,s[2],23,-995338651),a=i(a,u,c,l,s[0],6,-198630844),l=i(l,a,u,c,s[7],10,1126891415),c=i(c,l,a,u,s[14],15,-1416354905),u=i(u,c,l,a,s[5],21,-57434055),a=i(a,u,c,l,s[12],6,1700485571),l=i(l,a,u,c,s[3],10,-1894986606),c=i(c,l,a,u,s[10],15,-1051523),u=i(u,c,l,a,s[1],21,-2054922799),a=i(a,u,c,l,s[8],6,1873313359),l=i(l,a,u,c,s[15],10,-30611744),c=i(c,l,a,u,s[6],15,-1560198380),u=i(u,c,l,a,s[13],21,1309151649),a=i(a,u,c,l,s[4],6,-145523070),l=i(l,a,u,c,s[11],10,-1120210379),c=i(c,l,a,u,s[2],15,718787259),u=i(u,c,l,a,s[9],21,-343485551),t[0]=e(a,t[0]),t[1]=e(u,t[1]),t[2]=e(c,t[2]),t[3]=e(l,t[3])},a=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},u=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},c=function(e){var t,n,r,o,i,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)s(l,a(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(s(l,r),t=0;16>t;t+=1)r[t]=0;return o=8*c,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),u=parseInt(o[1],16)||0,r[14]=i,r[15]=u,s(l,r),l},l=function(e){var t,n,r,o,i,a,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)s(l,u(e.subarray(t-64,t)));for(e=c>t-64?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(s(l,r),t=0;16>t;t+=1)r[t]=0;return o=8*c,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),a=parseInt(o[1],16)||0,r[14]=i,r[15]=a,s(l,r),l},f=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],d=function(e){var t,n="";for(t=0;4>t;t+=1)n+=f[e>>8*t+4&15]+f[e>>8*t&15];return n},h=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=d(e[t]);return e.join("")},p=function(e){return h(c(e))},v=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==p("hello")&&(e=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),v.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},v.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;n>=t;t+=64)s(this._state,a(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},v.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),n=e?this._state:h(this._state),this.reset(),n},v.prototype._finish=function(e,t){var n,r,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(s(this._state,e),i=0;16>i;i+=1)e[i]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=r,e[15]=o,s(this._state,e)},v.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},v.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},v.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=c(e);return t?n:h(n)},v.hashBinary=function(e,t){var n=c(e);return t?n:h(n)},v.ArrayBuffer=function(){this.reset()},v.ArrayBuffer.prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),r=n.length;for(this._length+=e.byteLength,t=64;r>=t;t+=64)s(this._state,u(n.subarray(t-64,t)));return this._buff=r>t-64?n.subarray(t-64):new Uint8Array(0),this},v.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=r[t]<<(t%4<<3);return this._finish(i,o),n=e?this._state:h(this._state),this.reset(),n},v.ArrayBuffer.prototype._finish=v.prototype._finish,v.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},v.ArrayBuffer.prototype.destroy=v.prototype.destroy,v.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},v.ArrayBuffer.hash=function(e,t){var n=l(new Uint8Array(e));return t?n:h(n)},v})},{}],74:[function(e,t,n){"use strict";function r(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(e);else if(i===t.length-2){var s=t.pop();o[s]=e}else t.push(e)}n.stringify=function(e){var t=[];t.push({obj:e});for(var n,r,o,i,s,a,u,c,l,f,d,h="";n=t.pop();)if(r=n.obj,o=n.prefix||"",i=n.val||"",h+=o,i)h+=i;else if("object"!=typeof r)h+="undefined"==typeof r?null:JSON.stringify(r);else if(null===r)h+="null";else if(Array.isArray(r)){for(t.push({val:"]"}),s=r.length-1;s>=0;s--)a=0===s?"":",",t.push({obj:r[s],prefix:a});t.push({val:"["})}else{u=[];for(c in r)r.hasOwnProperty(c)&&u.push(c);for(t.push({val:"}"}),s=u.length-1;s>=0;s--)l=u[s],f=r[l],d=s>0?",":"",d+=JSON.stringify(l)+":",t.push({obj:f,prefix:d});t.push({val:"{"})}return h},n.parse=function(e){for(var t,n,o,i,s,a,u,c,l,f=[],d=[],h=0;;)if(t=e[h++],"}"!==t&&"]"!==t&&"undefined"!=typeof t)switch(t){case" ":case"	":case"\n":case":":case",":break;case"n":h+=3,r(null,f,d);break;case"t":h+=3,r(!0,f,d);break;case"f":h+=4,r(!1,f,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",h--;;){if(o=e[h++],!/[\d\.\-e\+]/.test(o)){h--;break}n+=o}r(parseFloat(n),f,d);break;case'"':for(i="",s=void 0,a=0;;){if(u=e[h++],'"'===u&&("\\"!==s||a%2!==1))break;i+=u,s=u,"\\"===s?a++:a=0}r(JSON.parse('"'+i+'"'),f,d);break;case"[":c={element:[],index:f.length},f.push(c.element),d.push(c);break;case"{":l={element:{},index:f.length},f.push(l.element),d.push(l);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===f.length)return f.pop();r(f.pop(),f,d)}}},{}],75:[function(e,t){(function(n){"use strict";var r=e(31);t.exports=r,r.ajax=e(16),r.utils=e(34),r.Errors=e(19),r.replicate=e(30).replicate,r.sync=e(32),r.version=e(35);var o=e(2);if(r.adapter("http",o),r.adapter("https",o),r.adapter("idb",e(7)),r.adapter("websql",e(12)),r.plugin(e(68)),!n.browser){var i=e(37);r.adapter("ldb",i),r.adapter("leveldb",i)}}).call(this,e(39))},{}]},{},[75])(75)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/index.js":[function(e,t){"use strict";t.exports=e("./lib/core.js"),e("./lib/done.js"),e("./lib/es6-extensions.js"),e("./lib/node-extensions.js")},{"./lib/core.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/core.js","./lib/done.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/done.js","./lib/es6-extensions.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/es6-extensions.js","./lib/node-extensions.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/node-extensions.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/core.js":[function(e,t){"use strict";function n(e){function t(e){return null===u?void l.push(e):void i(function(){var t=u?e.onFulfilled:e.onRejected;if(null===t)return void(u?e.resolve:e.reject)(c);var n;try{n=t(c)}catch(r){return void e.reject(r)}e.resolve(n)})}function n(e){try{if(e===f)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void o(t.bind(e),n,s)}u=!0,c=e,a()}catch(r){s(r)}}function s(e){u=!1,c=e,a()}function a(){for(var e=0,n=l.length;n>e;e++)t(l[e]);l=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var u=null,c=null,l=[],f=this;this.then=function(e,n){return new f.constructor(function(o,i){t(new r(e,n,o,i))})},o(e,n,s)}function r(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function o(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(o){if(r)return;r=!0,n(o)}}var i=e("asap");t.exports=n},{asap:"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/node_modules/asap/asap.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/done.js":[function(e,t){"use strict";var n=e("./core.js"),r=e("asap");t.exports=n,n.prototype.done=function(){var e=arguments.length?this.then.apply(this,arguments):this;e.then(null,function(e){r(function(){throw e})})}},{"./core.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/core.js",asap:"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/node_modules/asap/asap.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/es6-extensions.js":[function(e,t){"use strict";function n(e){this.then=function(t){return"function"!=typeof t?this:new r(function(n,r){o(function(){try{n(t(e))}catch(o){r(o)}})})}}var r=e("./core.js"),o=e("asap");t.exports=r,n.prototype=r.prototype;var i=new n(!0),s=new n(!1),a=new n(null),u=new n(void 0),c=new n(0),l=new n("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return a;if(void 0===e)return u;if(e===!0)return i;if(e===!1)return s;if(0===e)return c;if(""===e)return l;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new r(t.bind(e))}catch(o){return new r(function(e,t){t(o)})}return new n(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function r(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){r(i,e)},n)}t[i]=s,0===--o&&e(t)}catch(u){n(u)}}if(0===t.length)return e([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})},r.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/core.js",asap:"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/node_modules/asap/asap.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/node-extensions.js":[function(e,t){"use strict";var n=e("./core.js"),r=e("asap");t.exports=n,n.denodeify=function(e,t){return t=t||1/0,function(){var r=this,o=Array.prototype.slice.call(arguments);return new n(function(n,i){for(;o.length&&o.length>t;)o.pop();o.push(function(e,t){e?i(e):n(t)});var s=e.apply(r,o);!s||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then||n(s)})}},n.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),o="function"==typeof t[t.length-1]?t.pop():null,i=this;try{return e.apply(this,arguments).nodeify(o,i)}catch(s){if(null===o||"undefined"==typeof o)return new n(function(e,t){t(s)});r(function(){o.call(i,s)})}}},n.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(n){r(function(){e.call(t,null,n)})},function(n){r(function(){e.call(t,n)})})}},{"./core.js":"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/lib/core.js",asap:"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/node_modules/asap/asap.js"}],"/Users/lupo/work/lupomontero/bonnet/node_modules/promise/node_modules/asap/asap.js":[function(e,t){(function(e){function n(){for(;o.next;){o=o.next;var e=o.task;o.task=void 0;var t=o.domain;t&&(o.domain=void 0,t.enter());try{e()}catch(r){if(u)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),r;setTimeout(function(){throw r},0)}t&&t.exit()}s=!1}function r(t){i=i.next={task:t,domain:u&&e.domain,next:null},s||(s=!0,a())}var o={task:void 0,next:null},i=o,s=!1,a=void 0,u=!1;if("undefined"!=typeof e&&e.nextTick)u=!0,a=function(){e.nextTick(n)};else if("function"==typeof setImmediate)a="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=n,a=function(){c.port2.postMessage(0)}}else a=function(){setTimeout(n,0)};t.exports=r}).call(this,e("_process"))},{_process:"/Users/lupo/work/lupomontero/bonnet/node_modules/browserify/node_modules/process/browser.js"}]},{},["./client/index.js"]);